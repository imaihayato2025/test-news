
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="cac27d87-dc21-5509-a05e-98c25e4628ce")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{6700141:e=>{"use strict";e.s({useAllAccountTypeBadgesFlag:()=>p,useEmailNotificationRulesFlag:()=>P,useEnableAnsiLogs:()=>S,useEnableNewInstantRollbackFlow:()=>m,useEnhancedBuilds:()=>j,useFeedbackVariantsDeployStep:()=>T,useInstantRollbackHobbyRestrictionFlag:()=>y,useIsOemPartner:()=>h,useJWTAccessTokenFlag:()=>A,useLaunchDarklyFeatureFlag:()=>g,useLaunchDarklyFlags:()=>d,useLoginWithVercelTeamFlag:()=>R,useLoginWithVercelUserFlag:()=>I,useManualGitDeployFlag:()=>b,useMonitoringExitSurveyFlag:()=>f,useNetCpuFunctionsFlag:()=>F,useNewFeedbackSharingModal:()=>E,useOpenTelemetryApiScopeFlag:()=>v,useRestrictLogDrainsForHobbyFlag:()=>k,useShowCronJobsSummary:()=>x,useStorageEnterpriseFlag:()=>C,useTrustedIpsCustomLimitFlag:()=>w,useVercelAppsFlag:()=>L});var t=e.i(6530772);e.i(6611132);var r=e.i(6558958),n=e.i(1782286),a=e.i(9902218),i=e.i(5454140),o=e.i(3514588),s=e.i(3326412);let l="vercel:ldFlags",c=(0,r.default)(()=>{let e=a.localStorageWrapper.getItem(l);if(e)return JSON.parse(e)}),u=(0,n.default)(e=>{a.localStorageWrapper.setItem(l,JSON.stringify(e))},1e3),d=()=>{let{flags:e,isLoading:r,mutate:n,isLoggedOut:o}=(0,i.useUser)(),s=(0,t.useMemo)(()=>e??c(),[e]);return(0,t.useEffect)(()=>{e&&(u(e),c.cache.set(void 0,e))},[e]),(0,t.useEffect)(()=>{o&&(a.localStorageWrapper.removeItem(l),c.cache.clear?.(),u.cancel())},[o]),{flags:s,isReady:!r&&void 0!==s,mutate:n}},g=e=>{let{flags:t,isReady:r,mutate:n}=d();return{isReady:r,value:t?.[e]??null,mutate:()=>n().then(t=>({isReady:r,value:t?.flags?.[e]??null}))}},m=()=>g("new-instant-rollback-flow"),p=()=>g("show-all-account-type-badges"),h=()=>g("is-oem-partner"),v=()=>g("open-telemetry-api-scope"),f=()=>g("monitoring-exit-survey"),y=()=>g("instant-rollback-hobby-restriction"),C=e=>{let t=(0,s.useLaunchDarklyTeamFeatureFlag)("storage-enterprise",e),r=t.value?.split(",").map(e=>e.trim()).filter(Boolean)||[];return{isReady:t.isReady,isStorageEnterpriseEnabled:e=>{let{storeType:n,isUnbundled:a,isTrialing:i}=e;return"edge-config"===n||"integration"===n||!!a||!!i||t.isReady&&r.includes(n)}}},E=()=>(0,s.useLaunchDarklyTeamFeatureFlag)("feedback-sharing-modal"),T=()=>{let{isReady:e,value:t}=(0,s.useLaunchDarklyTeamFeatureFlag)("feedback-variants-deploy-step"),{isReady:r,value:n}=g("feedback-variants-deploy-step");return(e&&t||r&&n)??!1},x=()=>{let{isReady:e,value:t}=(0,s.useLaunchDarklyTeamFeatureFlag)("cron-jobs-deploy-summary"),{isReady:r,value:n}=g("cron-jobs-deploy-summary");return(e&&t||r&&n)??!1},j=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("route-to-pdx1-jelly"),t=!!e.isReady,r=!!e.value;return{readyValue:t&&r,isReady:t,value:r}},b=()=>{let e=(0,o.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("manual-git-deploys"),r=g("manual-git-deploys");return{isReady:e.isTeam?t.isReady:r.isReady,value:!!(e.isTeam?t.value:r.value)}},S=()=>{let e=(0,o.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("ansi-logs"),r=g("ansi-logs");return{isReady:e.isTeam?t.isReady:r.isReady,value:!!(e.isTeam?t.value:r.value)}},k=()=>{let e=(0,o.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("restrict-log-drains-for-hobby"),r=g("restrict-log-drains-for-hobby");return{isReady:e.isTeam?t.isReady:r.isReady,value:!!(e.isTeam?t.value:r.value)}},R=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("login-with-vercel");return{isReady:e.isReady,value:!!e.value}},I=()=>{let e=g("login-with-vercel");return{isReady:e.isReady,value:!!e.value}},P=()=>{let{isReady:e,value:t}=g("email-notification-rules");return{isReady:e,value:!!t}},w=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("trusted-i-ps-custom-limit");return{isReady:e.isReady,value:e.value}},A=()=>{let e=g("jwt-access-tokens");return{isReady:e.isReady,value:!!e.value}},L=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("vercel-apps");return{isReady:e.isReady,value:!!e.value}},F=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("net-cpu-functions");return{isReady:e.isReady,value:!!e.value}}},5941325:[e=>{"use strict";e.s({},5941325),e.i(8250207),e.i(2405013);var t=e.i(1227837);e.i(3331605),e.s({CreateResourceButton:()=>c},7407768);var r=e.i(6645307),n=e.i(5674541),a=e.i(555528);e.i(9389778);var i=e.i(1310591);e.i(7196151);var o=e.i(5330315),s=e.i(1915818),l=e.i(4325351);function c(e){let{onSuccess:c,protocolType:d,label:g}=e,{projectSlug:m}=(0,i.useProjectAndTeamSlug)(),{data:p}=(0,o.useResourceList)({projectSlug:m,protocolType:d}),{openBrowseProducts:h}=(0,t.useResourceModals)({onSuccess:c}),{permissions:v,isLoading:f}=(0,s.useResourcePermissions)();return f?(0,r.jsx)(u,{}):p&&p.stores.length>0?(0,r.jsx)(a.Tooltip,{disableTriggers:v.create,text:(0,l.missingPermissionLabel)("create",d),children:(0,r.jsx)(n.Button,{disabled:!v.create,onClick:()=>h("browse-new"),type:"default",typeName:"button",children:g??(0,l.createResourceButtonLabel)(d)})}):(0,r.jsx)(u,{})}function u(){return(0,r.jsx)("div",{style:{height:40}})}},[7407768]],1477245:e=>{"use strict";e.s({},1477245),e.i(7888720),e.i(7030156),e.i(3827171),e.i(263946),e.i(9199642)},8317189:e=>{"use strict";e.s({useStorePermissions:()=>a},8317189);var t=e.i(7320579),r=e.i(3585235);e.i(9562801);var n=e.i(4607035);function a(e){let{storeType:a,teamSlug:i}=e,{fallback:o}=(0,t.useSWRConfig)(),{can:s,isLoading:l}=(0,r.default)(),c=i?o[a?`store:preload-data:${i}`:`store:list-preload-data:${i}`]:null;return{permissions:c?.permissions??(0,n.getStoreItemPermissions)({storeType:a,can:s,isLoading:l})}}},534589:e=>{"use strict";e.s({CONTACT_SALES_DASHBOARD_HREF:()=>t});let t="/contact/sales?p=1"},1985209:e=>{"use strict";e.s({ArrowCircleRight:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.25 7.25H4.5V8.75H5.25H9.43934L7.96967 10.2197L7.43934 10.75L8.5 11.8107L9.03033 11.2803L11.7803 8.53033C12.0732 8.23744 12.0732 7.76256 11.7803 7.46967L9.03033 4.71967L8.5 4.18934L7.43934 5.25L7.96967 5.78033L9.43934 7.25H5.25ZM8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8C14.5 11.5899 11.5899 14.5 8 14.5ZM0 8C0 12.4183 3.58172 16 8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8Z" fill="currentColor"/>')},4753983:e=>{"use strict";function t(e){if("number"==typeof e.resourceConfig?.edgeConfigSize)return 1e3*e.resourceConfig.edgeConfigSize;switch(e.billing?.plan){case"enterprise":return 512e3;case"pro":return 64e3;default:return 8e3}}function r(e){if("number"==typeof e.resourceConfig?.edgeConfigs)return e.resourceConfig.edgeConfigs;switch(e.billing?.plan){case"enterprise":return 10;case"pro":return"trialing"===e.billing.status?1:3;default:return 1}}e.s({EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH:()=>n,getMaxEdgeConfigs:()=>r,getSizeLimitInBytes:()=>t});let n=52},9526663:e=>{"use strict";e.s({mapEdgeConfigToStoreType:()=>v,useEdgeConfig:()=>d,useEdgeConfigBackup:()=>h,useEdgeConfigBackupsInfinite:()=>p,useEdgeConfigItems:()=>g,useEdgeConfigSchema:()=>c,useEdgeConfigTokens:()=>m,useEdgeConfigs:()=>u});var t=e.i(3521787),r=e.i(6530772),n=e.i(7095283),a=e.i(6649026),i=e.i(1183506),o=e.i(9336536),s=e.i(3514588);e.i(7196151);var l=e.i(5330315);function c(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/schema${(0,a.encode)({teamId:l?.id})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function u(){let e=(0,l.useResourceList)({protocolType:"storage"});return{data:(0,r.useMemo)(()=>e.data?.stores.filter(e=>"edge-config"===e.type),[e.data?.stores])}}function d(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}${(0,a.encode)({teamId:l?.id})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function g(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/items${(0,a.encode)({teamId:l?.id})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function m(e,r){let{isReady:n,team:l}=(0,s.useTeam)();return(0,t.default)(()=>e&&n?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/tokens${(0,a.encode)({teamId:l?.id})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),r)}function p(e,t,r){let{isReady:l,team:c}=(0,s.useTeam)();return(0,n.default)((t,n)=>{if(!e||!l||n&&!n.pagination.hasNext)return null;let i={teamId:c?.id,metadata:r?.metadata?"true":void 0,limit:r?.limit||25,next:n?.pagination.next};0===t&&(i.limit+=1);let s=`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups`;return`${s}${(0,a.encode)(i)}`},e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateFirstPage:!1,revalidateOnFocus:!1,...t})}function h(e,r,n){let{isReady:l,team:c}=(0,s.useTeam)();return(0,t.default)(()=>e&&r&&"current"!==r&&l?`${o.API_EDGE_CONFIG}/${encodeURIComponent(e)}/backups/${encodeURIComponent(r)}${(0,a.encode)({teamId:c?.id})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),n)}function v(e){let{edgeConfig:t,project:r}=e;return{...t,type:"edge-config",projectsMetadata:r?[{projectId:r.id,name:r.name,framework:r.framework,id:"",environments:[],environmentVariables:[],envVarPrefix:null}]:[],name:t.slug,status:"available",totalConnectedProjects:+!!r}}},6191060:e=>{"use strict";e.s({},6191060),e.i(6580759)},3480678:e=>{e.v({expanderWrapper:"store-advanced-options-expander-module__QIqk3G__expanderWrapper",expanderWrapperExpanded:"store-advanced-options-expander-module__QIqk3G__expanderWrapperExpanded"})},5594870:e=>{"use strict";e.s({StoreAdvancedOptionsExpander:()=>s});var t=e.i(6645307),r=e.i(889716),n=e.i(8084653),a=e.i(5610210);e.i(6358385);var i=e.i(7779393),o=e.i(3480678);function s(e){let{children:s,isExpandedDefault:l}=e;return(0,t.jsx)(i.Expander,{className:(0,a.clsx)(o.default.expanderWrapper),expandedClassName:o.default.expanderWrapperExpanded,isExpandedDefault:l,title:(0,t.jsxs)(r.Stack,{direction:"row",gap:1,paddingX:3,paddingY:2,children:[(0,t.jsx)(i.ExpanderTrigger,{}),(0,t.jsx)(n.Text,{color:"gray-900",size:13,weight:500,children:"Advanced Options"})]}),children:(0,t.jsx)(r.Stack,{paddingX:3,paddingY:2,children:s})})}},654868:e=>{"use strict";e.s({default:()=>r});var t=e.i(6645307);let r=function(e){let{margin:r=50,className:n}=e;return(0,t.jsx)("hr",{className:n,style:{border:"0",borderTop:"1px solid var(--accents-2)",margin:"number"==typeof r?`${r}px 0`:`${r} 0`}})}},1567376:e=>{"use strict";e.s({addEncryptedEnvs:()=>o,addEnvs:()=>s,isSystemEnv:()=>i,legacyRemoveEnv:()=>l});var t=e.i(6649026),r=e.i(1183506),n=e.i(9336536),a=e.i(3509620);function i(e){return e.startsWith("VERCEL_")}function o(e){return e.map(e=>{let t,r=e.type;return void 0===r&&(r=i(e.name)?a.EnvType.System:a.EnvType.Encrypted),e.target&&(t=Array.isArray(e.target)?e.target:[e.target]),{type:r,key:e.name,value:r===a.EnvType.System?e.name:e.value,target:t??[a.EnvTarget.Production,a.EnvTarget.Preview,a.EnvTarget.Development],gitBranch:e.gitBranch,comment:e.comment,customEnvironmentIds:e.customEnvironmentIds}})}async function s(e,a,i){let s=o(a);return(0,r.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v10")}/${e}/env${(0,t.encode)({teamId:i})}`,{method:"POST",body:JSON.stringify(s),throwOnHTTPError:!0})}async function l(e,a,i){await (0,r.fetchAPI)(`${(0,n.API_PROJECTS_VERSION)("v4")}/${e}/env/${a.key}${(0,t.encode)({teamId:i,target:a.target})}`,{method:"DELETE",throwOnHTTPError:!0})}},8967157:e=>{"use strict";e.s({ConnectEdgeConfigModal:()=>b,CreateEdgeConfigConnectionModalStep:()=>j},8967157);var t=e.i(6645307),r=e.i(889716),n=e.i(8934201),a=e.i(584439),i=e.i(1917237),o=e.i(6530772),s=e.i(6649026),l=e.i(1183506),c=e.i(9336536),u=e.i(3509620),d=e.i(503726),g=e.i(6494827),m=e.i(1164214),p=e.i(4753983),h=e.i(1567376);e.i(1477245);var v=e.i(7030156);e.i(6191060);var f=e.i(6580759),y=e.i(631755),C=e.i(654868),E=e.i(7888720),T=e.i(5594870);function x(e){let{advancedOptions:n,tokenLabelPlaceholder:a,onAdvancedOptionsChange:i,isLoading:o}=e;return(0,t.jsxs)(r.Stack,{gap:6,children:[(0,t.jsx)(E.ResourceEnvironmentSelector,{environments:n.environments,error:n.error?.environments,onChange:e=>i({...n,environments:e,error:{...n.error,environments:void 0}}),resourceTitle:"store"}),(0,t.jsx)(T.StoreAdvancedOptionsExpander,{isExpandedDefault:!!n.error,children:(0,t.jsxs)(r.Stack,{gap:3,children:[(0,t.jsx)(r.Stack,{gap:3,children:(0,t.jsx)(y.Input,{"aria-label":"Environment Variable",disabled:o,error:n.error?.envVarName,label:"Environment Variable",onChange:e=>i({...n,envVarName:e.currentTarget.value,error:{...n.error,envVarName:void 0}}),placeholder:"EDGE_CONFIG",value:n.envVarName,width:"100%"})}),(0,t.jsx)(C.default,{margin:0}),(0,t.jsx)(r.Stack,{gap:3,children:(0,t.jsx)(y.Input,{"aria-label":"Token label",disabled:o,label:"Token label",maxLength:p.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH,onChange:e=>i({...n,tokenName:e.currentTarget.value}),placeholder:a,value:n.tokenName,width:"100%"})})]})})]})}function j(e){let{backOrCancelLabel:v,edgeConfig:y,title:C,subtitle:E,ProjectSelector:T,onClickOutside:j,onConnectionCreated:b,onBack:S,project:k}=e,{mutateByProtocol:R}=(0,f.useMutateResourceCache)(),[I,P]=(0,o.useState)({envVarName:"",tokenName:"",environments:{[u.EnvTarget.Development]:!0,[u.EnvTarget.Preview]:!0,[u.EnvTarget.Production]:!0,...k?.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}}),[w,A]=(0,o.useState)(!1),[L,F]=(0,o.useState)(null),{team:O}=(0,d.useAccount)(),N=(0,g.usePrevious)(k);(0,o.useEffect)(()=>{null!==I.error&&(!k||N&&k.id!==N.id)&&P({...I,error:null}),k&&(null===N||N&&k.id!==N.id)&&P({...I,environments:{[u.EnvTarget.Development]:!0,[u.EnvTarget.Preview]:!0,[u.EnvTarget.Production]:!0,...k.customEnvironments?.reduce((e,t)=>(e[t.slug]=!0,e),{})??{}}})},[I,N,k]);let _=(0,o.useMemo)(()=>{if(!k)return"";let e=k.name.slice(0,p.EDGE_CONFIG_TOKEN_LABEL_MAX_LENGTH-6);return`${e.replace(/-*$/g,"")}-token`},[k]),D=I.tokenName||_,$=I.envVarName||"EDGE_CONFIG",M=(0,o.useCallback)(async e=>{if(e.preventDefault(),!y||w||!k)return;let t=[u.EnvTarget.Production,u.EnvTarget.Preview,u.EnvTarget.Development,...k.customEnvironments?.map(e=>e.slug)||[]].filter(e=>I.environments[e]);try{if(F(null),A(!0),P({...I,error:null}),0===t.length){P({...I,error:{environments:"Select at least one Environment for your Environment Variable"}}),A(!1);return}if(k.env&&k.env.some(e=>e.key===$&&("string"==typeof e.target?t.includes(e.target):e.target.some(e=>t.includes(e))))){P({...I,error:{envVarName:1===t.length?`This project already has an environment variable called ${$} in the chosen environment.`:`This project already has an environment variable called ${$} in one of the chosen environments.`}}),A(!1);return}let e=await (0,l.fetchAPI)(`${c.API_EDGE_CONFIG}/${y.id}/token${(0,s.encode)({teamId:O?.id})}`,{method:"POST",throwOnHTTPError:!0,body:{label:D}});await (0,h.addEnvs)(k.id,[{name:$,value:`https://edge-config.vercel.com/${y.id}?token=${e.token}`,type:u.EnvType.Encrypted,target:t.filter(e=>(0,u.isSystemEnvTarget)(e)),customEnvironmentIds:t.filter(e=>!(0,u.isSystemEnvTarget)(e)).map(e=>{let t=k.customEnvironments?.find(t=>t.slug===e);return t?.id}).filter(e=>void 0!==e)}],O?.id),await b(),j(),a.toasts.success({text:`Connected Project ${k.name} to Edge Config ${y.slug}`,key:y.slug}),await R("storage")}catch(e){if(e instanceof Error)F(e);else throw e}finally{A(!1)}},[y,w,k,I,O?.id,D,$,b,j,R]);return(0,t.jsxs)("form",{onSubmit:e=>void M(e),children:[(0,t.jsx)(n.Modal.Body,{children:(0,t.jsxs)(r.Stack,{gap:6,children:[(0,t.jsxs)(r.Stack,{gap:2,children:[(0,t.jsx)(n.Modal.Title,{center:!0,children:C}),E?(0,t.jsx)(n.Modal.Subtitle,{children:E}):null]}),(0,t.jsx)(n.Modal.Inset,{last:!0,children:(0,t.jsxs)(r.Stack,{gap:6,children:[T,(0,t.jsx)(x,{advancedOptions:I,isLoading:w,onAdvancedOptionsChange:P,tokenLabelPlaceholder:k?_:""}),L?(0,t.jsx)(i.Error,{children:L.message}):null]})})]})}),(0,t.jsxs)(n.Modal.Actions,{children:[(0,t.jsx)(n.Modal.Action,{onClick:S,type:"secondary",children:v}),(0,t.jsx)(n.Modal.Action,{buttonType:"submit","data-testid":(0,m.tid)("connect-edge-config-modal","connect-button"),disabled:!k||""===$.trim()||""===D.trim(),loading:w,children:"Connect"})]})]})}function b(e){let{active:r,edgeConfig:a,onClickOutside:i,onConnectionCreated:s,onAnimationDone:l}=e,[c,u]=(0,o.useState)(null),{team:g,user:m}=(0,d.useAccount)(),p=g?g.slug:m?.username;return(0,t.jsx)(n.Modal.Modal,{active:r,allowOverflow:!0,onAnimationDone:l,onClickOutside:i,width:540,children:(0,t.jsx)(j,{ProjectSelector:(0,t.jsx)(v.ResourceProjectSelector,{account:p,allowSelectConnectedProjects:!0,includedInConnectedProjects:e=>e?.env?.some(e=>e.edgeConfigId===a?.id)??!1,onProjectSelected:e=>{u(e)},resourceTitle:"store",selectedProject:c}),backOrCancelLabel:"Cancel",edgeConfig:a,onBack:i,onClickOutside:i,onConnectionCreated:s,project:c,title:"Connect Project"})})}},8216798:e=>{"use strict";e.s({MAX_STORE_NAME_LENGTH:()=>a,getStoreNameLengthByType:()=>i,useStoreName:()=>o});var t=e.i(6530772);e.i(7196151);var r=e.i(5330315),n=e.i(8103655);let a=32;function i(e){return"edge-config"===e?64:a}let o=e=>{let{storeType:a,storeId:o,...s}=e,l=(0,t.useMemo)(()=>{if("projectName"in s&&s.projectName){let e=n.storeDefaultNameSuffix[a];return[s.projectName.replaceAll("_","-").slice(0,i(a)-e.length),e].join("")}return"storeName"in s?s.storeName??"":""},[s,a]),[c,u]=(0,t.useState)(),[d,g]=(0,t.useState)(),{isNameTaken:m}=(0,r.useResourceList)({protocolType:"storage"});return{storeNameError:c,name:d??l,setName:(0,t.useCallback)(e=>{let t=e.trim(),r=i(a),n="edge-config"===a?1:5;u(void 0),g(t),t.length<n?u(`The name must be at least ${n} characters.`):t.length>r?u(`The name must be at most ${r} characters.`):/^[a-zA-Z0-9_-\s]*$/.test(t)?m({name:t,storeType:a,storeId:o})&&u("This name is already in use by another store"):u("The name can only contain letters, numbers, and the following characters: _ - ")},[m,a,o]),touched:!!d&&d!==l}}},3541235:e=>{"use strict";e.s({BrowseStoresCards:()=>g},3541235);var t=e.i(6645307),r=e.i(889716),n=e.i(8158100),a=e.i(3585235),i=e.i(5785123),o=e.i(2362802);e.i(7196151);var s=e.i(5330315);e.i(6358385);var l=e.i(7146658),c=e.i(4862373),u=e.i(8103655),d=e.i(9344353);function g(e){let{onClickStore:g,storeTypeWithProduct:m,showCreateButton:p=!1}=e,{data:h}=(0,s.useResourceList)({protocolType:"storage"}),{can:v,isLoading:f}=(0,a.default)(),y={"edge-config":v(i.Action.Create,i.Resource.EdgeConfig),blob:v(i.Action.Create,i.Resource.Blob),integration:v(i.Action.Create,i.Resource.Integration)};return(0,t.jsxs)(r.Stack,{gap:4,children:[(0,t.jsxs)(r.Stack,{gap:2,children:[["edge-config","blob"].map(e=>(0,t.jsx)(l.CreateResourceCard,{Icon:(0,t.jsx)(d.StoreIcon,{size:"large",type:e,useColor:!0}),description:u.storeDescription[e],isDisabled:f||!y[e],isSelected:m?.type===e,name:u.storeTitle[e],onClick:()=>{g({type:e})},showCreateButton:p,tooltip:{text:`You need additional permission to create a ${u.storeTitleFull[e]}.`,isEnabled:!y[e]}},e)),(0,t.jsxs)(n.Note,{fill:!0,type:"secondary",children:["KV and Postgres are now available through the Marketplace."," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/storage",target:"_blank",children:"Learn more"})]})]}),(0,t.jsx)(c.BrowseProducts,{onClickProduct:g,protocolType:"storage",selectedProduct:m,showCreateButton:p})]})}},3621534:e=>{"use strict";e.s({ConnectStoreSwitch:()=>m,ConnectStoreSwitchWithoutProject:()=>p});var t=e.i(6645307),r=e.i(6530772),n=e.i(889716),a=e.i(8084653),i=e.i(2240289);e.i(1477245);var o=e.i(3827171);e.i(5941325);var s=e.i(3331605);e.i(9389778);var l=e.i(1310591);e.i(2815117);var c=e.i(1993163),u=e.i(8967157),d=e.i(9344353),g=e.i(6911881);function m(e){let{store:m}=e,{projectSlug:p}=(0,l.useProjectSlug)(),h=(0,i.useProject)(p),{onBack:v,onClose:f,state:y,onResourceUpdated:C}=(0,c.useResourceModalsContext)(),{type:E}=m,T=(0,r.useCallback)(()=>{C({resource:m,isConnected:!0})},[m,C]);if(y.type!==s.ResourceModalsActionTypes.CreateEnvs)return null;switch(E){case"edge-config":return(0,t.jsx)(u.CreateEdgeConfigConnectionModalStep,{backOrCancelLabel:y.backOrCancelLabel,edgeConfig:{id:m.id,slug:m.name},onBack:v,onClickOutside:f,onConnectionCreated:T,project:h.data,subtitle:(0,t.jsxs)(n.Stack,{align:"center",direction:"row",gap:1.5,justify:"center",children:[(0,t.jsx)(a.Text,{color:"gray-900",children:"Connect to"}),(0,t.jsx)(d.StoreIconOrAvatar,{icon:(0,g.getStoreIcon)(m),size:"small",type:m.type,useColor:!0}),(0,t.jsx)(a.Text,{color:"gray-1000",weight:500,children:m.name})]}),title:`Configure ${h.data?.name??""}`});case"blob":case"integration":return(0,t.jsx)(o.CreateResourceConnectionModalStep,{backOrCancelLabel:y.backOrCancelLabel,onBack:v,onClickOutside:f,onConnectionCreated:T,project:h.data,resourceId:m.id,store:m,subtitle:(0,t.jsxs)(n.Stack,{align:"center",direction:"row",gap:1.5,justify:"center",children:[(0,t.jsx)(a.Text,{color:"gray-900",children:"Connect to"}),(0,t.jsx)(d.StoreIconOrAvatar,{icon:(0,g.getStoreIcon)(m),size:"small",type:m.type,useColor:!0}),(0,t.jsx)(a.Text,{color:"gray-1000",weight:500,children:m.name})]}),title:`Configure ${h.data?.name??""}`});default:return null}}function p(e){let{active:r,store:n,key:a}=e,{onClose:i,onAnimationDone:s,onResourceUpdated:l}=(0,c.useResourceModalsContext)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.ConnectEdgeConfigModal,{active:"edge-config"===n.type&&r,edgeConfig:n,onAnimationDone:s,onClickOutside:i,onConnectionCreated:i},a),(0,t.jsx)(o.CreateResourceConnectionModal,{active:"edge-config"!==n.type&&r,onAnimationDone:s,onClickOutside:i,onConnectionCreated:()=>l({resource:n,isConnected:!0}),resourceId:n.id,store:n},a)]})}},2787778:e=>{"use strict";e.s({StoreListLayout:()=>b},2787778);var t=e.i(6645307),r=e.i(6530772),n=e.i(6556432),a=e.i(889716),i=e.i(8084653),o=e.i(2362802),s=e.i(1985209),l=e.i(120802),c=e.i(8103655),u=e.i(1873097);e.i(2815117);var d=e.i(1775063),g=e.i(6911881),m=e.i(791123),p=e.i(1164214),h=e.i(5674541),v=e.i(555528),f=e.i(8317189);e.i(9389778);var y=e.i(1310591);e.i(7196151);var C=e.i(5330315);e.i(5941325);var E=e.i(1227837),T=e.i(984909);function x(){let{handleResourceModalSucceeded:e}=(0,T.usePushToStorePath)(),{projectSlug:r,teamSlug:n}=(0,y.useProjectAndTeamSlug)(),{data:a}=(0,C.useResourceList)({projectSlug:r,protocolType:"storage"}),{openBrowseProducts:i}=(0,E.useResourceModals)({onSuccess:e}),{permissions:o}=(0,f.useStorePermissions)({teamSlug:n});return o.isLoading?(0,t.jsx)(j,{}):a&&a.stores.length>0?(0,t.jsx)(v.Tooltip,{disableTriggers:o.createAnyStore,text:"You need additional permissions to create a Database.",children:(0,t.jsx)(h.Button,{"data-testid":(0,p.tid)("storage","create-resource-button"),disabled:!o.createAnyStore,onClick:()=>i("browse-new"),type:"default",typeName:"button",children:"Create Database"})}):(0,t.jsx)(j,{})}function j(){return(0,t.jsx)("div",{style:{height:40}})}function b(e){let{teamSlug:a,project:i,children:o}=e;return(0,t.jsx)(r.Suspense,{fallback:(0,t.jsx)(S,{buttons:null,projectSlug:i,teamSlug:a,children:(0,t.jsx)(u.ResourceListPlaceholder,{protocolType:"storage"})}),children:(0,t.jsx)(n.CompatRouterAllowedWithoutSuspense,{children:(0,t.jsx)(d.ResourceModalsProviderBase,{Modal:(0,t.jsx)(m.CreateStoreModal,{}),protocolType:"storage",children:(0,t.jsx)(S,{buttons:(0,t.jsx)(x,{}),projectSlug:i,teamSlug:a,children:o})})})})}function S(e){let{teamSlug:r,projectSlug:n,children:u,buttons:d}=e,m=(0,g.hasProjectSlug)(n);return(0,t.jsx)(l.default,{buttons:d,title:(0,t.jsxs)(a.Stack,{gap:4,children:[(0,t.jsx)(a.Stack,{direction:"row",gap:3,children:(0,t.jsx)(i.Text,{as:"h1",size:32,weight:500,children:"Storage"})}),m?(0,t.jsxs)(i.Text,{color:"gray-900",children:["Read and write directly to databases and stores connected to this project."," ",(0,t.jsx)(o.Link,{href:r?`/${r}/~/stores`:"/dashboard/stores",type:"highlight",children:(0,t.jsxs)(a.Stack,{align:"center",as:"span",direction:"row",gap:1,style:{display:"inline-flex"},children:[(0,t.jsx)("span",{children:"View All Databases"}),(0,t.jsx)(s.ArrowCircleRight,{})]})})]}):(0,t.jsxs)(i.Text,{color:"gray-900",children:["Read and write directly to databases and stores from your projects."," ",(0,t.jsx)(o.Link,{external:!0,href:c.docs.createDatabase,type:"highlight",children:"Learn more"})]})]}),children:(0,t.jsx)(a.Stack,{gap:4,children:u})})}}}]);

//# sourceMappingURL=1e251c2aac3d3349.js.map
//# debugId=cac27d87-dc21-5509-a05e-98c25e4628ce
