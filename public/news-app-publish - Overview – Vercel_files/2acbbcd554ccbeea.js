
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="6b57a042-4527-5cb7-97b1-51a66b9ca7d4")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{595221:e=>{e.v({continueWithText:"index-module__gQ5Ota__continueWithText",emptyResult:"index-module__gQ5Ota__emptyResult",entityName:"index-module__gQ5Ota__entityName",entityStack:"index-module__gQ5Ota__entityStack",gitPill:"index-module__gQ5Ota__gitPill",loadingResult:"index-module__gQ5Ota__loadingResult",providerBtn:"index-module__gQ5Ota__providerBtn",providerBtnMobile:"index-module__gQ5Ota__providerBtnMobile",repoDescription:"index-module__gQ5Ota__repoDescription",repoList:"index-module__gQ5Ota__repoList",repoTitle:"index-module__gQ5Ota__repoTitle",selectProvider:"index-module__gQ5Ota__selectProvider",small:"index-module__gQ5Ota__small",suggestionBox:"index-module__gQ5Ota__suggestionBox",suggestionDescription:"index-module__gQ5Ota__suggestionDescription",suggestionHighlight:"index-module__gQ5Ota__suggestionHighlight",suggestionList:"index-module__gQ5Ota__suggestionList",suggestionListBorder:"index-module__gQ5Ota__suggestionListBorder",turborepoBadgeContainer:"index-module__gQ5Ota__turborepoBadgeContainer",turborepoLogoContainer:"index-module__gQ5Ota__turborepoLogoContainer"})},8466107:[e=>{"use strict";e.s({ConnectGitButton:()=>ee,SelectGitRepository:()=>ed,reducer:()=>eo,updatePreferredGitAccount:()=>el},8466107);var t=e.i(6645307),i=e.i(6530772),r=e.i(5610210),a=e.i(4652282),s=e.i(9590492),n=e.i(3621043),o=e.i(5163670),l=e.i(8811733),d=e.i(889716),u=e.i(2362802),c=e.i(1164214),p=e.i(1183506),h=e.i(9336536),g=e.i(5454140),m=e.i(3514588),f=e.i(226017),x=e.i(2448773),b=e.i(878537),j=e.i(2075095),y=e.i(5036602),v=e.i(7137354),_=e.i(4935486),S=e.i(4640326),w=e.i(1524796),A=e.i(429832),T=e.i(6867529),C=e.i(5424055),I=e.i(6008643),k=e.i(595221),G=e.i(8924811),N=e.i(5165976),E=e.i(3821772),R=e.i(3921802),L=e.i(2774739),M=e.i(7337588),P=e.i(2145411),O=e.i(3604170),B=e.i(6909005),U=e.i(904062),D=e.i(1657292);function H(e){let{framework:i}=e,r=(0,U.useFrameworkLogo)({logo:i.logo,darkModeLogo:i.darkModeLogo});return(0,t.jsx)(G.default,{alt:"Framework logo",height:20,src:r,width:20})}function F(e){let{repo:a,gitType:s,search:n,renderButton:l,repoSkeletonWidthPercentage:u=100,currentNamespace:p}=e,{data:h,error:g,isLoading:f}=(0,B.useDetectEligibleProjects)(a?.url),x=(0,L.useAgo)(a?.updatedAt),b=(0,i.useMemo)(()=>a?n?a.name.split(n).reduce((e,i,r)=>(0!==r&&e.push((0,t.jsx)("mark",{className:k.default.suggestionHighlight,children:n},e.length)),i&&e.push((0,t.jsx)("span",{children:i},e.length)),e),[]):[(0,t.jsx)("span",{children:a.name},a.id)]:null,[a,n]),j=!a||f,{team:y}=(0,m.useTeam)(),v=y?`${y.slug}/`:"",_=(0,i.useMemo)(()=>l(a,s,v,p,h?.projects[0],h?.projects.length,!y||y.billing?.plan==="hobby"),[a,s,v,h]);return(0,t.jsx)(M.Entity,{actions:(0,t.jsx)(d.Stack,{direction:"row",children:_}),"data-testid":(0,c.tid)("import-flow-layout","suggestion-card","suggestion"),placeholder:j,thumbnail:(0,t.jsx)(O.EntityThumbnail,{size:24,children:f?(0,t.jsx)(E.Spinner,{size:24}):(0,t.jsx)(D.FrameworkIconGroup,{error:g,gitType:s,projects:h?.projects})}),children:(0,t.jsx)(P.EntityField,{children:a?(0,t.jsxs)(d.Stack,{align:"center",className:k.default.entityStack,direction:"row",gap:1,children:[(0,t.jsx)(d.Stack,{className:k.default.entityName,flex:"0 1 auto",children:(0,t.jsx)("span",{className:(0,r.clsx)(k.default.repoTitle,"geist-ellipsis"),title:a.name,children:b})}),h?.monorepoManager?.slug==="turbo"?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:k.default.turborepoBadgeContainer,children:(0,t.jsx)(R.Badge,{variant:"turbo",children:"Turbo"})}),(0,t.jsx)("div",{className:k.default.turborepoLogoContainer,children:(0,t.jsx)(H,{framework:h.monorepoManager})})]}):null,a?.private?(0,t.jsx)(d.Stack,{as:"span",flex:"0 0 auto",title:"Private Git Repository",children:(0,t.jsx)(N.LockClosed,{color:"gray-700"})}):null,(0,t.jsx)(d.Stack,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,t.jsx)("span",{className:k.default.repoDescription,children:"·"})}),(0,t.jsx)(d.Stack,{className:"geist-hide-on-mobile",flex:"0 0 auto",children:(0,t.jsx)("span",{className:k.default.repoDescription,children:x})})]}):(0,t.jsx)(o.Skeleton,{height:20,width:`${u}%`})})})}e.s({GithubEnterpriseButton:()=>J},2395535);var q=e.i(8084653),Q=e.i(5674541),z=e.i(1917237),$=e.i(631755),V=e.i(8934201);async function W(e){let t=`/v1/integrations/github-does-ghes-app-exist?host=${e}`;return(await (0,p.fetchAPI)(t,{throwOnHTTPError:!0})).exists}var K=function(e){return e.Default="Default",e.NeedsInstallation="NeedsInstallation",e}(K||{});function Y(e){let{teamSlug:r,webhookUrl:a,open:s,onClose:n,onSetHostname:o,flowKind:l}=e,u=(0,i.useRef)(null),[c,p]=(0,i.useState)(""),[h,g]=(0,i.useState)(""),[m,f]=(0,i.useState)(!1),[x,b]=(0,i.useState)(""),[j,y]=(0,i.useState)("Default"),v={name:"Vercel",url:"https://vercel.com/github",redirect_url:(e=>{let{domain:t,organization:i,teamSlug:r,flowKind:a}=e;try{let e=new URL(t).host,s=new URL("https://vercel.com/api/v1/integrations/github-create-ghes-callback");return s.searchParams.set("host",e),s.searchParams.set("organization",i),s.searchParams.set("team",r),a&&s.searchParams.set("flowKind",a),s.toString()}catch{return""}})({domain:c,organization:h,teamSlug:r,flowKind:l}),callback_urls:["https://vercel.com/api/now/registration/github-custom-host/callback"],default_permissions:{actions:"write",administration:"write",checks:"write",contents:"write",deployments:"write",emails:"read",issues:"write",members:"read",metadata:"read",pull_requests:"write",repository_hooks:"write",statuses:"write"},hook_attributes:{active:!0,url:a},default_events:["branch_protection_rule","check_run","deployment","membership","pull_request","pull_request_review","push","repository","status","team"],public:!0},_=(0,i.useCallback)(()=>{p(""),g(""),y("Default"),n()},[n]),S=(0,i.useCallback)(async function(){let e;if(b(""),u.current?.reportValidity()){try{e=new URL(c).hostname}catch(e){b("The provided domain is not valid");return}f(!0);try{if(await W(e)){if("NeedsInstallation"===j)return void b("There is already a Spaces GitHub App installed for this GitHub Enterprise Server domain.");f(!1),o(e),_();return}if("NeedsInstallation"===j)return void u.current?.submit();y("NeedsInstallation"),f(!1)}catch(e){b("There was an unexpected error from the server.")}}},[c,j,_,o]);return(0,i.useEffect)(()=>{let e=e=>{s&&"Enter"===e.key&&(e.preventDefault(),S())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[S,s]),(0,t.jsx)(V.Modal.Modal,{active:s,onClickOutside:_,children:(0,t.jsxs)("form",{action:function(e,t){try{let i=new URL(e).origin;return`${i}/organizations/${t}/settings/apps/new`}catch{return""}}(c,h),method:"post",ref:u,children:[(0,t.jsxs)(V.Modal.Body,{children:[(0,t.jsxs)(V.Modal.Header,{children:[(0,t.jsx)(V.Modal.Title,{children:"GitHub Enterprise Server"}),(0,t.jsx)(V.Modal.Subtitle,{children:"Enter your GitHub Enterprise Server domain to connect a Git Repository from your GitHub Enterprise Server."})]}),(0,t.jsxs)(d.Stack,{gap:4,children:[(0,t.jsx)($.Input,{id:"domain",label:"GitHub Enterprise Server Domain",name:"domain",onChange:e=>p(e.target.value),placeholder:"https://github.acme.com",required:!0,value:c}),"NeedsInstallation"===j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.Input,{id:"organization",label:"GitHub Enterprise Server Organization Name",name:"organization",onChange:e=>g(e.target.value),placeholder:"organization-name",required:!0,value:h}),(0,t.jsx)(d.Stack,{className:"geist-sr-only",children:(0,t.jsx)($.Input,{id:"manifest",label:"Manifest",name:"manifest",readOnly:!0,value:JSON.stringify(v)})})]}):null,(0,t.jsx)(d.Stack,{children:x?(0,t.jsx)(z.Error,{error:x}):null})]})]}),(0,t.jsxs)(V.Modal.Actions,{children:[(0,t.jsx)(V.Modal.Action,{onClick:_,type:"secondary",children:"Cancel"}),(0,t.jsx)(V.Modal.Action,{buttonType:"submit",loading:m,passthroughOnClick:e=>{e.preventDefault(),s&&S()},children:"Continue"})]})]})})}function J(e){let{teamSlug:r,webhookUrl:a,dispatch:s,flowKind:n}=e,[o,l]=(0,i.useState)(!1),{user:d}=(0,g.useUser)(),[u,c]=(0,i.useState)(""),{account:p,mutate:h,isLoading:m}=(0,C.default)({account:d??null,type:"github-custom-host",customHost:u}),[f,x]=(0,i.useState)(!1),b=(0,i.useCallback)(()=>{s({type:"SET_GIT_ACCOUNT",gitAccount:{provider:"github-custom-host",host:u}})},[s,u]),j=(0,w.useConnectPopup)({onOpen:()=>{l(!0)},onAbort:()=>{l(!1),c("")},onSuccess:()=>{b(),h(),l(!1)}}),v=(0,i.useCallback)(e=>{c(e),x(!1)},[]);return(0,i.useEffect)(()=>{if(p&&u&&!m){if(!p["github-custom-host"])return void h();p["github-custom-host"].verified?b():j.open("github-custom-host",{host:u})}},[p,m,u,j,h,b]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Q.Button,{loading:o,onClick:()=>x(!0),type:"tertiary",children:(0,t.jsxs)("span",{style:{display:"flex"},children:[(0,t.jsx)(y.default,{fill:"currentColor",gitType:"github",height:20,style:{marginRight:"var(--geist-gap-quarter)",transform:"translateY(-1px)"},width:20}),(0,t.jsx)(q.Text,{as:"span",color:"inherit",weight:500,children:"Continue with GitHub Enterprise"})]})}),(0,t.jsx)(Y,{onClose:()=>x(!1),onSetHostname:v,open:f,teamSlug:r,webhookUrl:a,flowKind:n})]})}var X=e.i(36632),Z=e.i(6494827);function ee(e){let{"data-testid":r,gitType:a,dispatch:s,shouldUpdatePreferredGitAccount:n,size:o,requireReauth:l,namespaceId:d}=e,[u,c]=(0,i.useState)(!1),[p,h]=(0,i.useState)(!1),{user:m}=(0,g.useUser)(),{account:f,mutate:x}=(0,C.default)({account:m??null});(0,i.useEffect)(()=>{f&&p&&(h(!1),y())},[f]);let b=(0,i.useCallback)(async()=>{c(!0);let e=await (0,I.mutateGitNamespaces)(a);c(!1);let t=e?.find(e=>String(e.id)===String(d))??e?.[0];s({type:"SET_GIT_ACCOUNT",gitAccount:{provider:a,namespaceId:t?.id,requireReauth:t?.requireReauth}}),n&&el({provider:a,namespaceId:t?.id})},[s,a,d,n]),j=(0,w.useConnectPopup)({onOpen:()=>{c(!0)},onAbort:()=>{c(!1)},onSuccess:()=>{b(),x(),c(!1)}}),y=(0,i.useCallback)(()=>{if(!f){h(!0),c(!0);return}!l&&f[a]?.verified?b():j.open(a)},[f,l,a,b,j]);return(0,t.jsxs)(v.default,{align:"grow","data-testid":r,gitType:a,loading:u,onClick:y,size:o,width:"100%",children:[(0,t.jsx)("span",{className:k.default.continueWithText,children:"Continue with "}),S.ORIGINS[a]]})}function et(e){let{search:a,gitAccount:s,configureGithubInstallation:n}=e,o=s?.provider,{data:d}=(0,I.default)({provider:o}),u=(0,i.useMemo)(()=>s&&d?d.find(e=>e.id===s?.namespaceId)?.name:null,[d,s]);return(0,t.jsx)(b.default,{center:!0,className:(0,r.clsx)(k.default.selectProvider,k.default.emptyResult),children:(0,t.jsxs)(b.default,{flex:"0 0 auto",gap:0,children:[(0,t.jsxs)(x.default,{center:!0,"data-testid":(0,c.tid)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",weight:500,children:["No ",a?"Results":"Git Repositories"," Found"]}),(0,t.jsx)(l.Spacer,{y:.25}),a?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.default,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)",wordBreak:"break-word"},children:(0,t.jsxs)(b.default,{center:!0,row:!0,children:["Your search ",a?`for "${a}"`:null," ",s&&u?(0,t.jsxs)(t.Fragment,{children:["in"," ",(0,t.jsxs)(b.default,{center:!0,flex:"0 0 auto",noWrap:!0,row:!0,children:[(0,t.jsx)(l.Spacer,{x:.2}),(0,t.jsx)(b.default,{flex:"0 0 auto",children:(0,t.jsx)(y.default,{gitType:s.provider})}),(0,t.jsx)(l.Spacer,{x:.2}),(0,t.jsx)(x.default,{className:"geist-ellipsis",span:!0,weight:500,children:u}),(0,t.jsx)(l.Spacer,{x:.2})]})]}):null," ","did not return any results."]})}),(0,t.jsx)(l.Spacer,{y:.25})]}):null,n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.default,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Make sure to grant Vercel access to the Git repositories you’d like to import."}),(0,t.jsx)(l.Spacer,{y:1}),(0,t.jsx)(v.default,{"data-testid":(0,c.tid)("import-flow-layout","configure-github-app-button"),gitType:"github",loading:!1,onClick:n,children:"Configure GitHub App"})]}):(0,t.jsx)(x.default,{center:!0,noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Try selecting a different Git account or organization on the top left."})]})})}function ei(e){let{gitAccount:i,dispatch:a}=e;return(0,t.jsx)(b.default,{center:!0,className:(0,r.clsx)(k.default.selectProvider,k.default.emptyResult),children:(0,t.jsxs)(b.default,{flex:"0 0 auto",gap:0,children:[(0,t.jsx)(x.default,{center:!0,"data-testid":(0,c.tid)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",weight:500,children:"No Git Repositories Found"}),(0,t.jsx)(l.Spacer,{y:.25}),(0,t.jsxs)(x.default,{center:!0,"data-testid":(0,c.tid)("import-flow-layout","no-results-found-text"),noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:["Your ",S.ORIGINS[i.provider]," account requires re-authentication to see your repositories."]}),(0,t.jsx)(l.Spacer,{y:1}),(0,t.jsx)(ee,{dispatch:a,gitType:i.provider,namespaceId:i.namespaceId,requireReauth:!0})]})})}function er(e){let{openGithubInstallation:i}=e;return(0,t.jsx)(b.default,{center:!0,className:(0,r.clsx)(k.default.selectProvider,k.default.emptyResult),children:(0,t.jsxs)(d.Stack,{align:"center",children:[(0,t.jsx)(x.default,{center:!0,"data-testid":(0,c.tid)("import-flow-layout","almost-done"),noMargin:!0,preset:"body-2",weight:500,children:"Install the GitHub application for the accounts you wish to Import from to continue"}),(0,t.jsx)(l.Spacer,{y:1.3}),(0,t.jsx)(d.Stack,{align:"center",flex:1,gap:2,justify:"center",children:(0,t.jsx)(v.default,{gitType:"github",onClick:i,children:"Install"})})]})})}function ea(e){let{renderButton:i}=e;return(0,t.jsx)(t.Fragment,{children:[84,30,75,68,32].map((e,r)=>(0,t.jsx)(F,{renderButton:i,repoSkeletonWidthPercentage:e},`${r}_${e}`))})}function es(e){let{repos:d,repoSearchIsLoading:p,search:h,debouncedSearch:g,gitAccount:f,dispatch:v,renderButton:_,shouldUpdatePreferredGitAccount:S,small:w,onChangeGitSelector:T,isInstallationNotFound:C}=e,G=f?.provider,N=f?.host,{isLoading:E,data:R,mutate:L}=(0,I.useIsomorphicGitNamspaces)({provider:G,host:N}),[M,P]=(0,i.useState)(!1),{team:O}=(0,m.useTeam)(),[B,U]=(0,i.useState)(!1);(0,i.useEffect)(()=>{M&&!p&&P(!1)},[M,p]);let D=(0,i.useCallback)(async e=>{let{installationId:t}=e,i=await L(),r=Array.isArray(i)&&i.length>0&&(i.find(e=>e.installationId===t)?.id||i[0].id)||null;v({type:"SET_GIT_NAMESPACE",namespaceId:r}),S&&el({provider:"github",namespaceId:r}),P(!0),v({type:"REVALIDATE_REPOS"})},[v,L,S]),{open:H}=(0,A.default)({onSuccess:D}),q=(0,i.useMemo)(()=>{if("github"===G&&R?.length){let e=R.find(e=>Number(e.id)===Number(f?.namespaceId));if(e?.isAccessRestricted)return H}},[G,H,R,f]),Q=(0,i.useMemo)(()=>!E&&!!B&&(!f||"github"===f.provider&&(!f.namespaceId||!R?.length)),[f,R,E,B]),z=(0,i.useMemo)(()=>{if(f?.requireReauth||C&&f&&!Q)return{ui:(0,t.jsx)(ei,{dispatch:v,gitAccount:f}),suggestionListBorder:!1};if(Q)return{ui:(0,t.jsx)(er,{openGithubInstallation:H}),suggestionListBorder:!1};if(!d||!R||M||!B)return{ui:(0,t.jsx)(ea,{renderButton:_}),suggestionListBorder:!1};if(0===d.length)return h!==g||g&&p?{ui:(0,t.jsx)(ea,{renderButton:_}),suggestionListBorder:!1}:null===h?{ui:(0,t.jsx)(et,{configureGithubInstallation:q,gitAccount:f}),suggestionListBorder:!1}:{ui:(0,t.jsx)(et,{configureGithubInstallation:q,gitAccount:f,search:g}),suggestionListBorder:!1};let e=!1;f?.provider==="github"?e=d.length<5&&!!q:(f?.provider==="gitlab"||f?.provider==="bitbucket")&&(e=d.length<5);let i=R.find(e=>String(e.id)===String(f?.namespaceId));return{ui:(0,t.jsxs)(t.Fragment,{children:[d.slice(0,5).map(e=>(0,t.jsx)(F,{currentNamespace:i,gitType:f?.provider,renderButton:_,repo:e,search:g},e.id)),e?(0,t.jsxs)(x.default,{preset:"body-2",style:{color:"var(--accents-6)",textAlign:"left"},children:["Missing Git repository?"," ",f?.provider==="github"?(0,t.jsx)(u.Link,{href:"",onClick:q,variant:"highlight",children:"Adjust GitHub App Permissions →"}):(0,t.jsx)(u.Link,{external:!0,href:`/docs/git/vercel-for-${f?.provider}#missing-git-repository`,variant:"highlight",children:"Learn More"})]}):null]}),suggestionListBorder:d.length<5}},[v,h,g,d,R,B,M,Q,f,H,q,_,C,p]),$=(0,i.useCallback)(e=>{if("select-different-git-provider"===e)v({type:"SET_GIT_ACCOUNT",gitAccount:null}),S&&el({provider:null,namespaceId:null});else if("install-github"===e)H();else{let t=R?.find(t=>String(t.id)===String(e));v({type:"SET_GIT_NAMESPACE",namespaceId:t?.id??null,requireReauth:t?.requireReauth}),S&&el({namespaceId:e})}T?.()},[v,R,H,S,T]),V=R&&[...R.map(e=>({"data-testid":(0,c.tid)("git-scope-combobox",`namespace-${e.provider}`),value:String(e.id),label:e.name||"",prefix:(0,t.jsx)(y.default,{gitType:e.provider}),isMenu:!1})),..."github"===G?[{"data-testid":(0,c.tid)("import-flow-layout","git-scope-combobox","add-github-account"),value:"install-github",label:"Add GitHub Account",prefix:(0,t.jsx)(a.Plus,{size:14}),isMenu:!0}]:[],{"data-testid":(0,c.tid)("import-flow-layout","git-scope-combobox","switch-git-provider"),value:"select-different-git-provider",label:"Switch Git Provider",prefix:(0,t.jsx)(s.ListUnordered,{size:14}),isMenu:!0}],W=R?.find(e=>String(e.id)===String(f?.namespaceId)),K=W?.id||R?.[0]?.id||null;return(0,i.useEffect)(()=>{if(f&&Array.isArray(R)){if(!R.find(e=>String(e.id)===String(f.namespaceId))){let e=R[0],t=e?.id??null;(t||K)&&(f.namespaceId?$(t?String(t):null):v({type:"SET_GIT_NAMESPACE",namespaceId:t,requireReauth:e?.requireReauth}))}U(!0)}},[v,$,f,R,K]),(0,t.jsxs)(b.default,{className:(0,r.clsx)(k.default.suggestionList,{[k.default.suggestionListBorder]:!w&&z.suggestionListBorder}),gap:!1,children:[(0,t.jsx)(b.default,{flex:"0 0 auto",children:(0,t.jsxs)(b.default,{className:k.default.suggestionDescription,direction:["column","row","row"],gap:!1,noWrap:!0,children:[(0,t.jsx)(b.default,{flex:"50%",children:(0,t.jsx)(o.Skeleton,{show:void 0===f||!B||!Array.isArray(R),children:(0,t.jsxs)(n.Combobox,{clearable:!1,"data-git-namespace-combobox":!0,"data-testid":(0,c.tid)("import-flow-layout","git-scope-combobox"),noRawSelectedValue:!0,onChange:$,placeholder:"Select a Git Namespace",value:K?String(K):null,children:[(0,t.jsx)(n.Combobox.Input,{"data-git-namespace-combobox-input":!0,"data-testid":(0,c.tid)("import-flow-layout","git-scope-combobox","input"),loading:"github"===G&&!B}),(0,t.jsx)(n.Combobox.List,{children:V?.map(e=>(0,t.jsx)(n.Combobox.Option,{"data-testid":e["data-testid"],isMenu:e.isMenu,prefix:e.prefix,value:e.value,children:e.label},e.value))})]})})}),(0,t.jsx)(l.Spacer,{x:1/3,y:1/3}),(0,t.jsx)(b.default,{flex:"50%",children:(0,t.jsx)(o.Skeleton,{show:!C&&!(W?.ownerType==="team"&&!O)&&(!!(!d&&null===h&&!Q)||!B||!Array.isArray(R)||M),children:(0,t.jsx)(j.default,{"data-testid":(0,c.tid)("import-flow-layout","search-input"),disabled:d?.length===0&&null===h,onChange:e=>v({type:"SET_SEARCH",search:e.target.value}),placeholder:"Search...",value:h??"",width:"100%",loading:h!==g||!!(g&&p)})})})]})}),(0,t.jsx)(l.Spacer,{y:2/3}),(0,t.jsx)(b.default,{flex:"1 0 auto",children:(0,t.jsx)(b.default,{className:k.default.repoList,"data-testid":(0,c.tid)("import-flow-layout","repository-list"),gap:!1,children:z.ui})})]})}function en(e){let{dispatch:a,small:s,shouldUpdatePreferredGitAccount:n}=e,{teamSlug:o}=(0,m.useTeam)(),d=(0,f.useServerFlag)("enable-github-onprem-project-creation-flow",!1);return s?(0,t.jsxs)("div",{className:(0,r.clsx)(k.default.selectProvider,k.default.small),children:[["github","gitlab","bitbucket"].map(e=>(0,t.jsxs)(i.default.Fragment,{children:[(0,t.jsx)("span",{className:k.default.providerBtn,children:(0,t.jsx)(ee,{"data-testid":(0,c.tid)("select-git-repository","choose-provider",e),dispatch:a,gitType:e,shouldUpdatePreferredGitAccount:n})}),(0,t.jsx)("span",{className:(0,r.clsx)(k.default.providerBtn,k.default.providerBtnMobile),children:(0,t.jsx)(ee,{"data-testid":(0,c.tid)("select-git-repository","choose-provider",e),dispatch:a,gitType:e,shouldUpdatePreferredGitAccount:n,size:"small"})}),(0,t.jsx)(l.Spacer,{x:.5,y:.25})]},e)),(0,t.jsx)(l.Spacer,{expand:!0,y:.5}),(0,t.jsx)(x.default,{span:!0,type:"success",weight:500,children:(0,t.jsx)(u.Link,{external:!0,href:"/account/authentication",variant:"highlight",children:"Manage Login Connections"})})]}):(0,t.jsx)(b.default,{center:!0,className:k.default.selectProvider,children:(0,t.jsxs)(b.default,{center:!0,flex:"0 0 auto",children:[(0,t.jsx)(x.default,{center:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"Select a Git provider to import an existing project from a Git Repository."}),(0,t.jsx)(l.Spacer,{}),(0,t.jsxs)(b.default,{direction:"column",gap:1/3,style:{width:320},children:[o&&d?(0,t.jsx)(b.default,{children:(0,t.jsx)(J,{dispatch:a,teamSlug:o,webhookUrl:"https://api.vercel.com/v1/incoming/github",flowKind:"new-project"})}):null,["github","gitlab","bitbucket"].map(e=>(0,t.jsx)(b.default,{children:(0,t.jsx)(ee,{"data-testid":(0,c.tid)("select-git-repository","choose-provider",e),dispatch:a,gitType:e,shouldUpdatePreferredGitAccount:n})},e))]}),(0,t.jsx)(l.Spacer,{}),(0,t.jsx)(x.default,{center:!0,preset:"body-2",type:"success",weight:500,children:(0,t.jsx)(u.Link,{external:!0,href:"/account/authentication",children:"Manage Login Connections"})})]})})}function eo(e,t){switch(t.type){case"INIT_GIT_ACCOUNT":return{...e,preferredGitAccount:t.preferredGitAccount};case"SET_SEARCH":return{...e,search:t.search};case"SET_DEBOUNCED_SEARCH":return{...e,debouncedSearch:t.debouncedSearch,ts:e.debouncedSearch!==e.search?Date.now():e.ts};case"SET_GIT_ACCOUNT":return{...e,search:null,localGitAccount:t.gitAccount};case"SET_GIT_NAMESPACE":{let i=e.localGitAccount??e.preferredGitAccount;return i?{...e,localGitAccount:{...i,namespaceId:t.namespaceId,requireReauth:t.requireReauth??!1}}:e}case"REVALIDATE_REPOS":return{...e,ts:Date.now()};default:return e}}let el=async e=>{let{namespaceId:t,provider:i}=e;await (0,p.fetchAPI)(h.API_USER,{method:"PATCH",body:JSON.stringify({importFlowGitNamespaceId:t,importFlowGitProvider:i})})};function ed(e){let{renderButton:a,renderConnections:s,small:n,shouldUpdatePreferredGitAccount:o,onChangeGitSelector:l}=e,{user:d,isLoading:u}=(0,g.useUser)(),[{search:c,debouncedSearch:p,localGitAccount:h,preferredGitAccount:m},f]=(0,i.useReducer)(eo,{search:null,debouncedSearch:null,ts:Date.now()}),x=m||(d?.importFlowGitProvider&&d.importFlowGitNamespaceId?{provider:d.importFlowGitProvider,namespaceId:d.importFlowGitNamespaceId}:null),b=void 0!==h?h:x,{account:j,isLoading:y}=(0,C.default)({account:d,customHost:h?.provider==="github-custom-host"?h.host:void 0});(0,i.useEffect)(()=>{let e=setTimeout(()=>f({type:"SET_DEBOUNCED_SEARCH",debouncedSearch:c}),300);return()=>clearTimeout(e)},[c]);let v=(0,Z.usePrevious)(p),{data:S,isLoading:w,error:A}=(0,T.useIsomorphicRepoSearch)({query:p,provider:b?.provider||void 0,host:b?.host,namespaceId:b?.namespaceId,requireReauth:b?.requireReauth},{keepPreviousData:v!==p}),I=(0,X.isError)(A),G=I&&"code"in A&&"installation_not_found"===A.code;(0,i.useEffect)(()=>{(S||!w)&&o&&f({type:"INIT_GIT_ACCOUNT",preferredGitAccount:!S||"error"in S?null:S.gitAccount})},[S,h,o,w]);let N=(0,i.useMemo)(()=>{let e=o&&void 0===m,i=j?.github?.verified??!1,r=j?.gitlab?.verified??!1,h=j?.bitbucket?.verified??!1,g=j?.["github-custom-host"]?.verified??!1;return(!I||G)&&(e||y||u||(i||g||r||h)&&b)?(0,t.jsx)(es,{debouncedSearch:p,dispatch:f,gitAccount:b,isInstallationNotFound:G,onChangeGitSelector:l,renderButton:a,repoSearchIsLoading:w,repos:S&&"repos"in S?S.repos:void 0,search:c,shouldUpdatePreferredGitAccount:o,small:n}):d?.limited?(0,t.jsx)(_.default,{small:n}):s?s({dispatch:f}):(0,t.jsx)(en,{dispatch:f,shouldUpdatePreferredGitAccount:!0,small:n})},[m,o,j,y,d?.limited,s,n,p,l,a,w,S,c,u,b,I,G]);return(0,t.jsx)("div",{className:(0,r.clsx)(k.default.suggestionBox,{[k.default.small]:n}),children:N})}},[2395535]]}]);

//# sourceMappingURL=0bb1bbc4ef68662c.js.map
//# debugId=6b57a042-4527-5cb7-97b1-51a66b9ca7d4
