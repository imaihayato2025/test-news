
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f9c66a14-cead-5d58-90bd-7bd65e01841f")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{7730212:[e=>{"use strict";e.s({DeploymentRow:()=>eb},7730212);var t=e.i(6645307),i=e.i(6530772),n=e.i(3921802),l=e.i(2293621),s=e.i(5163670),a=e.i(889716),r=e.i(8084653),o=e.i(555528),d=e.i(8328767),c=e.i(2362802),u=e.i(9385465),m=e.i(869010),p=e.i(3920197),x=e.i(6621512),h=e.i(1635827),y=e.i(1164214),g=e.i(3585235),j=e.i(5785123),k=e.i(6700141),f=e.i(3156464),b=e.i(2774739),v=e.i(674684),I=e.i(7337588),R=e.i(2145411),C=e.i(3491230),S=e.i(8975439),A=e.i(5535439),D=e.i(5610210),E=e.i(3821772),N=e.i(2357051),L=e.i(2597732),w=e.i(5617310);function T(e){let{children:i,inProgress:n}=e;return(0,t.jsxs)("div",{className:"flex items-center",children:[n?(0,t.jsx)("div",{className:"ml-[-1.5px] w-[19px]",children:(0,t.jsx)(E.Spinner,{size:13})}):null,i]})}let M=function(e){let{deployment:i,padLeft:n,showSpinner:l=!0,onlyBuild:a=!1}=e,{teamSlug:r}=(0,A.useParams)()??{},o=(0,b.useAge)(i?.buildingAt||void 0,{includeSeconds:!0}),d=i&&"id"in i?i.id:i?.uid,c=i&&"READY"===i.readyState&&i.checksState,{data:u,checks:m,isLoading:p}=(0,L.default)({deploymentId:c?d:void 0,teamId:r}),x=P(i,m,a)||0,h=i?.undeleted||i?.deleted||i?.createdAt||i?.created,y=h?h+x:void 0,g=i?.deleted!==void 0,j=y?new Date(y).toLocaleDateString(void 0,{hour:"numeric",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"numeric",timeZoneName:"short"}):"",k=(0,b.useAgo)(y,{suffix:" ago",alwaysRelative:!0});if(!i||p&&!u)return(0,t.jsx)(s.Skeleton,{height:16,width:100});let f="readyState"in i?i.readyState:i.state,v=i.checksState&&!i.checksConclusion,I=!!("BUILDING"===f||"READY"===f&&!i.aliasAssigned&&v),R=function(e,t,i){let n=P(e,t,i);return(0,N.age)(n,{includeSeconds:!0})}(i,m,a)||"—",C=(0,t.jsx)("span",{className:(0,D.clsx)({"pl-[18px]":!I&&n}),suppressHydrationWarning:!0,children:g?(0,t.jsx)("span",{suppressHydrationWarning:!0,title:j,children:k}):(0,t.jsxs)(t.Fragment,{children:[I?o:R,!I&&k?(0,t.jsxs)("span",{suppressHydrationWarning:!0,title:j,children:[" ","(",k,")"]}):null]})});return l?(0,t.jsx)(T,{inProgress:I,children:C}):C};function P(e,t,i){if(!e||"BUILDING"===("readyState"in e?e.readyState:e.state)||!("buildingAt"in e))return;let n="readyStateAt"in e?e.readyStateAt:e.ready;if(!n||!e.buildingAt)return;let l=n-e.buildingAt;if(i)return l;let s=t?.length?(0,w.getChecksTimes)(t,e):void 0,a=s?.checksFinishedAt&&s.checksStartedAt?s.checksFinishedAt-s.checksStartedAt:0,r=e.aliasAssignedAt??("number"==typeof e.aliasAssigned?e.aliasAssigned:void 0),o=0;if(r){let e=s?.checksFinishedAt?r-s.checksFinishedAt:r-n;e<18e5&&(o=e)}return l+a+o}var U=e.i(5196742),B=e.i(5938635),F=e.i(2240289),O=e.i(383713),_=e.i(8025298),z=e.i(8804902),G=e.i(5690638),q=e.i(6895406);function W(e){let{percentage:i}=e,n=(e=>{if(e>=100)return"M8 3.5C10.4853 3.5 12.5 5.51472 12.5 8C12.5 10.4853 10.4853 12.5 8 12.5C5.51472 12.5 3.5 10.4853 3.5 8C3.5 5.51472 5.51472 3.5 8 3.5Z";let t=-Math.PI/2+e/100*2*Math.PI,i=8+4.5*Math.cos(t),n=8+4.5*Math.sin(t);return`M 8 8 L 8 3.5 A 4.5 4.5 0 ${+(e>50)} 1 ${i} ${n} Z`})(i),l=(0,q.withNewIcon)(`<path d="M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8 2.5C4.96243 2.5 2.5 4.96243 2.5 8C2.5 11.0376 4.96243 13.5 8 13.5C11.0376 13.5 13.5 11.0376 13.5 8C13.5 4.96243 11.0376 2.5 8 2.5Z" fill="currentColor" />
     <path d="${n}" fill="currentColor" />`);return(0,t.jsx)(l,{})}var V=e.i(6054209),Y=e.i(587741),$=e.i(5220264),Z=e.i(1628584),Q=e.i(2631460),H=e.i(6192985),J=e.i(4105925),K=e.i(4646240),X=e.i(1406255),ee=e.i(584439),et=e.i(595691),ei=e.i(3514588),en=e.i(8188445),el=e.i(3076719),es=e.i(6025740);function ea(e){let{isDisabled:i,menuText:n,tidString:l,icon:s,disabledTooltip:d,title:c,onClick:u}=e;return i?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Stack,{className:"geist-show-on-mobile",children:(0,t.jsx)(o.Tooltip,{boxAlign:"left",text:d,children:(0,t.jsx)(J.MenuItem,{"data-testid":(0,y.tid)("deployment-entity","dots-menu",l),disabled:!0,suffix:s,children:(0,t.jsx)(a.Stack,{align:"center",direction:"row",gap:2,children:(0,t.jsx)(r.Text,{as:"span",style:{fontSize:"inherit",color:"inherit"},children:n})})})})}),(0,t.jsx)(a.Stack,{className:"geist-hide-on-mobile",children:(0,t.jsx)(o.Tooltip,{forceHide:!1,position:"left",style:{width:"100%"},text:d,children:(0,t.jsx)(J.MenuItem,{"data-testid":(0,y.tid)("deployment-entity","dots-menu",l),disabled:!0,style:{width:"100%"},suffix:s,children:(0,t.jsx)(a.Stack,{align:"center",direction:"row",gap:2,children:(0,t.jsx)(r.Text,{as:"span",style:{fontSize:"inherit",color:"inherit"},children:n})})})})})]}):(0,t.jsx)(J.MenuItem,{"data-testid":(0,y.tid)("deployment-entity","dots-menu",l),onClick:u,suffix:s,title:c,children:(0,t.jsx)(a.Stack,{align:"center",direction:"row",gap:2,children:(0,t.jsx)(r.Text,{as:"span",style:{fontSize:"inherit",color:"inherit"},children:n})})})}function er(){let e=(0,v.useRouter)(),t=e.isReady&&"/[teamSlug]/~/deployments"===e.pathname;return{isReady:e.isReady,scope:t?"TEAM_DEPLOYMENTS":"PROJECT_DEPLOYMENTS"}}e.s({useDeploymentListScope:()=>er},2491304);var eo=e.i(1562781),ed=e.i(1213995);function ec(e){let{openModal:i,rollingRelease:n,teamSlug:l,projectSlug:s}=e;return ea({isDisabled:!1,menuText:"Abort Rollout",tidString:"abort-rollout",icon:(0,t.jsx)(u.RotateCounterClockwise,{}),disabledTooltip:"",title:"Abort Rollout",onClick:()=>{i&&n&&l&&s&&i(l,s,n)}})}function eu(e){let{openModal:i,rollingRelease:n,teamSlug:l,projectSlug:s}=e;return ea({isDisabled:!1,menuText:"Force Complete",tidString:"force-complete",icon:(0,t.jsx)(m.ArrowCircleUp,{}),disabledTooltip:"",title:"Force Complete",onClick:()=>{i&&n&&l&&s&&i(l,s,n)}})}function em(e){let{deployment:i,redeploy:n,handleClickRunInstantly:l,handleClickCreateAlias:s,itemsOnly:a,handleCancelDeployment:r,canPromoteToProduction:o,canRedeployProduction:d,canUpdateDeployment:p,canReadDeployment:x,canRollbackDeployment:h,handleClickRollback:y,isRollingReleaseCanaryDeployment:g,isRollingReleaseActive:j,rollingRelease:k,openCompleteRollingReleaseModal:f,openAbortRollingReleaseModal:b}=e,v=(0,ee.useToasts)(),I=(0,Y.useDeploymentLink)(i),{scope:R}=er(),C="state"in i?()=>r?.(i):void 0,S=r&&"state"in i&&("QUEUED"===i.state||"BUILDING"===i.state),A="state"in i&&"READY"===i.state,{team:D}=(0,ei.useTeam)(),{enabled:E}=(0,es.useOnDemandConcurrentBuilds)(D,p),N="state"in i&&"QUEUED"===i.state&&E,L="TEAM_DEPLOYMENTS"!==R&&(p||(!("target"in i)||"production"===i.target)&&d),w=o&&L&&p&&x&&h,T=(0,ed.useRollbackTooltip)(i),M=ea({isDisabled:!!T,menuText:"Instant Rollback",tidString:"instant-rollback",icon:(0,t.jsx)(u.RotateCounterClockwise,{}),disabledTooltip:T,title:"Instant Rollback",onClick:y}),P=j?"Queue for Promotion":"target"in i&&"production"===i.target?"Promote":"Promote to Production",U=null,B=(0,eo.usePromoteTooltip)(i);o&&(U=(0,t.jsxs)(t.Fragment,{children:[ea({isDisabled:!!B,disabledTooltip:B,menuText:P,tidString:"promote",icon:(0,t.jsx)(m.ArrowCircleUp,{}),title:P,onClick:()=>n(i,!0)}),(0,t.jsx)(H.MenuDivider,{})]}));let F=g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(X.MenuSection,{title:"Manage Rolling Release",children:[(0,t.jsx)(ec,{openModal:b,rollingRelease:k,teamSlug:D?.slug,projectSlug:i.name}),(0,t.jsx)(eu,{openModal:f,rollingRelease:k,teamSlug:D?.slug,projectSlug:i.name})]}),(0,t.jsx)(H.MenuDivider,{})]}):(0,t.jsxs)(t.Fragment,{children:[h?M:null,o?U:null]}),O=(0,t.jsxs)(t.Fragment,{children:[o||h?F:null,L?(0,t.jsx)(J.MenuItem,{onClick:()=>n(i),children:"Redeploy"}):null,N&&p?(0,t.jsx)(J.MenuItem,{onClick:l,children:"Start Building Now"}):null,x?(0,t.jsx)(J.MenuItem,{Component:c.Link,href:I,isLink:!0,children:"Inspect Deployment"}):null,x?(0,t.jsx)(J.MenuItem,{Component:c.Link,href:`${I}/source`,isLink:!0,children:"View Source"}):null,x?(0,t.jsx)(J.MenuItem,{onClick:()=>{(0,en.copyToClipboard)(i.url),v.message("Copied to clipboard!")},children:"Copy URL"}):null,A&&p?(0,t.jsx)(J.MenuItem,{onClick:s,children:"Assign Domain"}):null,S&&p?(0,t.jsx)(J.MenuItem,{onClick:C,type:"error",children:"Cancel Deployment"}):null,x?(0,t.jsxs)(J.MenuItem,{Component:c.Link,disabled:!i,href:(0,el.withDefaultRoute)(`https://${i.url}`,i.defaultRoute),isLink:!0,target:"_blank",children:["Visit   ",(0,t.jsx)(et.ExternalSmall,{})]}):null,!w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(H.MenuDivider,{}),h?null:(0,t.jsx)(K.MenuItemLocked,{children:"Instant Rollback"}),o?null:(0,t.jsx)(K.MenuItemLocked,{children:"Promote"}),L?null:(0,t.jsx)(K.MenuItemLocked,{children:"Redeploy"}),N&&!p?(0,t.jsx)(K.MenuItemLocked,{children:"Run Build"}):null,x?null:(0,t.jsx)(K.MenuItemLocked,{children:"Inspect Deployment"}),x?null:(0,t.jsx)(K.MenuItemLocked,{children:"View Source"}),x?null:(0,t.jsx)(K.MenuItemLocked,{children:"Copy URL"}),A&&!p?(0,t.jsx)(K.MenuItemLocked,{children:"Assign Domain"}):null,S&&!p?(0,t.jsx)(K.MenuItemLocked,{children:"Cancel Deployment"}):null,x?null:(0,t.jsxs)(K.MenuItemLocked,{children:["Visit   ",(0,t.jsx)(et.ExternalSmall,{})]})]})]});return a?O:(0,t.jsx)(Q.DotsMenu,{closeOnSelect:!1,children:O})}var ep=e.i(9443759),ex=e.i(4896100),eh=e.i(3184563);function ey(e){let{deployment:i}=e,n=(0,v.useRouter)(),{data:l}=(0,F.useProject)(i?.name);return(0,t.jsx)(R.EntityField,{thumbnail:l?(0,t.jsx)(O.ProjectAvatar,{project:l,size:22}):(0,t.jsx)(O.ProjectAvatarSkeleton,{size:22}),thumbnailSize:22,title:l?(0,t.jsx)(c.Link,{href:`/${n.query.teamSlug}/${l.name}`,title:l.name,children:l.name}):i?.name??null})}function eg(e){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(ef,{}),children:(0,t.jsx)(ej,{...e})})}function ej(e){let n,{deployment:l,deploymentsMap:a}=e,r=l?.meta?.originalDeploymentId,o=r?String(r):void 0;o&&(n=a?.get(o));let{data:d,isLoading:p}=(0,B.default)(n?void 0:o,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1});d&&(n=d);let x=(0,Y.useDeploymentLink)(n),h=(0,i.useMemo)(()=>n?(0,_.default)(n).hash:"",[n]);if(o){let e=l?.meta?.action==="promote"||l?.target==="production"&&n?.target!=="production";return(0,t.jsx)(R.EntityField,{title:(0,t.jsx)("div",{className:"flex h-[22px] flex-row gap-2 text-[var(--accents-6)]",children:p?(0,t.jsx)(s.Skeleton,{boxHeight:22,height:14,vcenter:!0,width:100}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid place-content-center",children:e?(0,t.jsx)(m.ArrowCircleUp,{}):(0,t.jsx)(u.RotateCounterClockwise,{})}),(0,t.jsxs)("span",{className:"flex min-w-0 items-center gap-[0.3em]",children:[e?"Production Rebuild":"Redeploy"," of"," ",n?(0,t.jsx)(c.Link,{className:"z-[2] flex min-w-0 text-inherit",href:x,title:n.host||"",variant:"secondary",prefetch:!1,children:h?(0,t.jsx)(S.default,{className:"overflow-hidden truncate whitespace-nowrap bg-transparent p-0 text-[13.5px] text-inherit",children:h}):n.host||""}):"a deleted deployment"]})]})}),titleSkeletonWidth:100})}return(0,t.jsx)(ek,{deployment:l,skeletonWidth:100})}function ek(e){let{deployment:i,skeletonWidth:n}=e;return i?(0,t.jsx)(R.EntityField,{description:(0,t.jsx)(z.DeploymentSource,{branchClassName:"text-[13.5px]",commitClassName:"text-[13.5px]",lineClassName:"gap-1 h-[22px] text-black",secondLineLinkClassName:"gap-2",deployment:i}),descriptionSkeletonWidth:n,title:null,titleSkeletonWidth:n}):(0,t.jsx)(ef,{})}function ef(){return(0,t.jsx)(R.EntityField,{className:"h-[44px]",description:null,descriptionSkeletonWidth:100,title:null,titleSkeletonWidth:100})}function eb(e){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)(eI,{...e}),children:(0,t.jsx)(ev,{...e})})}function ev(e){let{deployment:i}=e,{team:n}=(0,ei.useTeam)(),l=(0,ex.useDeploymentsPageRefreshInterval)(),s=e.projectIdOrName??i?.projectId??i?.name,{data:a}=(0,F.useProject)(s,ex.DEPLOYMENTS_PROJECT_API_PARAMS),{deployment:r}=(0,eh.useProjectProductionDeployment)(s,{config:{refreshInterval:l}}),o=i?.customEnvironment?.id&&!i.customEnvironment.slug,{data:c}=(0,f.useCustomEnvironments)(s,{revalidateIfStale:!1,skip:!o}),{data:u}=(0,d.useRollingRelease)({teamIdOrSlug:n?.slug,projectSlug:i?.name},{refreshInterval:l}),m=(0,Y.useDeploymentLink)(i),{can:p,isLoading:x}=(0,g.default)({projectIdOrName:s}),{deploymentTargetLabel:h}=(0,V.useDeploymentEnvironmentLabel)({deployment:i,customEnvironments:c?.customEnvironments});return(0,t.jsx)(eI,{...e,arePermissionsLoading:x,can:p,deploymentLink:m,deploymentTargetLabel:h,isCurrentProductionDeployment:r?.id===i?.uid,rollingRelease:u?.rollingRelease??void 0,project:a})}let eI=(0,i.memo)(function(e){let{deployment:s,deploymentsMap:d,isCurrentProductionDeployment:g,rollingRelease:f,redeploy:v,handleClickCreateAlias:S,handleCancelDeployment:A,handleClickRunInstantly:D,project:E,openRollbackModal:N,projectCellEnabled:L,deploymentLink:w,can:T,arePermissionsLoading:P,deploymentTargetLabel:B,skeleton:F,openCompleteRollingReleaseModal:O,openAbortRollingReleaseModal:z}=e,q=E?.lastAliasRequest?.type==="rollback"&&E.lastAliasRequest.toDeploymentId===s?.uid,V=E?.lastAliasRequest?.type==="rollback"&&E.lastAliasRequest.fromDeploymentId===s?.uid,Y=q&&E.lastAliasRequest?.requestedAt||s?.created||0,Q=(0,b.useAgo)(Y),H=s?(0,U.getGitInfoFromDeployment)(s):null,{value:J}=(0,k.useEnableNewInstantRollbackFlow)(),K=s?.meta?.deployHookId||void 0,X=(e,t)=>T?.(e,t)??!1,ee=!!(E&&P),et=s?.target!==null?j.Resource.Deployment:j.Resource.DeploymentPreview,ei=X(j.Action.Update,et),en=X(j.Action.Read,et),el=X(j.Action.Create,j.Resource.DeploymentRollback),es=X(j.Action.Create,j.Resource.Deployment),ea=X(j.Action.Create,j.Resource.DeploymentFromProductionBranch),er=!ee&&(es||ea||ei||en||el),eo=(0,i.useMemo)(()=>(0,_.default)(s).hash,[s]),ed=null,ec=e=>"number"==typeof s?.aliasAssigned?(0,t.jsx)(G.DeploymentAliasToolTipText,{datetime:s.aliasAssigned,eventName:e,showAgo:!0}):null,eu=f?.state==="ACTIVE"&&!!(f.canaryDeployment?.id&&f.canaryDeployment.id===s?.uid),ex=f?.state==="ACTIVE"&&!!(f.queuedDeploymentId&&f.queuedDeploymentId===s?.uid);if(g){let e=q?(0,t.jsx)(u.RotateCounterClockwise,{}):(0,t.jsx)(m.ArrowCircleUp,{});ed=(0,t.jsx)(o.Tooltip,{className:"translate-y-px",text:ec(q?"rollback":"promote"),children:(0,t.jsx)(n.Badge,{icon:e,size:"sm",variant:q?"amber-subtle":"blue-subtle",children:"Current"})})}else if(eu){let{activeStage:e}=f,i=e?.targetPercentage;ed=(0,t.jsx)(o.Tooltip,{className:"translate-y-px",text:(0,t.jsx)(G.DeploymentAliasToolTipText,{datetime:f.startedAt,eventName:"rollingRelease",showAgo:!0}),children:(0,t.jsx)(n.Badge,{icon:"number"==typeof i?(0,t.jsx)(W,{percentage:i}):null,size:"sm",variant:"blue-subtle",children:"Canary"})})}else V&&J?ed=(0,t.jsx)(o.Tooltip,{className:"translate-y-px",text:"number"==typeof E.lastAliasRequest?.requestedAt?(0,t.jsx)(G.DeploymentAliasToolTipText,{datetime:E.lastAliasRequest.requestedAt,eventName:"rollback",showAgo:!0}):null,children:(0,t.jsx)(n.Badge,{icon:(0,t.jsx)(p.CrossCircle,{}),size:"sm",variant:"red-subtle",children:"Rolled Back"})}):s?.readySubstate==="PROMOTED"&&(ed=(0,t.jsx)(o.Tooltip,{text:ec("promote"),children:(0,t.jsx)(x.Information,{color:"gray-900",size:14})}));return ex&&(ed=(0,t.jsx)(n.Badge,{icon:(0,t.jsx)(h.ClockDashed,{}),size:"sm",variant:"blue-subtle",children:"Upcoming Canary"})),s?.readySubstate==="STAGED"&&"production"===s.target&&(B=B?.concat(": Staged")),(0,t.jsxs)(I.Entity,{className:(0,ep.cn)("rounded border border-solid border-gray-alpha-400 md:border-0 md:[&:not(:first-of-type)]:rounded-t-[0px] md:[&:not(:first-of-type)]:border-t",{"deployment-entity":s,"shadow-[inset_4px_0_0_var(--geist-warning)] rounded-none":q&&g,"md:[&:not(:first-of-type)]:mt-[-1px]":F}),"data-testid":(0,y.tid)("deployments","deployment-entity",s?.uid??"no-uid"),disabledDotMenuTooltip:er?void 0:(0,t.jsxs)(t.Fragment,{children:["Additional permissions are required to manage Deployment."," ",(0,t.jsx)(c.Link,{href:"/docs/deployments/managing-deployments",variant:"highlight",children:"Learn More →"})]}),isDotMenuDisabled:!er,menuButtonProps:{"aria-label":"Deployment Actions","data-testid":(0,y.tid)("deployment-entity","dots-menu","button")},menuItems:s?(0,t.jsx)(em,{canPromoteToProduction:es,canReadDeployment:en,canRedeployProduction:ea,canRollbackDeployment:el,canUpdateDeployment:ei,deployment:s,handleCancelDeployment:()=>A?.(s),handleClickCreateAlias:()=>S?.(s),handleClickRollback:()=>{N&&N(g?void 0:s)},handleClickRunInstantly:()=>D?.(s),isRollingReleaseCanaryDeployment:eu,isRollingReleaseActive:f?.state==="ACTIVE",itemsOnly:!0,redeploy:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return v?.(...t)},rollingRelease:f,openCompleteRollingReleaseModal:O,openAbortRollingReleaseModal:z}):null,menuListTestId:`${s?.uid??"no-uid"}-dots-menu`,placeholder:!s,children:[s?(0,t.jsx)(C.PropagatedPropsOmitter,{children:(0,t.jsx)(c.Link,{className:"absolute -inset-4 z-[1]",href:w,prefetchStrategy:"hover"})}):null,(0,t.jsx)(R.EntityField,{"data-testid":(0,y.tid)("deployment-entity","target"),descriptionWrap:!1,description:s?(0,t.jsxs)(a.Stack,{align:"center",direction:"row",gap:1,style:{position:"relative",zIndex:1},children:[B,ed]}):null,descriptionSkeletonWidth:80,title:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(c.Link,{href:w,prefetchStrategy:"hover",style:{display:"flex",alignItems:"center",gap:8},title:s?.url,children:(0,t.jsx)(r.Text,{size:14,truncate:!0,weight:600,children:eo})})}),titleSkeletonWidth:220,minWidth:140}),(0,t.jsx)(R.EntityField,{description:(0,t.jsx)("span",{className:"block h-[20px]",children:(0,t.jsx)(M,{deployment:s,onlyBuild:!0})}),descriptionSkeletonWidth:146,descriptionWrap:!1,title:s?(0,t.jsx)(r.Text,{as:"span",style:{color:"var(--accents-6)",fontWeight:400},weight:500,children:(0,t.jsx)($.default,{deployment:s,label:!0,statusTextColor:"gray-900"})}):null,titleSkeletonWidth:146,width:146}),L?(0,t.jsx)(ey,{deployment:s}):null,(0,t.jsx)(eg,{deployment:s,deploymentsMap:d}),(0,t.jsx)(R.EntityField,{avatar:s?(0,t.jsx)(Z.CreatorAvatar,{deployment:s,showProviderIcon:!0,size:24}):null,className:"z-[2]",description:s?(0,t.jsxs)(l.RelativeTimeCard,{date:Y,side:"left",children:[Q,void 0===K&&(!s.meta?.originalDeploymentId&&H?.commitAuthorLogin?` by ${H.commitAuthorLogin}`:` by ${s?.creator.username}`),void 0!==K&&" via Deploy Hook"]}):null,right:!0})]})})},[2491304]],3641685:e=>{"use strict";e.s({default:()=>C,getFilter:()=>b,useFilterStatus:()=>I});var t=e.i(6645307),i=e.i(6530772),n=e.i(5610210),l=e.i(5535439),s=e.i(674684),a=e.i(889716),r=e.i(5163670),o=e.i(8084653),d=e.i(3921802),c=e.i(1190215),u=e.i(653558),m=e.i(4105925),p=e.i(2733203),x=e.i(9443759),h=e.i(7573892),y=e.i(9802771);let g={READY:{label:"Ready",className:"bg-[var(--geist-cyan)]",key:"ready"},ERROR:{label:"Error",className:"bg-[var(--geist-error)]",key:"error"},BUILDING:{label:"Building",className:"bg-[var(--geist-warning)]",key:"building"},QUEUED:{label:"Queued",className:"bg-[var(--accents-2)]",key:"queued"},INITIALIZING:{label:"Provisioning",className:"bg-[var(--accents-2)]",key:"initializing"},CANCELED:{label:"Canceled",className:"bg-[var(--accents-2)]",key:"canceled"}},j=["ready","error","building","queued","initializing"],k="empty";function f(e){let{status:i,...l}=e;return(0,t.jsx)("span",{className:(0,n.clsx)("inline-block w-[10px] h-[10px] rounded-[5px] border border-solid border-[var(--geist-background)] transition-colors duration-200 ease",i),...l})}function b(e){let t=Object.keys(e).filter(t=>e[t]).map(e=>e.toUpperCase());return 0===t.length?k:t.join(",")}let v={[g.INITIALIZING.key]:!0,[g.READY.key]:!0,[g.ERROR.key]:!0,[g.BUILDING.key]:!0,[g.QUEUED.key]:!0,[g.CANCELED.key]:!1};function I(){let e=(0,s.useRouter)(),t=(0,l.usePathname)(),n=(0,l.useSearchParams)(),[a,r]=(0,i.useState)(!0),[o,d]=(0,i.useState)(v);return(0,i.useEffect)(()=>{if(a&&e.isReady){var t;d((t=e.query.status)?t===k?{[g.INITIALIZING.key]:!1,[g.READY.key]:!1,[g.ERROR.key]:!1,[g.BUILDING.key]:!1,[g.QUEUED.key]:!1,[g.CANCELED.key]:!1}:{[g.INITIALIZING.key]:t.includes(g.INITIALIZING.key),[g.READY.key]:t.includes(g.READY.key),[g.ERROR.key]:t.includes(g.ERROR.key),[g.BUILDING.key]:t.includes(g.BUILDING.key),[g.QUEUED.key]:t.includes(g.QUEUED.key),[g.CANCELED.key]:t.includes(g.CANCELED.key)}:{[g.INITIALIZING.key]:!0,[g.READY.key]:!0,[g.ERROR.key]:!0,[g.BUILDING.key]:!0,[g.QUEUED.key]:!0,[g.CANCELED.key]:!1}),r(!1)}},[e.query.status,e.isReady,a]),(0,i.useEffect)(()=>{if(a)return;let i=new URLSearchParams(n??{}),l=function(e){let t=Object.keys(e).filter(t=>e[t]).sort().join(",");return j.sort().join(",")===t?null:""===t?k:t}(o);l?i.set("status",l):i.delete("status"),n&&n.get("status")!==i.get("status")&&e.isReady&&e.replace({pathname:t,query:i.toString()},void 0,{scroll:!1})},[a,o,e,e.query.status,n,t]),{isInitialStatusItems:Object.entries(o).every(e=>{let[t,i]=e;return v[t]===i}),selectedStatusItems:o,clearStatus(){d(v)},handleSelectStatusItem:e=>{d(t=>{let i={...t,[e]:!t[e]};return h.analytics.track(y.AnalyticsEvent.DEPLOYMENT_OVERVIEW_FILTERS_STATUS,{status:JSON.stringify(i)}),i})},selectStatusFilterValues:Object.keys(o).filter(e=>o[e]).map(e=>e.toUpperCase())}}let R=(0,t.jsx)("svg",{className:"ml-auto",fill:"none",height:"18",shapeRendering:"geometricPrecision",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",viewBox:"0 0 24 24",width:"18",children:(0,t.jsx)("path",{d:"M20 6L9 17l-5-5"})});function C(e){let{className:l,selectedStatusItems:s,handleSelectStatusItem:h,menuButtonClassName:y,skeleton:j=!1,position:k="right"}=e,[b,v]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{j||v(!0)},[j]),(0,t.jsx)("div",{className:(0,n.clsx)("left"===k&&"mr-[var(--geist-space-2x)] max-[600px]:mb-[var(--geist-space-2x)] max-[600px]:mr-0","right"===k&&"ml-0 mr-[var(--geist-space-2x)] max-[997px]:mb-[var(--geist-space-2x)] max-[997px]:ml-0 max-[997px]:mr-[var(--geist-space-2x)] max-[600px]:mx-0",l),children:(0,t.jsx)(r.Skeleton,{show:!!(j&&!b),children:(0,t.jsxs)(c.MenuContainer,{closeOnSelect:!1,children:[(0,t.jsx)(p.MenuButton,{align:"flex-grow",className:(0,x.cn)(y),showChevron:!0,type:"secondary",children:(0,t.jsxs)(a.Stack,{align:"center",direction:"row",flex:1,children:[(0,t.jsx)("div",{className:"[&>span]:ease w-[45px] text-left [&>span]:relative [&>span]:border [&>span]:border-solid [&>span]:border-[var(--themed-bg,var(--ds-background-100))] [&>span]:transition-colors [&>span]:duration-200",children:Object.values(g).map((e,i)=>{let{key:n,className:l}=e;return(0,t.jsx)(f,{status:s[n]?l:"bg-[var(--geist-background)] shadow-[inset_0_0_0_1px_var(--accents-2)]",style:{left:`${-4*i}px`}},n)})}),(0,t.jsx)("span",{className:"font-normal text-[var(--geist-foreground)] max-[600px]:text-sm",children:"Status"}),(0,t.jsxs)(d.Badge,{className:"-mr-1 ml-2 h-5 min-w-8 bg-gray-300 px-1.5 text-xs font-medium tabular-nums",variant:"gray-subtle",children:[Object.values(s).filter(Boolean).length,"/",Object.values(g).length]})]})}),(0,t.jsx)(u.Menu,{width:186,children:Object.values(g).map(e=>{let{key:i,className:n,label:l}=e;return(0,t.jsxs)(m.MenuItem,{onClick:()=>h(i),children:[(0,t.jsx)(f,{status:n}),(0,t.jsx)(o.Text,{className:"ml-[var(--geist-space-2x)]",children:l}),s[i]?R:null]},i)})})]})})})}},8340572:e=>{"use strict";e.s({FilteredBranchEntityBar:()=>T},8340572);var t=e.i(6645307),i=e.i(6530772),n=e.i(4105925),l=e.i(5163670),s=e.i(8811733),a=e.i(889716),r=e.i(8084653),o=e.i(584439),d=e.i(2362802),c=e.i(4203388),u=e.i(3138389),m=e.i(9945435),p=e.i(3979315),x=e.i(7573892),h=e.i(2615494),y=e.i(7337588),g=e.i(2145411),j=e.i(3604170),k=e.i(878537),f=e.i(5196742),b=e.i(5938635),v=e.i(8188445),I=e.i(1790199),R=e.i(3821772),C=e.i(555528),S=e.i(4968913),A=e.i(6465700);function D(e){let{children:i,header:n,text:l}=e;return(0,t.jsx)(C.Tooltip,{maxWidth:278,text:(0,t.jsxs)(a.Stack,{as:"span",gap:0,children:[(0,t.jsx)(a.Stack,{align:"center",direction:"row",gap:1,justify:"center",children:n}),(0,t.jsx)(I.Balancer,{children:(0,t.jsx)(r.Text,{as:"span",children:l})})]}),children:i})}let E={building:{text:"Link can be shared now—it will open a page with a loading indicator until build completes",content:(0,t.jsx)(R.Spinner,{style:{overflow:"revert"},size:16})},ready:{text:"View of latest deployment on branch—updates automatically",content:(0,t.jsx)(A.InformationFillSmall,{})},failed:{text:"Domain was not updated because checks failed",content:(0,t.jsx)(S.Stop,{})}};function N(e){let{state:i}=e;return(0,t.jsx)(D,{header:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u.GitBranch,{}),(0,t.jsx)(r.Text,{as:"span",weight:600,children:"Branch Link"})]}),text:E[i].text,children:E[i].content})}var L=e.i(6859825),w=e.i(3184563);let T=(0,i.memo)(e=>{let{project:I,branch:R,deployments:C,isLoading:S,onClearBranch:A}=e,D=function(e){let t=e?.find(e=>"READY"===e.state);if(t)return t;let i=e?.find(e=>"BUILDING"===e.state);return i||null}(C),E=(0,o.useToasts)(),{deployment:T}=(0,w.useProjectProductionDeployment)(I?.id),{data:M,isValidating:P}=(0,b.default)(D?.uid,{revalidateOnFocus:!1,revalidateOnReconnect:!1,revalidateOnMount:!0}),U=(0,f.getGitInfoFromDeployment)(D),B=I?.link?.type||"github",F=U?.prUrl??U?.refUrl??U?.commitUrl??"",O=(0,L.getGitMeta)(T?.meta),_=S||P,z=M?.alias[0]??M?.url,G=((e,t)=>{let n=(0,i.useRef)(0);return t||(n.current=Math.random()),(0,i.useMemo)(()=>e(),[n.current])})(()=>(0,t.jsxs)(y.Entity,{className:"shadow-small border border-[var(--ds-gray-alpha-400)] !bg-[var(--ds-background-100)] bg-clip-padding",filled:!0,placeholder:_,thumbnail:(0,t.jsx)(j.EntityThumbnail,{circular:!0,size:30,children:(0,t.jsx)(u.GitBranch,{style:{transform:"translateX(0.5px)"}})}),...!!F&&!_&&{menuItems:(0,t.jsxs)(t.Fragment,{children:[z?(0,t.jsx)(n.MenuItem,{href:`https://${z}`,isLink:!0,prefix:(0,t.jsx)(m.PreviewEye,{}),target:"_blank",children:"Visit Preview"}):null,(0,t.jsxs)(n.MenuItem,{onClick:()=>{(0,v.copyToClipboard)(F),E&&E.current&&E.current.message("Copied URL to clipboard!")},prefix:(0,t.jsx)(c.Copy,{}),children:["Copy ",U?.prUrl?"PR":"Branch"," URL ",(0,t.jsx)(s.Spacer,{})," "]}),(0,t.jsx)(n.MenuItem,{onClick:A,prefix:(0,t.jsx)(p.Cross,{}),type:"error",children:"Remove Filter"})]})},children:[(0,t.jsx)(g.EntityField,{description:F?(0,t.jsxs)("div",{children:["Branch link for"," ",(0,t.jsx)(d.Link,{href:F,children:(0,t.jsx)(r.Text,{as:"span",color:"inherit",monospace:!0,children:R})})]}):(0,t.jsx)("span",{children:R}),title:z?(0,t.jsxs)(a.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(d.Link,{className:"inline font-medium",href:`https://${z}`,onClick:()=>{x.analytics.track(h.CoreAnalyticsEvents.CLICK_EVENT,{click_name:"click_button",click_value:"deployments_page_primary_preview_deployments"})},variant:"highlight",children:z}),(0,t.jsx)(N,{state:D?.readyState==="BUILDING"?"building":"ready"})]}):(0,t.jsx)("div",{className:"mb-[2px]",children:"No successful deploy, yet."})}),(0,t.jsx)(g.EntityField,{className:"sm:max-w-fit",right:!0,children:(0,t.jsx)(k.default,{center:!0,row:!0,children:_?(0,t.jsxs)(k.default,{center:!0,className:"flex flex-row gap-4",row:!0,children:[(0,t.jsx)(l.Skeleton,{height:32,width:130}),(0,t.jsx)(l.Skeleton,{style:{width:32,height:32}})]}):(0,t.jsxs)(t.Fragment,{children:[!!U?.prUrl&&(0,t.jsx)(d.ButtonLink,{href:U.prUrl,prefix:(0,t.jsx)("span",{className:"size-4 [&>svg]:size-4",children:O?.logo}),size:"small",tab:!0,type:"secondary",children:"github"===B?"View PR":"View Changes"}),!U?.prUrl&&!!U?.refUrl&&(0,t.jsx)(d.ButtonLink,{href:U?.refUrl,prefix:(0,t.jsx)(u.GitBranch,{style:{transform:"translateX(4px)"}}),size:"small",tab:!0,type:"secondary",children:"View Branch"})]})})})]}),_);return _||R?G:null})}}]);

//# sourceMappingURL=572868e800a4f5a3.js.map
//# debugId=f9c66a14-cead-5d58-90bd-7bd65e01841f
