
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="bb5c8a80-0976-5d6f-8ee0-5b8bb15a9eef")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{6977636:t=>{"use strict";var{m:e,e:n}=t,i=t.r(6530772),r="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},o=i.useState,s=i.useEffect,a=i.useLayoutEffect,l=i.useDebugValue;function d(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!r(t,n)}catch(t){return!0}}var c="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(t,e){return e()}:function(t,e){var n=e(),i=o({inst:{value:n,getSnapshot:e}}),r=i[0].inst,c=i[1];return a(function(){r.value=n,r.getSnapshot=e,d(r)&&c({inst:r})},[t,n,e]),s(function(){return d(r)&&c({inst:r}),t(function(){d(r)&&c({inst:r})})},[t]),l(n),n};n.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:c},6373509:t=>{"use strict";var{m:e,e:n}=t;e.exports=t.r(6977636)},4697849:t=>{"use strict";var{m:e,e:n}=t,i=t.r(6530772),r=t.r(6373509),o="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},s=r.useSyncExternalStore,a=i.useRef,l=i.useEffect,d=i.useMemo,c=i.useDebugValue;n.useSyncExternalStoreWithSelector=function(t,e,n,i,r){var u=a(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;var p=s(t,(u=d(function(){function t(t){if(!l){if(l=!0,s=t,t=i(t),void 0!==r&&h.hasValue){var e=h.value;if(r(e,t))return a=e}return a=t}if(e=a,o(s,t))return e;var n=i(t);return void 0!==r&&r(e,n)?e:(s=t,a=n)}var s,a,l=!1,d=void 0===n?null:n;return[function(){return t(e())},null===d?void 0:function(){return t(d())}]},[e,n,i,r]))[0],u[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),c(p),p}},1898606:t=>{"use strict";var{m:e,e:n}=t;e.exports=t.r(4697849)},2229718:[t=>{"use strict";t.s({useMachine:()=>tP},2229718);var e=t.i(6530772),n=t.i(5261574);t.s({$:()=>O,A:()=>N,L:()=>b,M:()=>P,N:()=>s,O:()=>tN,P:()=>B,R:()=>F,S:()=>o,T:()=>T,U:()=>tO,V:()=>l,W:()=>u,X:()=>d,a:()=>j,b:()=>tt,c:()=>w,d:()=>tn,e:()=>G,f:()=>te,g:()=>Z,h:()=>Q,i:()=>J,j:()=>td,k:()=>tD,l:()=>X,m:()=>g,n:()=>tx,o:()=>function t(e,n,i,r){if("string"==typeof n){let t=ta(e,n).next(i,r);return t&&t.length?t:e.next(i,r)}if(1===Object.keys(n).length){let o=Object.keys(n),s=t(ta(e,o[0]),n[o[0]],i,r);return s&&s.length?s:e.next(i,r)}let o=[];for(let s of Object.keys(n)){let a=n[s];if(!a)continue;let l=t(ta(e,s),a,i,r);l&&o.push(...l)}return o.length?o:e.next(i,r)},p:()=>ty,q:()=>h,r:()=>tS,s:()=>tm,t:()=>y,u:()=>ts,v:()=>m,w:()=>K,x:()=>tl,y:()=>tT,z:()=>E},2246298),t.s({devToolsAdapter:()=>i},36443);let i=t=>{if("undefined"==typeof window)return;let e=function(){let t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:globalThis;if(t.__xstate__)return t.__xstate__}();e&&e.register(t)};class r{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){let e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){let t=this._current;this._process(t.value),this._current=t.next}this._last=null}}let o=".",s="",a="xstate.init",l="xstate.error",d="xstate.stop";function c(t,e){return{type:`xstate.done.state.${t}`,output:e}}function u(t,e){return{type:`xstate.error.actor.${t}`,error:e,actorId:t}}function h(t){return{type:a,input:t}}function p(t){setTimeout(()=>{throw t})}let f="function"==typeof Symbol&&Symbol.observable||"@@observable";function m(t){if(_(t))return t;let e=[],n="";for(let i=0;i<t.length;i++){switch(t.charCodeAt(i)){case 92:n+=t[i+1],i++;continue;case 46:e.push(n),n="";continue}n+=t[i]}return e.push(n),e}function v(t){var e;return(e=t)&&"object"==typeof e&&"machine"in e&&"value"in e?t.value:"string"!=typeof t?t:function(t){if(1===t.length)return t[0];let e={},n=e;for(let e=0;e<t.length-1;e++)if(e===t.length-2)n[t[e]]=t[e+1];else{let i=n;n={},i[t[e]]=n}return e}(m(t))}function g(t,e){let n={},i=Object.keys(t);for(let r=0;r<i.length;r++){let o=i[r];n[o]=e(t[o],o,t,r)}return n}function y(t){var e;return void 0===t?[]:_(e=t)?e:[e]}function x(t,e,n,i){return"function"==typeof t?t({context:e,event:n,self:i}):t}function _(t){return Array.isArray(t)}function j(t){var e;return(_(e=t)?e:[e]).map(t=>void 0===t||"string"==typeof t?{target:t}:t)}function S(t){if(void 0!==t&&""!==t)return y(t)}function b(t,e,n){let i="object"==typeof t,r=i?t:void 0;return{next:(i?t.next:t)?.bind(r),error:(i?t.error:e)?.bind(r),complete:(i?t.complete:n)?.bind(r)}}function w(t,e){return`${e}.${t}`}function E(t,e){let n=e.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!n)return t.implementations.actors[e];let[,i,r]=n,o=t.getStateNodeById(r).config.invoke;return(Array.isArray(o)?o[i]:o).src}function I(t,e){return`${t.sessionId}.${e}`}let A=0,D=!1,O=1,T=function(t){return t[t.NotStarted=0]="NotStarted",t[t.Running=1]="Running",t[t.Stopped=2]="Stopped",t}({}),C={clock:{setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t)},logger:console.log.bind(console),devTools:!1};class M{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new r(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=T.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this._systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];let n={...C,...e},{clock:i,logger:o,parent:s,syncSnapshot:a,id:l,systemId:d,inspect:c}=n;this.system=s?s.system:function(t,e){let n=new Map,i=new Map,r=new WeakMap,o=new Set,s={},{clock:a,logger:l}=e,d={schedule:function(t,e,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Math.random().toString(36).slice(2),o={source:t,target:e,event:n,delay:i,id:r,startedAt:Date.now()},l=I(t,r);c._snapshot._scheduledEvents[l]=o;let d=a.setTimeout(()=>{delete s[l],delete c._snapshot._scheduledEvents[l],c._relay(t,e,n)},i);s[l]=d},cancel:(t,e)=>{let n=I(t,e),i=s[n];delete s[n],delete c._snapshot._scheduledEvents[n],void 0!==i&&a.clearTimeout(i)},cancelAll:t=>{for(let e in c._snapshot._scheduledEvents){let n=c._snapshot._scheduledEvents[e];n.source===t&&d.cancel(t,n.id)}}},c={_snapshot:{_scheduledEvents:(e?.snapshot&&e.snapshot.scheduler)??{}},_bookId:()=>`x:${A++}`,_register:(t,e)=>(n.set(t,e),t),_unregister:t=>{n.delete(t.sessionId);let e=r.get(t);void 0!==e&&(i.delete(e),r.delete(t))},get:t=>i.get(t),_set:(t,e)=>{let n=i.get(t);if(n&&n!==e)throw Error(`Actor with system ID '${t}' already exists.`);i.set(t,e),r.set(e,t)},inspect:t=>{let e=b(t);return o.add(e),{unsubscribe(){o.delete(e)}}},_sendInspectionEvent:e=>{if(!o.size)return;let n={...e,rootId:t.sessionId};o.forEach(t=>t.next?.(n))},_relay:(t,e,n)=>{c._sendInspectionEvent({type:"@xstate.event",sourceRef:t,actorRef:e,event:n}),e._send(n)},scheduler:d,getSnapshot:()=>({_scheduledEvents:{...c._snapshot._scheduledEvents}}),start:()=>{let t=c._snapshot._scheduledEvents;for(let e in c._snapshot._scheduledEvents={},t){let{source:n,target:i,event:r,delay:o,id:s}=t[e];d.schedule(n,i,r,o,s)}},_clock:a,_logger:l};return c}(this,{clock:i,logger:o}),c&&!s&&this.system.inspect(b(c)),this.sessionId=this.system._bookId(),this.id=l??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=s,this._syncSnapshot=a,this.options=n,this.src=n.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:t=>{this._deferred.push(t)},system:this.system,stopChild:t=>{if(t._parent!==this)throw Error(`Cannot stop child actor ${t.id} of ${this.id} because it is not a child`);t._stop()},emit:t=>{let e=this.eventListeners.get(t.type),n=this.eventListeners.get("*");if(e||n)for(let i of[...e?e.values():[],...n?n.values():[]])i(t)},actionExecutor:t=>{let e=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:t.type,params:t.params}}),!t.exec)return;let e=D;try{D=!0,t.exec(t.info,t.params)}finally{D=e}};this._processingStatus===T.Running?e():this._deferred.push(e)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),d&&(this._systemId=d,this.system._set(d,this)),this._initState(e?.snapshot??e?.state),d&&"active"!==this._snapshot.status&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(t){this._snapshot={status:"error",output:void 0,error:t}}}update(t,e){let n;for(this._snapshot=t;n=this._deferred.shift();)try{n()}catch(e){this._deferred.length=0,this._snapshot={...t,status:"error",error:e}}switch(this._snapshot.status){case"active":for(let e of this.observers)try{e.next?.(t)}catch(t){p(t)}break;case"done":var i;for(let e of this.observers)try{e.next?.(t)}catch(t){p(t)}this._stopProcedure(),this._complete(),this._doneEvent=(i=this.id,{type:`xstate.done.actor.${i}`,output:this._snapshot.output,actorId:i}),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error)}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,n){let i=b(t,e,n);if(this._processingStatus!==T.Stopped)this.observers.add(i);else switch(this._snapshot.status){case"done":try{i.complete?.()}catch(t){p(t)}break;case"error":{let t=this._snapshot.error;if(i.error)try{i.error(t)}catch(t){p(t)}else p(t)}}return{unsubscribe:()=>{this.observers.delete(i)}}}on(t,e){let n=this.eventListeners.get(t);n||(n=new Set,this.eventListeners.set(t,n));let i=e.bind(void 0);return n.add(i),{unsubscribe:()=>{n.delete(i)}}}start(){if(this._processingStatus===T.Running)return this;this._syncSnapshot&&this.subscribe({next:t=>{"active"===t.status&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:t})},error:()=>{}}),this.system._register(this.sessionId,this),this._systemId&&this.system._set(this._systemId,this),this._processingStatus=T.Running;let t=h(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(t){return this._snapshot={...this._snapshot,status:"error",error:t},this._error(t),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,n;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(t){n={err:t}}if(n){let{err:t}=n;this._snapshot={...this._snapshot,status:"error",error:t},this._error(t);return}this.update(e,t),t.type===d&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===T.Stopped||((this.mailbox.clear(),this._processingStatus===T.NotStarted)?this._processingStatus=T.Stopped:this.mailbox.enqueue({type:d})),this}stop(){if(this._parent)throw Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(let t of this.observers)try{t.complete?.()}catch(t){p(t)}this.observers.clear()}_reportError(t){if(!this.observers.size){this._parent||p(t);return}let e=!1;for(let n of this.observers){let i=n.error;e||=!i;try{i?.(t)}catch(t){p(t)}}this.observers.clear(),e&&p(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,u(this.id,t))}_stopProcedure(){return this._processingStatus!==T.Running||(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new r(this._process.bind(this)),this._processingStatus=T.Stopped,this.system._unregister(this)),this}_send(t){this._processingStatus!==T.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){let{devTools:t}=this.options;t&&("function"==typeof t?t:i)(this)}toJSON(){return{xstate$$type:O,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[f](){return this}getSnapshot(){return this._snapshot}}function N(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];let[r]=n;return new M(t,r)}function k(t,e,n,i,r){let{sendId:o}=r;return[e,{sendId:"function"==typeof o?o(n,i):o},void 0]}function R(t,e){t.defer(()=>{t.system.scheduler.cancel(t.self,e.sendId)})}function P(t){function e(t,e){}return e.type="xstate.cancel",e.sendId=t,e.resolve=k,e.execute=R,e}function $(t,e,n,i,r){let o,s,{id:a,systemId:l,src:d,input:c,syncSnapshot:u}=r,h="string"==typeof d?E(e.machine,d):d,p="function"==typeof a?a(n):a;return h&&(o="function"==typeof c?c({context:e.context,event:n.event,self:t.self}):c,s=N(h,{id:p,src:d,parent:t.self,syncSnapshot:u,systemId:l,input:o})),[tO(e,{children:{...e.children,[p]:s}}),{id:a,systemId:l,actorRef:s,src:d,input:o},void 0]}function L(t,e){let{actorRef:n}=e;n&&t.defer(()=>{n._processingStatus!==T.Stopped&&n.start()})}function B(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];let[i,{id:r,systemId:o,input:s,syncSnapshot:a=!1}={}]=e;function l(t,e){}return l.type="xstate.spawnChild",l.id=r,l.systemId=o,l.src=i,l.input=s,l.syncSnapshot=a,l.resolve=$,l.execute=L,l}function U(t,e,n,i,r){let{actorRef:o}=r,s="function"==typeof o?o(n,i):o,a="string"==typeof s?e.children[s]:s,l=e.children;return a&&(l={...l},delete l[a.id]),[tO(e,{children:l}),a,void 0]}function W(t,e){if(e){if(t.system._unregister(e),e._processingStatus!==T.Running)return void t.stopChild(e);t.defer(()=>{t.stopChild(e)})}}function F(t){function e(t,e){}return e.type="xstate.stopChild",e.actorRef=t,e.resolve=U,e.execute=W,e}function G(t,e,n,i){let{machine:r}=i,o="function"==typeof t,s=o?t:r.implementations.guards["string"==typeof t?t:t.type];if(!o&&!s)throw Error(`Guard '${"string"==typeof t?t:t.type}' is not implemented.'.`);if("function"!=typeof s)return G(s,e,n,i);let a={context:e,event:n},l=o||"string"==typeof t?void 0:"params"in t?"function"==typeof t.params?t.params({context:e,event:n}):t.params:void 0;return"check"in s?s.check(i,a,s):s(a,l)}let V=t=>"atomic"===t.type||"final"===t.type;function H(t){return Object.values(t.states).filter(t=>"history"!==t.type)}function z(t,e){let n=[];if(e===t)return n;let i=t.parent;for(;i&&i!==e;)n.push(i),i=i.parent;return n}function J(t){let e=new Set(t),n=q(e);for(let t of e)if("compound"!==t.type||n.get(t)&&n.get(t).length){if("parallel"===t.type){for(let n of H(t))if("history"!==n.type&&!e.has(n))for(let t of to(n))e.add(t)}}else to(t).forEach(t=>e.add(t));for(let t of e){let n=t.parent;for(;n;)e.add(n),n=n.parent}return e}function q(t){let e=new Map;for(let n of t)e.has(n)||e.set(n,[]),n.parent&&(e.has(n.parent)||e.set(n.parent,[]),e.get(n.parent).push(n));return e}function Y(t,e){return function t(e,n){let i=n.get(e);if(!i)return{};if("compound"===e.type){let t=i[0];if(!t)return{};if(V(t))return t.key}let r={};for(let e of i)r[e.key]=t(e,n);return r}(t,q(J(e)))}function X(t,e){return"compound"===e.type?H(e).some(e=>"final"===e.type&&t.has(e)):"parallel"===e.type?H(e).every(e=>X(t,e)):"final"===e.type}let K=t=>"#"===t[0];function Q(t,e){return t.transitions.get(e)||[...t.transitions.keys()].filter(t=>{if("*"===t)return!0;if(!t.endsWith(".*"))return!1;let n=t.split("."),i=e.split(".");for(let t=0;t<n.length;t++){let e=n[t],r=i[t];if("*"===e)return t===n.length-1;if(e!==r)return!1}return!0}).sort((t,e)=>e.length-t.length).flatMap(e=>t.transitions.get(e))}function Z(t){let e=t.config.after;return e?Object.keys(e).flatMap(n=>{let i=e[n],r=Number.isNaN(+n)?n:+n,o=(e=>{var n;let i=(n=t.id,{type:`xstate.after.${e}.${n}`}),r=i.type;return t.entry.push(tN(i,{id:r,delay:e})),t.exit.push(P(r)),r})(r);return y("string"==typeof i?{target:i}:i).map(t=>({...t,event:o,delay:r}))}).map(e=>{let{delay:n}=e;return{...tt(t,e.event,e),delay:n}}):[]}function tt(t,e,n){let i=S(n.target),r=n.reenter??!1,s=function(t,e){if(void 0!==e)return e.map(e=>{if("string"!=typeof e)return e;if(K(e))return t.machine.getStateNodeById(e);let n=e[0]===o;if(n&&!t.parent)return tl(t,e.slice(1));let i=n?t.key+e:e;if(t.parent)try{return tl(t.parent,i)}catch(e){throw Error(`Invalid transition definition for state node '${t.id}':
${e.message}`)}throw Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}(t,i),a={...n,actions:y(n.actions),guard:n.guard,target:s,source:t,reenter:r,eventType:e,toJSON:()=>({...a,source:`#${t.id}`,target:s?s.map(t=>`#${t.id}`):void 0})};return a}function te(t){let e=new Map;if(t.config.on)for(let n of Object.keys(t.config.on)){if(n===s)throw Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');let i=t.config.on[n];e.set(n,j(i).map(e=>tt(t,n,e)))}if(t.config.onDone){let n=`xstate.done.state.${t.id}`;e.set(n,j(t.config.onDone).map(e=>tt(t,n,e)))}for(let n of t.invoke){if(n.onDone){let i=`xstate.done.actor.${n.id}`;e.set(i,j(n.onDone).map(e=>tt(t,i,e)))}if(n.onError){let i=`xstate.error.actor.${n.id}`;e.set(i,j(n.onError).map(e=>tt(t,i,e)))}if(n.onSnapshot){let i=`xstate.snapshot.${n.id}`;e.set(i,j(n.onSnapshot).map(e=>tt(t,i,e)))}}for(let n of t.after){let t=e.get(n.eventType);t||(t=[],e.set(n.eventType,t)),t.push(n)}return e}function tn(t,e){let n="string"==typeof e?t.states[e]:e?t.states[e.target]:void 0;if(!n&&e)throw Error(`Initial state node "${e}" not found on parent state node #${t.id}`);let i={source:t,actions:e&&"string"!=typeof e?y(e.actions):[],eventType:null,reenter:!1,target:n?[n]:[],toJSON:()=>({...i,source:`#${t.id}`,target:n?[`#${n.id}`]:[]})};return i}function ti(t){let e=S(t.config.target);return e?{target:e.map(e=>"string"==typeof e?tl(t.parent,e):e)}:t.parent.initial}function tr(t){return"history"===t.type}function to(t){let e=ts(t);for(let n of e)for(let i of z(n,t))e.add(i);return e}function ts(t){let e=new Set;return!function t(n){if(!e.has(n)){if(e.add(n),"compound"===n.type)t(n.initial.target[0]);else if("parallel"===n.type)for(let e of H(n))t(e)}}(t),e}function ta(t,e){if(K(e))return t.machine.getStateNodeById(e);if(!t.states)throw Error(`Unable to retrieve child state '${e}' from '${t.id}'; no child states exist.`);let n=t.states[e];if(!n)throw Error(`Child state '${e}' does not exist on '${t.id}'`);return n}function tl(t,e){if("string"==typeof e&&K(e))try{return t.machine.getStateNodeById(e)}catch{}let n=m(e).slice(),i=t;for(;n.length;){let t=n.shift();if(!t.length)break;i=ta(i,t)}return i}function td(t,e){if("string"==typeof e){let n=t.states[e];if(!n)throw Error(`State '${e}' does not exist on '${t.id}'`);return[t,n]}let n=Object.keys(e),i=n.map(e=>ta(t,e)).filter(Boolean);return[t.machine.root,t].concat(i,n.reduce((n,i)=>{let r=ta(t,i);if(!r)return n;let o=td(r,e[i]);return n.concat(o)},[]))}function tc(t,e){let n=t;for(;n.parent&&n.parent!==e;)n=n.parent;return n.parent===e}function tu(t,e,n){let i=new Set;for(let r of t){let t=!1,o=new Set;for(let s of i)if(function(t,e){let n=new Set(t),i=new Set(e);for(let t of n)if(i.has(t))return!0;for(let t of i)if(n.has(t))return!0;return!1}(tf([r],e,n),tf([s],e,n)))if(tc(r.source,s.source))o.add(s);else{t=!0;break}if(!t){for(let t of o)i.delete(t);i.add(r)}}return Array.from(i)}function th(t,e){if(!t.target)return[];let n=new Set;for(let i of t.target)if(tr(i))if(e[i.id])for(let t of e[i.id])n.add(t);else for(let t of th(ti(i),e))n.add(t);else n.add(i);return[...n]}function tp(t,e){let n=th(t,e);if(!n)return;if(!t.reenter&&n.every(e=>e===t.source||tc(e,t.source)))return t.source;let i=function(t){let[e,...n]=t;for(let t of z(e,void 0))if(n.every(e=>tc(e,t)))return t}(n.concat(t.source));return i||(t.reenter?void 0:t.source.machine.root)}function tf(t,e,n){let i=new Set;for(let r of t)if(r.target?.length){let t=tp(r,n);for(let n of(r.reenter&&r.source===t&&i.add(t),e))tc(n,t)&&i.add(n)}return[...i]}function tm(t,e,n,i,r,o){if(!t.length)return e;let s=new Set(e._nodes),a=e.historyValue,l=tu(t,s,a),d=e;r||([d,a]=function(t,e,n,i,r,o,s,a){let l,d=t,c=tf(i,r,o);for(let t of(c.sort((t,e)=>e.order-t.order),c))for(let e of function(t){return Object.keys(t.states).map(e=>t.states[e]).filter(t=>"history"===t.type)}(t)){let n;n="deep"===e.history?e=>V(e)&&tc(e,t):e=>e.parent===t,(l??={...o})[e.id]=Array.from(r).filter(n)}for(let t of c)d=ty(d,e,n,[...t.exit,...t.invoke.map(t=>F(t.id))],s,void 0),r.delete(t);return[d,l||o]}(d,i,n,l,s,a,o,n.actionExecutor)),d=function(t,e,n,i,r,o,s,a){let l=t,d=new Set,u=new Set;(function(t,e,n,i){for(let r of t){let t=tp(r,e);for(let o of r.target||[])!tr(o)&&(r.source!==o||r.source!==t||r.reenter)&&(i.add(o),n.add(o)),tv(o,e,n,i);for(let o of th(r,e)){let s=z(o,t);t?.type==="parallel"&&s.push(t),tg(i,e,n,s,!r.source.parent&&r.reenter?void 0:t)}}})(i,s,u,d),a&&u.add(t.machine.root);let h=new Set;for(let t of[...d].sort((t,e)=>t.order-e.order)){r.add(t);let i=[];for(let e of(i.push(...t.entry),t.invoke))i.push(B(e.src,{...e,syncSnapshot:!!e.onSnapshot}));if(u.has(t)){let e=t.initial.actions;i.push(...e)}if(l=ty(l,e,n,i,o,t.invoke.map(t=>t.id)),"final"===t.type){let i=t.parent,s=i?.type==="parallel"?i:i?.parent,a=s||t;for(i?.type==="compound"&&o.push(c(i.id,void 0!==t.output?x(t.output,l.context,e,n.self):void 0));s?.type==="parallel"&&!h.has(s)&&X(r,s);)h.add(s),o.push(c(s.id)),a=s,s=s.parent;if(s)continue;l=tO(l,{status:"done",output:function(t,e,n,i,r){if(void 0===i.output)return;let o=c(r.id,void 0!==r.output&&r.parent?x(r.output,t.context,e,n.self):void 0);return x(i.output,t.context,o,n.self)}(l,e,n,l.machine.root,a)})}}return l}(d=ty(d,i,n,l.flatMap(t=>t.actions),o,void 0),i,n,l,s,o,a,r);let u=[...s];"done"===d.status&&(d=ty(d,i,n,u.sort((t,e)=>e.order-t.order).flatMap(t=>t.exit),o,void 0));try{if(a===e.historyValue&&function(t,e){if(t.length!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}(e._nodes,s))return d;return tO(d,{_nodes:u,historyValue:a})}catch(t){throw t}}function tv(t,e,n,i){var r,o,s,a;if(tr(t))if(e[t.id]){let s=e[t.id];for(let t of s)i.add(t),tv(t,e,n,i);for(let a of s){r=a,o=t.parent,tg(i,e,n,z(r,o))}}else{let r=ti(t);for(let o of r.target)i.add(o),r===t.parent?.initial&&n.add(t.parent),tv(o,e,n,i);for(let o of r.target){s=o,a=t.parent,tg(i,e,n,z(s,a))}}else if("compound"===t.type){let[r]=t.initial.target;tr(r)||(i.add(r),n.add(r)),tv(r,e,n,i),tg(i,e,n,z(r,t))}else if("parallel"===t.type)for(let r of H(t).filter(t=>!tr(t)))[...i].some(t=>tc(t,r))||(tr(r)||(i.add(r),n.add(r)),tv(r,e,n,i))}function tg(t,e,n,i,r){for(let o of i)if((!r||tc(o,r))&&t.add(o),"parallel"===o.type)for(let i of H(o).filter(t=>!tr(t)))[...t].some(t=>tc(t,i))||(t.add(i),tv(i,e,n,t))}function ty(t,e,n,i,r,o){let s=o?[]:void 0,a=function t(e,n,i,r,o,s){let{machine:a}=e,l=e;for(let e of r){var d;let r="function"==typeof e,c=r?e:(d="string"==typeof e?e:e.type,a.implementations.actions[d]),u={context:l.context,event:n,self:i.self,system:i.system},h=r||"string"==typeof e?void 0:"params"in e?"function"==typeof e.params?e.params({context:l.context,event:n}):e.params:void 0;if(!c||!("resolve"in c)){i.actionExecutor({type:"string"==typeof e?e:"object"==typeof e?e.type:e.name||"(anonymous)",info:u,params:h,exec:c});continue}let[p,f,m]=c.resolve(i,l,u,h,c,o);l=p,"retryResolve"in c&&s?.push([c,f]),"execute"in c&&i.actionExecutor({type:c.type,info:u,params:f,exec:c.execute.bind(null,i,f)}),m&&(l=t(l,n,i,m,o,s))}return l}(t,e,n,i,{internalQueue:r,deferredActorIds:o},s);return s?.forEach(t=>{let[e,i]=t;e.retryResolve(n,a,i)}),a}function tx(t,e,n,i){let r=t,o=[];function s(t,e,i){n.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:n.self,event:e,snapshot:t,_transitions:i}),o.push(t)}if(e.type===d)return s(r=tO(t_(r,e,n),{status:"stopped"}),e,[]),{snapshot:r,microstates:o};let l=e;if(l.type!==a){let e=l,a=e.type.startsWith("xstate.error.actor"),d=tj(e,r);if(a&&!d.length)return s(r=tO(t,{status:"error",error:e.error}),e,[]),{snapshot:r,microstates:o};s(r=tm(d,t,n,l,!1,i),e,d)}let c=!0;for(;"active"===r.status;){let t=c?function(t,e){let n=new Set;for(let i of t._nodes.filter(V))t:for(let r of[i].concat(z(i,void 0)))if(r.always){for(let i of r.always)if(void 0===i.guard||G(i.guard,t.context,e,t)){n.add(i);break t}}return tu(Array.from(n),new Set(t._nodes),t.historyValue)}(r,l):[],e=t.length?r:void 0;if(!t.length){if(!i.length)break;t=tj(l=i.shift(),r)}c=(r=tm(t,r,n,l,!1,i))!==e,s(r,l,t)}return"active"!==r.status&&t_(r,l,n),{snapshot:r,microstates:o}}function t_(t,e,n){return ty(t,e,n,Object.values(t.children).map(t=>F(t)),[],void 0)}function tj(t,e){return e.machine.getTransitionData(e,t)}function tS(t,e){let n=J(td(t,e));return Y(t,[...n])}let tb=function(t){return function t(e,n){let i=v(e),r=v(n);return"string"==typeof r?"string"==typeof i&&r===i:"string"==typeof i?i in r:Object.keys(i).every(e=>e in r&&t(i[e],r[e]))}(t,this.value)},tw=function(t){return this.tags.has(t)},tE=function(t){let e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(t=>void 0!==t.target||t.actions.length)},tI=function(){let{_nodes:t,tags:e,machine:n,getMeta:i,toJSON:r,can:o,hasTag:s,matches:a,...l}=this;return{...l,tags:Array.from(e)}},tA=function(){return this._nodes.reduce((t,e)=>(void 0!==e.meta&&(t[e.id]=e.meta),t),{})};function tD(t,e){return{status:t.status,output:t.output,error:t.error,machine:e,context:t.context,_nodes:t._nodes,value:Y(e.root,t._nodes),tags:new Set(t._nodes.flatMap(t=>t.tags)),children:t.children,historyValue:t.historyValue||{},matches:tb,hasTag:tw,can:tE,getMeta:tA,toJSON:tI}}function tO(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tD({...t,...e},t.machine)}function tT(t,e){let{_nodes:n,tags:i,machine:r,children:o,context:s,can:a,hasTag:l,matches:d,getMeta:c,toJSON:u,...h}=t,p={};for(let t in o){let n=o[t];p[t]={snapshot:n.getPersistedSnapshot(e),src:n.src,systemId:n._systemId,syncSnapshot:n._syncSnapshot}}return{...h,context:function t(e){let n;for(let i in e){let r=e[i];if(r&&"object"==typeof r)if("sessionId"in r&&"send"in r&&"ref"in r)(n??=Array.isArray(e)?e.slice():{...e})[i]={xstate$$type:O,id:r.id};else{let o=t(r);o!==r&&((n??=Array.isArray(e)?e.slice():{...e})[i]=o)}}return n??e}(s),children:p}}function tC(t,e,n,i,r,o){let s,{event:a,id:l,delay:d}=r,{internalQueue:c}=o,u=e.machine.implementations.delays;if("string"==typeof a)throw Error(`Only event objects may be used with raise; use raise({ type: "${a}" }) instead`);let h="function"==typeof a?a(n,i):a;if("string"==typeof d){let t=u&&u[d];s="function"==typeof t?t(n,i):t}else s="function"==typeof d?d(n,i):d;return"number"!=typeof s&&c.push(h),[e,{event:h,id:l,delay:s},void 0]}function tM(t,e){let{event:n,delay:i,id:r}=e;if("number"==typeof i)return void t.defer(()=>{let e=t.self;t.system.scheduler.schedule(e,e,n,i,r)})}function tN(t,e){function n(t,e){}return n.type="xstate.raise",n.event=t,n.id=e?.id,n.delay=e?.delay,n.resolve=tC,n.execute=tM,n}t.i(1898606);var tk=t.i(6373509);let tR=(t,e)=>{e(t);let n=t.getSnapshot().children;n&&Object.values(n).forEach(t=>{tR(t,e)})};function tP(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];let[s]=r;return function(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];let[s]=r,a=function(t){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];let[s]=r,[[a,l],d]=(0,e.useState)(()=>{let e=N(t,s);return[t.config,e]});if(t.config!==a){let e=N(t,{...s,snapshot:l.getPersistedSnapshot({__unsafeAllowInlineActors:!0})});d([t.config,e]),l=e}return(0,n.default)(()=>{l.logic.implementations=t.implementations}),l}(t,s),l=(0,e.useCallback)(()=>a.getSnapshot(),[a]),d=(0,e.useCallback)(t=>{let{unsubscribe:e}=a.subscribe(t);return e},[a]),c=(0,tk.useSyncExternalStore)(d,l,l);return(0,e.useEffect)(()=>(a.start(),()=>{let t=[];tR(a,e=>{t.push([e,e.getSnapshot()]),e.observers=new Set});let e=a.system.getSnapshot?.();a.stop(),a.system._snapshot=e,t.forEach(t=>{let[e,n]=t;e._processingStatus=0,e._snapshot=n})}),[a]),[c,a.send,a]}(t,s)}},[36443,2246298]],8943741:t=>{"use strict";t.s({default:()=>a});var e=t.i(3521787),n=t.i(6649026),i=t.i(1183506),r=t.i(9336536),o=t.i(3514588);async function s(t){return(0,i.fetchAPI)(t,{throwOnHTTPError:!1,returnStatus:!0})}function a(t,i){let{isReady:a,team:l}=(0,o.useTeam)();return(0,e.default)(()=>t&&a?`${r.API_DOMAINS}/${encodeURIComponent(t)}${(0,n.encode)({teamId:l?.id})}`:null,async t=>{let e=await s(t);if(!i?.ignoreForbiddenError||403!==e.status){if(!i?.ignoreNotFound||404!==e.status){if(e.status&&(e.status<200||e.status>=300)){let t=Error(`Unexpected error: ${e.status}`);throw t.status=e.status,t}return e.body}}},i)}},4786592:t=>{t.v({label:"www-modal-module__BY1deq__label"})},2915293:[t=>{"use strict";t.s({WWWModal:()=>U},2915293);var e,n,i=t.i(6645307),r=t.i(6530772),o=t.i(7415104),s=t.i(3921802),a=t.i(8934201),l=t.i(5249128),d=t.i(5163670),c=t.i(8811733),u=t.i(2362802),h=t.i(7315479),p=t.i(2198583),f=t.i(1164214),m=t.i(3514588),v=t.i(878537),g=t.i(2229718),y=t.i(2240289),x=t.i(9132105),_=t.i(1389821),j=t.i(9505396),S=t.i(3420088),b=t.i(4786592),w=t.i(9975426),E=t.i(6451042);t.s({DomainMachine:()=>B},185283);var I=t.i(3509620),A=t.i(5333425),D=t.i(2246298);function O(t,e,n,i,r){let{assignment:o}=r;if(!e.context)throw Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");let s={},a={context:e.context,event:n.event,spawn:function(t,e,n,i){let{machine:r,context:o}=e,s=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{systemId:a,input:l}=s;if("string"!=typeof e)return(0,D.A)(e,{id:s.id,parent:t.self,syncSnapshot:s.syncSnapshot,input:s.input,src:e,systemId:a});{let d=(0,D.z)(r,e);if(!d)throw Error(`Actor logic '${e}' not implemented in machine '${r.id}'`);let c=(0,D.A)(d,{id:s.id,parent:t.self,syncSnapshot:s.syncSnapshot,input:"function"==typeof l?l({context:o,event:n,self:t.self}):l,src:e,systemId:a});return i[c.id]=c,c}};return(e,n)=>{let r=s(e,n);return i[r.id]=r,t.defer(()=>{r._processingStatus!==D.T.Stopped&&r.start()}),r}}(t,e,n.event,s),self:t.self,system:t.system},l={};if("function"==typeof o)l=o(a,i);else for(let t of Object.keys(o)){let e=o[t];l[t]="function"==typeof e?e(a,i):e}let d=Object.assign({},e.context,l);return[(0,D.U)(e,{context:d,children:Object.keys(s).length?{...e.children,...s}:e.children}),void 0,void 0]}function T(t){function e(t,e){}return e.type="xstate.assign",e.assignment=t,e.resolve=O,e}t.i(36443),new WeakMap,e=t=>void 0,n=0;let C=new WeakMap;function M(t,e,n){let i=C.get(t);return i?e in i||(i[e]=n()):(i={[e]:n()},C.set(t,i)),i[e]}let N={},k=t=>"string"==typeof t?{type:t}:"function"==typeof t?"resolve"in t?{type:t.type}:{type:t.name}:t;class R{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(D.S),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?(0,D.m)(this.config.states,(t,e)=>new R(t,{_parent:this,_key:e,_machine:this.machine})):N,"compound"===this.type&&!this.config.initial)throw Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=!0===this.config.history?"shallow":this.config.history||!1,this.entry=(0,D.t)(this.config.entry).slice(),this.exit=(0,D.t)(this.config.exit).slice(),this.meta=this.config.meta,this.output="final"!==this.type&&this.parent?void 0:this.config.output,this.tags=(0,D.t)(t.tags).slice()}_initialize(){this.transitions=(0,D.f)(this),this.config.always&&(this.always=(0,D.a)(this.config.always).map(t=>(0,D.b)(this,D.N,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(k),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(k),eventType:null})}:void 0,history:this.history,states:(0,D.m)(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(k)})),entry:this.entry.map(k),exit:this.exit.map(k),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return M(this,"invoke",()=>(0,D.t)(this.config.invoke).map((t,e)=>{let{src:n,systemId:i}=t,r=t.id??(0,D.c)(this.id,e),o="string"==typeof n?n:`xstate.invoke.${(0,D.c)(this.id,e)}`;return{...t,src:o,id:r,systemId:i,toJSON(){let{onDone:e,onError:n,...i}=t;return{...i,type:"xstate.invoke",src:o,id:r}}}}))}get on(){return M(this,"on",()=>[...this.transitions].flatMap(t=>{let[e,n]=t;return n.map(t=>[e,t])}).reduce((t,e)=>{let[n,i]=e;return t[n]=t[n]||[],t[n].push(i),t},{}))}get after(){return M(this,"delayedTransitions",()=>(0,D.g)(this))}get initial(){return M(this,"initial",()=>(0,D.d)(this,this.config.initial))}next(t,e){let n,i=e.type,r=[];for(let o of M(this,`candidates-${i}`,()=>(0,D.h)(this,i))){let{guard:s}=o,a=t.context,l=!1;try{l=!s||(0,D.e)(s,a,e,t)}catch(e){let t="string"==typeof s?s:"object"==typeof s?s.type:void 0;throw Error(`Unable to evaluate guard ${t?`'${t}' `:""}in transition for event '${i}' in state node '${this.id}':
${e.message}`)}if(l){r.push(...o.actions),n=o;break}}return n?[n]:void 0}get events(){return M(this,"events",()=>{let{states:t}=this,e=new Set(this.ownEvents);if(t)for(let n of Object.keys(t)){let i=t[n];if(i.states)for(let t of i.events)e.add(`${t}`)}return Array.from(e)})}get ownEvents(){return Array.from(new Set([...this.transitions.keys()].filter(t=>this.transitions.get(t).some(t=>!(!t.target&&!t.actions.length&&!t.reenter)))))}}class P{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:e?.actors??{},actions:e?.actions??{},delays:e?.delays??{},guards:e?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new R(t,{_key:this.id,_machine:this}),this.root._initialize(),this.states=this.root.states,this.events=this.root.events}provide(t){let{actions:e,guards:n,actors:i,delays:r}=this.implementations;return new P(this.config,{actions:{...e,...t.actions},guards:{...n,...t.guards},actors:{...i,...t.actors},delays:{...r,...t.delays}})}resolveState(t){let e=(0,D.r)(this.root,t.value),n=(0,D.i)((0,D.j)(this.root,e));return(0,D.k)({_nodes:[...n],context:t.context||{},children:{},status:(0,D.l)(n,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,n){return(0,D.n)(t,e,n,[]).snapshot}microstep(t,e,n){return(0,D.n)(t,e,n,[]).microstates}getTransitionData(t,e){return(0,D.o)(this.root,t.value,t,e)||[]}getPreInitialState(t,e,n){let{context:i}=this.config,r=(0,D.k)({context:"function"!=typeof i&&i?i:{},_nodes:[this.root],children:{},status:"active"},this);return"function"==typeof i?(0,D.p)(r,e,t,[T(t=>{let{spawn:e,event:n,self:r}=t;return i({spawn:e,input:n.input,self:r})})],n,void 0):r}getInitialSnapshot(t,e){let n=(0,D.q)(e),i=[],r=this.getPreInitialState(t,n,i),o=(0,D.s)([{target:[...(0,D.u)(this.root)],source:this.root,reenter:!0,actions:[],eventType:null,toJSON:null}],r,t,n,!0,i),{snapshot:s}=(0,D.n)(o,n,t,i);return s}start(t){Object.values(t.children).forEach(t=>{"active"===t.getSnapshot().status&&t.start()})}getStateNodeById(t){let e=(0,D.v)(t),n=e.slice(1),i=(0,D.w)(e[0])?e[0].slice(1):e[0],r=this.idMap.get(i);if(!r)throw Error(`Child state node '#${i}' does not exist on machine '${this.id}'`);return(0,D.x)(r,n)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return(0,D.y)(t,e)}restoreSnapshot(t,e){let n={},i=t.children;Object.keys(i).forEach(t=>{let r=i[t],o=r.snapshot,s=r.src,a="string"==typeof s?(0,D.z)(this,s):s;if(!a)return;let l=(0,D.A)(a,{id:t,parent:e.self,syncSnapshot:r.syncSnapshot,snapshot:o,src:s,systemId:r.systemId});n[t]=l});let r=(0,D.k)({...t,children:n,_nodes:Array.from((0,D.i)((0,D.j)(this.root,t.value)))},this),o=new Set;return!function t(e,n){if(!o.has(e))for(let i in o.add(e),e){let r=e[i];if(r&&"object"==typeof r){if("xstate$$type"in r&&r.xstate$$type===D.$){e[i]=n[r.id];continue}t(r,n)}}}(r.context,n),r}}function $(t){return null!=t}function L(t){return $(t.redirect)?{...t,environmentId:null,gitBranch:null}:$(t.environmentId)&&$(t.customEnvironments)&&(0,A.isCustomEnvId)(t.environmentId??"")?{...t,gitBranch:function(t,e){let n=e.find(e=>e.id===t)?.branchMatcher;if(!n)return null;switch(n.type){case"equals":return n.pattern;case"startsWith":return`${n.pattern}*`;case"endsWith":return`*${n.pattern}`}}(t.environmentId??"",t.customEnvironments??[])}:!$(t.environmentId)&&$(t.gitBranch)?{...t,environmentId:I.EnvTarget.Preview}:t.environmentId!==I.EnvTarget.Production&&$(t.environmentId)?t:{...t,environmentId:I.EnvTarget.Production,gitBranch:t.project?.link?.productionBranch||null}}let B=new P({id:"domain",initial:"init",context:{initial:null,update:null,changed:!1,removing:!1,isValid:!1,canSave:!1,domainError:null,branchError:null,value:null},states:{init:{on:{setup:{actions:T({initial:t=>{let{event:e}=t;return L(e.initial)},update:t=>{let{event:e}=t;return L(e.initial)}}),target:"edit"}}},loaded:{on:{update:{actions:T({update:t=>{let{event:e}=t;return L(e.update)}}),target:"edit"},DOMAIN_SET_VALUE:{actions:T({update:t=>{let{context:e,event:n}=t;return{...e.update,domain:n.value??""}}}),target:"edit"},DOMAIN_RESET_STATE:{actions:T({initial:t=>{let{context:e,event:n}=t;return L({...n.initial||e.initial,domain:n.value||(e.initial?.domain??"")})},update:t=>{let{context:e,event:n}=t;return L({...n.initial||e.initial,domain:n.value??e.initial?.domain??""})},branchError:()=>null,domainError:()=>null}),target:"edit"}}},edit:{always:[{actions:T({changed:t=>{let{context:e}=t;return function(t,e){return $(t)!==$(e)||t?.domain!==e?.domain||t?.environmentId!==e?.environmentId||t?.redirect!==e?.redirect||t?.redirectStatusCode!==e?.redirectStatusCode||t?.gitBranch!==e?.gitBranch}(e.initial,e.update)},isValid:t=>{let{context:e}=t;return function(t){if(!$(t))return!1;let e=$(t.domain)&&""!==t.domain,n=t.environmentId===I.EnvTarget.Production,i=t.environmentId===I.EnvTarget.Preview&&$(t.gitBranch),r=$(t.redirect)&&$(t.redirectStatusCode),o=$(t.environmentId)&&(0,A.isCustomEnvId)(t.environmentId??"");return e&&(n||i||r||o)}(e.update)}}),target:"validating"}]},validating:{always:[{actions:T({canSave:t=>{let{context:e}=t;return!e.removing&&e.isValid&&(e.changed||!!e.update?.domain)}}),target:"loaded"}]}},on:{remove:{actions:T({removing:t=>{let{context:e}=t;return!e.removing}})},save:{actions:T({initial:t=>{let{context:e}=t;return e.update}})},DOMAIN_SET_ERROR:{actions:T({domainError:t=>{let{event:e}=t;return e.value}})},BRANCH_SET_ERROR:{actions:T({branchError:t=>{let{event:e}=t;return e.value}})},RESET_BRANCH_ERROR:{actions:T({branchError:()=>null})},RESET_DOMAIN_ERROR:{actions:T({domainError:()=>null})}}},void 0);function U(t){let{domain:e,active:n,dispatch:I,revalidateDomains:A}=t,[D,O]=(0,r.useState)(e),T=(0,p.useDebouncedCallback)(O,300),[C,M]=(0,r.useState)("nonToWww"),[N,k]=(0,r.useState)(!1),R=(0,r.useRef)(!1),[P,$]=(0,g.useMachine)(B,{input:void 0});(0,r.useEffect)(()=>{T(e)},[e,T]);let L=(0,_.useProjectIdOrName)(),{team:U,isReady:W}=(0,m.useTeam)(),{data:F}=(0,y.useProjectWithLatestDeployment)(L),G=D?(0,o.get)(D):null,V=G?`www.${G}`:null,{data:H,isLoading:z,isValidating:J}=(0,j.useProjectDomain)(V?{projectId:L,name:V}:null),{data:q,isLoading:Y,isValidating:X}=(0,j.useProjectDomain)(G?{projectId:L,name:G}:null),K=async t=>{I({type:"WWW_MODAL_CLOSE"}),t&&"cloudflare.com"===(await (0,S.getDomainConnectStatus)(t.name)).providerId&&I({type:"CONFIGURATION_TYPE_MODAL_OPEN",projectDomain:t}),M("nonToWww"),k(!1),$({type:"DOMAIN_RESET_STATE"})},Q=async()=>{let t;if(F&&V&&G&&D&&e){k(!0);try{switch(C){case"nonToWww":H||(t=await (0,x.addProjectDomain)({domain:V,project:F,team:U})),q?await (0,w.default)({project:F,isReady:W,team:U,projectDomain:q,redirect:V,redirectStatusCode:308}):t=await (0,x.addProjectDomain)({domain:G,project:F,team:U,redirect:V,redirectStatusCode:308});break;case"wwwToNon":q||(t=await (0,x.addProjectDomain)({domain:G,project:F,team:U})),H?await (0,w.default)({project:F,isReady:W,team:U,projectDomain:H,redirect:G,redirectStatusCode:308}):t=await (0,x.addProjectDomain)({domain:V,project:F,team:U,redirect:G,redirectStatusCode:308});break;case"none":t=await (0,x.addProjectDomain)({domain:D,project:F,team:U});break;default:return}A(),R.current=!0}catch(t){(0,E.isDomainConflictError)(t)&&t.projectName!==F.name&&t.projectId!==F.id?I({type:"DOMAIN_IN_USE_MODAL_OPEN",projectIdOrNameInUse:t.projectId??t.projectName}):I({type:"DOMAIN_ADD_FAIL",error:t.component||(0,h.errorToString)(t)})}K(t)}},Z=D!==e||z&&!J||Y&&!X;return(0,i.jsxs)(a.Modal.Modal,{active:n,"data-testid":(0,f.tid)("project","settings","domains","add-alias-domain-modal"),onAnimationDone:()=>{R.current&&(I({type:"DOMAIN_ADD_SUCCESS"}),R.current=!1)},onClickOutside:()=>void K(),children:[(0,i.jsxs)(a.Modal.Body,{children:[(0,i.jsxs)(a.Modal.Header,{children:[(0,i.jsx)(a.Modal.Title,{children:"Add Domain"}),(0,i.jsx)(a.Modal.Subtitle,{children:(0,i.jsx)("b",{children:Z?(0,i.jsx)(d.Skeleton,{width:`${.7*(e?.length||5)}em`}):D})})]}),(0,i.jsx)(c.Spacer,{}),(0,i.jsxs)(a.Modal.Inset,{last:!0,children:[(0,i.jsx)(c.Spacer,{y:-1}),(0,i.jsx)(a.Modal.Outset,{children:(0,i.jsx)(l.RadioGroup,{label:"Domain WWW Redirects",onChange:M,value:C,children:(0,i.jsxs)(v.default,{gap:0,children:[(0,i.jsx)(v.default,{Component:"label",className:b.default.label,row:!0,children:Z?(0,i.jsx)(d.Skeleton,{width:"100%"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.default,{children:(0,i.jsxs)(l.RadioGroup.Item,{label:!1,value:"nonToWww",children:[H?"Use":"Add"," ",(0,i.jsx)("b",{children:V})," and redirect ",(0,i.jsx)("b",{children:G})," to it"]})}),(0,i.jsx)(v.default,{flex:"0 0 auto",children:(0,i.jsx)(s.Badge,{variant:"blue",children:"Recommended"})})]})}),(0,i.jsx)(v.default,{children:(0,i.jsx)(a.Modal.Outset,{children:(0,i.jsx)("hr",{className:"geist-hr-reset"})})}),(0,i.jsx)(v.default,{Component:"label",className:b.default.label,children:Z?(0,i.jsx)(d.Skeleton,{width:"100%"}):(0,i.jsxs)(l.RadioGroup.Item,{label:!1,value:"wwwToNon",children:[q?"Use":"Add"," ",(0,i.jsx)("b",{children:G})," and redirect ",(0,i.jsx)("b",{children:V})," to it"]})}),(0,i.jsx)(v.default,{children:(0,i.jsx)(a.Modal.Outset,{children:(0,i.jsx)("hr",{className:"geist-hr-reset"})})}),(0,i.jsx)(v.default,{Component:"label",className:b.default.label,children:Z?(0,i.jsx)(d.Skeleton,{width:"100%"}):(0,i.jsxs)(l.RadioGroup.Item,{label:!1,value:"none",children:["Add ",(0,i.jsx)("b",{children:D})]})})]})})}),(0,i.jsx)(v.default,{children:(0,i.jsx)(a.Modal.Outset,{children:(0,i.jsx)("hr",{className:"geist-hr-reset"})})}),(0,i.jsx)(c.Spacer,{}),(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(u.Link,{external:!0,href:"/docs/domains/working-with-domains#apex-domain",variant:"highlight",children:"apex domains, and www redirects."})]})]})]}),(0,i.jsxs)(a.Modal.Actions,{children:[(0,i.jsx)(a.Modal.Action,{onClick:K,type:"secondary",children:"Cancel"}),(0,i.jsx)(a.Modal.Action,{"data-testid":(0,f.tid)("project","settings","domains","add-alias-domain-modal","confirm-button"),loading:N,onClick:Q,children:"Add"})]})]})}},[185283]],8567675:t=>{t.v({aliasDomain:"alias-domain-module__IU4UXG__aliasDomain",aliasLink:"alias-domain-module__IU4UXG__aliasLink",badgeContainer:"alias-domain-module__IU4UXG__badgeContainer",button:"alias-domain-module__IU4UXG__button",domainCardSeparator:"alias-domain-module__IU4UXG__domainCardSeparator",domainInfo:"alias-domain-module__IU4UXG__domainInfo",redirectDisabled:"alias-domain-module__IU4UXG__redirectDisabled",statuses:"alias-domain-module__IU4UXG__statuses"})},3420088:[t=>{"use strict";t.s({getDomainConnectStatus:()=>o,preloadDomainConnectStatus:()=>s,useDomainConnectStatus:()=>a},3420088);var e=t.i(1183506),n=t.i(3521787),i=t.i(7320579),r=t.i(3466887);function o(t){return(0,e.fetchAPI)(`/api/front-domains/domain-connect/status?domain=${t}`,{throwOnHTTPError:!0})}function s(t){return(0,i.preload)(`/api/front-domains/domain-connect/status?domain=${t}`,t=>(0,e.fetchAPI)(t,{throwOnHTTPError:!0}))}function a(t,i){return(0,n.default)(t&&!(0,r.isPublicAlias)(t)?`/api/front-domains/domain-connect/status?domain=${t}`:null,t=>(0,e.fetchAPI)(t,{throwOnHTTPError:!0}),{keepPreviousData:!0,dedupingInterval:3e4,...i})}t.s({default:()=>d},9975426);var l=t.i(9336536);let d=async t=>{let{project:n,isReady:i,team:r,projectDomain:o,redirect:s,redirectStatusCode:a,gitBranch:d,customEnvironmentId:c}=t;if(!n||!i)return;let u={redirect:s||null,redirectStatusCode:a||null,gitBranch:s?null:d};void 0!==c&&(u.customEnvironmentId=c,u.redirect=null,u.redirectStatusCode=null,"preview"!==c&&(u.gitBranch=null)),await (0,e.fetchAPI)(`${(0,l.API_PROJECTS_DOMAINS_VERSION)("v9")}/${n.id}/domains/${o.name}${r?`?teamId=${r.id}`:""}`,{throwOnHTTPError:!0,method:"PATCH",body:JSON.stringify(u)})};function c(t){return"object"==typeof t&&null!==t}function u(t){if(!c(t))return!1;let e="projectName"in t&&"string"==typeof t.projectName||"projectId"in t&&"string"==typeof t.projectId,n="code"in t&&"string"==typeof t.code,i=t.code,r=n&&["domain_already_in_use","duplicate-team-registration","duplicate-user-registration"].includes(i);return e&&n&&r}function h(t){if(!c(t))return!1;let e=t.code;return"code"in t&&"string"==typeof t.code&&"owned-on-other-team"===e}t.s({isDomainConflictError:()=>u,isDomainOwnedOnOtherTeamError:()=>h},6451042),t.s({GitBranchSelectorWithProject:()=>w},741445);var p=t.i(6645307),f=t.i(3921802),m=t.i(3621043),v=t.i(8811733),g=t.i(889716),y=t.i(8084653),x=t.i(5535439),_=t.i(4418725),j=t.i(2362802),S=t.i(2240289),b=t.i(1629961);function w(t){let e=(0,_.useTeamSlug)(),n=(0,x.useParams)(),{data:i}=(0,S.useProject)(n?.project);return i?.link?(0,p.jsx)(E,{project:i,...t}):(0,p.jsx)(g.Stack,{direction:"row",gap:4,children:(0,p.jsx)(j.ButtonLink,{as:`/${e}/${i?.name}/settings/git`,href:`/${e}/${i?.name}/settings/git`,size:"small",type:"secondary",children:"Connect Git Repository"})})}function E(t){let{disabled:e,onChange:n,onFocus:i,project:r,value:o,environmentId:s}=t,{data:a}=(0,b.useProjectBranches)(r.id),l=(a||[]).map(t=>t.ref),d=l.filter(t=>t!==r.link.productionBranch);return(0,p.jsxs)(m.Combobox,{className:"flex w-full",clearable:!1,disabled:e,onChange:t=>n?.(t??""),placeholder:"All Branches",value:o,children:[(0,p.jsx)(m.Combobox.Input,{"aria-label":"Git Branch",onChange:t=>n?.(t.target.value),onFocus:i}),(0,p.jsxs)(m.Combobox.List,{emptyMessage:"No Branches",children:[(0,p.jsx)(p.Fragment,{children:!!o&&!l.includes(o??"")&&(0,p.jsx)(m.Combobox.Option,{displayValue:!0,value:o??"",children:`Use "${o}"`})}),(0,p.jsx)(p.Fragment,{children:"production"===s&&(0,p.jsxs)(m.Combobox.Option,{value:r.link.productionBranch||"",children:[(0,p.jsx)(y.Text,{children:r.link.productionBranch}),(0,p.jsx)(v.Spacer,{inline:!0,x:1/4}),(0,p.jsx)(f.Badge,{variant:"blue",children:"Production"})]})}),(0,p.jsx)(p.Fragment,{children:d.map(t=>(0,p.jsx)(m.Combobox.Option,{value:t,children:t},t))})]})]})}},[9975426,6451042,741445]],4490730:[t=>{"use strict";t.s({AliasDomainInput:()=>tn,default:()=>tr,isApexDomain:()=>to},4490730);var e=t.i(6645307),n=t.i(6530772),i=t.i(7415104),r=t.i(5674541),o=t.i(1164214),s=t.i(3621043),a=t.i(3585235),l=t.i(5785123),d=t.i(674684),c=t.i(2198583),u=t.i(2240289),h=t.i(6658426),p=t.i(6727308),f=t.i(2915293),m=t.i(1917237),v=t.i(8934201),g=t.i(8811733),y=t.i(889716),x=t.i(8084653),_=t.i(555528),j=t.i(2362802),S=t.i(3514588),b=t.i(6465700),w=t.i(3509620),E=t.i(5333425),I=t.i(7315479),A=t.i(2229718),D=t.i(9132105),O=t.i(3466887),T=t.i(4131991),C=t.i(8943741),M=t.i(3156464),N=t.i(452057),k=t.i(3420088),R=t.i(2101895);t.s({default:()=>L},6055110);var P=t.i(6921100),$=t.i(878537);let L=function(t){let{saving:n,setRedirectStatusCode:i,redirectStatusCode:r}=t;return(0,e.jsxs)($.default,{direction:["column","row","row"],halfGap:!0,children:[(0,e.jsxs)(y.Stack,{align:"center",className:"mr-3 w-[125px]",direction:"row",gap:1,justify:"space-between",children:[(0,e.jsx)(x.Text,{children:"Status Code"}),(0,e.jsx)(_.Tooltip,{text:"Use a Temporary or Permanent Redirect by selecting the appropriate Status Code.",children:(0,e.jsx)(b.InformationFillSmall,{})})]}),(0,e.jsx)($.default,{children:(0,e.jsxs)(P.Select,{"data-testid":(0,o.tid)("project","domain-status-code"),disabled:n,onChange:t=>i(Number(t.target.value)),value:r||307,width:"100%",children:[(0,e.jsxs)("optgroup",{label:"Temporary",children:[(0,e.jsx)("option",{value:"307",children:"307 Temporary Redirect"}),(0,e.jsx)("option",{value:"302",children:"302 Found"})]}),(0,e.jsxs)("optgroup",{label:"Permanent",children:[(0,e.jsx)("option",{value:"308",children:"308 Permanent Redirect"}),(0,e.jsx)("option",{value:"301",children:"301 Moved Permanently"})]})]})})]})};t.s({default:()=>W},3375633);var B=t.i(9505396),U=t.i(8567675);let W=function(t){let{selfRedirect:i,setRedirect:r,savingRedirect:a,redirect:l,project:d,domain:c,disabled:u}=t,{data:h=[]}=(0,B.useProjectDomains)(d?.id,{limit:1e3});return(0,e.jsxs)(y.Stack,{direction:{sm:"column",md:"row",lg:"row"},children:[(0,e.jsxs)(y.Stack,{align:"center",className:"mr-3 w-[125px]",direction:"row",gap:1,justify:"space-between",children:[(0,e.jsx)(x.Text,{children:"Redirect to"}),(0,e.jsx)(_.Tooltip,{text:"Redirect this Domain to a different Domain. Domains added to your Project will show up in this list.",children:(0,e.jsx)(b.InformationFillSmall,{})})]}),(0,e.jsx)(y.Stack,{flex:1,children:i?(0,e.jsx)("div",{className:U.default.redirectDisabled,style:{flex:1},children:(0,e.jsx)(_.Tooltip,{style:{minWidth:"100%"},text:"You have redirected another domain to this domain. In turn, you cannot redirect this one.",children:(0,e.jsxs)(s.Combobox,{className:U.default.redirectDisabled,children:[(0,e.jsx)(s.Combobox.Input,{"data-testid":(0,o.tid)("redirect-to-field","tooltip","domain-redirect"),defaultValue:"no-redirect-possible",disabled:u,style:{minWidth:"100%"},trimValue:!0}),(0,e.jsx)(s.Combobox.List,{hideOnEmpty:!0,children:(0,e.jsx)(s.Combobox.Option,{value:"no-redirect-possible",children:"No Redirect Possible"})})]})})}):(0,e.jsxs)(s.Combobox,{disabled:a||u,onChange:t=>{if("no-redirect"===t)return void r(null);r(t)},showMenuButton:h.length>0,value:l||"no-redirect",children:[(0,e.jsx)(s.Combobox.Input,{"data-testid":(0,o.tid)("redirect-to-field","tooltip","domain-redirect"),defaultValue:l??"no-redirect-possible",onKeyDown:t=>{if("Enter"===t.key){t.preventDefault();let e=t.currentTarget.value;if("no-redirect"===e)return void r(null);r(e)}},trimValue:!0}),(0,e.jsx)(s.Combobox.List,{hideOnEmpty:!0,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.Combobox.Option,{value:"no-redirect",children:"No Redirect"}),h.map(t=>{let{name:i}=t;return(0,e.jsx)(n.default.Fragment,{children:i===c||i.startsWith("*")?null:(0,e.jsx)(s.Combobox.Option,{value:i,children:i})},i)})]})})]})})]})};var F=t.i(741445);t.s({EditDomainEnvironmentField:()=>V},3462320);var G=t.i(1498235);function V(t){let{disabled:n,selectedEnvironmentId:i,disabledReason:r,onChange:o}=t;return(0,e.jsxs)($.default,{direction:["column","row","row"],halfGap:!0,children:[(0,e.jsxs)(y.Stack,{align:"center",className:"mr-3 w-[125px]",direction:"row",gap:1,justify:"space-between",children:[(0,e.jsx)(x.Text,{children:"Environment"}),r?(0,e.jsx)(_.Tooltip,{text:r,children:(0,e.jsx)(b.InformationFillSmall,{})}):null]}),(0,e.jsx)($.default,{children:(0,e.jsx)(G.EnvironmentsSelect,{activeEnvironmentId:i,disableDevelopment:!0,disabled:n,onChange:t=>{o(t||null)}})})]})}var H=t.i(185283),z=t.i(6451042);let J=t=>{let{project:n,environmentId:i,gitBranch:r,setGitBranch:s,branchError:a,disabled:l,disabledReason:c,saving:u,onFocus:h}=t,{query:{teamSlug:p,project:f}}=(0,d.useRouter)();return(0,e.jsxs)(y.Stack,{direction:{sm:"column",md:"row"},gap:.5,style:{width:"100%"},children:[(0,e.jsxs)(y.Stack,{align:"center",className:"mr-3 w-[125px]",direction:"row",gap:1,justify:"space-between",style:{minWidth:"125px"},children:[(0,e.jsx)(x.Text,{children:"Git Branch"}),(0,e.jsx)(_.Tooltip,{text:c||(0,e.jsxs)(e.Fragment,{children:["If a Git Branch is selected, all merges into that branch will be made available under the specified Domain.",(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),"If a Redirect is enabled, it takes priority."]}),children:(0,e.jsx)(b.InformationFillSmall,{})})]}),(0,e.jsxs)(y.Stack,{align:"center",style:{width:"100%"},children:[n?.link?(0,e.jsx)(F.GitBranchSelectorWithProject,{disabled:u||l,environmentId:i,onChange:t=>{s(t??null)},onFocus:h,value:r}):(0,e.jsxs)("span",{children:[(0,e.jsx)(j.Link,{as:`/${p}/${f}/settings/git`,href:"/[teamSlug]/[project]/settings/git",variant:"highlight",children:"Link a Git Repository"})," ","to connect your domain to a Git Branch"]}),a?(0,e.jsx)(m.Error,{"data-testid":(0,o.tid)("project","alias-domain","entity","git-branch-error"),error:a}):null]})]})};function q(t){let{domain:n}=t,{data:i}=(0,C.default)((0,O.isPublicAlias)(n)?"":n,{refreshWhenHidden:!1,refreshWhenOffline:!1,ignoreForbiddenError:!0,ignoreNotFound:!0}),r=(0,T.getSuggestedApex)(n),{isTeam:o,teamSlug:s}=(0,S.useTeam)();return i?(0,e.jsx)(y.Stack,{style:{marginTop:20,paddingTop:16,borderTop:"1px solid var(--accents-2)"},children:(0,e.jsx)(x.Text,{children:(0,e.jsxs)(j.Link,{href:o&&s?`/${s}/~/domains/${n}`:`/dashboard/domains/${n}`,variant:"highlight",children:["View DNS Records & More for ",r," "]})})}):null}function Y(t){let{active:i,dispatch:r,domain:s,project:a,revalidateDomains:l,selfRedirect:c=!1}=t,u=(0,n.useRef)(!1),[h,p]=(0,n.useState)(!1),f=(0,d.useRouter)(),[m,_]=(0,A.useMachine)(H.DomainMachine,{input:void 0}),{data:j}=(0,M.useCustomEnvironments)(a.id),{team:b}=(0,S.useTeam)();_({type:"setup",initial:{domain:s,customEnvironments:j?.customEnvironments??[],project:a,environmentId:w.EnvTarget.Production,gitBranch:a.link?.productionBranch||null}});let T=(0,n.useCallback)(()=>{u.current&&(_({type:"DOMAIN_RESET_STATE",value:""}),r({type:"DOMAIN_ADD_SUCCESS"}),u.current=!1)},[r,_]),C=(0,n.useCallback)(()=>{_({type:"DOMAIN_RESET_STATE",value:""}),r({type:"ADD_DOMAIN_MODAL_CLOSE"}),p(!1)},[r,_]),P=(0,n.useCallback)(async()=>{if(!s||!b)return;if(p(!0),to(s)){r({type:"WWW_MODAL_OPEN"}),_({type:"DOMAIN_RESET_STATE",value:""}),p(!1);return}let t=m.context.update?.gitBranch?m.context.update.gitBranch===a.link?.productionBranch?(_({type:"BRANCH_SET_ERROR",value:Error("The production branch cannot be used with a preview domain.")}),null):(0,E.isCustomEnvId)(m.context.update.environmentId??"")?(_({type:"BRANCH_SET_ERROR",value:Error("A custom environment cannot be used with a git branch.")}),null):m.context.update.gitBranch:null,e=m.context.update?.redirect,n=m.context.update?.redirectStatusCode;if(m.context.update?.environmentId===String(w.EnvTarget.Preview)){if(m.context.branchError)return void p(!1);if(!t&&!e){_({type:"DOMAIN_SET_ERROR",value:Error("A preview domain should be assigned to a git branch or a redirect.")}),p(!1);return}}try{let[i,o]=await Promise.all([(0,D.addProjectDomain)({domain:s,project:{id:a.id},team:{id:b.id},redirect:e,redirectStatusCode:n,customEnvironmentId:(0,E.isCustomEnvId)(m.context.update?.environmentId??"")?m.context.update?.environmentId:void 0,gitBranch:t}),(0,k.getDomainConnectStatus)(s).catch(()=>null)]);u.current=!0,o?.providerId==="cloudflare.com"?r({type:"CONFIGURATION_TYPE_MODAL_OPEN",projectDomain:i}):l(),r({type:"DOMAIN_ADD_SUCCESS"}),_({type:"DOMAIN_RESET_STATE",value:""})}catch(e){if((0,z.isDomainConflictError)(e)&&e.projectName!==a.name&&e.projectId!==a.id)return r({type:"DOMAIN_IN_USE_MODAL_OPEN",projectIdOrNameInUse:e.projectId??e.projectName});let t=(0,N.isProjectsError)(e)&&e.code;_({type:"git_branch_not_found"===t||"cannot_set_production_branch_as_preview"===t?"BRANCH_SET_ERROR":"DOMAIN_SET_ERROR",value:e}),r({type:"DOMAIN_ADD_FAIL",error:e.component||(0,I.errorToString)(e)})}p(!1)},[r,_,m,s,b,a,l]),$=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.Modal.Header,{children:(0,e.jsx)(v.Modal.Title,{children:"Add Domain"})}),(0,e.jsx)(g.Spacer,{}),(0,e.jsxs)(x.Text,{children:["Create a new domain for ",(0,e.jsx)("strong",{children:f.query.project})]}),(0,e.jsxs)(y.Stack,{style:{padding:"var(--geist-gap)",borderTopLeftRadius:"var(--geist-radius)",borderTopRightRadius:"var(--geist-radius)"},children:[(0,e.jsxs)(y.Stack,{gap:4,children:[(0,e.jsx)(R.default,{disabled:!!(h||m.context.removing),domainDispatch:t=>{_(t),r(t)},domainError:m.context.domainError,domainValue:m.context.update?.domain??""}),(0,e.jsx)(V,{disabled:!!(h||m.context.removing||m.context.update?.redirect),disabledReason:m.context.update?.redirect?"Remove the redirect to set an environment.":void 0,onChange:t=>{_({type:"update",update:{domain:m.context.update?.domain??"",customEnvironments:j?.customEnvironments??[],project:a,environmentId:t}})},selectedEnvironmentId:[String(w.EnvTarget.Production),String(w.EnvTarget.Preview)].includes(m.context.update?.environmentId??"")?m.context.update?.environmentId:(0,E.brandCustomEnvId)(m.context.update?.environmentId??"")}),(0,e.jsx)(W,{domain:m.context.update?.domain??"",project:a,redirect:m.context.update?.redirect||null,savingRedirect:!!h,selfRedirect:c,setRedirect:t=>{_({type:"update",update:{domain:m.context.update?.domain??"",customEnvironments:j?.customEnvironments??[],project:a,redirect:t||null,redirectStatusCode:t?307:null}})}}),!!m.context.update?.redirect&&(0,e.jsx)(L,{redirectStatusCode:m.context.update?.redirectStatusCode||null,saving:h,setRedirectStatusCode:t=>{_({type:"update",update:{domain:m.context.update?.domain??"",customEnvironments:j?.customEnvironments??[],project:a,redirect:m.context.update?.redirect||null,redirectStatusCode:t||null}})}}),(0,e.jsx)(J,{branchError:m.context.branchError,disabled:!!m.context.update?.redirect||m.context.update?.environmentId!==w.EnvTarget.Preview,disabledReason:m.context.update?.redirect?"To select a specific Git branch for this domain you need to remove the redirect.":m.context.update?.environmentId?m.context.update.environmentId===w.EnvTarget.Preview?null:m.context.update.environmentId===w.EnvTarget.Production?"Adjust the production git branch in the Production Environment's settings.":"Adjust the git branch matcher for the environment in the environment's settings.":null,gitBranch:m.context.update?.gitBranch||null,onFocus:()=>{_({type:"RESET_BRANCH_ERROR"})},project:a,saving:h,setGitBranch:t=>{_({type:"RESET_DOMAIN_ERROR"}),_({type:"update",update:{domain:m.context.update?.domain??"",customEnvironments:j?.customEnvironments??[],project:a,environmentId:m.context.update?.environmentId,gitBranch:t||null}})},environmentId:m.context.update?.environmentId||null})]}),(0,O.isPublicAlias)(s)?null:(0,e.jsx)(q,{domain:s})]})]}),B=(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(v.Modal.Action,{onClick:C,type:"secondary",children:"Cancel"}),(0,e.jsx)(v.Modal.Action,{"data-testid":(0,o.tid)("project","settings","domains","new-alias-domain-modal","confirm-button"),disabled:!m.context.canSave,loading:h,onClick:P,type:"secondary",children:"Add Domain"})]});return(0,e.jsxs)(v.Modal,{active:i,"data-testid":(0,o.tid)("project","settings","domains","new-alias-domain-modal"),onClickOutside:T,width:"520px",children:[(0,e.jsx)(v.Modal.Body,{children:$}),(0,e.jsx)(v.Modal.Actions,{children:B})]})}var X=t.i(6606445);function K(t){let{active:n,dispatch:i,projectDomain:s,revalidateDomains:a}=t,{team:l}=(0,S.useTeam)(),d=async()=>{await (0,D.removeProjectDomain)(s.projectId,l?.id??null,s.name),await a(),i({type:"CONFIGURATION_TYPE_MODAL_CLOSE"})},c=s.name,u=(0,T.getDomainConnectApplyUrl)(s,l?.id);return(0,e.jsxs)(v.Modal.Modal,{active:n,"data-testid":(0,o.tid)("project","settings","configuration-type-modal"),onClickOutside:()=>{d()},children:[(0,e.jsxs)(v.Modal.Body,{children:[(0,e.jsx)(v.Modal.Header,{children:(0,e.jsx)(v.Modal.Title,{children:"Add Domain"})}),"Configure DNS records for ",(0,e.jsx)("b",{children:c})," using one of these methods.",(0,e.jsx)(g.Spacer,{}),(0,e.jsx)(j.ButtonLink,{className:"flex flex-row items-center gap-2",href:u,onClick:()=>{(0,X.track)("click_automatic_configuration")},children:(0,e.jsx)("div",{children:"Configure Automatically"})}),(0,e.jsx)(g.Spacer,{y:1}),(0,e.jsx)(r.Button,{className:"w-full",onClick:()=>{a(),(0,X.track)("click_manual_configuration"),i({type:"CONFIGURATION_TYPE_MODAL_CLOSE"})},type:"secondary",children:"Configure Manually"})]}),(0,e.jsx)(v.Modal.Actions,{children:(0,e.jsx)(v.Modal.Action,{onClick:d,type:"secondary",children:"Cancel"})})]})}var Q=t.i(5535439),Z=t.i(4374461);function tt(t){var n,i,r;let s=(0,Q.useRouter)(),a=(0,Q.useSearchParams)(),l=a?.get("domainconnect-domain"),d=!!a?.get("error"),c=a?.get("errorDescription"),{team:u}=(0,S.useTeam)(),{trigger:h,isMutating:p}=(n=t.projectId,i=u?.id??"",r=l??"",(0,Z.default)(`/remove-project-domain-${n}-${i}-${r}`,async()=>{await (0,D.removeProjectDomain)(n,i,r)}));if(!l||!u)return null;let f=d||!!c,m=async()=>{await h().catch(()=>{}),t.onCancel(),s.replace(window.location.pathname)},g=c?"user_cancel"===c?"Your domain was not configured because the process was canceled.":"An identical record already exists"===c?"One or more records were not created because an identical record already existed":c.endsWith("perhaps your object identifier is invalid?")?"Your DNS provider had an error while creating the record.":null:null;return(0,e.jsxs)(v.Modal.Modal,{active:f,"data-testid":(0,o.tid)("project","settings","domain-connect-error-modal"),onClickOutside:()=>{s.replace(window.location.pathname)},children:[(0,e.jsxs)(v.Modal.Body,{children:[(0,e.jsx)(v.Modal.Header,{children:(0,e.jsx)(v.Modal.Title,{children:"Configuration Failed"})}),"Sorry, we failed to automatically configure"," ",(0,e.jsx)("strong",{children:l}),". Please follow the steps to manually configure your domain with your provider.",g?(0,e.jsxs)("div",{className:"pt-4 text-sm text-red-800",children:["Error: ",g]}):null]}),(0,e.jsxs)(v.Modal.Actions,{className:"justify-between",children:[(0,e.jsx)(v.Modal.Action,{loading:p,onClick:m,type:"secondary",children:"Cancel"}),(0,e.jsx)(v.Modal.Action,{onClick:()=>{s.replace(window.location.pathname)},children:"Continue with Manual Configuration"})]})]})}let te=["*.vercel.app","*.now.sh"];function tn(t){let{value:i,currentDomain:r,dispatch:a,onSubmit:l,error:d,disabled:u=!1,editing:p=!1}=t,[f,m]=(0,n.useState)(""),{domains:v}=(0,h.useDomainsList)({search:f}),g=(0,c.useDebouncedCallback)(t=>{m(t),a({type:"DOMAIN_SET_VALUE",value:t})},200);return(0,e.jsxs)(s.Combobox,{disabled:u,errored:!!d,onChange:t=>{a({type:"DOMAIN_SET_VALUE",value:t??""})},placeholder:p?r:"mywebsite.com",showMenuButton:v.length>0,value:i,children:[(0,e.jsx)(s.Combobox.Input,{"data-testid":(0,o.tid)("domains","alias-domain-input"),defaultValue:i,onChange:t=>{g(t.target.value)},onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),l?.())}}),(0,e.jsx)(s.Combobox.List,{hideOnEmpty:!0,children:v.map(t=>(0,e.jsx)(s.Combobox.Option,{value:t.name,children:t.name},t.id))})]})}let ti=(t,e)=>{switch(e.type){case"WWW_MODAL_OPEN":return{...t,wwwModal:!0,addDomainModal:!1};case"WWW_MODAL_CLOSE":return{...t,wwwModal:!1};case"CONFIGURATION_TYPE_MODAL_OPEN":return{...t,configurationTypeModal:!0,projectDomain:e.projectDomain};case"CONFIGURATION_TYPE_MODAL_CLOSE":return{...t,configurationTypeModal:!1};case"DOMAIN_IN_USE_MODAL_OPEN":return{...t,projectIdOrNameInUse:e.projectIdOrNameInUse,domainInUseModal:!0};case"DOMAIN_IN_USE_MODAL_CLOSE":return{...t,domainInUseModal:!1,loading:!1};case"DOMAIN_SET_VALUE":return{...t,value:e.value,error:null};case"DOMAIN_SET_ERROR":return{...t,error:e.value};case"DOMAIN_ADD_START":return{...t,value:"",loading:!0,addDomainModal:!0,error:null};case"DOMAIN_ADD_FAIL":return{...t,loading:!1,error:e.error};case"DOMAIN_ADD_SUCCESS":return{...t,value:"",loading:!1,addDomainModal:!1};case"DOMAIN_ADD_CANCEL":return{...t,value:"",loading:!1,addDomainModal:!1,error:null};case"ADD_DOMAIN_MODAL_CLOSE":return{...t,value:"",addDomainModal:!1,loading:!1}}};function tr(t){let{projectIdOrName:i=null,revalidateDomains:s}=t,c=(0,d.useRouter)().query.domain,[{value:h,error:m,loading:v,wwwModal:g,addDomainModal:y,domainInUseModal:x,projectIdOrNameInUse:_,projectDomain:j,configurationTypeModal:S},b]=(0,n.useReducer)(ti,{value:c??"",error:null,loading:!1,wwwModal:!1,configurationTypeModal:!1,addDomainModal:!!c,domainInUseModal:!1,projectIdOrNameInUse:null,projectDomain:null});(0,n.useEffect)(()=>{if(c){let t=new URL(window.location.href);t.searchParams.delete("domain"),window.history.replaceState(null,"",t.toString())}},[]);let{data:w}=(0,u.useProjectWithLatestDeployment)(i),E=(0,n.useCallback)(async()=>{if(!m&&w){if(te.includes(h))return b({type:"DOMAIN_ADD_FAIL",error:`The provided domain name "${h}" is invalid.`});if(to(h))return b({type:"WWW_MODAL_OPEN"});b({type:"DOMAIN_ADD_START",value:""}),await s()}},[h,w,m,s]),{can:I,isLoading:A}=(0,a.default)({projectIdOrName:w?.name}),D=I(l.Action.Update,l.Resource.Project);return(0,e.jsxs)("div",{children:[(0,e.jsx)(r.Button,{"data-testid":(0,o.tid)("project","settings","domains","add-alias-button"),disabled:v||!A&&!D||A,loading:!!v,onClick:E,width:100,children:"Add"}),(0,e.jsx)(f.WWWModal,{active:g,dispatch:b,domain:h,revalidateDomains:s}),w?(0,e.jsx)(Y,{active:y,dispatch:b,domain:h,project:w,revalidateDomains:s}):null,S?(0,e.jsx)(K,{active:S,dispatch:b,projectDomain:j,revalidateDomains:s}):null,i?(0,e.jsx)(tt,{onCancel:()=>{s()},projectId:i}):null,(0,e.jsx)(p.AddDomainInUseModal,{active:x,dispatch:b,domain:h,projectIdOrNameInUse:_,revalidateDomains:s})]})}function to(t){let e=(0,i.get)(t);return e===t||`www.${e}`===t}},[6055110,3375633,3462320]],2101895:t=>{"use strict";t.s({default:()=>l});var e=t.i(6645307),n=t.i(1917237),i=t.i(8811733),r=t.i(889716),o=t.i(8084653),s=t.i(878537),a=t.i(4490730);let l=t=>{let{currentDomain:l,domainValue:d,domainError:c,domainDispatch:u,disabled:h}=t;return(0,e.jsxs)(s.default,{direction:["column","row","row"],halfGap:!0,children:[(0,e.jsx)(r.Stack,{align:"center",className:"mr-3 w-[125px]",direction:"row",gap:1,children:(0,e.jsx)(o.Text,{children:"Domain"})}),(0,e.jsxs)(s.default,{children:[(0,e.jsx)(a.AliasDomainInput,{currentDomain:l,disabled:h,dispatch:u,editing:!!l,error:null,value:d}),c?(0,e.jsx)(i.Spacer,{y:.5}):null,c?(0,e.jsx)(n.Error,{error:c}):null]})]})}}}]);

//# sourceMappingURL=2b62bada1b3deac5.js.map
//# debugId=bb5c8a80-0976-5d6f-8ee0-5b8bb15a9eef
