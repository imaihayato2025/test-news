
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="3639dc27-4df9-5617-80d4-9c710622e1ac")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{2228136:e=>{e.v({entity:"access-entity-module__XKufeG__entity",footer:"access-entity-module__XKufeG__footer"})},5478630:e=>{e.v({calendar:"access-filters-module__NOPx6G__calendar",menu:"access-filters-module__NOPx6G__menu"})},1047634:e=>{e.v({searchContainer:"filter-menu-module__fI7zva__searchContainer",stickySearch:"filter-menu-module__fI7zva__stickySearch"})},9691755:e=>{"use strict";e.s({OverviewTabs:()=>eW},9691755);var t=e.i(6645307),s=e.i(1098821),i=e.i(6530772),n=e.i(5535439),r=e.i(7095283),l=e.i(6649026),a=e.i(503726);let o=function(){let{limit:e=10,scope:t,access:s,projectIds:n,projectNames:o,aliases:c,userIds:d,includeRequestCount:u,until:p,since:h}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:x,isTeam:j,user:g}=(0,a.useAccount)(),m=j?x?.id:g?.uid,y=(0,r.default)((i,r)=>m?`/api/deployments/protection-bypasses${(0,l.encode)({teamId:x?.id,limit:e,scope:t,access:s,until:r?.pagination.next||p,since:h,projectIds:n&&n.length>0?n:void 0,projectNames:o&&o.length>0?o:void 0,aliases:c&&c.length>0?c:void 0,userIds:d&&d.length>0?d:void 0,includeRequestCount:u})}`:null,async e=>{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);return t.json()}),f=!!y.data,k=!!(y.data&&y.data[y.data.length-1]?.protectionBypasses?.length<e),v=(0,i.useMemo)(()=>y.data?y.data.flatMap(e=>e.protectionBypasses):[],[y.data]),b=(0,i.useMemo)(()=>y.data?y.data[0].requestCount:void 0,[y.data]),S=f&&0===v.length,w=!!(y.data&&y.size>y.data.length);return[y,{isEmpty:S,protectionBypasses:v,requestCount:b,initialDataLoaded:f,isReachingEnd:k,loadMore:()=>y.setSize(e=>e+1),isLoadingMore:w,isValidating:y.isValidating}]},c="view",d="since",u="until",p=e=>{switch(e?.get(c)){case"access":return"access";case"projects":return"projects";case"requests":return"requests";default:return null}},h=(e,t)=>{let{tab:s,projectNames:i,userIds:n,scope:r,aliases:l,since:a,until:o}=t,p=new URLSearchParams,h=s||e.get(c);h&&p.set(c,h);let x=i?i.join():e.get("p");x&&p.set("p",x);let j=l?l.join():e.get("a");j&&p.set("a",j);let g=n?n.join():e.get("u");g&&p.set("u",g);let m=r||e.get("s");null!==r&&m&&p.set("s",m);let y=a?.toString()||e.get(d);null!==a&&y&&p.set(d,y);let f=o?.toString()||e.get(u);return null!==o&&f&&p.set(u,f),p};var x=e.i(889716),j=e.i(4946541),g=e.i(8084653),m=e.i(2254575),y=e.i(3277953),f=e.i(5528554),k=e.i(3431702),v=e.i(8132461),b=e.i(3821772),S=e.i(323659);function w(e){let{swr:s,infinite:i,search:n,Skeleton:r,emptyDescription:l,emptyLabel:a}=e,{isLoadingMore:o,isReachingEnd:c,loadMore:d,initialDataLoaded:u,isEmpty:p}=i,{error:h}=s,j=!!h&&!u,y=!h&&!u,f=(0,S.useIntersectionObserverRef)(()=>{o||d()},{rootMargin:"200px 0px"});return(0,t.jsxs)(t.Fragment,{children:[j?(0,t.jsx)(x.Stack,{align:"center",justify:"center",style:{margin:"var(--geist-gap-double)"},children:(0,t.jsx)(g.Text,{color:"gray-900",children:"An error occurred"})}):null,p&&!(y||o)?(0,t.jsxs)(x.Stack,{align:"center",gap:10,justify:"center",style:{margin:"var(--geist-gap-double)",alignSelf:"center"},children:[(0,t.jsx)(g.Text,{align:"center",color:"gray-900",children:a}),(0,t.jsx)(g.Text,{align:"center",color:"gray-900",children:l})]}):null,y?(0,t.jsx)(m.Entity.List,{children:Array(10).fill("").map((e,s)=>(0,t.jsx)(r,{},`skeleton-${s}`))}):null,(0,t.jsx)(x.Stack,{align:"center",justify:"center",ref:j||p||c||y||o?void 0:f,style:{height:20,margin:"var(--geist-gap)"},children:n||j||!o?null:(0,t.jsx)(b.Spinner,{})})]})}var C=e.i(2631460),I=e.i(4105925),T=e.i(555528),F=e.i(2362802),A=e.i(1093245),P=e.i(1573239),M=e.i(5520481);let N=e=>{let t=!!e.ssoProtection?.deploymentType,s=!!e.passwordProtection?.deploymentType,i=!!e.trustedIps?.deploymentType;return{vercelAuthEnabled:t,passwordProtectionEnabled:s,trustedIpsEnabled:i,isProtectionEnabled:t||s||i}};function O(e){let{project:s,filterProject:i}=e,{team:n,user:r}=(0,a.useAccount)(),l=n?.slug||r?.username||"",o=N(s),c=`/${l}/${encodeURIComponent(s.name)}/settings/deployment-protection`;return(0,t.jsx)(m.Entity,{left:(0,t.jsx)(F.Link,{href:c,children:(0,t.jsx)(M.FaviconOrFramework,{icon:$(o),project:s,right:-5})}),right:(0,t.jsxs)(C.DotsMenu,{children:[(0,t.jsx)(I.MenuItem,{href:c,isLink:!0,children:"View project settings"}),(0,t.jsx)(I.MenuItem,{onClick:()=>i("access"),children:"View project access"}),(0,t.jsx)(I.MenuItem,{onClick:()=>i("requests"),children:"View project requests"})]}),children:(0,t.jsx)(m.Entity.Content,{description:(0,t.jsxs)(x.Stack,{direction:"row",gap:3,children:[(0,t.jsx)(g.Text,{color:"gray-1000",children:(0,t.jsx)(F.Link,{href:c,variant:"underline",children:s.name})}),(0,t.jsx)(U,{...o})]})})},s.id)}function U(e){let{vercelAuthEnabled:s,passwordProtectionEnabled:i,trustedIpsEnabled:n,isProtectionEnabled:r}=e,l=[s?"Vercel Authentication":void 0,i?"Password Protection":void 0,n?"Trusted IPs":void 0].filter(Boolean);return r?(0,t.jsxs)(g.Text,{color:"gray-600",children:["Protected with"," ",l.join(", ").replace(/,(?=[^,]+$)/,l.length>2?", and":" and")]}):(0,t.jsx)(T.Tooltip,{forceHide:r,text:(0,t.jsxs)(g.Text,{size:12,children:["Protecting deployments in your project with"," ",(0,t.jsx)(F.Link,{external:!0,href:"/docs/security/deployment-protection",variant:"highlight",children:"Deployment Protection"})," ","is recommended."]}),children:(0,t.jsx)(g.Text,{color:"gray-600",children:(0,t.jsx)("u",{style:{cursor:"help",textDecorationStyle:"dotted",textUnderlineOffset:2},children:"Unprotected"})})})}let $=e=>{let{vercelAuthEnabled:s,passwordProtectionEnabled:i,trustedIpsEnabled:n}=e;return s?(0,t.jsx)(f.CheckCircleFill,{color:"blue-900"}):i||n?(0,t.jsx)(x.Stack,{align:"center",justify:"center",style:{width:"16px",height:"16px",borderRadius:"50%",backgroundColor:"var(--ds-gray-700)"},children:(0,t.jsx)(P.LockClosedSmall,{color:"background-100",size:14})}):(0,t.jsx)(A.WarningFill,{color:"amber-900"})};var q=e.i(5163670);function _(){return(0,t.jsx)(m.Entity,{left:(0,t.jsx)(M.FaviconOrFramework,{}),right:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"32px",height:"14px",marginBottom:"4px",marginTop:"4px",marginLeft:"auto"},children:(0,t.jsx)("span",{})}),children:(0,t.jsx)(m.Entity.Content,{className:"geist-hide-on-mobile",description:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0}})})}var B=e.i(5610210),E=e.i(2228136),L=e.i(5674541),D=e.i(584439),z=e.i(3979315),W=e.i(9948746),R=e.i(3585235),V=e.i(5785123),G=e.i(5172876),H=e.i(7267582),K=e.i(3153829),X=e.i(3813724),Q=e.i(5754894);e.i(7901367);var Y=e.i(540570);function Z(e){let{pb:s,toggleUsersFilter:n,toggleProjectFilter:r,toggleAliasFilter:l,revalidateAliasProtectionBypasses:o,teamId:c}=e,{account:d}=(0,a.useAccount)(),u=d?.billing?.plan==="hobby",[p,h]=(0,i.useState)(!1),[j,g]=(0,i.useState)(null),m=(0,Y.useOpenUpgradeModal)(),{can:y}=(0,R.default)(),f=y(V.Action.Update,"production"===s.aliasTarget?V.Resource.ProductionAliasProtectionBypass:V.Resource.AliasProtectionBypass),k=(0,i.useCallback)(async e=>{let{userId:t,aliasId:i,access:n,hobbyConfirmed:r}=e;if("granted"===n&&u&&!r)return void g(i);h(!0);try{await (0,X.updateAliasProtectionBypass)({aliasId:i,teamId:c,body:{scope:{userId:t,access:n}}}),await o(),D.toasts.success(`Access ${"access"in s&&"granted"===s.access?"revoked":n}.`)}catch(e){D.toasts.error(`Unable to update access${J(e)}`)}h(!1)},[s,c,o,u]),v=(0,i.useCallback)(async(e,t,s)=>{h(!0);try{await (0,X.updateAliasProtectionBypass)({teamId:c,aliasId:e,body:{revoke:{secret:t,regenerate:s}}}),await o(),D.toasts.success(s?"Shareable link regenerated.":"Shareable link deleted.")}catch(e){D.toasts.error(`Unable to ${s?"revoke":"delete"} shareable link${J(e)}`)}h(!1)},[c,o]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:4,style:{marginLeft:"auto"},children:["user"!==s.scope||"requested"!==s.access||p?void 0:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:3,children:[(0,t.jsx)(T.Tooltip,{desktopOnly:!0,text:f?"Decline request":"Missing permissions",children:(0,t.jsx)(L.Button,{"aria-label":"Decline request",disabled:!f,onClick:()=>void k({userId:s.id,aliasId:s.aliasId,access:"denied"}),shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,t.jsx)(z.Cross,{})})}),(0,t.jsx)(T.Tooltip,{desktopOnly:!0,text:f?"Approve request":"Missing permissions",children:(0,t.jsx)(L.Button,{"aria-label":"Approve request",disabled:!f,onClick:()=>void k({userId:s.id,aliasId:s.aliasId,access:"granted"}),shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,t.jsx)(W.Check,{size:16})})})]}),"shareable-link"!==s.scope||p?null:(0,t.jsx)(T.Tooltip,{desktopOnly:!0,text:"Copy shareable link",children:(0,t.jsx)(G.default,{iconSize:16,label:"Copy",size:"small",textToCopy:(0,H.createShareableLink)((0,K.domainToUrl)(s.alias),s.id),type:"secondary"})}),p?(0,t.jsx)(x.Stack,{style:{padding:"0 var(--geist-gap-quarter)"},children:(0,t.jsx)(b.Spinner,{size:16})}):null,(0,t.jsxs)(C.DotsMenu,{children:["shareable-link"===s.scope?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.MenuItem,{disabled:!f,onClick:()=>void v(s.aliasId,s.id,!0),type:"error",children:"Regenerate shareable link"}),(0,t.jsx)(I.MenuItem,{disabled:!f,onClick:()=>void v(s.aliasId,s.id,!1),type:"error",children:"Revoke shareable link"})]}):null,"user"===s.scope&&"granted"===s.access?(0,t.jsx)(I.MenuItem,{disabled:!f,onClick:()=>void k({userId:s.id,aliasId:s.aliasId,access:"denied"}),type:"error",children:"Revoke user access"}):null,"user"===s.scope?(0,t.jsx)(I.MenuItem,{onClick:n(s.id),children:"Filter by user"}):null,"email_invite"===s.scope?(0,t.jsx)(I.MenuItem,{onClick:n(s.id),children:"Filter by email"}):null,(0,t.jsx)(I.MenuItem,{onClick:l(s.alias),children:"Filter by domain"}),(0,t.jsx)(I.MenuItem,{disabled:!s.projectName,onClick:s.projectName?r(s.projectName):void 0,children:"Filter by project"})]})]}),(0,t.jsx)(Q.HobbyLimitAction,{onUpgradeClick:()=>{m({source:"Hobby account approve request limit call to upgrade from team settings",mode:"create",trialBehavior:"choose"})},setShowHobbyLimitAction:()=>g(null),showHobbyLimitAction:!!j,updateAccess:()=>k({userId:s.id,aliasId:j||"",access:"granted",hobbyConfirmed:!0})})]})}function J(e){return e&&"object"==typeof e&&"message"in e&&"string"==typeof e.message?`: ${e.message}`:null}var ee=e.i(5175803),et=e.i(2774739),es=e.i(5378884);function ei(e){let{pb:s,className:i}=e;return"access"in s&&"requested"===s.access?(0,t.jsx)(m.Entity.Content,{className:i,description:(0,t.jsx)(er,{pb:s}),style:{minWidth:0},title:(0,t.jsx)(en,{pb:s,tooltip:"User has requested access to this domain."})}):(0,t.jsx)(m.Entity.Content,{className:i,description:(0,t.jsx)(el,{pb:s}),style:{minWidth:0},title:(0,t.jsx)(ea,{pb:s})})}function en(e){let{pb:s,children:i,tooltip:n}=e;return(0,t.jsx)(T.Tooltip,{as:"div",cursor:"pointer",desktopOnly:!0,style:{alignSelf:"flex-start",minWidth:0,width:"100%"},text:s.username||s.email?n:"User no longer exists.",children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1,style:{minWidth:0},children:[(0,t.jsx)(ee.Avatar,{size:16,uid:s.id}),(0,t.jsxs)(g.Text,{as:"span",truncate:!0,children:[s.username||s.email||"unknown"," ",i]})]})})}function er(e){let{pb:s}=e;return(0,t.jsx)(g.Text,{color:"gray-900",truncate:!0,children:s.updatedAt>s.createdAt?(0,t.jsxs)(t.Fragment,{children:["last updated ",(0,t.jsx)(ec,{date:s.updatedAt})]}):(0,t.jsxs)(t.Fragment,{children:["requested access ",(0,t.jsx)(ec,{date:s.createdAt})]})})}function el(e){let{pb:s}=e,i=s.blameUsername;return(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsxs)(g.Text,{color:"gray-900",children:[(0,t.jsx)(ec,{date:s.updatedAt})," by ",i]}),(0,t.jsx)(es.PrincipalAvatar,{size:16,title:s.blameUsername,principalId:s.blameUserId,principal:{type:"user",uid:s.blameUserId,username:s.blameUsername}})]})}function ea(e){let{pb:s}=e;switch(s.scope){case"user":return(0,t.jsx)(en,{pb:s,tooltip:"User has access to this domain.",children:"granted access"});case"shareable-link":return(0,t.jsx)(T.Tooltip,{cursor:"pointer",desktopOnly:!0,text:"Anyone with the shareable link has access to this domain",children:(0,t.jsx)(g.Text,{truncate:!0,children:"Shareable link generated"})});case"alias-protection-override":return(0,t.jsx)(T.Tooltip,{cursor:"pointer",desktopOnly:!0,text:"Anyone can access this domain.",children:(0,t.jsx)(g.Text,{truncate:!0,children:"Deployment protection exception created"})});case"email_invite":return(0,t.jsx)(T.Tooltip,{cursor:"pointer",desktopOnly:!0,text:"The Vercel account linked to this email can access this domain. Access will be granted when the user visits the domain, and the username populated here.",children:(0,t.jsxs)(g.Text,{truncate:!0,children:[s.id," invited to access"]})})}}let eo=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit",second:"2-digit",year:"numeric",month:"short",day:"numeric",timeZoneName:"short"});function ec(e){let{date:s}=e;return(0,t.jsx)(T.Tooltip,{cursor:"pointer",style:{textTransform:"lowercase"},text:eo.format(new Date(s)),children:(0,et.useAgo)(s)})}function ed(e){let{pb:s,slug:i}=e,n=s.projectName?`/${i}/${encodeURIComponent(s.projectName)}`:null;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.FaviconOrFramework,{project:s.projectId?{id:s.projectId,framework:s.projectFramework,targets:s.projectTargets}:void 0}),(0,t.jsx)(m.Entity.Content,{description:(0,t.jsx)(g.Text,{color:"gray-900",truncate:!0,children:(0,t.jsx)(F.Link,{href:n&&s.deploymentId?`${n}/${s.deploymentId.replace("dpl_","")}`:`https://${s.alias}`,variant:"underline",children:s.alias})}),title:s.projectName?(0,t.jsx)(g.Text,{truncate:!0,weight:600,children:(0,t.jsx)(F.Link,{href:`${n}/settings/deployment-protection`,variant:"underline",children:s.projectName})}):void 0})]})}function eu(e){let{pb:s,...i}=e,{team:n,user:r}=(0,a.useAccount)(),l=n?.slug||r?.username||"";return(0,t.jsx)(m.Entity,{className:E.default.entity,footer:(0,t.jsx)(ei,{className:(0,B.clsx)(E.default.footer,"geist-show-on-mobile"),pb:s}),left:(0,t.jsx)(ed,{pb:s,slug:l}),right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ei,{className:"geist-hide-on-mobile",pb:s}),(0,t.jsx)(Z,{...i,pb:s,teamId:n?.id})]})})}function ep(){return(0,t.jsx)(m.Entity,{className:E.default.entity,footer:(0,t.jsx)(m.Entity.Content,{className:(0,B.clsx)(E.default.footer,"geist-show-on-mobile"),description:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0},title:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})})}),left:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(M.FaviconOrFramework,{}),(0,t.jsx)(m.Entity.Content,{description:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0},title:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"100px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})})})]}),right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Entity.Content,{className:"geist-hide-on-mobile",description:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})}),style:{minWidth:0},title:(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"180px",height:"14px",marginBottom:"4px",marginTop:"4px"},children:(0,t.jsx)("span",{})})}),(0,t.jsx)(q.Skeleton,{show:!0,style:{width:"32px",height:"14px",marginBottom:"4px",marginTop:"4px",marginLeft:"auto"},children:(0,t.jsx)("span",{})})]})})}var eh=e.i(1265902),ex=e.i(2240289);let ej=function(){let{limit:e=10,scope:t,search:s,userIds:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{team:o,isTeam:c,user:d}=(0,a.useAccount)(),u=c?o?.id:d?.uid,p=(0,r.default)((i,r)=>{if(!u)return null;let a=r?.pagination.next;return`/api/deployments/protection-bypasses-external-user-access${(0,l.encode)({teamId:o?.id,limit:e,scope:t,until:a,search:s,userIds:n})}`},async e=>{let t=await fetch(e);if(!t.ok)throw Error(t.statusText);return t.json()}),h=!!p.data,x=!!(p.data&&p.data[p.data.length-1]?.externalUsers?.length<e),j=(0,i.useMemo)(()=>p.data?p.data.flatMap(e=>e.externalUsers):[],[p.data]),g=h&&0===j.length,m=!!(p.data&&p.size>p.data.length);return[p,{isEmpty:g,externalUsers:j,initialDataLoaded:h,isReachingEnd:x,loadMore:()=>p.setSize(e=>e+1),isLoadingMore:m,isValidating:p.isValidating}]};var eg=e.i(6727308),em=e.i(5478630),ey=e.i(2733203),ef=e.i(653558),ek=e.i(1190215),ev=e.i(4652282),eb=e.i(2198583),eS=e.i(902156),ew=e.i(6284911),eC=e.i(8382218),eI=e.i(1047634);function eT(e){let{swr:s,placeholder:n,items:r,search:l,setSearch:a}=e,{loadMore:o,isLoadingMore:c,initialDataLoaded:d,isEmpty:u,isReachingEnd:p}=s,{state:{listRef:h}}=(0,eS.useMenu)();(0,i.useEffect)(()=>{"object"==typeof h&&null!==h&&h.current?.focus()},[h]);let j=(0,S.useIntersectionObserverRef)(()=>{c||o()},{rootMargin:"200px 0px"});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.Stack,{as:"li",className:eI.default.stickySearch,children:(0,t.jsx)(ew.SearchInput,{clearable:!1,innerWrapperClassName:eI.default.searchContainer,onChange:e=>a(e.target.value),placeholder:n,suffix:(0,t.jsx)(eC.Kbd,{children:"Esc"}),suffixStyling:!1})}),d&&0===r.length?(0,t.jsx)(x.Stack,{align:"center",justify:"center",style:{margin:"var(--geist-gap-double)"},children:(0,t.jsx)(g.Text,{color:"gray-900",children:"No results"})}):null,r,(0,t.jsx)("div",{ref:!(r.length>0)||u||p?void 0:j}),(l||!c)&&d?null:(0,t.jsx)(x.Stack,{align:"center",as:"li",justify:"center",paddingX:2,paddingY:2.5,children:(0,t.jsx)(b.Spinner,{size:20})})]})}function eF(e){let{selected:s,toggleUsersFilter:n,scope:r}=e,[l,a]=(0,i.useState)(""),[o,c]=ej({search:(0,eb.useDebouncedValue)(l,300),scope:r}),{externalUsers:d}=c;return(0,t.jsx)(eT,{items:d.map(e=>(0,t.jsx)(I.MenuItem,{onClick:n(e.id),children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1.5,justify:"space-between",style:{width:"100%"},children:[(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:3,style:{minWidth:0},children:[(0,t.jsx)(ee.Avatar,{size:20,uid:e.id}),(0,t.jsx)(g.Text,{as:"span",title:e.username||e.email||e.id,truncate:!0,children:e.username||e.email||e.id})]}),(0,t.jsx)(x.Stack,{align:"center",direction:"row",gap:1.5,style:{maxWidth:"25%"},children:s.includes(e.id)?(0,t.jsx)(W.Check,{}):null})]})},e.id)),placeholder:"username or email",search:l,setSearch:a,swr:c})}var eA=e.i(8673823),eP=e.i(8761340);function eM(e){let{selected:s,toggleAliasFilter:n}=e,[r,l]=(0,i.useState)(""),a=(0,eb.useDebouncedValue)(r,300),[o,c]=(0,eA.useAliasesInfinite)({limit:10}),{aliases:d}=c,u=(0,eP.default)({domain:a,filterDeleted:!0},{}),p=u.data?[u.data]:[];return(0,t.jsx)(eT,{items:(r?p:d).map(e=>(0,t.jsx)(I.MenuItem,{onClick:n(e.alias),children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1.5,justify:"space-between",style:{width:"100%"},children:[(0,t.jsx)(x.Stack,{align:"center",direction:"row",gap:3,style:{minWidth:0},children:(0,t.jsx)(g.Text,{as:"span",title:e.alias,truncate:!0,children:e.alias})}),(0,t.jsx)(x.Stack,{align:"center",direction:"row",gap:1.5,style:{maxWidth:"25%"},children:s.includes(e.alias)?(0,t.jsx)(W.Check,{}):null})]})},e.alias)),placeholder:"domain (exact)",search:r,setSearch:l,swr:r?{initialDataLoaded:!u.isLoading,isEmpty:!u.data,loadMore:()=>Promise.resolve(void 0),isLoadingMore:!1,isReachingEnd:!0}:c})}function eN(e){let{selected:s,toggleProjectFilter:n}=e,[r,l]=(0,i.useState)(""),a=(0,eb.useDebouncedValue)(r,300),[o,c]=(0,k.useProjectListInfinite)({search:a}),{projects:d}=c;return(0,t.jsx)(eT,{items:d.map(e=>(0,t.jsx)(I.MenuItem,{onClick:n(e.name),children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1.5,justify:"space-between",style:{width:"100%"},children:[(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:3,style:{minWidth:0},children:[(0,t.jsx)(eg.FaviconOrFramework,{hideSkeleton:!0,project:e,size:20}),(0,t.jsx)(g.Text,{as:"span",title:e.name,truncate:!0,children:e.name})]}),(0,t.jsx)(x.Stack,{align:"center",direction:"row",gap:1.5,style:{maxWidth:"25%"},children:s.includes(e.name)?(0,t.jsx)(W.Check,{}):null})]})},e.id)),placeholder:"project name",search:r,setSearch:l,swr:c})}function eO(e){let{filteredUsers:s,toggleUsersFilter:n,filteredAliases:r,toggleAliasFilter:l,filteredProjects:a,toggleProjectFilter:o}=e,[c,d]=(0,i.useState)(null),u=(0,i.useMemo)(()=>"user"===c?(0,t.jsx)(eF,{selected:s,toggleUsersFilter:n}):"domain"===c?(0,t.jsx)(eM,{selected:r,toggleAliasFilter:l}):"project"===c?(0,t.jsx)(eN,{selected:a,toggleProjectFilter:o}):null,[c,r,s,a,n,l,o]),p=(e,t)=>{e.preventDefault(),d(t)};return(0,t.jsxs)(ek.MenuContainer,{onClose:()=>{d(null)},onEscapePressed:(e,t)=>{e.stopPropagation(),null!==c&&(e.preventDefault(),d(null),setTimeout(()=>{t.current?.focus()},0))},children:[(0,t.jsx)(ey.MenuButton,{prefix:(0,t.jsx)(ev.Plus,{}),type:"secondary",children:"Filter"}),(0,t.jsx)(ef.Menu,{className:(0,B.clsx)({[em.default.menu]:!!c}),width:c?300:240,children:c?u:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.MenuItem,{onClick:e=>{p(e,"user")},children:"User"}),(0,t.jsx)(I.MenuItem,{onClick:e=>{p(e,"domain")},children:"Domain"}),(0,t.jsx)(I.MenuItem,{onClick:e=>{p(e,"project")},children:"Project"})]})})]})}let eU=[{value:"user",display:"User Access"},{value:"email_invite",display:"Invited Emails"},{value:"shareable-link",display:"Shareable Links"},{value:"alias-protection-override",display:"Unprotected Previews"}].reduce((e,t)=>(e[t.value]=t.display,e),{});function e$(e){let{onClick:s}=e;return(0,t.jsx)(L.Button,{"aria-label":"Clear",onClick:s,shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",typeName:"button",children:(0,t.jsx)(z.Cross,{color:"gray-1000"})})}function eq(e){let{filteredScope:s,setScopeFilter:i}=e;return(0,t.jsxs)(ek.MenuContainer,{children:[(0,t.jsx)(ey.MenuButton,{align:"flex-grow",suffix:s?(0,t.jsx)(e$,{onClick:i()}):void 0,type:"secondary",children:(0,t.jsx)(g.Text,{children:s?eU[s]:"All Access"})}),(0,t.jsxs)(ef.Menu,{width:200,children:[(0,t.jsxs)(I.MenuItem,{onClick:i(),children:[(0,t.jsx)(x.Stack,{flex:1,children:(0,t.jsx)(g.Text,{children:"All Access"})}),(0,t.jsx)(x.Stack,{align:"end",flex:0,children:s?null:(0,t.jsx)(W.Check,{})})]}),Object.entries(eU).map(e=>{let[n,r]=e,l=s===n;return(0,t.jsxs)(I.MenuItem,{onClick:i(n),children:[(0,t.jsx)(x.Stack,{flex:1,children:(0,t.jsx)(g.Text,{children:r})}),(0,t.jsx)(x.Stack,{align:"end",flex:0,children:l?(0,t.jsx)(W.Check,{}):null})]},n)})]})]})}e.i(8706823);var e_=e.i(6728028);function eB(e){var s,i;let{value:n,tooltip:r,onClearFilter:l,prefix:a}=e;return(0,t.jsx)(T.Tooltip,{as:"div",text:r,children:(0,t.jsx)(e_.FilterMenuButton,{onClearFilter:l,prefix:a,style:{paddingInline:"10px"},children:n?(i=20,(s=n).length>20?`${s.slice(0,i-1)}…`:s):null})})}function eE(e){let{scope:s,filteredUsers:n,toggleUsersFilter:r,filteredAliases:l,toggleAliasFilter:a,filteredProjects:o,toggleProjectFilter:c,filteredDate:d,setDateFilter:u,filteredScope:p,setScopeFilter:h,clearFilters:j}=e,{data:g}=(0,ex.useProjects)(o),[m,y]=(0,i.useState)({});(0,i.useEffect)(()=>{let e=g?.reduce((e,t)=>(m[t.name]||(e[t.name]=t),e),{});e&&Object.keys(e).length>0&&y({...m,...e})},[g]);let[f,{externalUsers:k}]=ej({userIds:n}),[v,b]=(0,i.useState)({});return(0,i.useEffect)(()=>{let e=k.reduce((e,t)=>(v[t.id]||(e[t.id]=t),e),{});Object.keys(e).length>0&&b({...v,...e})},[k]),(0,t.jsxs)(x.Stack,{direction:"row",gap:2,style:{flexWrap:"wrap"},children:[(0,t.jsxs)(x.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(eO,{filteredAliases:l,filteredProjects:o,filteredUsers:n,toggleAliasFilter:a,toggleProjectFilter:c,toggleUsersFilter:r}),(0,t.jsx)(eh.Calendar,{buttonClassName:em.default.calendar,buttonSuffix:d?(0,t.jsx)(e$,{onClick:()=>u()}):void 0,maxValue:Date.now(),onChange:u,value:d,width:"auto"})]}),s?null:(0,t.jsx)(eq,{filteredScope:p,setScopeFilter:h}),l.map(e=>(0,t.jsx)(eB,{onClearFilter:a(e),tooltip:e,value:e},`filter-${e}`)),o.map(e=>{let s=m[e];return(0,t.jsx)(eB,{onClearFilter:c(e),prefix:(0,t.jsx)(eg.FaviconOrFramework,{hideSkeleton:!0,project:s,size:24}),value:e},`filter-${e}`)}),n.map(e=>{let s=v[e];return(0,t.jsx)(eB,{onClearFilter:r(e),prefix:(0,t.jsx)(ee.Avatar,{size:24,uid:e}),tooltip:s?void 0:e,value:s?.username||s?.email},`filter-${e}`)}),n.length>0||l.length>0||o.length>0||p&&d?(0,t.jsx)(L.Button,{onClick:j,style:{color:"var(--accents-5)"},type:"tertiary",children:"Clear Filters"}):null]})}function eL(e){let{setQuery:s,access:r,scope:l,revalidateByPassCount:a}=e,c=(0,n.useSearchParams)(),[p,h]=(0,i.useState)([]),[j,g]=(0,i.useState)(),[y,f]=(0,i.useState)([]),[k,v]=(0,i.useState)([]),[b,S]=(0,i.useState)(),[C,I]=o({projectNames:y,scope:l||j,aliases:p,userIds:k,access:r,until:b?.end.valueOf(),since:b?.start.valueOf()}),{mutate:T}=C,{protectionBypasses:A}=I;(0,i.useEffect)(()=>{if(!c)return;let{projectNames:e,aliases:t,userIds:s,scope:i,since:n,until:r}=(e=>{let t=e.get("p"),s=t?.split(","),i=e.get("a"),n=i?.split(","),r=e.get("u"),l=r?.split(","),a=e.get("s");return{projectNames:s,aliases:n,userIds:l,scope:"shareable-link"===a||"user"===a||"alias-protection-override"===a||"email_invite"===a?a:void 0,since:Number(e.get(d))||void 0,until:Number(e.get(u))||void 0}})(c);(!e&&y.length>0||e&&e.toString()!==y.toString())&&f(e||[]),(!t&&p.length>0||t&&t.toString()!==p.toString())&&h(t||[]),(!s&&k.length>0||s&&s.toString()!==k.toString())&&v(s||[]),(!i&&j||i&&i!==j)&&g(i||void 0);let l=n&&r?{start:n,end:r}:null;(!l&&b||l&&(l.end!==b?.end||l.start!==b.start))&&S(l||void 0)},[c,y,p,k,j,b,h,f,v,g,S]);let P=(0,i.useCallback)(e=>()=>{s({projectNames:y.includes(e)?y.filter(t=>t!==e):[...y,e]})},[y,s]),M=(0,i.useCallback)(e=>()=>{s({aliases:p.includes(e)?p.filter(t=>t!==e):[...p,e]})},[p,s]),N=(0,i.useCallback)(e=>()=>{s({userIds:k.includes(e)?k.filter(t=>t!==e):[...k,e]})},[k,s]),O=(0,i.useCallback)(e=>()=>{s({scope:e||null})},[s]),U=(0,i.useCallback)(e=>{s({until:e?.end.valueOf()||null,since:e?.start.valueOf()||null})},[s]),$=p.length>0||y.length>0||k.length>0||j||b,q="requested"===r?(0,t.jsxs)(t.Fragment,{children:["Pending requests will appear here when someone requests access to a preview protected with Vercel Authentication."," ",(0,t.jsx)(F.Link,{external:!0,href:"/docs/security/deployment-protection/methods-to-protect-deployments/vercel-authentication#access-requests",variant:"highlight",children:"Learn more"})]}):(0,t.jsx)(t.Fragment,{children:"Any external access granted, shareable links created, or protection disabled for domains in projects protected with Deployment Protection will appear here."});return(0,t.jsxs)(x.Stack,{gap:4,children:[(0,t.jsx)(eE,{clearFilters:()=>{s({userIds:[],projectNames:[],aliases:[],scope:null,since:null,until:null})},filteredAliases:p,filteredDate:b,filteredProjects:y,filteredScope:j,filteredUsers:k,scope:l,setDateFilter:U,setScopeFilter:O,toggleAliasFilter:M,toggleProjectFilter:P,toggleUsersFilter:N}),A.length>0?(0,t.jsx)(m.Entity.List,{children:A.map(e=>(0,t.jsx)(eu,{pb:e,revalidateAliasProtectionBypasses:async()=>{await Promise.all([T(),a()])},toggleAliasFilter:M,toggleProjectFilter:P,toggleUsersFilter:N},`${e.alias}-${e.id}`))}):null,(0,t.jsx)(w,{Skeleton:ep,emptyDescription:$?void 0:q,emptyLabel:$?"No results":`No ${"requested"===r?"pending requests":"external access"}`,infinite:I,swr:C})]})}let eD=[{name:"projects",title:()=>"Projects",Component:function(e){let{setQuery:s}=e,[n,r]=(0,i.useState)(void 0),[l,a]=(0,k.useProjectListInfinite)({search:n,limit:10,revalidateFirstPage:!1},{revalidateOnFocus:!1},!1,!0),{projects:o,isReachingEnd:c}=a,[d,u]=(0,i.useState)(null),p=(0,i.useMemo)(()=>o.map(e=>({...e,...N(e)})).filter(e=>!d||"protected"===d===e.isProtectionEnabled),[o,d]),h=p.filter(e=>{let{isProtectionEnabled:t}=e;return t}).length,b=p.length-h,S=!!(n||d);return(0,t.jsxs)(x.Stack,{gap:4,children:[(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:4,style:{flexWrap:"wrap"},children:[(0,t.jsx)(x.Stack,{style:{flexGrow:1},children:(0,t.jsx)(v.DebouncedSearchInput,{placeholder:"Search projects...",setSearch:r})}),(0,t.jsxs)(j.Switch,{name:"filter",style:{alignSelf:"flex-start"},children:[(0,t.jsx)(j.Switch.Control,{defaultChecked:!0,label:"All",onClick:()=>u(null),value:"all"}),(0,t.jsx)(j.Switch.Control,{label:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsx)(f.CheckCircleFill,{}),(0,t.jsxs)(g.Text,{truncate:!0,children:["Protected"," ",c?`(${h})`:null]})]}),onClick:()=>u("protected"),value:"protected"}),(0,t.jsx)(j.Switch.Control,{label:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsx)(y.Warning,{}),(0,t.jsxs)(g.Text,{truncate:!0,children:["Unprotected"," ",c?`(${b})`:null]})]}),onClick:()=>u("unprotected"),value:"unprotected"})]})]}),p.length>0?(0,t.jsx)(m.Entity.List,{children:p.map(e=>{let i;return(0,t.jsx)(O,{filterProject:(i=e.name,e=>{s({tab:e,projectNames:[i]})}),project:e},e.id)})}):null,(0,t.jsx)(w,{Skeleton:_,emptyLabel:S?"No results":"No projects",infinite:a,search:n,swr:l})]})},props:{}},{name:"access",title:()=>"Access",Component:eL,props:{access:"granted"}},{name:"requests",title:e=>e&&e>0?`Requests (${e})`:"Requests",Component:eL,props:{access:"requested",scope:"user"}}];function ez(){let e=(0,n.useRouter)(),r=(0,n.usePathname)(),l=(0,n.useSearchParams)(),[a,c]=(0,i.useState)(p(l)||"projects"),[{mutate:d},{requestCount:u}]=o({limit:1,includeRequestCount:!0}),x=p(l);x&&x!==a&&c(x);let j=t=>{if(!r||!l)return;let s=h(l,t);e.replace(`${r}?${s.toString()}`)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Tabs,{selected:a,setSelected:t=>{if(!r||!l)return;let s=h(l,{tab:t});e.push(`${r}?${s.toString()}`)},tabs:eD.map(e=>{let{title:t,name:s}=e;return{title:t(u),value:s}})}),eD.map(e=>{let{name:s,Component:i,props:n}=e;return a===s?(0,t.jsx)(i,{setQuery:j,...n,revalidateByPassCount:d},s):null})]})}function eW(){return(0,t.jsx)(i.Suspense,{children:(0,t.jsx)(ez,{})})}}}]);

//# sourceMappingURL=abed547565d30d61.js.map
//# debugId=3639dc27-4df9-5617-80d4-9c710622e1ac
