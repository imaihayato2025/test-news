
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7b59e048-de9e-50af-92cf-d43e0977335c")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{908737:e=>{"use strict";e.s({default:()=>n});var t=e.i(6530772),r={};let n=function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];var s=[],l=[],o=function(e){var n=(0,t.createContext)(r);s.push(n),l.push(function(){return(0,t.useContext)(n)})};return i.length?i.forEach(function(e){return o(e.name)}):o(e.name),[function(r){for(var n=r.children,a=e(function(e,t){if(null==e)return{};var r,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(i[r]=e[r]);return i}(r,["children"])),l=n,o=0;o<s.length;o+=1){var u=s[o],d=i[o]||function(e){return e};l=(0,t.createElement)(u.Provider,{value:d(a)},l)}return l}].concat(l)}},5510483:e=>{"use strict";function t(e,t,r){let n={...e,...t};return t.levels?.length===0&&delete n.levels,t.deploymentDomains?.length===0&&delete n.deploymentDomains,t.routes?.length===0&&delete n.routes,t.requestPaths?.length===0&&delete n.requestPaths,t.requestIds?.length===0&&delete n.requestIds,t.statusCodes?.length===0&&delete n.statusCodes,t.caches?.length===0&&delete n.caches,t.domains?.length===0&&delete n.domains,t.requestMethods?.length===0&&delete n.requestMethods,t.sources?.length===0&&delete n.sources,t.environments?.length===0&&delete n.environments,t.branches?.length===0&&delete n.branches,""===t.searchQuery&&delete n.searchQuery,(!t.selectedLogId||r)&&delete n.selectedLogId,n}function r(e){if(e&&0!==e.length)return e.join(",")}function n(e){let t=Number(e.split("-")[1]);if(!Number.isNaN(t)||!Number.isNaN(t=Number(e.slice(0,13))))return t}function i(e){return Array.from(e.matchAll(/"(?<tokenQuoted>[^"]+)"|(?<tokenWord>\S+)/g),e=>e.groups?.tokenQuoted||e.groups?.tokenWord)}e.s({extractTimestampOfLogId:()=>n,getNewLogsQuery:()=>t,stringifyArrayContent:()=>r,tokenizeSearchQuery:()=>i})},61903:e=>{e.v({badge:"disclosure-module__kAv1ia__badge",button:"disclosure-module__kAv1ia__button",collapseContent:"disclosure-module__kAv1ia__collapseContent",collapseGroup:"disclosure-module__kAv1ia__collapseGroup",icon:"disclosure-module__kAv1ia__icon",iconWrapper:"disclosure-module__kAv1ia__iconWrapper",open:"disclosure-module__kAv1ia__open"})},9251900:e=>{"use strict";e.s({Disclosure:()=>f});var t=e.i(6645307),r=e.i(6530772),n=e.i(5610210),i=e.i(8666290),a=e.i(7916122),s=e.i(3920197),l=e.i(889716),o=e.i(8084653),u=e.i(1824423),d=e.i(567017),c=e.i(61903);let m=e=>{let{defaultExpanded:m=!1,title:f,contentClassName:g,count:h,id:p,onToggle:v,onExpand:y,children:j,className:b,buttonClassName:x,onClearFilter:C,..._}=e,[w,T]=(0,r.useState)(m);(0,r.useEffect)(()=>{T(m)},[m]);let I=(0,u.useCollapse)(),k=(0,d.useId)("collapse-section-"),L=(0,d.useId)("collapse-button-"),[A,{height:S}]=(0,i.default)(),N=(0,r.useCallback)(()=>T(!w),[w]),U=(0,r.useMemo)(()=>I?0===I.selected.size?w:I.selected.has(f):w,[I,w,f]),D=(0,r.useCallback)(()=>{"function"==typeof v&&v(),U||"function"!=typeof y||y(),I?I.onChange(U?"":f):N()},[I,U,f,v,N,y]);return(0,t.jsxs)("div",{className:(0,n.clsx)(c.default.collapse,{[c.default.context]:I},b),id:p,..._,children:[(0,t.jsx)(o.Text,{size:14,weight:500,children:(0,t.jsx)("button",{"aria-controls":k,"aria-disabled":U?m:void 0,"aria-expanded":U,"aria-label":f,className:(0,n.clsx)("geist-reset",c.default.button,{[c.default.open]:U},x),id:L,onClick:D,children:(0,t.jsxs)(l.Stack,{align:"center",as:"span",direction:"row",justify:"space-between",children:[(0,t.jsxs)(l.Stack,{align:"center",as:"span",direction:"row",children:[(0,t.jsx)("span",{className:c.default.iconWrapper,children:(0,t.jsx)("span",{className:(0,n.clsx)(c.default.icon,{[c.default.open]:U}),children:(0,t.jsx)(a.ChevronRight,{"aria-hidden":"true",size:16})})}),(0,t.jsx)("span",{className:c.default.text,children:f})]}),h?(0,t.jsxs)("span",{"aria-label":`Clear ${f} filter`,className:c.default.badge,onClick:e=>{e.stopPropagation(),C?.()},onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),C?.())},role:"button",tabIndex:0,children:[(0,t.jsx)(s.CrossCircle,{color:"gray-700"}),(0,t.jsx)(o.Text,{color:"gray-900",size:12,weight:500,children:h})]}):null]})})}),(0,t.jsx)("div",{"aria-labelledby":L,className:c.default.collapseContent,id:k,role:"region",style:{height:U?0!==S?S:void 0:0,visibility:U?"visible":"hidden"},children:(0,t.jsx)("div",{className:g,ref:A,children:j})})]})};m.displayName="Disclosure";let f=(0,r.memo)(m)},750479:e=>{"use strict";e.s({sub:()=>i});var t=e.i(5052850),r=e.i(1748110),n=e.i(7909803);function i(e,i,a){let{years:s=0,months:l=0,weeks:o=0,days:u=0,hours:d=0,minutes:c=0,seconds:m=0}=i,f=(0,n.subMonths)(e,l+12*s,a),g=(0,r.subDays)(f,u+7*o,a);return(0,t.constructFrom)(a?.in||e,g-1e3*(m+60*(c+60*d)))}},8541058:e=>{"use strict";e.s({useTracingQuickLinks:()=>m});var t=e.i(6645307),r=e.i(6530772),n=e.i(1183506),i=e.i(6579240),a=e.i(7358004),s=e.i(1635782),l=e.i(4382180),o=e.i(5847686),u=e.i(1933128),d=e.i(8025298);function c(e){let{children:r}=e;return(0,t.jsx)("span",{className:"grid size-[18px] place-content-center",children:r})}let m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{includeRequest:m=!0}=e;return(0,r.useCallback)(e=>{let r=e.attributes,f=r["vercel.ownerId"],g=r["vercel.projectId"],h=r["vercel.deploymentId"];if(!f||!g||!h)return[];let p=(0,n.default)((0,i.getDashboardDeploymentEndpoint)({teamSlug:f,projectName:g,deploymentId:h})).then(e=>(e.team||(e.team={name:"Unknown Team",slug:e.ownerId,id:e.ownerId}),e.project||(e.project={name:"Unknown Project",id:e.projectId,framework:""}),e.id=e.id.replace("dpl_",""),e)),v=[{key:"Project",value:p.then(e=>({label:e.project.name,href:`/${e.team.slug}/${e.project.name}`,icon:(0,t.jsx)(u.ProjectAvatar,{className:"!rounded-full",project:e.project,size:18})}))},{key:"Deployment",value:p.then(e=>({label:(0,t.jsx)("span",{className:"text-label-13-mono",children:(0,d.default)(e).hash}),href:`/${e.team.slug}/${e.project.name}/${e.id}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(a.StatusDot,{state:"READY"})})}))}],y=r["http.route"];y&&v.push({key:"Route",value:p.then(e=>({label:"Observability",href:`/${e.team.slug}/${e.project.name}/observability/route/${encodeURIComponent(String(y).replace(/\.rsc$/,""))}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(s.Eye,{size:12})})}))});let j=r["vercel.sessionId"];j&&v.push({key:"Session",value:p.then(e=>({label:"Traces",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({sessionIds:String(j),hasTraces:"true"}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(l.Lightning,{size:12})})}))});let b=m&&r["vercel.requestId"];return b&&v.push({key:"Request",value:p.then(e=>({label:"Logs",href:`/${e.team.slug}/${e.project.name}/${e.id}/logs?${new URLSearchParams({requestIds:String(b),selectedLogId:String(b)}).toString()}`,icon:(0,t.jsx)(c,{children:(0,t.jsx)(o.Logs,{size:12})})}))}),v},[m])}},4382180:e=>{"use strict";e.s({Lightning:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M7.15714 0L2.33264 9.40776L1.77252 10.5H3.00001H7.00001C7.13808 10.5 7.25001 10.6119 7.25001 10.75V16H8.84288L13.6674 6.59224L14.2275 5.5H13H9.00001C8.86194 5.5 8.75001 5.38807 8.75001 5.25V0H7.15714ZM7.00001 9H4.22749L7.25001 3.1061V5.25C7.25001 6.2165 8.03351 7 9.00001 7H11.7725L8.75001 12.8939V10.75C8.75001 9.7835 7.96651 9 7.00001 9Z" fill="currentColor"/>')},4843199:e=>{"use strict";e.s({Minus:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2 7.25H2.75H13.25H14V8.75H13.25H2.75H2V7.25Z" fill="currentColor"/>')},8767230:e=>{e.v("/_next/static/media/worker.37e3e57c.ts")},9243980:e=>{"use strict";e.s({MagnifyingGlassPlus:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M1.5 6.5C1.5 3.73858 3.73858 1.5 6.5 1.5C9.26142 1.5 11.5 3.73858 11.5 6.5C11.5 9.26142 9.26142 11.5 6.5 11.5C3.73858 11.5 1.5 9.26142 1.5 6.5ZM6.5 0C2.91015 0 0 2.91015 0 6.5C0 10.0899 2.91015 13 6.5 13C8.02469 13 9.42677 12.475 10.5353 11.596L13.9697 15.0303L14.5 15.5607L15.5607 14.5L15.0303 13.9697L11.596 10.5353C12.475 9.42677 13 8.02469 13 6.5C13 2.91015 10.0899 0 6.5 0ZM4.125 5.875H4.75H5.875V4.75V4.125H7.125V4.75V5.875H8.25H8.875V7.125H8.25H7.125V8.25V8.875H5.875V8.25V7.125H4.75H4.125V5.875Z" fill="currentColor"/>')},8019419:[e=>{"use strict";function t(e){let[t,r]=e;return 1e3*t+r/1e6}function r(e){return[Math.floor(e/1e3),e%1e3*1e3]}e.s({addToRow:()=>u,adjustSpanVisibility:()=>d,parseTrace:()=>l},8019419),e.s({formatDuration:()=>i,formatTimeSelection:()=>s,getHighResInMs:()=>t,getMsInHighRes:()=>r},9501637);let n=new Intl.NumberFormat(void 0,{maximumFractionDigits:2});function i(e){return e>=1e3?`${n.format(e/1e3)}s`:`${n.format(e)}ms`}let a=new Intl.NumberFormat(void 0,{minimumFractionDigits:2,maximumFractionDigits:2});function s(e){return e>=1e3?`${a.format(e/1e3)}s`:`${a.format(e)}ms`}let l=e=>{let{spans:n}=e,i={startTime:0,endTime:0,duration:0,depth:0,children:[]},a={},s=new Map,l=e=>{let t=s.get(e);if(t)return t;let r=s.size+1;return s.set(e,r),r},u=!1;for(let e of n){let r,n=t(e.startTime),s=t(e.endTime),d=t(e.duration);s>i.endTime&&(i.endTime=s,i.duration=s-i.startTime),(0===i.startTime||n<i.startTime)&&(i.startTime=n,i.duration=i.endTime-n);let c=e.resource.startsWith("vercel.");c||(u=!0);let m=c&&("vercel.serverless-runtime"!==e.resource||!("http.method"in e.attributes)),f=m?0:l(e.resource);m&&(r=`â–² ${e.name}`),a[e.spanId]={parent:null,startTime:n,endTime:s,duration:d,span:e,depth:0,label:r,events:o(e),isVercel:m,children:[],resourceIndex:f}}let d=(e,t)=>{let r;t&&(r=a[t])||(r=i),e.parent=r,r.children.push(e)},c=e=>{for(let t of("parent"in e&&(e.depth=e.parent.depth+1),e.children))c(t)},m=1,f=(e,t)=>{if("parent"in e&&e.span.name===t){let t=e.endTime,n=e=>e.children.length?e.children.map(n).sort((e,t)=>e.duration-t.duration)[0]||e:"waitUntil"===e.span.name?(t=e.startTime,e.parent):e,i=n(e),s=`instrumentation-hint-${m++}`,l=.05*e.duration,o=e.startTime+l,u=Math.max(o+l,Math.min(t-.01*e.duration,e.endTime-l)),d=u-o,c={parent:i,startTime:o,endTime:u,duration:d,span:{spanId:s,name:"Add your spans here",resource:"",kind:0,library:{name:""},status:{code:200},traceFlags:0,attributes:{},links:[],events:[],startTime:r(o),endTime:r(u),duration:r(d)},depth:e.depth+1,isVercel:!1,isInstrumentationHint:!0,children:[],resourceIndex:1};return i.children.push(c),a[s]=c,!0}for(let r of e.children)if(f(r,t))return!0;return!1};for(let e of Object.values(a))d(e,e.span.parentSpanId);if(c(i),!u){for(let e of["Invoke Function","Invoke Middleware","Vercel Runtime"])if(f(i,e))break}return{root:i,map:a}},o=e=>{if(!e.events.length)return;let r=`${e.spanId}:ev`;return e.events.map((e,n)=>({key:`${r}${n}`,timestamp:t(e.timestamp),event:e})).sort((e,t)=>e.timestamp-t.timestamp)},u=(e,t,r)=>{let n=t.parent;for(let i=(n?.row||-1)+1;;++i){let n=e[i];if(n){if(!n.every(e=>{let{startTime:n,endTime:i}=e;return n+r>t.endTime||i-r<t.startTime}))continue}else n=[],e.push(n);t.row=i,n.push(t);break}},d=(e,t)=>{let r=e.duration*t;return e.isVisible=r>=2,e.isHovered=!1,e.isVisible}},[9501637]],8502629:[e=>{"use strict";e.s({useLogsApiParams:()=>y,useLogsQueryState:()=>v},8502629);var t=e.i(6530772),r=e.i(1863837),n=e.i(5535439),i=e.i(2306774);e.s({useUserRetention:()=>g},3120835);var a=e.i(750479),s=e.i(4689206),l=e.i(6465861);let o=["years","months","weeks","days","hours","minutes","seconds"];var u=e.i(7831155),d=e.i(503726),c=e.i(3326412);let m={hobby:{hours:1},pro:{days:1},enterprise:{days:3}},f={hobby:{hours:1},pro:{days:1},enterprise:{days:30}},g=()=>{let{team:e,isLoading:r}=(0,d.useAccount)(),{isReady:n,value:i}=(0,c.useRuntimeLogsExtendedTimelineFlag)(),g=!!n&&!!i,h=e?.billing?.plan??"hobby";return(0,t.useMemo)(()=>{let t=(g?f:m)[h],n=function(e,t){let r=(0,l.getDefaultOptions)(),n=(void 0)??r.locale??s.defaultLocale,i=(void 0)??o,a=t?.zero??!1,u=t?.delimiter??" ";return n.formatDistance?i.reduce((t,r)=>{let i=`x${r.replace(/(^.)/,e=>e.toUpperCase())}`,s=e[r];return void 0!==s&&(a||e[r])?t.concat(n.formatDistance(i,s)):t},[]).join(u):""}(t),i={past2Weeks:{days:14},pastWeek:{days:7},past30Minutes:{minutes:30},pastHour:{hours:1},past12Hours:{hours:12},pastDay:{days:1},maximum:t},d=(e,t)=>(0,a.sub)(t,i[e]).getTime();return{isLoading:r,billingPlan:h,maxDuration:t,maxDurationFormatted:n,getNewDates:e=>{let t=Date.now();return[new Date(d(e,t)),new Date(t)]},computeNewRelativeStartDate:d,findClosestTimeline:(e,t)=>{let r=[];for(let e of Object.values(i))r.push((0,a.sub)(t,e));let n=function(e,t){let r,n,i=+(0,u.toDate)(e);return isNaN(i)?NaN:(t.forEach((e,t)=>{let a=(0,u.toDate)(e);if(isNaN(+a)){r=NaN,n=NaN;return}let s=Math.abs(i-a);(null==r||s<n)&&(r=t,n=s)}),r)}(e,r),s=Object.keys(i);return void 0===n?"pastHour":s[n]},teamId:e?.id}},[h,g,r,e?.id])};e.s({PageConfigProvider:()=>h,usePageConfig:()=>p},7570424);let[h,p]=(0,e.i(908737).default)(function(e){return{functionFilterDefaultExpanded:!1,isDeploymentEditable:!0,...Object.fromEntries(Object.entries(e).filter(e=>{let[t,r]=e;return void 0!==r})),topOffset:46}}),v=()=>{let e=(0,n.useParams)(),{deploymentIdQuery:r}=p(),a=(0,t.useMemo)(()=>r&&"string"==typeof e?.id?[`dpl_${e.id}`]:[],[r,e]),s=(0,t.useMemo)(()=>({timeline:{defaultValue:"past30Minutes",onChangeRemoveKeys:["startDate","endDate","page","live"]},startDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},endDate:{defaultValue:void 0,formatToUrl:e=>Math.floor(e.getTime()/1e3).toString(),parseFromUrl:e=>new Date(1e3*Number(e)),onChangeRemoveKeys:["timeline","live","paused"]},live:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e,onChangeRemoveKeys:["page","timeline","startDate","endDate","paused"]},paused:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},page:{defaultValue:1,formatToUrl:e=>e.toString(),parseFromUrl:e=>Number(e)},selectedLogId:{defaultValue:""},refreshedAt:{defaultValue:void 0}}),[]),l=(0,t.useMemo)(()=>({caches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},levels:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentDomains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},deploymentIds:{defaultValue:a,formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},routes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestPaths:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestMethods:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},domains:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},sources:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestTags:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},searchQuery:{defaultValue:""},statusCodes:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},environments:{defaultValue:[],formatToUrl:e=>e.length>0?e.join(","):"",parseFromUrl:e=>e.split(",")},branches:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},requestIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},myLogs:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},sessionIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},hasTraces:{defaultValue:!1,formatToUrl:e=>e.toString(),parseFromUrl:e=>"true"===e},traceIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")},invocationIds:{defaultValue:[],formatToUrl:e=>e.join(","),parseFromUrl:e=>e.split(",")}}),[a]),{set:o,state:u}=(0,i.useSearchParamsState)(s),{set:d,state:c}=(0,i.useSearchParamsState)(l);return{state:u,setState:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e,t,r)},filters:c,setFilters:d,hasActiveFilters:function(){return c.deploymentDomains.length>0||c.routes.length>0||c.domains.length>0||c.sources.length>0||c.levels.length>0||c.statusCodes.length>0||c.requestIds.length>0||""!==c.searchQuery||c.requestMethods.length>0||c.requestPaths.length>0||c.caches.length>0||c.environments.length>0||c.branches.length>0||c.requestTags.length>0||c.myLogs||c.sessionIds.length>0||c.hasTraces||c.traceIds.length>0||c.invocationIds.length>0||void 0!==u.startDate||void 0!==u.endDate||"past30Minutes"!==u.timeline||u.live}}},y=()=>{let{filters:e,state:n}=v(),{timeline:i,startDate:a,endDate:s}=n,{getNewDates:l}=g();return{...e,...n,...(0,t.useMemo)(()=>{if(a&&s)return{startDate:a,endDate:s};let[e,t]=l(i);return{startDate:(0,r.startOfDuration)(e,{minutes:1}),endDate:(0,r.endOfDuration)(t,{minutes:1})}},[i,a,s,l,n.refreshedAt])}}},[3120835,7570424]],8653611:e=>{e.v({badge:"generic-filter-module__Jtj5jG__badge",button:"generic-filter-module__Jtj5jG__button",card:"generic-filter-module__Jtj5jG__card",checkbox:"generic-filter-module__Jtj5jG__checkbox",onlyInstance:"generic-filter-module__Jtj5jG__onlyInstance",option:"generic-filter-module__Jtj5jG__option",optionsContainer:"generic-filter-module__Jtj5jG__optionsContainer",skeleton:"generic-filter-module__Jtj5jG__skeleton",tooltip:"generic-filter-module__Jtj5jG__tooltip",tooltipContainer:"generic-filter-module__Jtj5jG__tooltipContainer",truncateText:"generic-filter-module__Jtj5jG__truncateText"})},1160739:e=>{"use strict";e.s({LogFilter:()=>g,generateFilterOption:()=>y});var t=e.i(6645307),r=e.i(2198583),n=e.i(6530772),i=e.i(889716),a=e.i(5163670),s=e.i(8084653),l=e.i(6284911),o=e.i(8247297),u=e.i(555528),d=e.i(6465700),c=e.i(104622),m=e.i(5054575),f=e.i(8653611);let g=(0,n.memo)(function(e){let{options:a,onChange:o,onSearch:u=()=>{},searchId:d,searchLabel:g="Search",searchPlaceholder:p="Search...",isCountLoading:y=!1,isFirstLoading:b=!1,isLoading:x=!1,hideSearch:C=!1,selectedOptions:_=[],showSelectedOptionsAtTop:w,totalAvailableOptions:T}=e,[I,k]=(0,n.useState)(),L=(0,r.useDebouncedCallback)(u,300),A=(0,n.useRef)(null),S=(0,n.useRef)(void 0),N=(0,n.useMemo)(()=>{let e=[],t=[];return w&&_.length?(a.forEach(r=>{_.includes(r.value)?e.push(r):t.push(r)}),[...e,...t]):a},[a,_,w]);return((0,n.useEffect)(()=>{let e=S.current;w&&e&&_!==e&&A.current&&_.findIndex(t=>!e.includes(t))>=0&&(A.current.scrollTop=0),S.current=_},[_,w]),x||0!==T||0!==_.length||I)?(0,t.jsxs)(i.Stack,{gap:2,children:[C?null:(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:d,children:g}),(0,t.jsx)(l.SearchInput,{className:f.default.searchInput,clearable:!0,id:d,loading:x,onChange:e=>{L(e.target.value),k(e.target.value)},placeholder:p,value:I,width:"100%"})]}),(0,t.jsxs)("div",{className:f.default.optionsContainer,ref:A,tabIndex:-1,children:[N.map(e=>(0,t.jsx)(h,{additionalInfo:e.additionalInfo,checked:_.includes(e.value),count:e.count,icon:e.icon,isCountLoading:y,label:e.label,onChange:()=>{(0,c.awaitPaint)().then(()=>{o(_.includes(e.value)?_.filter(t=>t!==e.value):[..._,e.value])})},value:e.value},e.value)),b?(0,t.jsx)(v,{selectedCount:_.length}):null]}),T&&T>25?(0,t.jsxs)(s.Text,{size:12,style:{color:"var(--accents-5)",textAlign:"center"},children:[(0,m.abbreviateNumber)(T-25)," more to search"]}):null]}):(0,t.jsx)(j,{})});function h(e){let{count:r,label:l,value:c,onChange:g,checked:h,icon:p,isCountLoading:v,additionalInfo:y}=e,[j,b]=(0,n.useState)(!1),x=(0,n.useRef)(null),C="string"==typeof l?l:c;return(0,t.jsx)(i.Stack,{className:f.default.option,justify:"center",onMouseEnter:()=>{x.current&&b(x.current.offsetWidth<x.current.scrollWidth)},children:(0,t.jsx)(u.Tooltip,{className:f.default.tooltipContainer,delayTime:100,desktopOnly:!0,forceHide:!j,lowerDelay:!0,maxWidth:"100%",position:"right",tabIndex:null,text:C,tooltipClassName:f.default.tooltip,useParentForBoundingRect:!0,children:(0,t.jsx)(i.Stack,{align:"center",direction:"row",children:(0,t.jsx)(o.Checkbox,{checked:h,className:f.default.checkbox,fullWidth:!0,id:c,onChange:g,textOverflow:!1,value:c,children:(0,t.jsxs)(i.Stack,{align:"center",direction:"row",gap:2,children:[p?(0,t.jsx)(i.Stack,{children:p}):null,(0,t.jsx)("span",{className:f.default.truncateText,ref:x,children:l}),y?(0,t.jsx)(u.Tooltip,{text:y,children:(0,t.jsx)(d.InformationFillSmall,{})}):null,v?(0,t.jsx)(a.Skeleton,{height:20,style:{marginLeft:"auto"},width:30}):null,v||"number"!=typeof r?null:(0,t.jsx)("span",{className:f.default.badge,style:{marginLeft:"auto"},children:(0,t.jsx)(s.Text,{color:"gray-900",size:12,weight:500,children:(0,m.abbreviateNumber)(r).toUpperCase()})})]})})})})})}function p(){return(0,t.jsxs)(i.Stack,{className:f.default.skeleton,direction:"row",gap:2,children:[(0,t.jsx)(a.Skeleton,{height:20,width:20}),(0,t.jsx)(a.Skeleton,{height:23,width:170})]})}function v(e){let{selectedCount:r}=e;return(0,t.jsx)(t.Fragment,{children:Array.from({length:r>3?0:3-r},(e,r)=>(0,t.jsx)(p,{},r))})}let y=e=>{let{attributeValue:t,total:r}=e;return{label:t,value:t,count:r}};function j(e){let{comment:r}=e;return(0,t.jsx)(i.Stack,{align:"center",className:f.default.card,direction:"column",gap:1,justify:"center",children:(0,t.jsx)(s.Text,{color:"gray-900",size:14,children:r||"No options."})})}},2332196:e=>{"use strict";e.s({LOGS_PAGE_SIZE:()=>g,useGroupLogs:()=>y,useGroupLogsInternal:()=>p});var t=e.i(7095283),r=e.i(7573892),n=e.i(9802771),i=e.i(6649026),a=e.i(9336536),s=e.i(503726),l=e.i(2567082),o=e.i(6530772),u=e.i(1389821),d=e.i(2240289),c=e.i(5510483),m=e.i(8502629),f=e.i(967652);let g=50,h={hobby:(0,l.default)("65 seconds"),pro:(0,l.default)("205 seconds"),enterprise:(0,l.default)("905 seconds")};function p(){let{data:e}=(0,d.useProject)((0,u.useProjectIdOrName)()),{user:l,team:f,isLoading:g}=(0,s.useAccount)(),{deploymentDomains:p,deploymentIds:y,domains:j,levels:b,routes:x,sources:C,requestTags:_,startDate:w,endDate:T,live:I,searchQuery:k,requestIds:L,requestMethods:A,requestPaths:S,statusCodes:N,caches:U,environments:D,branches:M,myLogs:P,sessionIds:V,hasTraces:E,traceIds:q,invocationIds:F}=(0,m.useLogsApiParams)(),R=(0,t.default)((t,r)=>{if(r&&!r.hasMoreRows)return null;if(g||!e)return;let n=null!==f?f.id:null,s=null!==l?l?.uid:null,o=f?.billing?h[f.billing.plan]:h.enterprise,u=n||s;if(null===u)return;let d=I?void 0:T?.getTime(),m=t;t>0&&r?.rows&&r.rows.length>0&&(d=new Date(r.rows[r.rows.length-1].timestamp).getTime()-1,m=0);let v=(0,i.encode)({startDate:L.length>0?Math.min(...L.map(e=>Number(e.split("-")[1])))-o:w.getTime(),endDate:L.length>0?Math.max(...L.map(e=>Number(e.split("-")[1])))+o:d,page:m,searchQuery:(0,c.stringifyArrayContent)((0,c.tokenizeSearchQuery)(k)),projectId:e.id,deploymentDomain:(0,c.stringifyArrayContent)(p),deploymentId:(0,c.stringifyArrayContent)(y),domain:(0,c.stringifyArrayContent)(j),level:(0,c.stringifyArrayContent)(b),ownerId:u,source:(0,c.stringifyArrayContent)(C),requestTags:(0,c.stringifyArrayContent)(_),route:(0,c.stringifyArrayContent)(x),requestPath:(0,c.stringifyArrayContent)(S),requestMethod:(0,c.stringifyArrayContent)(A),requestId:L.map(e=>e.split("::").pop()),statusCode:(0,c.stringifyArrayContent)(N),cache:(0,c.stringifyArrayContent)(U),myLogs:P?"true":void 0,environment:(0,c.stringifyArrayContent)(D),branch:(0,c.stringifyArrayContent)(M),sessionId:(0,c.stringifyArrayContent)(V),hasTraces:E?"true":void 0,traceId:(0,c.stringifyArrayContent)(q),invocationId:(0,c.stringifyArrayContent)(F)});return`${a.API_LOGS}/request-logs${v}`},(e,t)=>(r.analytics.track(n.AnalyticsEvent.LOGS_RUN_QUERY,{teamSlug:f?.slug}),v(e,t)),{refreshInterval:5e3*!!I,keepPreviousData:!0,revalidateAll:I,revalidateOnFocus:I,revalidateFirstPage:I}),$=(0,o.useMemo)(()=>R.data?.flatMap(e=>e.rows??[])||[],[R.data]);return(0,o.useMemo)(()=>({...R,logRows:$}),[R,$])}async function v(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}return r.json()}function y(){let e=(0,f.useLogs)();return{logRows:e.logRows,...e.swr}}},967652:e=>{"use strict";e.s({GroupLogsProvider:()=>f,useLogs:()=>g},967652);var t=e.i(6645307),r=e.i(6530772),n=e.i(2332196),i=e.i(6413586),a=e.i(8502629),s=e.i(1095718),l=e.i(5535439),o=e.i(6031903),u=e.i(8935741),d=e.i(6649026),c=e.i(8541058);let m=(0,r.createContext)(null);function f(e){let{children:f}=e,{selectedLogId:g}=(0,a.useLogsApiParams)(),h=(0,n.useGroupLogsInternal)(),p=(0,i.useSelectedLogInternal)(g,h.logRows),v=(e=>{let[t,n]=(0,r.useState)({}),i=(0,r.useRef)(new Map),a=(0,l.useParams)(),s=a?.teamSlug||"";if((0,r.useEffect)(()=>{if(!s||!e)return;let t=i.current;t.has(e)||(t.set(e,void 0),(async()=>{let r=await (0,o.fetchApi)(`/api/observability/traces/${e}${(0,d.encode)({teamId:s,project:a?.project})}`);if(!r||"string"==typeof r||"error"in r||(0,u.isAPIError)(r))return t.delete(e);t.set(e,r),n({})})())},[s,e,a]),e)return i.current.get(e)})(p.data?.traceId),y=(0,c.useTracingQuickLinks)({includeRequest:!1}),j=(0,r.useMemo)(()=>({logRows:h.logRows,selectedLog:p.data,selectedTrace:v,isLoadingSelected:p.isLoading,error:p.error,swr:h}),[h,p.data,v,p.isLoading,p.error]);return(0,t.jsx)(m.Provider,{value:j,children:(0,t.jsx)(s.TraceViewerProvider,{getQuickLinks:y,children:f})})}function g(){let e=(0,r.useContext)(m);if(!e)throw Error("useLogs must be used within a LogsProvider");return e}m.displayName="LogsContext"},6413586:e=>{"use strict";e.s({useSelectedLog:()=>m,useSelectedLogInternal:()=>d});var t=e.i(3521787),r=e.i(6649026),n=e.i(9336536),i=e.i(503726),a=e.i(6530772),s=e.i(1389821),l=e.i(2240289),o=e.i(5510483),u=e.i(967652);function d(e,u){let{team:d,isLoading:m}=(0,i.useAccount)(),{data:f}=(0,l.useProject)((0,s.useProjectIdOrName)()),[g,h]=(0,a.useState)();(0,a.useEffect)(()=>{if(!e)return;let t=u.find(t=>t.requestId===e);t?h(t):g&&e!==g.requestId&&h(void 0)},[e,u,g]);let p=(0,a.useMemo)(()=>{if(e)return u.find(t=>t.requestId===e)},[u,e]),v=(0,t.default)(()=>{if(p||m||!e)return null;let t=f?.id;if(!d||!t)return null;let i=d.id,a=(0,o.extractTimestampOfLogId)(e);if(void 0===a)return null;let s=(0,r.encode)({ownerId:i,projectId:t,startDate:a,endDate:a,requestId:[e]});return`${n.API_LOGS}/request-logs${s}`},c,{revalidateOnFocus:!1});return e?{data:v.data??p??g,error:v.error,isLoading:v.isLoading}:{data:void 0,error:void 0,isLoading:!1}}async function c(e,t){let r=await fetch(e,t);if(!r.ok){let e=await r.json(),t=Error(e.message);throw e.name&&(t.name=e.name),t}let n=await r.json();return n.rows?.[0]}function m(){let e=(0,u.useLogs)();return{data:e.selectedLog,error:e.error,isLoading:e.isLoadingSelected}}},5594701:e=>{e.v({draggable:"draggable-border-module__CfqrMq__draggable",dragging:"draggable-border-module__CfqrMq__dragging",fakeBorder:"draggable-border-module__CfqrMq__fakeBorder",horizontal:"draggable-border-module__CfqrMq__horizontal",leftBorder:"draggable-border-module__CfqrMq__leftBorder",root:"draggable-border-module__CfqrMq__root",vertical:"draggable-border-module__CfqrMq__vertical"})},619432:e=>{"use strict";e.s({DraggableBorder:()=>a});var t=e.i(6645307),r=e.i(6530772),n=e.i(5610210),i=e.i(5594701);function a(e){let{element:a,onWidthChange:s,position:l,onReset:o,onStartDrag:u,onStopDrag:d}=e,c=(0,r.useRef)(0),m=(0,r.useRef)(0),[f,g]=(0,r.useState)(!1),h="bottom"===l||"top"===l;return(0,r.useEffect)(()=>{let e=e=>{if(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="move"),!f)return;let t=m.current;if(h){let r=e.clientY-c.current;t+="top"===l?-r:r}else"left"===l?t+=c.current-e.clientX:t+=e.clientX-c.current;s(t)},t=()=>{g(!1),d&&d()};return document.addEventListener("dragover",e),document.addEventListener("drop",t,{capture:!0}),()=>{document.removeEventListener("dragover",e),document.removeEventListener("drop",t)}},[f,s,l,h,d]),(0,t.jsxs)("div",{className:(0,n.clsx)(i.default.root,{[i.default.horizontal]:h,[i.default.vertical]:!h}),style:{[l]:"right"===l?"-10px":"-8px"},children:[(0,t.jsx)("div",{className:i.default.draggable,draggable:!0,onClick:e=>{o&&2===e.detail&&o()},onDrag:()=>{g(!0)},onDragEnd:()=>{g(!1),d&&d()},onDragStart:e=>{g(!0),u&&u(),a.current&&(c.current=h?e.clientY:e.clientX,m.current=h?a.current.offsetHeight:a.current.offsetWidth)},role:"none"}),(0,t.jsx)("div",{className:(0,n.clsx)(i.default.fakeBorder,{[i.default.dragging]:f,[i.default.leftBorder]:"left"===l}),draggable:!1})]})}},57154:[e=>{"use strict";e.s({GroupExportModal:()=>c},57154);var t=e.i(6645307),r=e.i(6530772),n=e.i(6778284),i=e.i(889716),a=e.i(8084653),s=e.i(4789498),l=e.i(6921100),o=e.i(8934201),u=e.i(3821772);let d=[1e3,5e3,1e4,5e4,1e5];function c(e){let{onClose:c,getExport:m,format:f}=e,[g,h]=(0,r.useState)(1e3),[p,v]=(0,r.useState)(!1),y=async()=>{v(!0),await m(f,g),v(!1),c()};return(0,t.jsxs)(o.Modal.Modal,{active:!0,onClickOutside:c,children:[(0,t.jsx)(o.Modal.Body,{children:(0,t.jsxs)(i.Stack,{gap:6,children:[(0,t.jsx)("header",{children:(0,t.jsxs)(i.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsxs)(a.Text,{as:"h2",lineHeight:32,size:24,weight:600,children:["Export Logs (",f.toUpperCase(),")"]}),p?(0,t.jsx)(u.Spinner,{size:20}):null]})}),(0,t.jsxs)(a.Text,{lineHeight:20,size:14,children:["Export to ",f]}),(0,t.jsx)(s.Label,{id:"select-line-limit",value:"Result Limit",withInput:!0,children:(0,t.jsx)(l.Select,{id:"select-line-limit",onChange:e=>{h(Number(e.target.value))},prefix:(0,t.jsx)(n.ArrowDown,{}),value:g,children:d.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})})]})}),(0,t.jsxs)(o.Modal.Actions,{children:[(0,t.jsx)(o.Modal.Action,{onClick:c,type:"secondary",children:"Cancel"}),(0,t.jsx)(o.Modal.Action,{disabled:p,onClick:y,type:"secondary",children:"Export"})]})]})}e.s({downloadCsv:()=>w,downloadJson:()=>T,useGroupLogsExport:()=>_},9027033);var m=e.i(584439),f=e.i(6649026),g=e.i(1183506),h=e.i(9336536),p=e.i(503726),v=e.i(4922888),y=e.i(6532952),j=e.i(1389821),b=e.i(2240289),x=e.i(8502629),C=e.i(5510483);function _(){let{user:e,team:t,isLoading:r}=(0,p.useAccount)(),n=(0,m.useToasts)(),{deploymentDomains:i,deploymentIds:a,domains:s,levels:l,routes:o,sources:u,startDate:d,endDate:c,searchQuery:_,requestIds:I,requestMethods:k,requestPaths:L,statusCodes:A,caches:S,environments:N,branches:U,myLogs:D,sessionIds:M,hasTraces:P,traceIds:V,invocationIds:E}=(0,x.useLogsApiParams)(),{data:q}=(0,b.useProject)((0,j.useProjectIdOrName)());return{getExport:async(m,p)=>{if(r||!q)return;let j=null!==t?t.id:null,b=null!==e?e.uid:null,x=(0,f.encode)({branch:(0,C.stringifyArrayContent)(U),cache:(0,C.stringifyArrayContent)(S),deploymentDomain:(0,C.stringifyArrayContent)(i),deploymentId:(0,C.stringifyArrayContent)(a),domain:(0,C.stringifyArrayContent)(s),endDate:c?.getTime(),environment:(0,C.stringifyArrayContent)(N),format:m,level:(0,C.stringifyArrayContent)(l),ownerId:j||b,pageSize:p,projectId:q.id,requestId:I[0],requestMethod:(0,C.stringifyArrayContent)(k),requestPath:(0,C.stringifyArrayContent)(L),route:(0,C.stringifyArrayContent)(o),searchQuery:_?(0,C.stringifyArrayContent)((0,C.tokenizeSearchQuery)(_)):void 0,source:(0,C.stringifyArrayContent)(u),startDate:d.getTime(),statusCode:(0,C.stringifyArrayContent)(A),myLogs:D?"true":void 0,sessionId:(0,C.stringifyArrayContent)(M),hasTraces:P?"true":void 0,traceId:(0,C.stringifyArrayContent)(V),invocationId:(0,C.stringifyArrayContent)(E)}),F=`${h.API_GROUP_LOGS_EXPORT}${x}`,R=await (0,g.fetchAPI)(F);if(R.error)return void n.error("Something went wrong, please try again later");if("csv"===m){let e=new Promise(e=>{w(R.data,"logs_result.csv"),setTimeout(()=>{e(!0)},500)});await e.then(()=>n.success("csv file downloaded"))}else{let e=new Promise(e=>{T(JSON.stringify(R.data),"logs_result.json"),setTimeout(()=>{e(!0)},500)});await e.then(()=>n.success("json file downloaded"))}(0,y.trackInSnowflake)(v.Topic.VercelAppV0LogQueryResultsExported,{team_id:j||void 0,user_id:b||"",project_id:q.id,export_type:m,num_results_downloaded:p},"vercel-app")}}}function w(e,t){let r=window.URL.createObjectURL(new Blob([e])),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(n),n.click(),document.getElementById("select-line-limit").removeChild(n)}function T(e,t){let r=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",t),document.getElementById("select-line-limit").appendChild(n),n.click(),document.getElementById("select-line-limit").removeChild(n)}},[9027033]]}]);

//# sourceMappingURL=8ab0b0ec3983a1bb.js.map
//# debugId=7b59e048-de9e-50af-92cf-d43e0977335c
