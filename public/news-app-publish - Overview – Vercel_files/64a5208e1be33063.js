
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="60816bca-d71a-539d-93b3-99213f71eb42")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{2537276:e=>{"use strict";e.s({ShieldOff:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M3.55088 2.49023L3.57718 2.48334L3.71501 2.44727C4.64252 2.20472 5.53322 1.9718 6.21718 1.58176C6.88688 1.19985 7.24999 0.734016 7.24999 0H8.74999C8.74999 0.467199 8.89462 0.796772 9.12197 1.06132C9.36429 1.34329 9.73044 1.58432 10.2142 1.79681C10.6962 2.00853 11.2465 2.17155 11.8221 2.32558C11.9557 2.36133 12.0926 2.39704 12.2305 2.43301L12.2307 2.43305C12.6631 2.54586 13.1054 2.66124 13.4872 2.78849L14 2.95943V3.5V9.52717C14 10.4875 13.7378 11.409 13.2657 12.205L15.2803 14.2197L15.8107 14.75L14.75 15.8107L14.2197 15.2803L0.719661 1.78033L0.189331 1.25L1.24999 0.18934L1.78032 0.71967L3.55088 2.49023ZM12.1563 11.0956C12.379 10.6121 12.5 10.0787 12.5 9.52717V4.057C12.3094 4.00405 12.1074 3.9513 11.8932 3.89539C11.746 3.85699 11.5932 3.81709 11.4344 3.7746C10.8476 3.61758 10.204 3.43065 9.611 3.17017C9.02648 2.91343 8.44302 2.56509 7.99961 2.0566C7.70515 2.39333 7.34541 2.66513 6.96024 2.88478C6.29476 3.26428 5.5048 3.51732 4.77804 3.71738L12.1563 11.0956ZM3.49999 7.25V6.5H1.99999V7.25V9.52717C1.99999 11.4801 3.08399 13.2716 4.81395 14.1778L7.65199 15.6644L7.99999 15.8467L8.348 15.6644L9.50872 15.0564L10.1731 14.7084L9.47708 13.3796L8.81271 13.7276L7.99999 14.1533L5.50996 12.849C4.27428 12.2018 3.49999 10.9221 3.49999 9.52717V7.25Z" fill="currentColor"/>')},7544595:e=>{"use strict";e.s({useManagedRulesets:()=>r});var t=e.i(1183506),a=e.i(3521787);function r(e){let{projectIdOrName:r,teamIdOrSlug:i}=e;return(0,a.default)(["/v1/security/firewall/managed-rules",new URLSearchParams({projectId:r,teamId:i}).toString()],e=>{let[a,r]=e;return(0,t.default)(`${a}?${r}`)})}},6756623:e=>{"use strict";e.s({countRateLimitRules:()=>h,denormalizeFirewallAction:()=>g,formatFirewallActionForDisplay:()=>p,formatShortPrecision:()=>l,formatTableHeader:()=>o,getOffsetTop:()=>d,getPlanUsage:()=>s,getSonarSeriesData:()=>n,globalBypassStatus:()=>f,isCustomRuleId:()=>b,isOthersAggregate:()=>v,isPlanLimitReached:()=>c,isValidEdgeRateLimitKey:()=>u,normalizeFirewallAction:()=>m,wafRuleId:()=>y});var t=e.i(2473576),a=e.i(7229353),r=e.i(9195014),i=e.i(6508134);function n(e,r,i,n){let l=new Map,o=e=>{let i=[];for(let a of r){let r=e[a];if(null==r||("wafAction"===a?r=m(r||"allow"):"wafRuleId"===a&&(r||="default_web_traffic"),!r&&n.groupBy===a))return t.hideDataKey;i.push(r)}return i.join(a.SEPARATOR)},s=!0,c=new Set;for(let a of e){let e=o(a);e!==t.hideDataKey&&(s=!1),l.has(e)||e===t.hideDataKey||l.set(e,[]);let r=a.timestamp;c.add(r.toISOString()),l.get(e)?.push({...a,date:r,key:e})}if(r.every(e=>["wafRuleId","wafAction"].includes(e))){let e=Array.from(c.values()).map(e=>new Date(e));for(let t of i){let r=[t.value,t.action].join(a.SEPARATOR);l.has(r)||"all_rules"===t.value||l.set(r,e.map(e=>({date:e,timestamp:e,key:r,value:0})))}}return s?new Map:l}function l(e){return(0,r.countFormatter)(e,"short-precision").replace(/\s/g,"")}function o(e,t){let a=e.find(e=>e.value===t);return a?a.label:t}function s(e){let{teamPlan:t,config:a,bypassRules:r,type:n}=e;if(!t)return;let l=i.firewallPlanLimits[t][n],o="hobby"===t?"pro":"pro"===t?"enterprise":void 0,s=o?i.firewallPlanLimits[o][n]:void 0;if("ipBypass"===n)return{limit:l,used:r?.length||0,limitReached:(r?.length||0)>=l,nextPlanLimit:s};if(null==a)return{limit:l,used:0,limitReached:!1,nextPlanLimit:s};if("ipBlocks"===n)return{limit:l,used:a.currentConfig.ips.length,limitReached:a.currentConfig.ips.length>=l,nextPlanLimit:s};if("rateLimit"===n){let e=h(a);return{limit:l,used:e,limitReached:e>=l,nextPlanLimit:s}}return{limit:l,used:a.rules.length,limitReached:a.rules.length>=l,nextPlanLimit:s}}function c(e){let{teamPlan:t,config:a,bypassRules:r,type:n}=e;if(!t)return!0;let l=i.firewallPlanLimits[t][n];return"ipBypass"===n?"hobby"===t||!!r&&r.length>=l:null!==a&&(void 0===a||("ipBlocks"===n?a.currentConfig.ips.length>=l:"rateLimit"===n?h(a)>=l:a.rules.length>=l))}function u(e){switch(e){case"ip":case"ja4":return!0;default:return e.startsWith("header:")}}function d(e){let t=e,a=0;for(;t;)a+=t.offsetTop,t=t.offsetParent;return a}function f(e){let t=e?.security?.firewallBypassIps;if(!t)return{enabled:!1};let a={enabled:!1};for(let e of t){let t=e.split("#");if("0.0.0.0/0"===t[0]||"::/0"===t[0]&&t.length>=2){let e=Number.parseInt(t[1],10);!Number.isNaN(e)&&e>Date.now()/1e3&&(a.ttl=e,a.enabled=!0)}}return a}function m(e){return"rate-limit"===e?"rate_limit":e}function g(e){return"rate_limit"===e?"rate-limit":e}function p(e){return void 0===e?"":m(e).replace("_"," ")}function h(e){return e?e.rules.filter(e=>"value"in e&&e.value.action?.mitigate?.action==="rate_limit"&&!!e.value.action.mitigate.rateLimit&&!!e.value.active).length:0}function v(e){return RegExp(`(Others(${a.SEPARATOR})?)+`).test(e)}function b(e){return"string"==typeof e&&(e.startsWith("rule_")||"deployment_defined_rules"===e)}function y(e){return"default_web_traffic"===e?"":"managed_bot_filter"===e?"managed_bot_protection":e}},2473576:[e=>{"use strict";e.s({findNearestDataPointByDate:()=>h,flatten:()=>m,getScales:()=>p,getX:()=>d,getY:()=>f,groupByTime:()=>g,hideDataKey:()=>c,othersDataKey:()=>u,singletons:()=>v},2473576);var t=e.i(2120451),a=e.i(7517602),r=e.i(7836556),i=e.i(212277),n=e.i(9855071),l=e.i(7632876),o=e.i(8169983),s=e.i(3324666),s=s;let c="__hidden",u="__others";function d(e){return e?.date}function f(e){return e.value}function m(e){return Array.from(e.values()).reduce((e,t)=>e.concat(t),[])}function g(e,t){let a=new Map(e.map(e=>{let{time:a,date:r}=e;return[a,{time:a,date:r,...Object.fromEntries(t.map(e=>[e,0]))}]}));return e.forEach(e=>{let{time:t,key:r,value:i}=e,n=a.get(t);n&&(n[r]=i)}),[...a.values()].sort((e,t)=>e.date.getTime()-t.date.getTime())}function p(e,i,c,m,g,p,h,v,b){let y=(0,l.max)(e,f)??0,x=(0,r.scaleTime)({domain:(0,n.extent)(e,d),range:[0,m]}),w=(0,a.scaleLinear)({domain:[0,y],range:b||[g,0]}),j=(0,a.scaleLinear)({domain:[0,y*(v??1)],range:b||[g,0]}),k=(0,l.max)(i,e=>{var t;return t=e,c.reduce((e,a)=>"number"==typeof t[a]?e+t[a]:e,0)})??0,P=(0,a.scaleLinear)({domain:[0,k],range:[g,0]}),_=(0,a.scaleLinear)({domain:[0,k*(v??1)],range:[g,0]}),S=(0,t.scaleBand)({domain:e.map(e=>d(e)??new Date).sort((e,t)=>e.getTime()-t.getTime()),paddingInner:.3,range:[0,m]}),L={};return h&&(L[u]=h),{lineXScale:x,lineYScale:w,lineYAxisScale:j,barStackYScale:P,barDateScale:S,barYAxisScale:_,colorScale:function(e){let t=(0,o.scaleOrdinal)({domain:e.domain.filter(t=>!(t in e.special)),range:e.range,unknown:e.unknown||s.implicit});function a(a){return e.special[a]??t(a)}return Object.assign(a,t),a}({domain:c,range:p,special:L})}}function h(e,t){let a=e.getTime(),r=(0,i.bisector)((e,t)=>e.date.getTime()-t).center(t,a);return t[r]}function v(e){return e.filter((t,a)=>{let r=e[a-1]||{value:null},i=e[a+1]||{value:null};return null!==t.value&&null===r.value&&null===i.value})}e.s({SEPARATOR:()=>y,getSeriesKey:()=>w,toSeriesMap:()=>x},7229353);var b=e.i(8694503);let y="$$";function x(e,t){let a=t.filter(e=>"projectId"!==e),r=new Map,i=!0;for(let t of e.data||[]){"edgeNetworkRegion"in t&&(t.edgeNetworkRegion=(0,b.friendlyRegionFormatter)(t.edgeNetworkRegion)),"projectId"in t&&"projectName"in t&&""!==t.projectName&&(t.projectId=t.projectName);let e=w(a,t);e!==c&&(i=!1),r.has(e)||r.set(e,[]);let{timestamp:n,value:l,...o}=t,s=n.toISOString();r.get(e)?.push({...o,date:n,time:s,key:e,value:l})}if(i)return new Map;let n=new Map;return e.summary.map(e=>[w(a,e),e.value]).sort((e,t)=>{let[a,r]=e,[i,n]=t;return n-r}).map(e=>{let[t,a]=e;return t}).forEach(e=>{n.set(e,r.get(e)||[])}),n}function w(e,t){let a=e.filter(e=>"projectId"!==e);if(0===a.length)return"All Data";let r=a.map(e=>t[e]);return r.includes("Others")?u:r.every(e=>!e)?c:r.join(y)}},[7229353]],8656098:[e=>{"use strict";e.s({calendar:()=>M,default:()=>F},8656098);var t=e.i(700849),a=e.i(6589431),r=e.i(4751301),i=e.i(6867556),n=e.i(9901648),l=e.i(9213791),o=e.i(6620104);e.s({timeTickInterval:()=>R,timeTicks:()=>I,utcTickInterval:()=>L,utcTicks:()=>S},4629488);var s=e.i(4262662),s=s,c=e.i(7666626),u=e.i(1051512),d=e.i(634148),f=(0,d.default)(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});f.every=function(e){return isFinite(e=Math.floor(e))&&e>0?e>1?(0,d.default)(function(t){t.setTime(Math.floor(t/e)*e)},function(t,a){t.setTime(+t+a*e)},function(t,a){return(a-t)/e}):f:null},f.range;var m=e.i(5601824),g=e.i(8985501),p=e.i(5561252),h=e.i(3127222),v=e.i(4741710),b=e.i(1060771),y=e.i(4882037),x=e.i(3583385),w=e.i(1814073),j=e.i(3400636),k=e.i(1529123),P=e.i(4115928);function _(e,t,a,r,i,n){let l=[[m.default,1,u.durationSecond],[m.default,5,5*u.durationSecond],[m.default,15,15*u.durationSecond],[m.default,30,30*u.durationSecond],[n,1,u.durationMinute],[n,5,5*u.durationMinute],[n,15,15*u.durationMinute],[n,30,30*u.durationMinute],[i,1,u.durationHour],[i,3,3*u.durationHour],[i,6,6*u.durationHour],[i,12,12*u.durationHour],[r,1,u.durationDay],[r,2,2*u.durationDay],[a,1,u.durationWeek],[t,1,u.durationMonth],[t,3,3*u.durationMonth],[e,1,u.durationYear]];function o(t,a,r){let i=Math.abs(a-t)/r,n=(0,s.default)(e=>{let[,,t]=e;return t}).right(l,i);if(n===l.length)return e.every((0,c.tickStep)(t/u.durationYear,a/u.durationYear,r));if(0===n)return f.every(Math.max((0,c.tickStep)(t,a,r),1));let[o,d]=l[i/l[n-1][2]<l[n][2]/i?n-1:n];return o.every(d)}return[function(e,t,a){let r=t<e;r&&([e,t]=[t,e]);let i=a&&"function"==typeof a.range?a:o(e,t,a),n=i?i.range(e,+t+1):[];return r?n.reverse():n},o]}let[S,L]=_(e.i(7201220).default,P.default,k.utcSunday,j.default,w.default,x.default),[I,R]=_(y.default,b.default,v.sunday,h.default,p.default,g.default);var C=e.i(3898701),A=e.i(6984620),N=e.i(4693007);function T(e,t){e=e.slice();var a,r=0,i=e.length-1,n=e[r],l=e[i];return l<n&&(a=r,r=i,i=a,a=n,n=l,l=a),e[r]=t.floor(n),e[i]=t.ceil(l),e}function D(e){return new Date(e)}function B(e){return e instanceof Date?+e:+new Date(+e)}function M(e,t,a,r,i,n,l,o,s,c){var u=(0,A.default)(),d=u.invert,f=u.domain,m=c(".%L"),g=c(":%S"),p=c("%I:%M"),h=c("%I %p"),v=c("%a %d"),b=c("%b %d"),y=c("%B"),x=c("%Y");function w(e){return(s(e)<e?m:o(e)<e?g:l(e)<e?p:n(e)<e?h:r(e)<e?i(e)<e?v:b:a(e)<e?y:x)(e)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?f(Array.from(e,B)):f().map(D)},u.ticks=function(t){var a=f();return e(a[0],a[a.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?w:c(t)},u.nice=function(e){var a=f();return e&&"function"==typeof e.range||(e=t(a[0],a[a.length-1],null==e?10:e)),e?f(T(a,e)):u},u.copy=function(){return(0,A.copy)(u,M(e,t,a,r,i,n,l,o,s,c))},u}function F(){return N.initRange.apply(M(I,R,t.timeYear,a.timeMonth,r.timeWeek,i.timeDay,n.timeHour,l.timeMinute,o.timeSecond,C.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}e.s({default:()=>T},8302799)},[4629488,8302799]],9855071:[e=>{"use strict";function t(e,t){let a,r;if(void 0===t)for(let t of e)null!=t&&(void 0===a?t>=t&&(a=r=t):(a>t&&(a=t),r<t&&(r=t)));else{let i=-1;for(let n of e)null!=(n=t(n,++i,e))&&(void 0===a?n>=n&&(a=r=n):(a>n&&(a=n),r<n&&(r=n)))}return[a,r]}e.s({extent:()=>t},9855071),e.s({max:()=>a.default},7632876);var a=e.i(8349071)},[7632876]],7411553:e=>{"use strict";e.s({default:()=>r},7411553);var t=e.i(8656098),t=t,a=(0,e.i(3218164).default)("domain","range","reverse","clamp","interpolate","nice","round");function r(e){return a((0,t.default)(),e)}},7836556:e=>{"use strict";e.s({scaleTime:()=>t.default});var t=e.i(7411553)},8694503:e=>{"use strict";e.s({dimensionValueFormatter:()=>s,friendlyRegionFormatter:()=>l,yAxisFormatter:()=>c});var t=e.i(4583851),a=e.i(7361532),r=e.i(9195014);let i=e=>e;function n(e){return t=>t||e}function l(e){return e in t.FriendlyRegionNameMapping?`${e} (${t.FriendlyRegionNameMapping[e]})`:e}let o={botName:n("Not set"),projectId:i,projectName:i,deploymentId:i,pathType:i,pathTypeVariant:i,environment:i,requestHostname:i,requestMethod:i,requestPath:i,requestExtension:i,referrerUrl:i,referrerHostname:i,route:i,httpStatus:i,errorCode:n("No Error"),edgeNetworkRegion:l,functionRegion:l,cacheResult:i,cacheHitState:i,cacheHitLevel:i,clientIp:e=>"127.0.0.1"===e?"127.0.0.1 (ISR)":e,clientUserAgent:n("No User Agent"),clientIpCountry:function(e){return""===e?"No Country":a.default.getCountries().find(t=>t.iso2===e.toLowerCase())?.name||e},asnId:i,asnName:i,wafAction:n("No Action"),wafRuleId:n("Allowed Requests"),skewProtection:i,clientJa4Digest:i};function s(e){return o[e]}function c(e){return e>=1e3?(0,r.countFormatter)(e,"short-precision"):e<10?function(e,t){let a=Math.log10(e);return 0!==e&&a<=-6?e.toFixed(Math.ceil(-a)+2-1).replace(/\.?0*$/,""):e.toPrecision(t).replace(/\.?0*$/,"")}(e,2):e.toFixed(0)}},4904103:e=>{var{m:t,e:a}=e,r=e.r(2029329),i=e.r(8412863),n=e.r(4497678),l=e.r(9218102),o=e.r(9041223);t.exports=function(e,t,a,s){if(!l(e))return e;t=i(t,e);for(var c=-1,u=t.length,d=u-1,f=e;null!=f&&++c<u;){var m=o(t[c]),g=a;if("__proto__"===m||"constructor"===m||"prototype"===m)break;if(c!=d){var p=f[m];void 0===(g=s?s(p,m,f):void 0)&&(g=l(p)?p:n(t[c+1])?[]:{})}r(f,m,g),f=f[m]}return e}},5948055:e=>{var{m:t,e:a}=e,r=e.r(6129279);t.exports=function(e){return r(e,5)}},821628:e=>{var{m:t,e:a}=e,r=e.r(4904103);t.exports=function(e,t,a){return null==e?e:r(e,t,a)}},7387243:e=>{"use strict";e.s({useMicrofrontendsGroupProjects:()=>n});var t=e.i(3521787),a=e.i(6649026),r=e.i(1183506),i=e.i(3514588);function n(e){let{isReady:n,team:l}=(0,i.useTeam)();return(0,t.default)(()=>e&&n?`/api/v1/microfrontends/groups/${e}/projects${(0,a.encode)({teamId:l?.id})}`:null,e=>(0,r.fetchAPI)(e,{throwOnHTTPError:!0}),{fallbackData:{projects:[]}})}},7806943:e=>{"use strict";e.s({useMicrofrontendsProjectInfo:()=>s});var t=e.i(6530772),a=e.i(5535439),r=e.i(226017),i=e.i(3514588),n=e.i(4651050),l=e.i(7387243),o=e.i(2240289);function s(){let e=(0,r.useServerFlag)("enable-microfrontends-support",!1),s=(0,a.useParams)(),{data:c}=(0,o.useProject)(s?.project,{apiVersion:"v13"}),u=c?.microfrontends?.groupIds[0],{isReady:d,team:f}=(0,i.useTeam)(),{data:m,isLoading:g}=(0,n.useMicrofrontendsGroups)(),{data:p,isLoading:h}=(0,l.useMicrofrontendsGroupProjects)(u),v=p?.projects.find(e=>e.microfrontends?.isDefaultApp),b=e&&c?.microfrontends!==void 0&&!c.microfrontends.isDefaultApp;return(0,t.useMemo)(()=>({defaultProjectName:v?.name,defaultProjectBaseUrl:v?`/${f?.slug}/${v.name}`:null,groupName:m?.groups.find(e=>e.group.id===u)?.group.name??v?.name,isChildMicrofrontend:b,isLoading:!d||!f||h||g,isMicrofrontendsEnabled:e}),[v,e,u,b,g,h,d,f,m])}},4345726:[e=>{"use strict";e.s({formatPatchRule:()=>I,useFirewallConfig:()=>k},4345726);var t=e.i(6530772),a=e.i(584439),r=e.i(3521787),i=e.i(4374461),n=e.i(5948055),l=e.i(821628),o=e.i(2361612),s=e.i(5535439),c=e.i(6649026),u=e.i(1183506),d=e.i(9336536),f=e.i(3514588);e.s({RULES_TO_NAMES:()=>m,botProtectionFromConfig:()=>y,botProtectionFromRulesets:()=>x,createActionConfig:()=>h,crsRuleToConfig:()=>g,getRulesetFromRulesets:()=>w,isBotProtectionData:()=>b,isBotProtectionManagedRuleset:()=>v},3903554);let m={gen:{name:"Generic Attack",description:"Provide broad protection from various undefined or novel attack vectors."},java:{name:"Java Attack",description:"Mitigate risks of exploitation targeting Java-based applications or components."},lfi:{name:"Local File Inclusion Attack",description:"Prevent unauthorized access to local files through web applications."},ma:{name:"Multipart Attack",description:"Block attempts to bypass security controls using multipart/form-data encoding."},php:{name:"PHP Attack",description:"Safeguard against vulnerability exploits in PHP-based applications."},rce:{name:"Remote Execution Attack",description:"Prevent unauthorized execution of remote scripts or commands."},rfi:{name:"Remote File Inclusion Attack",description:"Prohibit unauthorized upload or execution of remote files."},sd:{name:"Scanner Detection",description:"Detect and prevent reconnaissance activities from network scanning tools."},sf:{name:"Session Fixation Attack",description:"Prevent unauthorized takeover of user sessions by enforcing unique session IDs."},sqli:{name:"SQL Injection Attack",description:"Prohibit unauthorized use of SQL commands to manipulate databases."},xss:{name:"XSS Attack",description:"Prevent injection of malicious scripts into trusted webpages."}};function g(e){return m[e]}function p(e){return e.endsWith("update")?"modified":e.endsWith("insert")?"created":e.endsWith("remove")?"deleted":e.endsWith("priority")?"reordered":"firewallEnabled"===e?"changed":""}function h(e,t,a){let r=a?"You":e.username,{id:i,action:n}=e;return"crs.update"===e.action?{id:i||"",principal:r,rule:i?t.owasp.ruleGroups?.[i].name??i:"",actionTaken:p(n)}:"ip.insert"===e.action||"ip.remove"===e.action?{id:i||"",principal:r,rule:(e.action,"IP Blocking Rule"),actionTaken:p(n)}:"rules.insert"===e.action||"rules.update"===e.action?{id:i||"",principal:r,rule:e.value.name,actionTaken:p(n)}:"rules.remove"===e.action?{id:i||"",principal:r,rule:"a Custom Rule",actionTaken:p(n)}:"rules.priority"===e.action?{id:i||"",principal:r,rule:"Rule",actionTaken:p(n)}:"managedRules.update"===e.action?{id:i||"",principal:r,rule:(()=>{if(!i)return"";let e=w(t,i);return e?e.name:i})(),actionTaken:e.value.active?"enabled":"disabled"}:"botId.toggle"===e.action?{id:i||"",principal:r,rule:"BotID Deep Analysis",actionTaken:e.value?"enabled":"disabled"}:{principal:r,id:i||"",rule:"Firewall",actionTaken:p(n)}}function v(e){return"bot_filter"===e||"bot_protection"===e}function b(e){return"managed_bot_filter"===e||"managed_bot_protection"===e}function y(e){let t=e?.managedRules;return t?.bot_filter??t?.bot_protection}function x(e){return e.bot_filter??e.bot_protection}function w(e,t){return"bot_filter"===t?e.bot_filter??e.bot_protection:"bot_protection"===t?e.bot_protection??e.bot_filter:e[t]}async function j(e){let[t]=e;return(await (0,u.fetchAPI)(t,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}function k(e){let{projectId:n,ruleId:l}=e,{team:o}=(0,f.useTeam)(),u=(0,s.useRouter)(),m=(0,c.encode)({teamId:o?.id,projectId:n}),{data:g,mutate:p,isLoading:h}=(0,r.default)(o&&n?[`${d.API_FIREWALL}/firewall/config${m}`,m]:null,async e=>j(e)),v=(0,a.useToasts)(),b=(0,t.useMemo)(()=>L(g?{...g,draft:null}:void 0),[g]),y=(0,t.useMemo)(()=>L(g),[g]),{trigger:x,isMutating:w}=(0,i.default)(`${d.API_FIREWALL}/firewall/config/draft${m}`,P),{trigger:k,isMutating:I}=(0,i.default)([`${d.API_FIREWALL}/firewall/config/`,`/activate${m}`],_),{trigger:R,isMutating:C}=(0,i.default)(`${d.API_FIREWALL}/firewall/config/draft${m}`,S),A=(0,t.useCallback)(async e=>{try{let t=await P(`${d.API_FIREWALL}/firewall/config/draft${m}`,{arg:e});p({...g||{active:null,versions:[t]},draft:t},{revalidate:!1}).then(()=>null,()=>null)}catch(e){throw v.error(e.message||"Failed to update Firewall. Please try again."),e}},[m,v,g,p]),N=(0,t.useCallback)(async function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],a=arguments.length>2?arguments[2]:void 0;try{let r=await x(e);await p({...g||{active:null,versions:[r]},draft:r},{revalidate:!1}),t&&(a?.(),p().then(()=>null,()=>null))}catch(e){throw v.error(e.message||"Failed to update Firewall. Please try again."),e}},[p,x,v,g]),T=(0,t.useCallback)(async()=>{try{await R(),await p()}catch(e){throw v.error(e.message||"Failed to discard Firewall changes. Please try again."),e}},[p,R,v]),D=(0,t.useCallback)(async(e,t)=>{try{await k(t);let a=e?.toastSuccessMessage??"Your Firewall changes have been applied successfully";v.success(a),u.refresh(),await p().catch(()=>null)}catch(t){throw v.error(e?.toastErrorMessage||t.message||"Failed to publish Firewall changes. Please try again."),t}},[k,p,v,u]),B=(0,t.useCallback)(()=>{p().then(()=>null,()=>null)},[p]),M=(0,t.useMemo)(()=>{if(!l||!y)return;let e=y.rules.find(e=>e.id===l);if(e)return e.value},[l,y]),F=(0,t.useMemo)(()=>!y||!y.rules.some(e=>e.isRateLimit),[y]);return{activeConfig:b,config:y,showRateLimitModal:F,selectedRule:M,updateConfig:N,reorderItem:A,discardChanges:T,publishChanges:D,isPublishing:I,isDiscarding:C,isUpdatingConfig:w,isLoadingConfig:h&&!g,refresh:B}}async function P(e,t){let{arg:a}=t;return(await (0,u.fetchAPI)(e,{method:"PATCH",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify(a)})).body}async function _(e,t){let[a,r]=e,{arg:i="draft"}=t;return await (0,u.fetchAPI)(`${a}${i}${r}`,{method:"POST",throwOnHTTPError:!0,returnStatus:!0,body:JSON.stringify({})})}async function S(e){return await (0,u.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0,returnStatus:!0})}function L(e){if(!e)return;let t=e.draft||e.active||null;if(!t)return t;let a=new Map,r=Object.keys(t.crs).map(e=>{let{name:r,description:i}=m[e],n={id:e,action:t.crs[e].action,active:t.crs[e].active,name:r,description:i};return a.set(n.id,{...n,type:"owas"}),n}).sort((e,t)=>e.name.localeCompare(t.name)),i=t.rules.map(e=>{let t={id:e.id,description:e.description,name:e.name,action:e.action?.mitigate?.action==="rate_limit"?e.action.mitigate.rateLimit?.action||"log":e.action?.mitigate?.action||"log",active:e.active,value:e,isRateLimit:e.action?.mitigate?.action==="rate_limit"};return a.set(t.id,{...t,type:"custom_rule"}),t});t.ips.forEach(e=>{a.set(e.id,{...e,type:"ip_block"})});let n=t.changes.sort((e,t)=>t.createdAt.localeCompare(e.createdAt));return{currentConfig:t,crsRules:r,rules:i,changes:n,ruleMap:a}}function I(e,t){if(Object.hasOwn(e,"value")){let a=(0,n.default)(e);return a=(0,o.default)(a,"value.id"),"action"===t.type?a.isRateLimit?(0,l.default)(a,"value.action.mitigate.rateLimit.action",t.value):(0,l.default)(a,"value.action.mitigate.action",t.value):(0,l.default)(a,"value.active",t.value),{id:e.id,action:"rules.update",value:a.value}}let a="action"===t.type?{action:t.value,active:e.active}:{action:"disable"===e.action?"log":e.action,active:t.value};return{id:e.id,action:"crs.update",value:a}}},[3903554]],6508134:e=>{"use strict";e.s({allowedFirewallActions:()=>m,defaultFilter:()=>t,defaultShowSystemRules:()=>s,firewallPlanLimits:()=>l,isLimitedSystemRule:()=>d,owaspToCrsConfig:()=>f,planLimitText:()=>o,ruleToMappings:()=>n,stableSort:()=>u,systemFilter:()=>a});let t=[{label:"User Agent",value:"clientUserAgent"},{label:"Country",value:"clientIpCountry"},{label:"IP Address",value:"clientIp"},{label:"Request Path",value:"requestPath"},{label:"Vercel Region",value:"edgeNetworkRegion"},{label:"Target Path",value:"sourcePath"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}],a=[{label:"IP Address",value:"clientIp"},{label:"Country",value:"clientIpCountry"},{label:"JA4 Digest",value:"clientJa4Digest"},{label:"Host",value:"requestHostname"}],r={sys_dos_mitigation:{label:"DDoS Mitigation",groupBy:"System",rank:11},ip_blocking:{label:"IP Blocking",groupBy:"System",rank:12}},i={owasp_anomaly_detection:{label:"OWASP Anomaly Detection",groupBy:"System",rank:3,keys:["gen","java","ma","sd"]},owasp_xss_detection:{label:"OWASP XSS Detection",groupBy:"System",rank:4,keys:["xss"]},owasp_sqli_detection:{label:"OWASP SQL Injection Detection",groupBy:"System",rank:5,keys:["sqli"]},owasp_rfi_detection:{label:"OWASP RFI Detection",groupBy:"System",rank:6,keys:["rfi"]},owasp_lfi_detection:{label:"OWASP LFI Detection",groupBy:"System",rank:7,keys:["lfi"]},owasp_rce_detection:{label:"OWASP RCE Detection",groupBy:"System",rank:8,keys:["rce"]},owasp_php_detection:{label:"OWASP PHP Injection Detection",groupBy:"System",rank:9,keys:["php"]},owasp_session_fixation_detection:{label:"OWASP Session Fixation Detection",groupBy:"System",rank:10,keys:["sf"]}},n={default_web_traffic:{label:"Allowed Requests",groupBy:"System",rank:1},challenge_mode:{label:"Challenge Mode",groupBy:"System",rank:2},...i,...r},l={hobby:{customRules:3,ipBlocks:10,ipBypass:0,rateLimit:1},pro:{customRules:40,ipBlocks:100,ipBypass:25,rateLimit:40},enterprise:{customRules:1e3,ipBlocks:1e3,ipBypass:100,rateLimit:1e3}},o={pro:{customRules:{title:"Need more custom rules?",description:"Upgrade to Enterprise Plan"},ipBlocks:{title:"Need to block more IPs?",description:"Upgrade to Enterprise Plan"},ipBypass:{title:"Need to allow more IPs?",description:"Upgrade to Enterprise Plan"},rateLimit:{title:"Need more rate limit rules?",description:"Upgrade to Enterprise Plan"}},hobby:{customRules:{title:"Need more custom rules?",description:`Upgrade to pro to add up to ${l.pro.customRules} custom rules`},ipBlocks:{title:"Need to block more IPs?",description:`Upgrade to pro to block up to ${l.pro.ipBlocks} IPs`},ipBypass:{title:"Need to setup an IP bypass?",description:`Upgrade to pro to allow up to ${l.pro.ipBypass} IPs`},rateLimit:{title:"Need more rate limit rules?",description:`Upgrade to pro to add up to ${l.pro.rateLimit} rate limit rules`}}},s=[{label:n.default_web_traffic.label,value:"default_web_traffic",action:"allow"},{label:n.challenge_mode.label,value:"challenge_mode",action:"challenge"},...Object.entries(r).map(e=>{let[t,a]=e;return{label:a.label,value:t,action:"deny"}})],c=Object.entries(n).reduce((e,t)=>{let[a,r]=t;return Object.assign(e,{[a]:r.rank})},{});function u(e,t){let[a]=e.split("$"),[r]=t.split("$"),i=c[a],n=c[r];return i&&n?i-n:i?-i:n||e.localeCompare(t)}function d(e){return e in r}function f(e){return Object.entries(i).reduce((t,a)=>{let[r,i]=a,n=e.filter(e=>i.keys.includes(e.id)&&e.active);if(n.length>0){let e=Array.from(n.reduce((e,t)=>(e.add(t.action),e),new Set));t.push({label:i.label,value:r,action:e.join(" / ")})}return t},[])}function m(e,t){let a=[{value:"log",label:"Log",subtext:"Log traffic and do nothing more"},{value:"deny",label:t?"Deny (403)":"Deny",subtext:"Block traffic from accessing your site"},{value:"challenge",label:"Challenge",subtext:"Verify traffic at a security checkpoint before allowing access to your site"}];return t||a.push({value:"bypass",label:"Bypass",subtext:"Bypass existing rules and allow traffic access to your site"}),e&&a.push({value:"rate_limit",label:t?"Too Many Requests (429)":"Rate Limit",subtext:"Enforce frequency limitations on traffic"}),t||a.push({value:"redirect",label:"Redirect",subtext:"Redirect traffic to a different page"}),a}},6144234:e=>{"use strict";e.s({useAttackStatus:()=>i});var t=e.i(3345839),a=e.i(9336536),r=e.i(6649026);function i(e){let{teamId:i,projectId:n}=e;return(0,t.useIsomorphicSWR)(`${a.API_FIREWALL}/firewall/attack-status${(0,r.encode)({teamId:i,projectId:n})}`)}},6760874:e=>{"use strict";e.s({useQuerySelect:()=>n});var t=e.i(6530772),a=e.i(2567082),r=e.i(1863837),i=e.i(6756623);function n(e){let i=(0,t.useMemo)(()=>"live"===e.range?{seconds:10}:{minutes:"1h"===e.range?1:15},[e.range]),n=(0,t.useMemo)(()=>{let t=new Date,n="live"===e.range?(0,a.default)("10m"):(0,a.default)(e.range);return{end:(0,r.endOfDuration)(t,i),start:(0,r.startOfDuration)(new Date(t.getTime()-n),i)}},[i,e.range]);return(0,t.useMemo)(()=>{let t="default_web_traffic"===e.filter,a="all_rules"===e.filter?500:20;return"BotID"===e.filter?{event:"botIdCheck",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:i,groupBy:o(e),filter:l(e),limit:a,tailRollup:"others",summaryOnly:!1,startTime:n.start,endTime:n.end}:t?{event:"incomingRequest",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:i,groupBy:o(e),filter:l(e),limit:a,tailRollup:"others",summaryOnly:!1,startTime:n.start,endTime:n.end}:{event:"firewallAction",reason:"firewall_tab",rollups:{value:{measure:"count",aggregation:"sum"}},granularity:i,groupBy:o(e),filter:l(e),limit:a,tailRollup:"others",summaryOnly:!1,startTime:n.start,endTime:n.end}},[i,n,e])}function l(e){if("BotID"===e.filter)return"";let t=[];switch(e.action){case"allow":t.push("wafAction eq 'allow'");break;case"challenge":t.push("wafAction in ('challenge', 'challenge-failed', 'challenge-solved')");break;case"all":break;default:t.push(`wafAction eq '${(0,i.denormalizeFirewallAction)(e.action)}'`)}let a=(0,i.wafRuleId)(e.filter);return"all_rules"!==e.filter&&t.push(`wafRuleId eq '${a}'`),t.join(" and ")}function o(e){let t=[];return"BotID"!==e.filter&&t.push("wafAction"),"all_rules"===e.filter?t.unshift("wafRuleId"):t.unshift(e.groupBy),"clientIp"===e.groupBy&&t.push("asnId","asnName","clientIpCountry"),t.map(t=>"sourcePath"===t?"default_web_traffic"===e.filter?"route":"requestPath":t)}},7834378:e=>{"use strict";e.s({ProjectCardDetailsContent:()=>s,ProjectCardDetailsEmptyState:()=>c,ProjectCardDetailsHeader:()=>o,ProjectDetailsCard:()=>l});var t=e.i(6645307),a=e.i(2362802),r=e.i(8679640),i=e.i(9443759),n=e.i(6606445);function l(e){let{allowOverflow:a=!1,children:r,className:n}=e;return(0,t.jsx)("div",{className:(0,i.cn)("flex flex-col isolate shadow-sm rounded-md bg-background-100 h-[240px]",n,a?"overflow-visible":"overflow-hidden"),children:r})}function o(e){let{title:i,children:l,duration:o,href:s}=e;return(0,t.jsxs)("header",{className:"group relative z-[1] flex justify-between gap-x-0.5 px-4 py-3 pr-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-1.5 py-0.5",children:[(0,t.jsx)("p",{className:"text-label-14 m-0",children:(0,t.jsx)("strong",{children:i})}),o?(0,t.jsx)("time",{className:"text-label-14 m-0 text-gray-900",children:o}):null,l]}),s?(0,t.jsx)(a.ButtonLink,{"aria-label":"Go to page",className:"z-[2] !text-gray-800 group-hover:!text-gray-1000 group-[&:not(:has(a[target]:hover)):hover]:bg-gray-alpha-200",href:s,prefetch:!1,prefetchStrategy:"hover",shape:"square",size:"tiny",svgOnly:!0,type:"tertiary",onClick:()=>{(0,n.track)("Project Card Clicked",{type:i})},children:(0,t.jsx)(r.ChevronRightSmall,{})}):null,s?(0,t.jsx)(a.Link,{className:"absolute inset-0 z-[1] block",href:s,tabIndex:-1,onClick:()=>{(0,n.track)("Project Card Clicked",{type:i})}}):null]})}function s(e){let{children:a,className:r}=e;return(0,t.jsx)("div",{className:(0,i.cn)("relative h-full",r),children:a})}function c(e){let{icon:a,subtitle:r,cta:i}=e;return(0,t.jsxs)("div",{className:"flex h-5/6 flex-col items-center justify-center gap-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-2 text-gray-900",children:[a,(0,t.jsx)("p",{className:"text-label-14",children:r})]}),i]})}},3836124:[e=>{"use strict";e.s({ProjectFirewallCard:()=>U,ProjectFirewallCardSkeleton:()=>X,StatusBadge:()=>ea},3836124);var t=e.i(6645307),a=e.i(2362802),r=e.i(3921802),i=e.i(5674541),n=e.i(5163670),l=e.i(8084653),o=e.i(3277953),s=e.i(8488604),c=e.i(8483852),u=e.i(2537276),d=e.i(5610210),f=e.i(3345839),m=e.i(9336536),g=e.i(6649026),p=e.i(3514588),h=e.i(3521787),v=e.i(1183506),b=e.i(2226734),y=e.i(6760874),x=e.i(284627),w=e.i(6756623),j=e.i(6144234),k=e.i(3184563),P=e.i(6895406);let _=(0,P.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 9.67054V23.8179c0 3.7199 2.0648 7.1323 5.3599 8.8583L20 36.0889l6.5151-3.4127c3.2951-1.726 5.3599-5.1384 5.3599-8.8583V9.67054c-.6207-.181-1.2899-.35565-2.002-.54153-.3642-.09504-.7396-.19301-1.1254-.29626-1.4625-.39131-3.0324-.84866-4.4687-1.47955-1.4334-.62958-2.8155-1.46629-3.844-2.66311-.1542-.17947-.2994-.3658-.4349-.55915-.1355.19335-.2807.37968-.4349.55915-1.0285 1.19682-2.4106 2.03353-3.844 2.66311-1.4363.63089-3.0062 1.08824-4.4687 1.47955-.3858.10325-.7612.20122-1.1254.29626-.71213.18588-1.38133.36053-2.002.54153ZM18.75 0c0 1.31808-.4156 2.28639-1.0809 3.06066-.6904.80329-1.6991 1.4527-2.9534 2.00361-1.2512.54961-2.6657.96712-4.1095 1.35344-.344.09206-.69287.18307-1.0417.27408-1.07623.28078-2.15211.56146-3.08478.87236l-.85472.2849V23.8179c0 4.6498 2.58096 8.9154 6.6999 11.0729l7.0951 3.7165.58.3038.58-.3038 7.0951-3.7165c4.1189-2.1575 6.6999-6.4231 6.6999-11.0729V7.84905l-.8547-.2849c-.9327-.3109-2.0086-.59158-3.0848-.87236-.3488-.09101-.6977-.18202-1.0417-.27408-1.4438-.38632-2.8583-.80383-4.1095-1.35344-1.2543-.55091-2.263-1.20032-2.9534-2.00361C21.6656 2.28639 21.25 1.31808 21.25 0h-2.5Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),S=(0,P.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 23.8179V9.67054c.62067-.18099 1.28985-.35565 2.002-.54152v-.00001c.3642-.09504.7396-.19301 1.1254-.29626 1.4625-.39131 3.0324-.84866 4.4687-1.47955 1.4334-.62958 2.8155-1.46629 3.844-2.66311.1542-.17947.2994-.3658.4349-.55915.1355.19335.2807.37968.4349.55915 1.0285 1.19682 2.4106 2.03353 3.844 2.66311 1.4363.63089 3.0062 1.08824 4.4687 1.47955.3857.10323.761.20118 1.1251.2962l.0003.00006c.7121.18588 1.3813.36053 2.002.54153V23.8179c0 3.7199-2.0648 7.1323-5.3599 8.8583L20 36.0889l-6.5151-3.4127c-3.2951-1.726-5.3599-5.1384-5.3599-8.8583Zm9.5441-20.75724C18.3344 2.28639 18.75 1.31808 18.75 0h2.5c0 1.31808.4156 2.28639 1.0809 3.06066.6904.80329 1.6991 1.4527 2.9534 2.00361 1.2512.54961 2.6657.96712 4.1095 1.35344.3439.09204.6927.18304 1.0415.27403l.0002.00005c1.0762.28078 2.1521.56146 3.0848.87236l.8547.2849V23.8179c0 4.6498-2.581 8.9154-6.6999 11.0729L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165C8.20596 32.7333 5.625 28.4677 5.625 23.8179V7.84905l.85472-.2849c.93267-.3109 2.00855-.59158 3.08478-.87236l.00019-.00005c.34877-.09099.69761-.18199 1.04151-.27403 1.4438-.38632 2.8583-.80383 4.1095-1.35344 1.2543-.55091 2.263-1.20032 2.9534-2.00361Zm9.7773 14.07324.8839-.8839-1.7678-1.7678-.8839.8839-9.1161 9.1161-2.2411-2.2411-.8839-.8839-1.7678 1.7678.8839.8839 3.125 3.125c.4882.4881 1.2796.4881 1.7678 0l10-10Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),L=(0,P.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.22355 7.04658 3.38991 2.27895l-.88994-.87778L.720093 3.15674l.889937.87778L36.1782 38.1306l.8899.8778 1.7799-1.7556-.89-.8778-5.6898-5.6122c1.3492-2.0194 2.1068-4.4257 2.1068-6.9449V7.84905l-.8547-.2849c-.9327-.3109-2.0086-.59158-3.0848-.87236l-.0002-.00005c-.3488-.09099-.6976-.18199-1.0416-.27403-1.4437-.38632-2.8582-.80383-4.1095-1.35344-1.2542-.55091-2.2629-1.20032-2.9533-2.00361C21.6655 2.28639 21.25 1.31808 21.25 0h-2.5c0 1.31808-.4156 2.28639-1.081 3.06066-.6903.80329-1.699 1.4527-2.9533 2.00361-1.2513.54961-2.6657.96712-4.1095 1.35344-.344.09204-.69277.18304-1.04153.27403l-.00019.00005c-.45054.11754-.901.23506-1.34093.35479Zm2.06775 2.03954L30.4474 28.967c.9176-1.5276 1.4276-3.3004 1.4276-5.1491V9.67054c-.6207-.181-1.2899-.35565-2.0021-.54153l-.0002-.00006c-.3641-.09502-.7394-.19297-1.1252-.2962-1.4624-.39131-3.0323-.84866-4.4687-1.47955-1.4333-.62958-2.8154-1.46629-3.8439-2.66311-.1543-.17947-.2994-.3658-.4349-.55915-.1355.19335-.2807.37968-.4349.55915-1.0286 1.19682-2.4106 2.03353-3.844 2.66311-1.4363.63089-3.0063 1.08824-4.4687 1.47955-.3281.08779-.6486.17177-.9611.25337ZM5.62497 12.5712l2.5 2.4659v8.7808c0 3.7199 2.06473 7.1323 5.35993 8.8583L20 36.0889l6.1841-3.2393 1.8635 1.838c-.1227.0697-.2469.1374-.3725.2032L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165c-4.11897-2.1575-6.69993-6.4231-6.69993-11.0729V12.5712Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"}),I=(0,P.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M8.125 23.8179V9.67054c.62067-.18099 1.28985-.35565 2.002-.54152v-.00001c.3642-.09504.7396-.19301 1.1254-.29626 1.4625-.39131 3.0324-.84866 4.4687-1.47955 1.4334-.62958 2.8155-1.46629 3.844-2.66311.1542-.17947.2994-.3658.4349-.55915.1355.19335.2807.37968.4349.55915 1.0285 1.19682 2.4106 2.03353 3.844 2.66311 1.4363.63089 3.0062 1.08824 4.4687 1.47955.3857.10323.761.20118 1.1251.2962l.0003.00006c.7121.18588 1.3813.36053 2.002.54153V23.8179c0 3.7199-2.0648 7.1323-5.3599 8.8583L20 36.0889l-6.5151-3.4127c-3.2951-1.726-5.3599-5.1384-5.3599-8.8583Zm9.5441-20.75724C18.3344 2.28639 18.75 1.31808 18.75 0h2.5c0 1.31808.4156 2.28639 1.0809 3.06066.6904.80329 1.6991 1.4527 2.9534 2.00361 1.2512.54961 2.6657.96712 4.1095 1.35344.3439.09204.6927.18304 1.0415.27403l.0002.00005c1.0762.28078 2.1521.56146 3.0848.87236l.8547.2849V23.8179c0 4.6498-2.581 8.9154-6.6999 11.0729L20.58 38.6073l-.58.3038-.58-.3038-7.0951-3.7165C8.20596 32.7333 5.625 28.4677 5.625 23.8179V7.84905l.85472-.2849c.93267-.3109 2.00855-.59158 3.08478-.87236l.00019-.00005c.34877-.09099.69761-.18199 1.04151-.27403 1.4438-.38632 2.8583-.80383 4.1095-1.35344 1.2543-.55091 2.263-1.20032 2.9534-2.00361ZM21.25 12.5l-.3125 10h-1.875l-.3125-10h2.5Zm0 13.75c0 .6904-.5596 1.25-1.25 1.25s-1.25-.5596-1.25-1.25S19.3096 25 20 25s1.25.5596 1.25 1.25Z" clip-rule="evenodd"/>',{size:40,viewBox:"0 0 40 40"});var R=e.i(7834378);e.s({BotProtectionStatusBadge:()=>O,FirewallStatusBadge:()=>F,MicrofrontendsFirewallBadge:()=>$},3682401);var C=e.i(555528),A=e.i(8173982),N=e.i(6129921),T=e.i(5076671),D=e.i(5535439),B=e.i(7806943),M=e.i(3903554);function F(e){let{className:a,config:i,project:n,rulesets:o}=e,{isChildMicrofrontend:s,isMicrofrontendsEnabled:u}=(0,B.useMicrofrontendsProjectInfo)(),f=u&&s;return(0,t.jsxs)("div",{className:(0,d.clsx)("flex-row items-center gap-2",a),children:[(0,t.jsx)(T.ShieldCheck,{color:"blue-700"}),(0,t.jsxs)("div",{className:"flex flex-row items-center divide-x",children:[(0,t.jsx)(l.Text,{className:"pr-2",variant:"label-13",weight:500,children:"Firewall is active"}),(0,t.jsx)("div",{className:(0,d.clsx)("pl-2",{"pr-2":f}),children:n?.security?.attackModeEnabled?(0,t.jsx)(r.Badge,{icon:(0,t.jsx)(c.Shield,{color:"blue-900"}),size:"sm",variant:"blue-subtle",children:"Challenge Mode active"}):o&&(0,M.botProtectionFromRulesets)(o)?(0,t.jsx)(O,{config:i,rulesets:o}):(0,t.jsx)(l.Text,{color:"gray-900",variant:"label-13",children:"All systems normal"})}),f?(0,t.jsx)("div",{className:"pl-2",children:(0,t.jsx)($,{})}):null]})]})}function O(e){let{config:i,rulesets:n}=e,l=(0,D.useParams)(),o=(0,M.botProtectionFromConfig)(i?.currentConfig),s=(0,M.botProtectionFromRulesets)(n),c=o?.active??s?.active,u=o?.action??s?.defaultAction;return(0,t.jsx)(a.Link,{canPrefetch:()=>!0,isDifferentZone:!1,href:l?.teamSlug&&l?.project?`/${l.teamSlug}/${l.project}/firewall/configure#bot-management`:"#",children:c?"log"===u?(0,t.jsx)(r.Badge,{icon:(0,t.jsx)(N.Robot,{size:10}),size:"sm",variant:"gray-subtle",children:"Monitoring Bot Activity"}):(0,t.jsx)(r.Badge,{size:"sm",variant:"blue-subtle",icon:(0,t.jsx)(N.Robot,{size:10,color:"blue-900"}),children:"Bot Protection Enabled"}):(0,t.jsx)(r.Badge,{size:"sm",variant:"pill",className:"",icon:(0,t.jsx)(N.Robot,{size:10,color:"gray-900"}),children:"Enable Bot Protection"})})}function $(){let{defaultProjectBaseUrl:e,isChildMicrofrontend:i,isMicrofrontendsEnabled:n}=(0,B.useMicrofrontendsProjectInfo)();return n&&i?(0,t.jsx)(a.Link,{href:`${e}/firewall`,icon:!1,children:(0,t.jsx)(C.Tooltip,{text:"Firewall rules for the default app are also run for this microfrontend.",children:(0,t.jsx)(r.Badge,{icon:(0,t.jsx)(A.Microfrontends,{}),size:"sm",variant:"blue-subtle",children:"View Parent Firewall"})})}):null}F.Skeleton=function(){return(0,t.jsx)(n.Skeleton,{className:"hidden lg:block",height:24,width:255})};var E=e.i(4345726),z=e.i(7544595);e.s({useProjectPageProject:()=>V},3823270);var H=e.i(2240289);function V(e){let t=(0,D.useParams)();return(0,H.useProject)(t?.project,{apiVersion:"v10",latestDeployments:10,activeBranches:!0,config:e,fetchParams:{rollbackInfo:!0}})}var W=e.i(9630325);function q(e){return new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:0,compactDisplay:"short"}).format(e)}function U(e){let{teamSlug:i,projectSlug:n}=e,{data:l,isLoading:s}=V(),{deployment:u,isLoading:d}=(0,k.useProjectProductionDeployment)(n),{team:y}=(0,p.useTeam)(i),{data:x,isLoading:P}=(0,f.useIsomorphicSWR)(`${m.API_FIREWALL}/proxy/status${(0,g.encode)({teamId:i,projectId:n})}`),{data:_,isLoading:S,error:L,mutate:I}=(0,h.default)(y&&l?`/api/firewall/project-overview-summary${(0,g.encode)({ownerId:y.id,projectId:l.id})}`:null,e=>(0,v.fetchAPI)(e,{throwOnHTTPError:!0})),{data:C,isLoading:A}=(0,j.useAttackStatus)({teamId:i,projectId:n}),{activeConfig:N,isLoadingConfig:T}=(0,E.useFirewallConfig)({projectId:l?.id}),{data:D,isLoading:B}=(0,z.useManagedRulesets)({projectIdOrName:n,teamIdOrSlug:i}),M=C?.anomalies.find(e=>"active"===e.state&&!e.endTime),F=(l?.latestDeployments??[]).length>0,$=!!(x&&x.length>0),H=l?.security?.attackModeEnabled??!1,W=(0,w.globalBypassStatus)(l);if(P&&!x||S&&!_||s&&!l||A&&!C||T&&!N||B&&!D||d&&!u)return(0,t.jsx)(X,{});if(L)return(0,t.jsx)(ee,{onRetry:()=>{I()},projectSlug:n,teamSlug:i});if(!u)return(0,t.jsx)(Y,{hasDeployments:F,projectSlug:n,teamSlug:i});let q=null;return H?q=(0,t.jsx)(a.Link,{className:"z-[2] leading-none",external:!0,href:"/docs/attack-challenge-mode#attack-challenge-mode",icon:!1,children:(0,t.jsx)(r.Badge,{className:"border border-solid border-transparent transition hover:border-blue-400",icon:(0,t.jsx)(c.Shield,{size:12}),size:"sm",variant:"blue-subtle",children:"Challenge Mode active"})}):$?q=(0,t.jsx)(a.Link,{className:"z-[2] leading-none",external:!0,href:"/guides/can-i-use-a-proxy-on-top-of-my-vercel-deployment",icon:!1,children:(0,t.jsx)(r.Badge,{className:"border border-solid border-transparent transition hover:border-amber-400",icon:(0,t.jsx)(o.Warning,{size:12}),size:"sm",variant:"amber-subtle",children:"Reverse Proxy Detected"})}):D&&(q=(0,t.jsx)(O,{config:N,rulesets:D})),(0,t.jsxs)(R.ProjectDetailsCard,{children:[(0,t.jsx)(R.ProjectCardDetailsHeader,{duration:M?.startTime?`Past ${String((0,b.ago)(Date.now()-M.startTime,{suffix:" ",alwaysRelative:!0}))}`:"24h",href:`/${i}/${n}/firewall?range=1d`,title:"Firewall",children:q}),(0,t.jsx)(R.ProjectCardDetailsContent,{className:"flex items-center justify-center",children:M?(0,t.jsx)(K,{anomaly:M}):W.enabled?(0,t.jsx)(J,{ttl:W.ttl}):(0,t.jsx)(G,{summary:_})})]})}let Z="flex flex-col gap-2 items-center justify-center relative mt-auto mb-9";function J(e){let{ttl:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"error"}),(0,t.jsxs)("div",{className:Z,children:[(0,t.jsx)(l.Text,{color:"red-900",variant:"label-14",weight:500,children:"System Mitigations Disabled"}),(0,t.jsx)(l.Text,{variant:"label-14",weight:500,children:"You are susceptible to attacks"}),a?(0,t.jsxs)(l.Text,{variant:"label-14",children:["Until ",(0,W.formatDateAndTime)(1e3*a)]}):""]})]})}function K(e){let{anomaly:a}=e,r=(0,y.useQuerySelect)({action:"all",filter:"sys_dos_mitigation",groupBy:"wafAction",range:`${new Date().getTime()-a.startTime}ms`}),{data:i,isLoading:o}=(0,x.useSonarLiveQuery)({...r,summaryOnly:!0}),s=i?.summary.reduce((e,t)=>(e[t.wafAction]=t.value??0,e),{});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"warning"}),(0,t.jsxs)("div",{className:Z,children:[(0,t.jsx)(l.Text,{color:"amber-900",variant:"label-14",weight:500,children:"DDoS attack is being mitigated"}),o?(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(n.Skeleton,{height:20,width:120}),(0,t.jsx)(n.Skeleton,{height:20,width:120})]}):(0,t.jsx)(Q,{summary:s})]})]})}function Y(e){let{teamSlug:a,projectSlug:r,hasDeployments:i}=e;return(0,t.jsxs)(R.ProjectDetailsCard,{children:[(0,t.jsx)(R.ProjectCardDetailsHeader,{href:`/${a}/${r}/firewall?range=1d`,title:"Firewall"}),(0,t.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,t.jsxs)("div",{className:"relative -top-5 flex items-center gap-2 text-gray-900",children:[(0,t.jsx)(s.FirewallFlame,{}),(0,t.jsx)(l.Text,{color:"gray-900",variant:"label-14",weight:500,children:i?"Firewall is active":"No live deployments"})]})})]})}function G(e){let{summary:a}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"success"}),(0,t.jsxs)("div",{className:Z,children:[(0,t.jsx)(l.Text,{color:"blue-900",variant:"label-14",weight:500,children:"Firewall is active"}),a&&0===a.deny&&0===a.challenge?(0,t.jsx)(l.Text,{children:"All systems are normal"}):(0,t.jsx)(Q,{summary:a})]})]})}function Q(e){let{summary:a}=e;return(0,t.jsxs)("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2",children:[a?.deny&&a.deny>0?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(u.ShieldOff,{color:"gray-900"}),(0,t.jsxs)(l.Text,{weight:500,children:[q(a.deny)," denied"]})]}):null,a?.challenge&&a.challenge>0?(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(c.Shield,{color:"gray-900"}),(0,t.jsxs)(l.Text,{weight:500,children:[q(a.challenge)," challenged"]})]}):null]})}function X(){return(0,t.jsxs)(R.ProjectDetailsCard,{children:[(0,t.jsx)(R.ProjectCardDetailsHeader,{duration:"24h",title:"Firewall",children:(0,t.jsx)(n.Skeleton,{height:24,width:160})}),(0,t.jsxs)("div",{className:"relative h-[188px] pt-[115px]",children:[(0,t.jsx)(ea,{className:"absolute left-1/2 top-0 -translate-x-1/2 translate-y-[16px]",variant:"disabled"}),(0,t.jsxs)("div",{className:Z,children:[(0,t.jsx)(n.Skeleton,{height:20,width:150}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)(n.Skeleton,{height:20,width:120}),(0,t.jsx)(n.Skeleton,{height:20,width:120})]})]})]})]})}function ee(e){let{teamSlug:a,projectSlug:r,onRetry:n}=e;return(0,t.jsxs)(R.ProjectDetailsCard,{children:[(0,t.jsx)(R.ProjectCardDetailsHeader,{duration:"24h",href:`/${a}/${r}/firewall?range=1d`,title:"Firewall"}),(0,t.jsx)(R.ProjectCardDetailsContent,{children:(0,t.jsx)(R.ProjectCardDetailsEmptyState,{cta:(0,t.jsx)(i.Button,{className:"text-label-14 font-medium",onClick:n,size:"small",type:"tertiary",children:"Retry"}),icon:(0,t.jsx)(c.Shield,{}),subtitle:"We couldn't load the firewall data"})})]})}let et={success:S,warning:I,error:L,disabled:_};function ea(e){let{className:a,variant:r="success"}=e,i=et[r];return(0,t.jsx)("div",{className:(0,d.clsx)(a,"p-[10px]",{"text-blue-700 [--status-badge-circle-color:var(--ds-blue-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(240,247,255,0.37)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.37)_49.5%,rgba(15,27,45,0.37)_100%)]":"success"===r,"text-amber-700 [--status-badge-circle-color:var(--ds-amber-200)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(255,244,213,0.37)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.37)_49.5%,rgba(52,28,0,0.37)_100%)]":"warning"===r,"text-red-700 [--status-badge-circle-color:var(--ds-red-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.22)_49.5%,rgba(255,240,240,0.22)_100%)] dark:[--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(10,10,10,0.22)_49.5%,rgba(42,19,20,0.22)_100%)]":"error"===r,"text-gray-700 [--status-badge-circle-color:var(--ds-gray-300)] [--status-badge-background-gradient:radial-gradient(50%_50%_at_50%_50%,rgba(255,255,255,0.37)_49.5%,rgba(240,247,255,0.37)_100%)] dark:[--status-badge-background-gradient:none]":"disabled"===r}),children:(0,t.jsxs)("div",{className:"relative isolate flex items-center justify-center",children:[(0,t.jsx)(er,{className:"p-[182px] opacity-50"}),(0,t.jsx)(er,{className:"p-[115px] opacity-50"}),(0,t.jsx)(er,{className:"p-[50px]"}),(0,t.jsx)(i,{className:"z-10",size:40})]})})}function er(e){let{className:a}=e;return(0,t.jsx)("div",{className:(0,d.clsx)(a,"absolute block size-0 rounded-full border border-solid text-[var(--status-badge-circle-color)] [background:var(--status-badge-background-gradient)]")})}},[3682401,3823270]]}]);

//# sourceMappingURL=82099cafdb4c7bb9.js.map
//# debugId=60816bca-d71a-539d-93b3-99213f71eb42
