
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="94b6e88c-5f59-52b8-9070-010c763f85dd")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{7328212:e=>{e.v({badge:"bell-module__AXcxMG__badge",badgeMotion:"bell-module__AXcxMG__badgeMotion",btn:"bell-module__AXcxMG__btn",buttonContent:"bell-module__AXcxMG__buttonContent",content:"bell-module__AXcxMG__content",fadeIn:"bell-module__AXcxMG__fadeIn",fadeOut:"bell-module__AXcxMG__fadeOut",focus:"bell-module__AXcxMG__focus",frame:"bell-module__AXcxMG__frame",frameMotion:"bell-module__AXcxMG__frameMotion",hover:"bell-module__AXcxMG__hover",icon:"bell-module__AXcxMG__icon",lg:"bell-module__AXcxMG__lg",md:"bell-module__AXcxMG__md",pressed:"bell-module__AXcxMG__pressed",shadow:"bell-module__AXcxMG__shadow",sm:"bell-module__AXcxMG__sm",statusIcon:"bell-module__AXcxMG__statusIcon",svgNoPointerEvents:"bell-module__AXcxMG__svgNoPointerEvents",text:"bell-module__AXcxMG__text"})},5014665:e=>{e.v({archiveFooter:"feed-module__491t5W__archiveFooter",breakAll:"feed-module__491t5W__breakAll",cell:"feed-module__491t5W__cell",commentsView:"feed-module__491t5W__commentsView",emptyIcon:"feed-module__491t5W__emptyIcon",emptyLabel:"feed-module__491t5W__emptyLabel",feed:"feed-module__491t5W__feed",feedContent:"feed-module__491t5W__feedContent",header:"feed-module__491t5W__header",headerGrid:"feed-module__491t5W__headerGrid",settingsLink:"feed-module__491t5W__settingsLink",tabText:"feed-module__491t5W__tabText",view:"feed-module__491t5W__view"})},1258670:e=>{e.v({archive:"item-module__Hg2RJW__archive",archiveButton:"item-module__Hg2RJW__archiveButton",dot:"item-module__Hg2RJW__dot",fallbackIcon:"item-module__Hg2RJW__fallbackIcon","focus-visible":"item-module__Hg2RJW__focus-visible",focusVisible:"item-module__Hg2RJW__focusVisible",hidden:"item-module__Hg2RJW__hidden",item:"item-module__Hg2RJW__item",link:"item-module__Hg2RJW__link",notificationContent:"item-module__Hg2RJW__notificationContent",subAvatar:"item-module__Hg2RJW__subAvatar",subject:"item-module__Hg2RJW__subject"})},8573383:e=>{e.v({commentWrapper:"comment-item-module__JJqGUq__commentWrapper",selected:"comment-item-module__JJqGUq__selected"})},3514640:e=>{e.v({commentsDetailView:"notifications-module__J76_1G__commentsDetailView"})},4255365:e=>{"use strict";e.s({NotificationsProviderAndPopover:()=>eL},4255365);var t=e.i(6645307),i=e.i(6530772),n=e.i(1164214),s=e.i(6514339),l=e.i(3124255),a=e.i(7930102),o=e.i(7573892),r=e.i(9802771),d=e.i(3514588),c=e.i(604868),u=e.i(5175803),h=e.i(7179748),m=e.i(3838439);function f(){let{resolvedTheme:e}=(0,h.useTheme)(),i=(0,m.default)();return(0,t.jsxs)("svg",{fill:"none",height:"36",opacity:+!!e,viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:i?"#F0FDF4":"#071D10",height:"35",rx:"17.5",width:"35",x:"0.5",y:"0.5"}),(0,t.jsx)("g",{clipPath:"url(#clip0_798_8657)",children:(0,t.jsx)("path",{d:"M14.6667 17.8809L16.75 19.9643L21.2143 15.5M26.3333 18C26.3333 22.6024 22.6024 26.3333 18 26.3333C13.3976 26.3333 9.66666 22.6024 9.66666 18C9.66666 13.3976 13.3976 9.66666 18 9.66666C22.6024 9.66666 26.3333 13.3976 26.3333 18Z",stroke:i?"#0D883B":"#86EFAC",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),(0,t.jsx)("rect",{height:"35",rx:"17.5",stroke:i?"#DCFCE7":"#0D3B1E",width:"35",x:"0.5",y:"0.5"}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_798_8657",children:(0,t.jsx)("rect",{fill:"white",height:"20",transform:"translate(8 8)",width:"20"})})})]})}function x(){let{resolvedTheme:e}=(0,h.useTheme)(),i=(0,m.default)(),n=i?"#BD5200":"#FDE68A";return(0,t.jsxs)("svg",{fill:"none",height:"36",opacity:+!!e,viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:i?"#FFFBEB":"#241005",height:"35",rx:"17.5",width:"35",x:"0.5",y:"0.5"}),(0,t.jsxs)("g",{clipPath:"url(#clip0_798_8667)",children:[(0,t.jsx)("path",{d:"M16.575 11.2167L9.51665 23C9.37113 23.252 9.29413 23.5377 9.29331 23.8288C9.2925 24.1198 9.3679 24.4059 9.51201 24.6588C9.65612 24.9116 9.86392 25.1223 10.1147 25.2699C10.3656 25.4174 10.6507 25.4968 10.9417 25.5H25.0583C25.3493 25.4968 25.6344 25.4174 25.8852 25.2699C26.136 25.1223 26.3439 24.9116 26.488 24.6588C26.6321 24.4059 26.7075 24.1198 26.7067 23.8288C26.7058 23.5377 26.6288 23.252 26.4833 23L19.425 11.2167C19.2764 10.9717 19.0673 10.7693 18.8176 10.6287C18.568 10.4882 18.2864 10.4144 18 10.4144C17.7135 10.4144 17.4319 10.4882 17.1823 10.6287C16.9327 10.7693 16.7235 10.9717 16.575 11.2167V11.2167Z",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M18 22.1667H18.0083",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M18 15.5V18.8333",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,t.jsx)("rect",{height:"35",rx:"17.5",stroke:i?"#FEF3C7":"#411D06",width:"35",x:"0.5",y:"0.5"}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_798_8667",children:(0,t.jsx)("rect",{fill:"white",height:"20",transform:"translate(8 8)",width:"20"})})})]})}function _(){let{resolvedTheme:e}=(0,h.useTheme)(),i=(0,m.default)(),n=i?"#D00505":"#FCA5A5";return(0,t.jsxs)("svg",{fill:"none",height:"36",opacity:+!!e,viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:i?"#FEF2F2":"#2A0909",height:"35",rx:"17.5",width:"35",x:"0.5",y:"0.5"}),(0,t.jsx)("path",{d:"M23.8333 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V23.8333C10.5 24.7538 11.2462 25.5 12.1667 25.5H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V12.1667C25.5 11.2462 24.7538 10.5 23.8333 10.5Z",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M15.5 15.5L20.5 20.5",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M20.5 15.5L15.5 20.5",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("rect",{height:"35",rx:"17.5",stroke:i?"#FEE2E2":"#450C0C",width:"35",x:"0.5",y:"0.5"})]})}function v(){let{resolvedTheme:e}=(0,h.useTheme)(),i=(0,m.default)(),n=i?"#666666":"#888888";return(0,t.jsxs)("svg",{fill:"none",height:"36",opacity:+!!e,viewBox:"0 0 36 36",width:"36",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:i?"#FAFAFA":"#111111",height:"35",rx:"17.5",width:"35",x:"0.5",y:"0.5"}),(0,t.jsxs)("g",{clipPath:"url(#clip0_1415_8585)",children:[(0,t.jsx)("path",{d:"M18 26.3333C22.6024 26.3333 26.3334 22.6024 26.3334 18C26.3334 13.3976 22.6024 9.66666 18 9.66666C13.3976 9.66666 9.66669 13.3976 9.66669 18C9.66669 22.6024 13.3976 26.3333 18 26.3333Z",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M18 21.3333V18",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M18 14.6667H18.0083",stroke:n,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]}),(0,t.jsx)("rect",{height:"35",rx:"17.5",stroke:i?"#EAEAEA":"#333333",width:"35",x:"0.5",y:"0.5"}),(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip0_1415_8585",children:(0,t.jsx)("rect",{fill:"white",height:"20",transform:"translate(8 8)",width:"20"})})})]})}var j=e.i(7055501);function b(e){return!!e&&e.startsWith("team_")}var g=e.i(4531652),p=e.i(2385909),w=e.i(3878908),k=e.i(5867762),C=e.i(7575940),y=e.i(1785218),N=e.i(5610210),A=e.i(5535439),M=e.i(5049863),L=e.i(6937468),S=e.i(664635),I=e.i(104622),E=e.i(2198583),T=e.i(5809700);let W=(e,t)=>t.ts<e.ts||!["stable","shown"].includes(t.type)?e:{...e,[t.type]:t.value,ts:t.ts},F={ts:0,stable:0,shown:0},P=[.1,.3,.5,.6,.8,1].map(function(e){return 1-Math.pow(1-e,3)});var H=e.i(7328212);let O=(0,i.forwardRef)(function(e,l){let{unseen:a,disabled:o,disableMotion:r,children:d,onOpenChange:u,...h}=e,m=(0,A.usePathname)(),f=(0,i.useContext)(s.NotificationContext),x=!!f?.hasOpened,{focusProps:_,isFocusVisible:v}=(0,k.useFocusRing)(),{hoverProps:j,isHovered:b}=(0,C.useHover)({isDisabled:o}),g=(0,y.useObjectRef)(l),{isPressed:O}=(0,w.useButton)(h,g),B=(0,c.useIsMobile)(),G=function(e,t){let n=(0,T.usePrefersReducedMotion)(),s=!(t.disableMotion||n),[{stable:l,shown:a},o]=(0,i.useReducer)(W,F);(0,i.useEffect)(()=>{if(s&&(!(l<a)||t.animateDown)){let e=l===a?[]:P.map((e,t)=>{let i=Math.round(a+(l-a)*e);if(i!==l||t===P.length-1)return setTimeout(()=>requestAnimationFrame(()=>o({value:i,type:"shown",ts:Date.now()})),50+100*t)});return()=>{for(let t of e)t&&clearTimeout(t)}}o({value:l,type:"shown",ts:Date.now()})},[l,s]);let r=(0,i.useCallback)(e=>o({type:"stable",ts:Date.now(),value:e}),[o]),d=(0,E.useDebouncedValue)(e,100);return(0,i.useEffect)(()=>{r(Number(d))},[d,r]),a}(a,{disableMotion:r}),D=(0,N.clsx)(H.default.btn,{[H.default.focus]:v,[H.default.hover]:b,[H.default.pressed]:O||x,[H.default.shadow]:!B});return(0,i.useEffect)(()=>{f?.setHasOpened(!1)},[m]),(0,t.jsxs)("div",{children:[f?.hasOpened?(0,t.jsx)("div",{"aria-hidden":!0}):null,(0,t.jsxs)(p.Root,{"aria-label":"Notifications","data-testid":(0,n.tid)("notifications","popover"),onOpenChange:e=>{(0,I.awaitPaint)().then(()=>{f?.setHasOpened(e),u(e)})},open:x,children:[(0,t.jsx)(p.Trigger,{"aria-label":a?`${a} unseen ${(0,L.pluralize)("notification",a)}`:"notifications",...(0,y.mergeProps)(_,j,h),className:D,"data-testid":(0,n.tid)("notifications","bell"),ref:g,children:(0,t.jsxs)("span",{className:H.default.buttonContent,children:[(0,t.jsx)("div",{className:H.default.icon,children:(0,t.jsx)(M.Bell,{className:H.default.svgNoPointerEvents,color:"gray-1000",size:16})}),G>0?(0,t.jsx)(S.Status,{className:H.default.statusIcon,color:"blue-900"}):null]})}),(0,t.jsx)(p.Portal,{children:(0,t.jsx)(p.Content,{align:"end",alignOffset:-10,"aria-label":a?`${a} unseen ${(0,L.pluralize)("notification",a)}`:"notifications",className:H.default.content,sideOffset:10,children:d})})]})]})});var B=e.i(3374765),G=e.i(7744666),D=e.i(6498840),z=e.i(5495572),R=e.i(5910358),X=e.i(1009688),V=e.i(889716),J=e.i(8084653),U=e.i(5674541),$=e.i(1098821),q=e.i(3921802),Z=e.i(1550899),K=e.i(503726),Y=e.i(2362802),Q=e.i(2052446),ee=e.i(2043778),et=e.i(4524590),ei=e.i(7349104),en=e.i(4812959),es=e.i(6822639),el=e.i(2941133),ea=e.i(5014665);function eo(e){let{children:i}=e;return(0,t.jsx)(q.Badge,{className:ea.default.tabBadge,size:"sm",variant:"gray-subtle",children:i})}function er(e){var o,r,d,u,h,m,f,x,_;let{tab:v,setTab:j,settingsLink:b,currentTabEmpty:g,onArchiveAll:p,onScrollEnd:w,children:k,commentsUnread:C=0,commentsIsLoading:y=!1,inboxUnread:A=0,hasNextThread:M,hasPreviousThread:L,clearSelectedThread:S,selectNextThread:I,selectPreviousThread:E,commentsIsStale:T,viewFreshComments:W}=e,{account:F,isLoading:P}=(0,K.useAccount)(),H=(0,Q.usePreferences)(),[O,G]=(0,i.useState)(!1),D=(0,c.useIsMobile)(),z=(0,i.useContext)(s.NotificationContext),R=(o={debounce:40,offset:7},d=(r=(0,i.useMemo)(function(){var e,t,i,n;return{offset:null!=(e=null==o?void 0:o.offset)?e:0,debounce:null!=(t=null==o?void 0:o.debounce)?t:200,debounceOptions:null!=(i=null==o?void 0:o.debounceOptions)?i:{leading:!0},triggerOnNoScroll:null!=(n=null==o?void 0:o.triggerOnNoScroll)&&n}},[null==o?void 0:o.offset,null==o?void 0:o.debounce,null==o?void 0:o.debounceOptions,null==o?void 0:o.triggerOnNoScroll])).offset,u=r.triggerOnNoScroll,h=r.debounce,m=r.debounceOptions,f=(0,i.useMemo)(function(){return h?(0,B.default)(w,h,m):w},[h,w]),x=(0,i.useRef)(null),_=(0,i.useCallback)(function(){if(null!=x.current){var e=x.current,t=Math.round(e.scrollTop+e.clientHeight);Math.round(e.scrollHeight-d)<=t&&f()}else{var i=document.scrollingElement||document.documentElement,n=Math.round(i.scrollTop+window.innerHeight);Math.round(i.scrollHeight-d)<=n&&f()}},[d,w,x.current]),(0,i.useEffect)(function(){var e=x.current;return null!=e?e.addEventListener("scroll",_):window.addEventListener("scroll",_),u&&_(),function(){null!=e?e.removeEventListener("scroll",_):window.removeEventListener("scroll",_)}},[_,h]),x),{filterValues:X,hasSelectedFilters:J}=(0,l.useCommentFilters)(),q=J(),Y=X.q[0];(0,i.useEffect)(()=>{let e=H.isChannelEnabled("in_app_feed");e||O?e&&O&&G(!1):G(!0)},[H,O]);let er=(0,ee.useCommentsViewEnabled)("enable-comments-notifications-view"),em=(0,i.useMemo)(()=>[{title:(0,t.jsxs)(eh,{children:["Inbox ",A>0?(0,t.jsx)(eo,{children:A}):null]}),value:"inbox"},{title:(0,t.jsx)(eh,{children:"Archive"}),value:"archived"}],[A]),ef=(0,i.useMemo)(()=>er?[...em,{title:(0,t.jsxs)(eh,{children:["Comments"," ",C>0?(0,t.jsx)(eo,{children:C}):null]}),value:"comments"}]:em,[er,em,C]),ex=(0,i.useMemo)(()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)($.Tabs,{border:!1,"data-testid":(0,n.tid)("notifications","tabs"),selected:v,setSelected:j,tabs:ef}),(0,t.jsx)(eu,{...b,onClick:()=>{z?.setHasOpened(!1)}})]}),[z,j,b,v,ef]),e_=null;if(O&&"inbox"===v)e_=(0,t.jsx)(ec,{onEnable:()=>{H.setChannel({channel:"in_app_feed",enabled:!0})}});else if(g){let e;"comments"===v&&!y&&(Y?e=`No comments found for "${Y}".`:q?e="No comments found with the selected filters.":P||F?.enablePreviewFeedback!=="off"||(e="Enable comments on your Preview Deployments to view them here.")),e_=(0,t.jsx)(ed,{label:e,tab:v})}let{thread:ev}=(0,a.useSelectedComment)(),ej=(0,t.jsxs)("div",{className:ea.default.feed,"data-tab":v,children:[(0,t.jsx)("div",{className:ea.default.headerGrid,children:ev?(0,t.jsx)(en.CommentDetailHeader,{clearSelectedThread:S,flex:1,forceShowBackButton:!0,hasNext:M,hasPrevious:L,selectNextThread:I,selectPreviousThread:E,showContextMenu:!1,showLinearLink:!1,showPreviewLink:!1,thread:ev}):ex}),(0,t.jsxs)("div",{className:ea.default.feedContent,"data-empty":e_?"":null,ref:R,children:[ev?k:(0,t.jsxs)(V.Stack,{children:["comments"===v?(0,t.jsxs)(V.Stack,{gap:2,paddingTop:4,className:g?"absolute inset-x-0 top-0":void 0,children:[(0,t.jsxs)(V.Stack,{direction:"row",gap:3,paddingX:4,children:[(0,t.jsx)(es.CommentsSearch,{loading:y,size:"small"}),(0,t.jsx)(et.FilterMenu,{buttonSize:"small"})]}),(0,t.jsx)(ei.ClearFilters,{buttonSize:"small",paddingX:4})]}):null,(0,t.jsx)("ol",{className:(0,N.clsx)(ea.default.view,{[ea.default.commentsView]:"comments"===v}),"data-empty":e_?"":null,"data-tab":v,children:e_||k})]}),"comments"===v&&T?(0,t.jsx)(el.CommentsStaleButton,{onClick:W}):null]}),"inbox"===v&&!e_&&(0,t.jsx)("div",{className:ea.default.archiveFooter,children:(0,t.jsx)(U.Button,{"data-testid":(0,n.tid)("notifications","archive-all"),onClick:()=>p(),size:"small",type:"tertiary",children:"Archive All"})})]});return D?(0,t.jsx)(Z.Drawer,{onDismiss:()=>{z?.setHasOpened(!1)},show:z?.hasOpened,children:ej}):ej}function ed(e){let{tab:i,label:s}=e,l="No new notifications";"archived"===i?l="Nothing in the archive":"comments"===i&&(l="No new comments");let a=(0,t.jsx)(G.Inbox,{"aria-label":"Empty inbox",color:"gray-700",size:20});return"archived"===i?a=(0,t.jsx)(X.Archive,{"aria-label":"Empty archive",color:"gray-700",size:20}):"comments"===i&&(a=(0,t.jsx)(R.Message,{"aria-label":"Empty inbox",color:"gray-700",size:20})),(0,t.jsx)(V.Stack,{align:"center",as:"li","data-testid":(0,n.tid)("notifications","inbox-zero"),justify:"center",children:(0,t.jsxs)(V.Stack,{align:"center",direction:"column",gap:3,children:[(0,t.jsx)("div",{className:ea.default.emptyIcon,children:a}),(0,t.jsx)(J.Text,{align:"center",className:ea.default.emptyLabel,color:"gray-900",size:14,weight:400,children:s??l})]})})}function ec(e){let{onEnable:i}=e;return(0,t.jsx)(V.Stack,{align:"center",as:"li","data-testid":(0,n.tid)("notifications","inbox-zero"),justify:"center",children:(0,t.jsxs)(V.Stack,{align:"center",direction:"column",gap:5,children:[(0,t.jsx)("div",{className:ea.default.emptyIcon,children:(0,t.jsx)(D.BellOff,{color:"gray-700",size:20})}),(0,t.jsx)(J.Text,{color:"gray-900",size:14,weight:400,children:"You currently have notifications turned off"}),(0,t.jsx)(U.Button,{"data-testid":(0,n.tid)("notifications","turn-on"),onClick:i,size:"small",children:"Turn on notifications"})]})})}function eu(e){let{as:i,href:s,onClick:l}=e,{focusProps:a,isFocused:o,isFocusVisible:r}=(0,k.useFocusRing)(),{hoverProps:d,isHovered:c}=(0,C.useHover)({});return(0,t.jsx)(Y.Link,{"aria-label":"Settings",as:i,className:ea.default.settingsLink,"data-focus-visible":r?"":null,"data-hover":c?"":null,"data-testid":(0,n.tid)("notifications","settings"),href:s,onClick:l,...a,...d,children:(0,t.jsx)("span",{"aria-hidden":!0,style:{height:16},children:(0,t.jsx)(z.SettingsGear,{color:c||o?"gray-1000":"gray-700"})})})}function eh(e){let{children:i}=e;return(0,t.jsx)(J.Text,{className:ea.default.tabText,color:"inherit",size:14,children:i})}var em=e.i(2774739),ef=e.i(1258670);function ex(e){let{isMobile:s,notification:l,archiveNotification:a,readNotification:o}=e,[r,d]=(0,i.useState)(!1),{isHovered:c,hoverProps:u}=(0,C.useHover)({}),{isHovered:h,hoverProps:m}=(0,C.useHover)({}),{isFocusVisible:f,focusProps:x}=(0,k.useFocusRing)({within:!0}),_=c||r||s,{id:v,mainAvatar:j,subAvatar:b,actionUrl:g,ts:p,markup:w,isArchived:y,isSeen:A,workflow:M}=l,L=(0,t.jsxs)(V.Stack,{as:"li",className:(0,N.clsx)(ef.default.item,{[ef.default.focusVisible]:f}),"data-testid":(0,n.tid)("notifications","item",v),direction:"row",gap:4,justify:"space-between",...u,...x,children:[(0,t.jsxs)("span",{className:ef.default.subject,children:[(0,t.jsx)("span",{children:j}),b?(0,t.jsx)("span",{className:ef.default.subAvatar,children:b}):null]}),(0,t.jsxs)(V.Stack,{direction:"column",style:{flex:1},children:[w,(0,t.jsx)(e_,{ts:p})]}),(0,t.jsxs)("div",{"aria-hidden":y?"true":void 0,className:(0,N.clsx)({[ef.default.hidden]:y}),style:{position:"relative",width:32},children:[(0,t.jsx)(V.Stack,{align:"center",className:(0,N.clsx)(ef.default.dot,{[ef.default.hidden]:A}),justify:"center",style:{left:_?-24:0},children:(0,t.jsx)("div",{"aria-label":"Not seen yet",role:"note"})}),(0,t.jsx)("div",{className:ef.default.archive,style:{opacity:_||f?1:0},...m,children:(0,t.jsx)(U.Button,{"aria-label":"Archive",className:ef.default.archiveButton,onBlur:()=>d(!1),onFocus:()=>d(!0),passthroughOnClick:e=>{e.preventDefault(),a(M)},shape:"circle",style:{width:32,height:32},svgOnly:!0,title:"Archive",type:"tertiary",children:(0,t.jsx)(X.Archive,{"aria-hidden":"true",color:h||f?"gray-1000":"gray-700"})})})]})]});return g?(0,t.jsx)(Y.Link,{"aria-roledescription":`${y?"Archived":A?"Previously seen":"Unseen"} Notification`,className:ef.default.link,"data-inbox":!y,"data-uid":v,href:g,onClick:()=>{o(M)},children:L}):L}function e_(e){let{ts:i}=e,n=(0,em.useAgo)(i);return(0,t.jsxs)(J.Text,{color:"gray-900",size:14,title:new Date(i).toLocaleString(),weight:400,children:[(0,t.jsx)("span",{className:"geist-sr-only",children:", Created "}),n]})}e.i(7848711);var ev=e.i(4749698),ej=e.i(8800395),eb=e.i(8573383);function eg(e){let{thread:i}=e,{selectThread:n,thread:s}=(0,a.useSelectedComment)(),l=(0,ej.useUpdateComment)(),{team:o}=(0,d.useTeam)();return(0,t.jsx)("li",{children:(0,t.jsx)("button",{className:(0,N.clsx)(eb.default.commentWrapper,{[eb.default.selected]:s?.id===i.id}),onClick:()=>{n(i),i.read||l({threadId:i.id,roomId:i.roomId,read:!0,teamId:o?.id})},type:"button",children:(0,t.jsx)(ev.CommentsListItem,{padding:4,showMetadata:!1,thread:i})})})}var ep=e.i(3514640),ew=e.i(2326875);function ek(e){let{activeFeed:n,inbox:s,comments:l,tab:h,setTab:m,hasOpened:p,setHasOpened:w,settingsLink:k}=e,{team:C}=(0,d.useTeam)(),y=(0,c.useIsMobile)(),N=(0,ew.useIsImpersonating)(),[A,M]=(0,i.useState)({}),L=(0,i.useCallback)(()=>{M(Object.fromEntries(n.items.map(e=>[e.id,function(e,i,n){var s;let l=function(e){let t=[],i=e.actors,n=e.data?.icon;return n&&t.push({level:"primary",icon:n}),e.actors.length&&null!==i[0]&&t.push({level:"primary",id:i[0].id,avatar:i[0].avatar}),e.data?.focus&&!t.find(e=>"primary"===e.level)&&t.push({level:"primary",id:e.data.focus.id,avatar:e.data.focus.avatar}),t}(e),a=e.blocks.find(e=>"body"===e.name),o=e.blocks.find(e=>"action_url"===e.name),r=o?.rendered??"";try{let e=new URL(r);e.searchParams.set("utm_medium","web"),e.searchParams.set("utm_source","notifications"),r=e.href}catch(e){}return{id:e.id,workflow:e.source.key,mainAvatar:function(e,i){let n=e.find(e=>"primary"===e.level);if(!n)return i?(0,t.jsx)(u.Avatar,{hash:i.avatar,size:36,teamId:i.id}):null;let{id:s,icon:l,avatar:a}=n;if(l){switch(l){case"alert":return(0,t.jsx)(_,{});case"warn":return(0,t.jsx)(x,{});case"success":return(0,t.jsx)(f,{});case"info":return(0,t.jsx)(v,{})}return}return b(s)?(0,t.jsx)(u.Avatar,{hash:a,size:36,teamId:s}):(0,t.jsx)(u.Avatar,{hash:a,size:36,uid:s})}(l,n),subAvatar:function(e,i){let n=e.find(e=>"secondary"===e.level);if(!n||i.hasIcon)return null;let{id:s,avatar:l}=n;return b(s)?(0,t.jsx)(u.Avatar,{hash:l,size:20,teamId:s}):(0,t.jsx)(u.Avatar,{hash:l,size:20,uid:s})}(l,{hasIcon:!!e.data?.icon}),icon:e.data?.icon,isSeen:!!e.seen_at,isArchived:!!e.archived_at,markup:a?(0,t.jsx)("div",{className:i,dangerouslySetInnerHTML:{__html:(s=a.rendered,j.default.sanitize(s))}}):(0,t.jsx)("div",{className:i}),ts:new Date(e.inserted_at).getTime(),actionUrl:r}}(e,ef.default.notificationContent,C)])))},[n.items,C]);(0,i.useEffect)(()=>{p&&L()},[p,n.items]);let S=(0,i.useMemo)(()=>l.threads.map(e=>(0,t.jsx)(eg,{thread:e},e.id)),[l.threads]),{thread:I,clearSelectedThread:E,selectThread:T}=(0,a.useSelectedComment)(),W=(0,i.useCallback)(e=>{if(0===s.items.length?m("comments"):m("inbox"),e){var t;w(!0),o.analytics.track(r.AnalyticsEvent.NOTIFICATIONS_SHOWN,{shownCount:s.unseen,isCountShown:s.unseen>0,shownGroup:0===(t=s.unseen)?"g0":t<=+Number(16)?"g1":t<=2*Number(16)?"g2":t<=3*Number(16)?"g3":t<=4*Number(16)?"g4":"gx"})}else E(),N||s.markAllSeen()},[E,N,m,s,w]),F=(0,i.useCallback)(()=>{N||s.markAllArchived()},[s,N]),P=(0,i.useMemo)(()=>"comments"===h?l.isEmpty:0===n.items.length,[h,n.items,l.isEmpty]),H=(0,i.useCallback)(()=>{if(!I)return;let e=l.threads.findIndex(e=>e.id===I.id);-1!==e&&e!==l.threads.length-1&&T(l.threads[e+1])},[l.threads,T,I]),B=(0,i.useCallback)(()=>{if(!I)return;let e=l.threads.findIndex(e=>e.id===I.id);-1!==e&&0!==e&&T(l.threads[e-1])},[l.threads,T,I]),G=(0,i.useMemo)(()=>{if(!I)return!1;let e=l.threads.findIndex(e=>e.id===I.id);return -1!==e&&e!==l.threads.length-1},[l.threads,I]),D=(0,i.useMemo)(()=>{if(!I)return!1;let e=l.threads.findIndex(e=>e.id===I.id);return -1!==e&&0!==e},[l.threads,I]);return(0,t.jsx)(O,{onOpenChange:W,unseen:s.unseen+l.unreadCount,children:(0,t.jsx)(Q.PreferencesProvider,{defaultLoaded:!0,children:(0,t.jsx)(er,{clearSelectedThread:E,commentsIsLoading:l.isLoading,commentsIsStale:l.isStale,commentsUnread:l.unreadCount,currentTabEmpty:P,hasNextThread:G,hasPreviousThread:D,inboxUnread:s.unseen,onArchiveAll:F,onScrollEnd:n.fetchNextPage,selectNextThread:H,selectPreviousThread:B,setTab:m,settingsLink:k,tab:h,viewFreshComments:l.viewFreshData,children:"comments"===h?(0,t.jsx)(t.Fragment,{children:I?(0,t.jsx)(g.Comments,{className:ep.default.commentsDetailView,source:"dashboard-notifications-center",thread:I}):S}):n.items.map(e=>A[e.id]?(0,t.jsx)(eC,{archiveItem:s.archiveItem,impersonationMode:N,isMobile:y,item:e,presentation:A[e.id],readItem:s.readItem},`${h}-${e.id}`):null)})})})}function eC(e){let{item:n,presentation:s,readItem:l,archiveItem:a,isMobile:o,impersonationMode:r}=e,d=(0,i.useCallback)(e=>{r||a(n,e)},[a,r,n]),c=(0,i.useCallback)(e=>{r||l(n,e)},[r,l,n]);return(0,t.jsx)(ex,{archiveNotification:d,isMobile:o,notification:s,readNotification:c})}var ey=e.i(961072);function eN(e){let{children:i}=e,n=(0,s.useNotificationsVisibility)();return"full"!==n.state?i:(0,t.jsx)(l.CommentFilterContextProvider,{type:"modal",children:(0,t.jsx)(a.SelectedCommentContextProvider,{children:(0,t.jsx)(eA,{tenant:n.tenant,children:i})})})}function eA(e){let{children:i,tenant:n}=e,l=(0,s.useNotifications)({tenant:n});return(0,t.jsx)(s.NotificationContext.Provider,{value:l,children:i})}function eM(){let e=(0,s.useNotificationsVisibility)(),n=(0,i.useContext)(s.NotificationContext);return e.isLoading?(0,t.jsx)(ey.PlaceholderBell,{visibility:e.state}):null===e.state?null:n?(0,t.jsx)(ek,{...n}):(0,t.jsx)(ey.PlaceholderBell,{visibility:e.state})}function eL(){return(0,t.jsx)(eN,{children:(0,t.jsx)(eM,{})})}(0,n.markLoadedForTest)("notifications")},993661:e=>{e.n(e.i(4255365))}}]);

//# sourceMappingURL=a0c9b1ade36960da.js.map
//# debugId=94b6e88c-5f59-52b8-9070-010c763f85dd
