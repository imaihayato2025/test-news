
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="abfc49ce-804a-52e9-ac16-d33e753b455c")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{1629961:e=>{"use strict";e.s({useProjectBranches:()=>l});var t=e.i(3521787),r=e.i(6649026),n=e.i(1183506),a=e.i(9336536),i=e.i(3514588);function l(e,l){let{team:s}=(0,i.useTeam)(),o=s?.id;return(0,t.default)(e?`${a.API_INTEGRATION_CONTROLLER}/git-branches${(0,r.encode)({projectId:e,teamId:o})}`:"",e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),l)}},2530419:e=>{"use strict";e.s({default:()=>r});var t=e.i(6645307);let r=function(e){return(0,t.jsx)("form",{...e,onKeyDown:e=>{if("Enter"===e.key&&e.metaKey){let t=e.target;t.form&&t.form.dispatchEvent(new Event("submit",{cancelable:!0,bubbles:!0}))}},onSubmit:t=>{t.preventDefault(),e.onSubmit?.(t)}})}},5002066:e=>{"use strict";e.s({useFileContent:()=>n});var t=e.i(3521787);let r=async e=>{let t=await fetch(e,{mode:"cors"});if(!t.ok)return{error:"Failed to load content."};if(t.url.includes("/v7/deployments/")){let{data:e}=await t.json(),r=atob(e),n=r.length,a=new Uint8Array(n);for(let e=0;e<n;e++)a[e]=r.charCodeAt(e);return new TextDecoder().decode(a)}return t.text()};function n(e,n){return(0,t.default)(()=>{if(!e||!e.link||"lambda"===e.type||"middleware"===e.type)return"";let t=new URL(e.link,location.href);if("vercel.com"===t.hostname){n&&t.searchParams.set("teamId",n);let e=t.searchParams.toString();return`${t.pathname}${e?"?":""}${e}`}return e.link},r,{keepPreviousData:!0,revalidateOnFocus:!1})}},5179557:e=>{"use strict";e.s({useInterval:()=>r});var t=e.i(6530772);let r=(e,r,n)=>{let a=(0,t.useRef)(e);(0,t.useEffect)(()=>{a.current=e},[e]),(0,t.useEffect)(()=>{if(null===r)return;n&&a.current();let e=new AbortController;return function(e,t,r){let n="number"==typeof document.timeline?.currentTime?document.timeline.currentTime:performance.now();function a(t){r.aborted||(e(),i(t))}function i(e){let r=Math.round((e-n)/t)*t;setTimeout(()=>requestAnimationFrame(a),n+r+t-performance.now())}i(n)}(()=>a.current(),r,e.signal),()=>e.abort()},[n,r])}},3138389:e=>{"use strict";e.s({GitBranch:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.75 1.75V1H3.25V1.75V9.09451C1.95608 9.42754 1 10.6021 1 12C1 13.6569 2.34315 15 4 15C5.42051 15 6.61042 14.0127 6.921 12.6869C8.37102 12.4872 9.7262 11.8197 10.773 10.773C11.8197 9.7262 12.4872 8.37102 12.6869 6.921C14.0127 6.61042 15 5.42051 15 4C15 2.34315 13.6569 1 12 1C10.3431 1 9 2.34315 9 4C9 5.37069 9.91924 6.52667 11.1749 6.8851C10.9929 7.94904 10.4857 8.9389 9.71231 9.71231C8.9389 10.4857 7.94904 10.9929 6.8851 11.1749C6.59439 10.1565 5.77903 9.35937 4.75 9.09451V1.75ZM13.5 4C13.5 4.82843 12.8284 5.5 12 5.5C11.1716 5.5 10.5 4.82843 10.5 4C10.5 3.17157 11.1716 2.5 12 2.5C12.8284 2.5 13.5 3.17157 13.5 4ZM4 13.5C4.82843 13.5 5.5 12.8284 5.5 12C5.5 11.1716 4.82843 10.5 4 10.5C3.17157 10.5 2.5 11.1716 2.5 12C2.5 12.8284 3.17157 13.5 4 13.5Z" fill="currentColor"/>')},6700141:e=>{"use strict";e.s({useAllAccountTypeBadgesFlag:()=>h,useEmailNotificationRulesFlag:()=>L,useEnableAnsiLogs:()=>F,useEnableNewInstantRollbackFlow:()=>m,useEnhancedBuilds:()=>T,useFeedbackVariantsDeployStep:()=>b,useInstantRollbackHobbyRestrictionFlag:()=>E,useIsOemPartner:()=>g,useJWTAccessTokenFlag:()=>k,useLaunchDarklyFeatureFlag:()=>v,useLaunchDarklyFlags:()=>d,useLoginWithVercelTeamFlag:()=>R,useLoginWithVercelUserFlag:()=>A,useManualGitDeployFlag:()=>j,useMonitoringExitSurveyFlag:()=>f,useNetCpuFunctionsFlag:()=>V,useNewFeedbackSharingModal:()=>S,useOpenTelemetryApiScopeFlag:()=>p,useRestrictLogDrainsForHobbyFlag:()=>C,useShowCronJobsSummary:()=>x,useStorageEnterpriseFlag:()=>y,useTrustedIpsCustomLimitFlag:()=>w,useVercelAppsFlag:()=>I});var t=e.i(6530772);e.i(6611132);var r=e.i(6558958),n=e.i(1782286),a=e.i(9902218),i=e.i(5454140),l=e.i(3514588),s=e.i(3326412);let o="vercel:ldFlags",u=(0,r.default)(()=>{let e=a.localStorageWrapper.getItem(o);if(e)return JSON.parse(e)}),c=(0,n.default)(e=>{a.localStorageWrapper.setItem(o,JSON.stringify(e))},1e3),d=()=>{let{flags:e,isLoading:r,mutate:n,isLoggedOut:l}=(0,i.useUser)(),s=(0,t.useMemo)(()=>e??u(),[e]);return(0,t.useEffect)(()=>{e&&(c(e),u.cache.set(void 0,e))},[e]),(0,t.useEffect)(()=>{l&&(a.localStorageWrapper.removeItem(o),u.cache.clear?.(),c.cancel())},[l]),{flags:s,isReady:!r&&void 0!==s,mutate:n}},v=e=>{let{flags:t,isReady:r,mutate:n}=d();return{isReady:r,value:t?.[e]??null,mutate:()=>n().then(t=>({isReady:r,value:t?.flags?.[e]??null}))}},m=()=>v("new-instant-rollback-flow"),h=()=>v("show-all-account-type-badges"),g=()=>v("is-oem-partner"),p=()=>v("open-telemetry-api-scope"),f=()=>v("monitoring-exit-survey"),E=()=>v("instant-rollback-hobby-restriction"),y=e=>{let t=(0,s.useLaunchDarklyTeamFeatureFlag)("storage-enterprise",e),r=t.value?.split(",").map(e=>e.trim()).filter(Boolean)||[];return{isReady:t.isReady,isStorageEnterpriseEnabled:e=>{let{storeType:n,isUnbundled:a,isTrialing:i}=e;return"edge-config"===n||"integration"===n||!!a||!!i||t.isReady&&r.includes(n)}}},S=()=>(0,s.useLaunchDarklyTeamFeatureFlag)("feedback-sharing-modal"),b=()=>{let{isReady:e,value:t}=(0,s.useLaunchDarklyTeamFeatureFlag)("feedback-variants-deploy-step"),{isReady:r,value:n}=v("feedback-variants-deploy-step");return(e&&t||r&&n)??!1},x=()=>{let{isReady:e,value:t}=(0,s.useLaunchDarklyTeamFeatureFlag)("cron-jobs-deploy-summary"),{isReady:r,value:n}=v("cron-jobs-deploy-summary");return(e&&t||r&&n)??!1},T=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("route-to-pdx1-jelly"),t=!!e.isReady,r=!!e.value;return{readyValue:t&&r,isReady:t,value:r}},j=()=>{let e=(0,l.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("manual-git-deploys"),r=v("manual-git-deploys");return{isReady:e.isTeam?t.isReady:r.isReady,value:!!(e.isTeam?t.value:r.value)}},F=()=>{let e=(0,l.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("ansi-logs"),r=v("ansi-logs");return{isReady:e.isTeam?t.isReady:r.isReady,value:!!(e.isTeam?t.value:r.value)}},C=()=>{let e=(0,l.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("restrict-log-drains-for-hobby"),r=v("restrict-log-drains-for-hobby");return{isReady:e.isTeam?t.isReady:r.isReady,value:!!(e.isTeam?t.value:r.value)}},R=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("login-with-vercel");return{isReady:e.isReady,value:!!e.value}},A=()=>{let e=v("login-with-vercel");return{isReady:e.isReady,value:!!e.value}},L=()=>{let{isReady:e,value:t}=v("email-notification-rules");return{isReady:e,value:!!t}},w=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("trusted-i-ps-custom-limit");return{isReady:e.isReady,value:e.value}},k=()=>{let e=v("jwt-access-tokens");return{isReady:e.isReady,value:!!e.value}},I=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("vercel-apps");return{isReady:e.isReady,value:!!e.value}},V=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("net-cpu-functions");return{isReady:e.isReady,value:!!e.value}}},587741:e=>{"use strict";e.s({default:()=>u,pathFromDeployment:()=>o,useDeploymentLink:()=>c});var t=e.i(6645307),r=e.i(5535439),n=e.i(5454140),a=e.i(3514588),i=e.i(2362802),l=e.i(8025298),s=e.i(5168763);function o(e){let{user:t,team:r,project:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";let{project:a,idWithoutPrefix:i}=(0,l.default)(e),s=r?.slug||"team"in e&&e?.team?.slug||t?.username||t?.uid||e.creator?.username||e.creator?.uid||null;return`/${encodeURIComponent(s)}/${encodeURIComponent(n?.name??a)}/${i}`}let u=e=>{let{deployment:r,host:n,alias:a,title:l,children:s}=e,o=c(r),u=function(e){return e?`/deployment/redirect?host=${e}`:""}(n);return(0,t.jsx)(i.Link,{className:"font-medium text-foreground no-underline hover:underline",href:o||u,prefetch:!!o,title:l,children:a||s||n||r?.host||r?.url})},c=(e,t)=>{let{user:i}=(0,n.useUser)(),{team:l}=(0,a.useTeam)(),{teamSlug:u,project:c=t}=(0,r.useParams)()??{},d=e&&"id"in e?e.id:e?.uid,v=d?.replace("dpl_","");return u&&c?(0,s.getDashboardHref)(`/${c}/${v}`,u):o(e,{user:i,team:l})}},5299128:e=>{"use strict";e.s({Code:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M4.21969 12.5303L4.75002 13.0607L5.81068 12L5.28035 11.4697L1.81068 7.99999L5.28035 4.53032L5.81068 3.99999L4.75002 2.93933L4.21969 3.46966L0.39647 7.29289C0.00594562 7.68341 0.00594562 8.31658 0.39647 8.7071L4.21969 12.5303ZM11.7804 12.5303L11.25 13.0607L10.1894 12L10.7197 11.4697L14.1894 7.99999L10.7197 4.53032L10.1894 3.99999L11.25 2.93933L11.7804 3.46966L15.6036 7.29289C15.9941 7.68341 15.9941 8.31658 15.6036 8.7071L11.7804 12.5303Z" fill="currentColor"/>')},3003613:e=>{"use strict";function t(e,t){return new Intl.ListFormat("en",t).format(e)}e.s({toListSentence:()=>t})},2902869:e=>{var{m:t,e:r}=e,n=e.r(2301680),a=0;t.exports=function(e){var t=++a;return n(e)+t}},8847335:e=>{"use strict";e.s({parseEnv:()=>r});let t=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function r(e){let r,n={},a=e.toString();for(a=a.replace(/\r\n?/gm,"\n");null!=(r=t.exec(a));){let e=r[1],t=r[2]||"",a=(t=t.trim())[0];t=t.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===a&&(t=(t=t.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")),n[e]=t}return n}},8653422:e=>{"use strict";e.s({getBooleanValueFromOnOffDefault:()=>o,useSensitiveEnvironmentVariablePolicy:()=>s});var t=e.i(6530772),r=e.i(7315479),n=e.i(584439),a=e.i(1183506),i=e.i(9336536),l=e.i(3514588);function s(){let{team:e,isReady:s,isLoading:o,mutate:u}=(0,l.useTeam)(),c=(0,n.useToasts)(),[d,v]=(0,t.useState)(!1),[m,h]=(0,t.useState)(null),g=e?.sensitiveEnvironmentVariablePolicy||"default",[p,f]=(0,t.useState)(g),E=!o&&p!==g;(0,t.useEffect)(()=>{o||f(g)},[o]);let y=async()=>{v(!0),h(null);try{if(!e)throw Error("Team not found");await (0,a.fetchAPI)(`${i.API_TEAMS}/${e.id}`,{method:"PATCH",body:{sensitiveEnvironmentVariablePolicy:p},throwOnHTTPError:!0}),u(),c.success("Updated Environment Variable Policy setting successfully.")}catch(e){h((0,r.normalizeError)(e))}v(!1)};return{state:g,team:e,error:m,saving:d,isTeamReady:s,isLoading:o,handleSave:y,hasChangedSensitiveEnvVarPolicy:E,sensitiveEnvVarPolicySetting:p,setSensitiveEnvVarPolicySetting:f}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(e){case"on":return!0;case"off":return!1;default:return t}}},844630:e=>{"use strict";e.s({getUseSharedEnvsSWRKey:()=>d,useSharedEnvVarsInfinite:()=>u,useTeamSharedEnvs:()=>c});var t=e.i(3521787),r=e.i(7095283),n=e.i(6530772),a=e.i(6649026),i=e.i(1183506),l=e.i(9336536),s=e.i(3585235),o=e.i(5785123);function u(e){let{teamId:s,projectId:o,ids:u,excludeIds:c,excludeProjectId:d}=e,{limit:v=8,search:m,revalidateFirstPage:h=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},p=arguments.length>3&&void 0!==arguments[3]&&arguments[3],f=arguments.length>4&&void 0!==arguments[4]&&arguments[4],E=(0,r.default)((e,t)=>{if(!e)return`${l.API_SHARED_ENV_VARIABLES}${(0,a.encode)({limit:v,search:m,teamId:s,projectId:o,ids:u,exclude:{ids:c??null,projectId:d??null}})}`;if(t&&t.length>=v){let e=t[t.length-1];return`${l.API_SHARED_ENV_VARIABLES}${(0,a.encode)({until:e.updatedAt||e.createdAt-1,limit:v,search:m,teamId:s,projectId:o,ids:u,exclude:{ids:c??null,projectId:d??null}})}`}return null},async e=>(await (0,i.fetchAPI)(e,{throwOnHTTPError:!0})).data,{...g,keepPreviousData:f,revalidateFirstPage:h,persistSize:!0}),y=!!E.data,S=y&&E.data[E.data.length-1]?.length<v,b=(0,n.useMemo)(()=>E.data?E.data.flat():[],[E.data]),x=y&&0===b.length,T=y&&E.size>E.data.length;return(0,t.default)(()=>{if(!p||!E.data||S)return null;let e=E.data[E.data.length-1];return`${l.API_SHARED_ENV_VARIABLES}${(0,a.encode)({until:(e[e.length-1].updatedAt??e[e.length-1].createdAt)-1,limit:v,search:m,teamId:s,projectId:o,ids:u,exclude:{ids:c??null,projectId:d??null}})}`},e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0})),[E,{envVars:b,initialDataLoaded:y,isEmpty:x,loadMore:()=>E.setSize(e=>e+1),isLoadingMore:T,isReachingEnd:S,isValidating:E.isValidating}]}function c(e,r,n,a){let{can:l,isLoading:u}=(0,s.default)(r?{projectIdOrName:r}:void 0),c=l(o.Action.List,o.Resource.ProjectEnvVars),v=e&&!u&&c;return(0,t.default)(()=>v?d({teamId:e,ids:n,projectId:r}):"",async e=>{let{data:t}=await (0,i.fetchAPI)(e,{throwOnHTTPError:!0});return{envs:t}},a)}function d(e){let{teamId:t,projectId:r,ids:n}=e;return`${l.API_SHARED_ENV_VARIABLES}/all${(0,a.encode)({teamId:t,projectId:r,ids:n})}`}},9683194:e=>{e.v({optionBranch:"env-variables-filter-module__XqclKW__optionBranch"})},1530082:[e=>{"use strict";e.s({TEVTable:()=>R},1530082);var t=e.i(6645307),r=e.i(6530772),n=e.i(7320579),a=e.i(7315479),i=e.i(889716),l=e.i(584439),s=e.i(5333425),o=e.i(3585235),u=e.i(5785123),c=e.i(5124991);e.s({EnvVariablesFilter:()=>x},2561345);var d=e.i(6921100),v=e.i(3621043),m=e.i(5163670),h=e.i(8084653),g=e.i(1164214),p=e.i(3509620),f=e.i(2075095),E=e.i(3138389),y=e.i(3713927),S=e.i(3156464),b=e.i(9683194);function x(e){let{envs:r,search:n,setSearch:a,envOrBranchFilter:l,setEnvOrBranchFilter:o,sortTarget:u,setSortTarget:c,disabled:x,disableEnvironmentSelector:T,isLoading:j,project:F}=e,C=Array.from(new Set((r||[]).map(e=>e.gitBranch??null).filter(Boolean))).sort((e,t)=>e.localeCompare(t)),{isLoading:R,data:{environments:A}}=(0,S.useAllEnvironments)(F);return(0,t.jsxs)(i.Stack,{direction:{sm:"column",md:"row",lg:"row"},gap:2,children:[(0,t.jsx)(i.Stack,{flex:"50%",children:(0,t.jsx)(f.default,{"data-testid":(0,g.tid)("env-variables-filter","search-input"),disabled:x,maxLength:256,onChange:e=>a(e.target.value),placeholder:"Search...",value:n,width:"100%"})}),o?(0,t.jsx)(i.Stack,{flex:"25%",children:(0,t.jsxs)(v.Combobox,{clearable:!1,"data-testid":(0,g.tid)("env-variables-filter","select"),disabled:x||T,noInputPrefix:!0,onChange:e=>o(e||s.allEnvironmentsFilter),value:l,children:[(0,t.jsx)(m.Skeleton,{show:!!(R||j),children:(0,t.jsx)(v.Combobox.Input,{})}),(0,t.jsx)(v.Combobox.List,{maxWidth:450,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Combobox.Option,{value:s.allEnvironmentsFilter,children:"All Environments"}),void 0===F&&(0,t.jsx)(v.Combobox.Option,{value:s.allCustomEnvironmentsFilter,children:"All Custom Environments"}),(0,t.jsx)(v.Combobox.Option,{value:(0,s.mapToEnvFilter)(p.EnvTarget.Production),children:"Production"}),(0,t.jsx)(v.Combobox.Option,{value:(0,s.mapToEnvFilter)(p.EnvTarget.Development),children:"Development"}),(0,t.jsx)(v.Combobox.Option,{value:(0,s.mapToEnvFilter)(p.EnvTarget.Preview),children:"Preview"}),A.filter(e=>(0,s.isCustomEnvId)(e.id)).sort((e,t)=>e.slug.localeCompare(t.slug)).map(e=>(0,t.jsx)(v.Combobox.Option,{className:b.default.optionBranch,value:e.id,children:e.slug},e.id)),C.map(e=>(0,t.jsx)(v.Combobox.Option,{prefix:(0,t.jsx)(E.GitBranch,{}),value:e,children:(0,t.jsx)(h.Text,{as:"span",className:b.default.optionBranch,monospace:!0,children:e})},e))]})})]})}):null,(0,t.jsx)(i.Stack,{flex:"25%",style:{maxWidth:184},children:(0,t.jsxs)(d.Select,{disabled:x,onChange:e=>c(e.target.value),placeholder:"Sort by…",prefix:(0,t.jsx)(y.SortDescending,{}),value:u,children:[(0,t.jsx)("option",{value:"createdAt",children:"Last Updated"}),(0,t.jsx)("option",{value:"key",children:"Name"}),(0,t.jsx)("option",{value:"type",children:"Type"})]})})]})}function T(e,t){return Array.isArray(e)?e.includes(t):e===t}function j(e){let{envsInput:t,search:n,envOrBranchFilter:a,sortTarget:i}=e,l=(0,r.useMemo)(()=>{if(!t)return[];let e=n?t.filter(e=>e.key.toLowerCase().includes(n.toLowerCase())):t;if((0,s.isEnvFilter)(a)){if(a===s.allEnvironmentsFilter)return e;if(a===s.allCustomEnvironmentsFilter)return e.filter(e=>!!e.applyToAllCustomEnvironments);if(a===(0,s.mapToEnvFilter)(p.EnvTarget.Production))return e.filter(e=>T(e.target,p.EnvTarget.Production));if(a===(0,s.mapToEnvFilter)(p.EnvTarget.Development))return e.filter(e=>T(e.target,p.EnvTarget.Development));if(a===(0,s.mapToEnvFilter)(p.EnvTarget.Preview))return e.filter(e=>T(e.target,p.EnvTarget.Preview));if((0,s.isCustomEnvId)(a))return e.filter(e=>e.applyToAllCustomEnvironments||e.customEnvironmentIds?.includes(a))}return e.filter(e=>e.gitBranch===a)},[t,n,a]);return(0,r.useMemo)(()=>i&&"contentHint"!==i?"createdAt"===i?l.sort((e,t)=>(t.updatedAt??t.createdAt)-(e.updatedAt??e.createdAt)):l.sort((e,t)=>(e[i]?.toString()??"").localeCompare(t[i]?.toString()??"")):l,[l,i])}e.s({useFilteredEnvs:()=>j},2835891);var F=e.i(385827),C=e.i(745124);function R(e){let{teamId:d,project:v,withFilters:m=!0,sharedEnvs:h,projectEnvs:g,mutateSharedEnvVarData:p,isLoading:f,SWRCacheKey:E,envOrBranchFilter:y,sortTarget:S,setEnvOrBranchFilter:b,setSortTarget:T,search:R,setSearch:A,currentEditingEnv:L,setCurrentEditingEnv:w}=e,k=(0,l.useToasts)(),{cache:I}=(0,n.useSWRConfig)(),[V,P]=(0,r.useState)(""),[D,O]=(0,r.useState)(y??s.allEnvironmentsFilter),[N,B]=(0,r.useState)("createdAt");!m&&(R&&A&&(V=R,P=A),y&&b&&(D=y,O=b),S&&T&&(N=S,B=T));let $=v?.id,{can:M,isLoading:_}=(0,o.default)($?{projectIdOrName:$}:void 0),H=M(u.Action.Read,$?u.Resource.ProjectEnvVars:u.Resource.SharedEnvVars),U=M(u.Action.Read,$?u.Resource.ProjectEnvVarsProduction:u.Resource.SharedEnvVarsProduction),W=M(u.Action.Delete,u.Resource.SharedEnvVarConnection),z=(0,c.useRemoveEnvModal)(void 0,p),{decryptEnvVar:K}=(0,C.useDecryptEnvVar)(E,p,{teamId:d,projectId:$}),J=H||U,Z=j({envsInput:h,search:V,envOrBranchFilter:D,sortTarget:N}),G=(0,r.useCallback)(async(e,t)=>{try{await (0,F.removeProjectFromSharedEnvVar)({envVar:e,projectId:t,teamId:d}),p(),k.success("Successfully unlinked Shared Environment Variable")}catch(e){k.error((0,a.normalizeError)(e).message)}},[p,d,k]),q=(0,r.useCallback)(e=>g?g.filter(t=>t.key===e.key).reduce((t,r)=>((Array.isArray(r.target)?r.target:[r.target]).forEach(r=>{e.target.includes(r)&&t.push(r)}),t),[]):[],[g]);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Stack,{gap:4,children:[m?(0,t.jsx)(x,{disabled:!1,envOrBranchFilter:D,envs:h,project:$,search:V,setEnvOrBranchFilter:O,setSearch:P,setSortTarget:B,sortTarget:N}):null,(0,t.jsx)(c.default,{canReadProductionValues:U,canUnlinkSharedEnvVariable:W,currentEditingEnv:L,disabled:f||_||!J,envVariables:Z,getOverriddenTargetsForSharedEnvVar:q,isLoading:f||_,onRemove:e=>{if(void 0!==$)return void G(e,$);z.open(e)},onSave:e=>{let t=I.get(E)?.data;if(t.envs.length>0){let r=[...t.envs],n=r.findIndex(t=>t.id===e.id),a={...r[n],...e,decrypted:!1};r[n]=a,p({envs:r},!1),K(a)}},onViewEnvironmentVariable:K,projectId:$,search:V,setCurrentEditingEnv:w,teamId:d,textConfig:{emptyState:{title:$?"No Shared Environment Variables are linked to this app.":"No Shared Environment Variables are set.",description:$?`Shared Environment Variables are set at the ${d?"Team":"Account"} level
              and are inherited by this Project.`:"Shared Environment Variables are set at the Team level."}},withEnvs:!0,withSecrets:!1})]}),z.modal]})}},[2561345,2835891]],3906657:e=>{"use strict";e.s({EnvironmentVariablesTable:()=>$},3906657);var t=e.i(6645307),r=e.i(8811733),n=e.i(889716),a=e.i(8084653),i=e.i(7320579),l=e.i(5535439),s=e.i(6530772),o=e.i(5333425),u=e.i(3514588),c=e.i(3585235),d=e.i(5785123),v=e.i(2561345),m=e.i(5124991),h=e.i(5610210),g=e.i(7315479),p=e.i(1917237),f=e.i(8934201),E=e.i(584439),y=e.i(555528),S=e.i(2254575),b=e.i(1621730),x=e.i(3003613),T=e.i(6778284),j=e.i(6649026),F=e.i(1183506),C=e.i(9336536);async function R(e){let{envVar:t,environment:r,projectId:n,teamId:a}=e;return n&&a?(0,F.fetchAPI)(`${(0,C.API_PROJECTS_VERSION)("v1")}/${n}/env/${t.id}/detach${(0,j.encode)({teamId:a})}`,{method:"POST",throwOnHTTPError:!0,body:JSON.stringify({environmentId:r.id})}):null}var A=e.i(9675010),L=e.i(4506396),w=e.i(1259791);function k(e){let{envVar:r,environmentNames:i}=e;return(0,t.jsx)(S.Entity,{left:r?(0,t.jsx)(n.Stack,{align:"center",justify:"center",style:{width:24,height:24},children:(0,t.jsx)(L.default,{env:r})}):null,children:(0,t.jsxs)(n.Stack,{direction:"column",gap:.5,justify:"center",children:[(0,t.jsx)(a.Text,{color:"gray-1000",size:14,weight:400,children:r?.key}),(0,t.jsx)(a.Text,{color:"gray-900",size:14,children:(0,t.jsx)(y.Tooltip,{center:!1,text:i.join(",\n"),children:(0,x.toListSentence)(i)})})]})})}var I=e.i(8955572),V=e.i(1207628),P=e.i(2240289),D=e.i(745124),O=e.i(1530082),N=e.i(844630),B=e.i(2835891);function $(e){let{search:y,setSearch:S,isEnvironmentLoading:x,environment:j,sortTarget:F,setSortTarget:C,shouldDisableEnvRow:L}=e,{project:$}=(0,l.useParams)()??{project:""},{cache:M}=(0,i.useSWRConfig)(),[_,H]=(0,s.useState)(null),{data:U,isLoading:W,mutate:z}=(0,I.default)($,{refreshInterval:e=>(0,o.isCustomEnvId)(ee)?(e?.envs.length||0)>0?0:2e3:0,revalidateOnFocus:!_}),{data:K}=(0,P.useProject)($),J=K?.id,Z=(0,m.useRemoveEnvModal)(J,z),G=function(e,i,l){let[c,d]=(0,s.useState)(!1),[v,m]=(0,s.useState)(null),[y,S]=(0,s.useState)(!1),[x,j]=(0,s.useState)(null),F=(0,E.useToasts)(),{team:C}=(0,u.useTeam)(),L=(0,s.useCallback)(e=>{j(e),d(!0)},[]),I=(0,s.useCallback)(()=>{d(!1)},[]),V=(0,s.useCallback)(()=>{S(!1),m(null),j(null)},[]),P=(0,s.useCallback)(async()=>{if(x&&l){S(!0);try{await R({envVar:x,projectId:e,teamId:C?.id,environment:l}),await i(),I(),F.success("Detached Environment Variable successfully.")}catch(e){m((0,g.normalizeError)(e))}finally{S(!1)}}},[x,e,C?.id,l,I,F,i]),D=[];x?.customEnvironmentIds&&D.push(...x.customEnvironmentIds),x?.target&&((0,b.default)(x.target)?D.push(...x.target):D.push(x.target)),x?.applyToAllCustomEnvironments&&D.push(A.INCLUDE_ALL_CUSTOM_ENVIRONMENTS_ID);let O=new Set(D),N=new Set(D.filter(e=>e!==l?.id)),{environmentNamesList:B}=(0,A.useCustomEnvironmentsPrettyLabel)({selectedEnvironmentIds:O}),{environmentNamesList:$}=(0,A.useCustomEnvironmentsPrettyLabel)({selectedEnvironmentIds:N}),M=(0,h.clsx)(w.default.section,"overflow-hidden rounded border border-solid border-gray-alpha-400");return{modal:(0,s.useMemo)(()=>(0,t.jsxs)(f.Modal.Modal,{active:c,onAnimationDone:V,onClickOutside:I,children:[(0,t.jsxs)(f.Modal.Body,{children:[(0,t.jsx)(f.Modal.Header,{children:(0,t.jsx)(f.Modal.Title,{children:"Detach Environment Variable"})}),(0,t.jsxs)(n.Stack,{gap:6,children:[(0,t.jsx)(n.Stack,{gap:1,children:(0,t.jsxs)(a.Text,{children:["Detaching the ",(0,t.jsx)("code",{children:x?.key})," environment variable will create a copy for the"," ",l?(0,o.envName)(l):"current"," environment only, and remove"," ",l?(0,o.envName)(l):"current"," from the original variable."]})}),(0,t.jsxs)(n.Stack,{children:[(0,t.jsxs)(n.Stack,{gap:1,children:[(0,t.jsx)(a.Text,{weight:500,children:"Before"}),(0,t.jsx)("div",{className:M,children:(0,t.jsx)(k,{envVar:x,environmentNames:B})})]}),(0,t.jsx)(n.Stack,{align:"center",paddingTop:3,children:(0,t.jsx)(T.ArrowDown,{color:"gray-900",size:20})}),(0,t.jsxs)(n.Stack,{gap:1,children:[(0,t.jsx)(n.Stack,{align:"center",direction:"row",gap:1,children:(0,t.jsx)(a.Text,{weight:500,children:"After"})}),(0,t.jsxs)("div",{className:M,children:[(0,t.jsx)(k,{envVar:x,environmentNames:$}),(0,t.jsx)(k,{envVar:x,environmentNames:[l?(0,o.envName)(l):""]})]})]})]})]}),v?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Spacer,{y:1}),(0,t.jsx)(p.Error,{error:v})]}):null]}),(0,t.jsxs)(f.Modal.Actions,{children:[(0,t.jsx)(f.Modal.Action,{onClick:I,type:"secondary",children:"Cancel"}),(0,t.jsx)(f.Modal.Action,{loading:y,onClick:P,children:"Detach"})]})]}),[c,V,I,M,l,x,$,B,v,y,P]),open:L,close:I}}(J,z,j),{data:q,mutate:X}=(0,V.useSecrets)(),{can:Q,isLoading:Y}=(0,c.default)(),[ee,et]=(0,s.useState)(o.allEnvironmentsFilter);(0,s.useEffect)(()=>{j&&et((0,o.mapToEnvFilter)(j.id))},[j]);let er=Q(d.Action.Read,d.Resource.ProjectEnvVars),en=Q(d.Action.Read,d.Resource.ProjectEnvVarsProduction),ea=Q(d.Action.Read,d.Resource.Secrets),ei=er||en||ea,{team:el}=(0,u.useTeam)(),{decryptEnvVar:es}=(0,D.useDecryptEnvVar)((0,I.getUseProjectEnvsSWRKey)($,el?.id),z,{projectName:$,teamId:el?.id}),eo=(0,B.useFilteredEnvs)({envsInput:U?.envs,search:y,envOrBranchFilter:ee,sortTarget:F}),eu=(0,N.getUseSharedEnvsSWRKey)({teamId:el?.id??"",projectId:J}),{data:ec,isLoading:ed,mutate:ev}=(0,N.useTeamSharedEnvs)(el?.id??"",J);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.EnvVariablesFilter,{disableEnvironmentSelector:!!j,disabled:!1,envOrBranchFilter:ee,envs:U?.envs,isLoading:x,project:K?.id,search:y,setEnvOrBranchFilter:et,setSearch:S,setSortTarget:C,sortTarget:F}),(0,t.jsx)(r.Spacer,{y:.7}),(0,t.jsx)(m.default,{canReadProductionValues:en,currentEditingEnv:_,disabled:Y||!ei,envVariables:eo,environment:j,isLoading:W||Y,onDetach:e=>G.open(e),onRemove:e=>Z.open(e),onSave:e=>{if(null===el)return;let t=(0,I.getUseProjectEnvsSWRKey)($,el.id),r=M.get(t)?.data;if(r.envs.length>0){let t={...e,decrypted:!1},n=[...r.envs],a=n.findIndex(t=>t.id===e.id);n[a]=t,z({envs:n},!1),es(t)}},onSecretAdd:()=>{X()},onViewEnvironmentVariable:es,search:y,secretsData:q,setCurrentEditingEnv:H,shouldDisableEnvRow:L,withEnvs:er,withSecrets:ea}),Z.modal,G.modal,el?.id!==void 0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Spacer,{y:1.5}),(0,t.jsxs)(n.Stack,{gap:4,children:[(0,t.jsx)(n.Stack,{align:"center",direction:"row",gap:2,children:(0,t.jsx)(a.Text,{as:"h2",lineHeight:24,size:20,children:"Shared Environment Variables"})}),(0,t.jsx)(O.TEVTable,{SWRCacheKey:eu,currentEditingEnv:_,envOrBranchFilter:ee,isLoading:ed,mutateSharedEnvVarData:ev,project:K,projectEnvs:eo,search:y,setCurrentEditingEnv:H,setEnvOrBranchFilter:et,setSearch:S,setSortTarget:C,sharedEnvs:ec?.envs??[],sortTarget:F,teamId:el.id,withFilters:!1})]})]}):null]})}}}]);

//# sourceMappingURL=90dd3257f5268f6d.js.map
//# debugId=abfc49ce-804a-52e9-ac16-d33e753b455c
