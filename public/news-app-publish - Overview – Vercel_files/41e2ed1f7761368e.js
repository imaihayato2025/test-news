
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="fe864445-3197-5f0b-889d-d6ae5d7d8348")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{324186:e=>{"use strict";e.s({MultiSwitcherPopup:()=>eY,ScopeLink:()=>eH},324186);var t=e.i(6645307),r=e.i(2385909),a=e.i(6530772),i=e.i(5535439),s=e.i(5610210),n=e.i(4652282),l=e.i(1209519),o=e.i(2824080),c=e.i(2934175),u=e.i(889716),d=e.i(8084653),m=e.i(5674541),p=e.i(5175803),h=e.i(1550899),f=e.i(9443759),g=e.i(1164214),x=e.i(7573892),j=e.i(9802771),v=e.i(6285410),y=e.i(3514588),S=e.i(5454140),w=e.i(4418725),C=e.i(604868),b=e.i(2362802),T=e.i(226017),P=e.i(1312661),k=e.i(854226),N=e.i(2781454),A=e.i(6911358);e.i(8893248);var I=e.i(7936324),R=e.i(628938),F=e.i(8781774),E=e.i(2722014),L=function(e){return e.PROJECTS="scope-search-projects",e.TEAMS="scope-search-teams",e}({}),O=e.i(20377),$=e.i(8347675),M=e.i(4589373),D=e.i(5165976),_=e.i(5973311),B=e.i(8727559),U=e.i(3621960);function V(e){let{team:r,fallbackToPlan:a=!1}=e,{user:i}=(0,S.useUser)();if(!r)return null;if((0,_.isAuthenticationRequired)(r)||r.mfa?.enforced&&!i?.mfa?.enabled)return(0,t.jsx)(D.LockClosed,{className:"ml-auto",color:"gray-700"});if(r.billing?.plan&&!["pro","hobby","enterprise"].includes(r.billing.plan))return(0,t.jsx)(B.DefaultBadge,{variant:"red-subtle",children:"Legacy"});let s=(0,U.getProPlanTeamScopeBadge)(r);return void 0!==s?s:r.billing?.status==="overdue"?(0,t.jsx)(B.DefaultBadge,{variant:"red-subtle",children:"Overdue"}):r.softBlock?(0,t.jsx)(B.DefaultBadge,{variant:"red-subtle",children:"Paused"}):a?(0,t.jsx)(B.PlanBadge,{team:r,user:i}):null}var q=e.i(9948746),z=e.i(5163670),K=e.i(2452546),G=e.i(6700141);let W="👥",H="📁",Y=RegExp("/~/(deployments|observability|storage|ai|settings)(?:/|$)");var J=e.i(8532192),Q=e.i(2128084),X=e.i(2240289),Z=e.i(5520481),ee=e.i(7294200),et=e.i(9766694);function er(e){let{team:r,isCurrent:n,closeSwitcher:l}=e,[o,c]=(0,a.useState)(!1),[u,d]=(0,a.useState)({x:100,translateY:0}),m=(0,i.useRouter)(),h=function(e){let{user:t,team:r}=e;return{name:r?.name||t?.name||r?.slug||t?.username,slug:r?.slug||t?.username,avatar:r?.avatar||t?.avatar}}({team:r}),f=(0,i.usePathname)(),g=(0,i.useParams)()||{},x=(0,i.useSearchParams)()??new URLSearchParams(""),{value:j}=(0,G.useAllAccountTypeBadgesFlag)(),v=(0,a.useContext)(ee.CloneContext),y=e=>{if(h.slug&&((0,K.setScope)(h.slug),f)){let t=(0,J.getScopeHref)({pathname:f,pathParams:g,searchParams:x,team:r});e?window.open(t,"_self","noopener"):m.push(t)}},S=h.slug&&f?(0,J.getScopeHref)({pathname:f,pathParams:g,searchParams:x,team:r}):void 0;return(0,t.jsx)(I.Command.Item,{href:S,callback:e=>{if(h.slug){if((e.metaKey||e.ctrlKey)&&"preventDefault"in e){e.preventDefault(),S&&window.open(S,"_blank","noopener,noreferrer");return}if(l(),f){if(v)return void v.openModalSwitchConfirm({callback:()=>y(!0)});y(!1)}}},className:(0,s.clsx)(et.default.teamItem,{[et.default.hover]:o}),"data-current":n,onMouseMove:e=>{if(o){let{top:t,height:r,bottom:a}=e.currentTarget.getBoundingClientRect(),i=(e.clientY-t)/r*100,s=e.currentTarget.closest("[data-command-list-wrapper]");if(!s)return;let n=s.getBoundingClientRect(),l=0;n.bottom-a<250&&(l=250-(n.bottom-a+r/2)),i>=5&&i<=95?d({x:e.clientX-n.left,translateY:l}):(i>100||i<0)&&setTimeout(()=>{c(!1)},500)}},onMouseOut:()=>{c(!1)},onMouseOver:()=>{c(!0)},style:{"--protection-x":`${u.x}px`,"--protection-translate-y":`${-u.translateY}px`},value:[h.name,h.slug],children:(0,t.jsxs)(ea,{active:n,children:[(0,t.jsx)(p.Avatar,{hash:h.avatar,size:22,teamId:r?.id}),(0,t.jsx)("span",{className:(0,s.clsx)(et.default.name,"geist-ellipsis",{[et.default.showAllBadges]:j}),children:h.name}),(0,t.jsx)(V,{fallbackToPlan:!!j,team:r})]})})}function ea(e){let{children:r,active:a}=e;return(0,t.jsxs)(u.Stack,{align:"center",className:et.default.itemWrapper,direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsx)(u.Stack,{align:"center",className:et.default.itemWrapper,direction:"row",flex:"1",gap:2,children:r}),a?(0,t.jsx)(q.Check,{className:"ml-2",color:"gray-900"}):null]})}function ei(e){let{projectId:r,teamSlug:a,...i}=e,{data:s,isLoading:n}=(0,X.useProject)(r,{config:{onError:()=>!0},fetchOptions:{throwOnScopeAuthError:!0}},a),{team:l}=(0,y.useTeam)(a);return n?(0,t.jsx)(eo,{}):(0,_.isAuthenticationRequired)(l)?(0,t.jsx)(es,{isCurrent:i.isCurrent,projectId:r,slug:a}):s?(0,t.jsx)(en,{...i,project:s,scopeSlug:a}):null}function es(e){let{isCurrent:r,projectId:a,slug:s}=e,n=(0,i.useRouter)();return(0,t.jsx)(I.Command.Item,{callback:()=>{(0,_.requireAuthentication)({slug:s,push:e=>{n.push(e)}})},"data-current":r,value:["unauthed-project",a,s],children:(0,t.jsxs)(u.Stack,{align:"center",className:et.default.itemWrapper,direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsxs)(u.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("div",{className:et.default.protectedProject}),(0,t.jsx)(d.Text,{children:"Protected Project"})]}),(0,t.jsx)(D.LockClosed,{color:"gray-700"})]})})}function en(e){let{project:r,scopeSlug:a,isCurrent:s,contentRight:n,closeSwitcher:l}=e,o=(0,i.usePathname)(),c=(0,i.useParams)(),u=r.name&&a&&o?(e=>{let{srcPathname:t,srcPathParams:r,srcSearchParamsStr:a,destScopeSlug:i,destProjectName:s}=e,n=`/${i}/${s}`,l=r?.teamSlug,o=r?.project,c=r?.id;if(l&&o&&i&&t.includes(o))n=t.replace(l,W).replace(o,H).replace(W,i).replace(H,s);else l&&!o&&i&&Y.test(t)&&(n=t.replace("/~/",`/${s}/`),i!==l&&(n=n.replace(`/${l}/`,`/${i}/`)));return null!=c&&(n=function(e,t){let r=e.indexOf(`/${t}`);return -1===r?e:e.substring(0,r)}(n,c)),a&&(n+=a),n})({srcPathname:o,srcPathParams:c,srcSearchParamsStr:window.location.search,destScopeSlug:a,destProjectName:r.name}):`/team/${a}/project/${r.name||r.id}`;return(0,t.jsx)(I.Command.Item,{href:u,callback:e=>{if(r.name){if((e.metaKey||e.ctrlKey)&&"preventDefault"in e){e.preventDefault(),window.open(u,"_blank","noopener,noreferrer");return}l()}},"data-current":s,value:[r.name,r.id,a],children:(0,t.jsx)(ec,{contentRight:n,isCurrent:s,name:r.name,children:(0,t.jsx)(Z.FaviconOrFramework,{project:r,size:16,style:{position:"relative"},teamId:a})})})}function el(e){let{repo:r,scopeSlug:a,isCurrent:s,contentRight:n,closeSwitcher:l,isTeam:o}=e,c=((0,i.useSearchParams)()||"").toString(),u=o?`/${a}/~/repos/${r.slug}${"repo"===r.type?"/repo-overview":""}?${c}`:`/dashboard/repos/${r.slug}${"repo"===r.type?"/repo-overview":""}?${c}`;return(0,t.jsx)(I.Command.Item,{href:u,callback:e=>{if(r.id){if((e.metaKey||e.ctrlKey)&&"preventDefault"in e){e.preventDefault(),window.open(u,"_blank","noopener,noreferrer");return}l()}},"data-current":s,value:[r.name,r.id,a],children:(0,t.jsx)(ec,{contentRight:n,isCurrent:s,name:r.name,children:(0,t.jsx)(Q.RepositoryAvatar,{gitProvider:"github"})})})}function eo(e){let{index:r=0}=e;return(0,t.jsx)(I.Command.Item,{style:{display:"flex",background:"transparent"},children:(0,t.jsxs)(u.Stack,{align:"center",direction:"row",flex:"0 1 100%",gap:3,children:[(0,t.jsx)(z.Skeleton,{height:16,rounded:!0,width:16}),(0,t.jsx)(z.Skeleton,{height:20,style:{margin:"2px 0",flex:.7+(r%2?.2:0)}})]})})}function ec(e){let{children:r,name:a,isCurrent:i,contentRight:n}=e;return(0,t.jsxs)(u.Stack,{align:"center",className:et.default.itemWrapper,direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsxs)(u.Stack,{align:"center",className:et.default.itemWrapper,direction:"row",flex:"1",gap:3,children:[(0,t.jsx)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:r}),(0,t.jsx)("span",{className:(0,s.clsx)(et.default.name,"geist-ellipsis"),children:a})]}),(0,t.jsx)("div",{className:et.default["hover-content"],children:n}),i?(0,t.jsx)(q.Check,{className:"ml-2",color:"gray-900"}):null]})}function eu(e){let{fav:t,activeSlug:r,...i}=e;return(0,a.createElement)(ei,{...i,isCurrent:t.projectId===r,key:t.projectId,projectId:t.projectId})}let ed="create_team_button";var em=e.i(3921802),ep=e.i(5819787),eh=e.i(1243142),ef=e.i(437915),eg=e.i(8488604),ex=e.i(2413800),ej=e.i(7688839),ev=e.i(3979315),ey=e.i(2726686),eS=e.i(2769324),ew=e.i(3431702),eC=e.i(5652027),eb=e.i(8202548),eT=e.i(8298192),eP=e.i(8232065),ek=e.i(4651050);function eN(e){let{primary:r,activeSection:a,setActiveSection:s,commandProps:{setInputValue:n,inputValue:l,...o},selectedScope:c,closeSwitcher:u}=e,{addFavorite:d,removeFavorite:m,favorites:p,isFavorite:h}=(0,eT.useFavoriteProjectsAndSpaces)(),{projects:f,microfrontendGroups:g,repositories:x,canViewRepositories:j,isLoading:v,teamId:w}=(e=>{let{selectedScope:t,inputValue:r}=e,{user:a}=(0,S.useUser)(),{teams:s}=(0,y.useTeam)(),n=eV((0,i.useParams)()),l=eB(t,s,a),o=(0,_.isAuthenticationRequired)(l),c=s?.find(e=>e.slug===t)?.id,{data:u,isLoading:d}=(0,eP.useFeatureFlag)("enable-code-checks"),{data:m={repositories:[]},isLoading:p}=(0,eb.useMinimizedRepositories)({teamId:u?c:void 0}),h=[],f=m.repositories??[];u&&(h=f.map(e=>({...e,type:"repo"})).filter(e=>{let{name:t}=e;return t.toLowerCase().includes(r.toLowerCase())}).sort((e,t)=>e.name.localeCompare(t.name)).slice(0,9));let{data:g,isLoading:x}=(0,eP.useFeatureFlag)("enable-microfrontends-support"),{data:j,isLoading:v}=(0,ek.useMicrofrontendsGroups)({enabled:!!g,overWriteTeamSlug:t}),w=(j??{groups:[]}).groups.filter(e=>e.projects.some(e=>e.name===n)),{data:C,isLoading:b}=(0,ew.default)({fetchEnabled:!o,limit:10,latestDeployments:0,search:r},{onError:()=>!0,revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1},t,{throwOnScopeAuthError:!0}),T=(C?.projects??[]).filter(e=>w.every(t=>t.projects.every(t=>t.id!==e.id)));r||T.sort((e,t)=>e.name.localeCompare(t.name));return{projects:T,microfrontendGroups:w,repositories:h,canViewRepositories:!!u,isLoading:!!d||!!p||!!x||!!v||!!b,teamId:c??null}})({inputValue:l,selectedScope:c});return c?(0,t.jsx)(eS.AnimatePresence,{initial:!1,mode:"popLayout",presenceAffectsLayout:!0,children:(0,t.jsx)(eA,{activeSection:a,primary:r,setActiveSection:s,style:et.default,children:(0,t.jsxs)(I.Command,{"aria-label":"Projects and Repositories",inputValue:l,setInputValue:n,...o,children:[(0,t.jsx)(e_,{canViewRepositories:j,setActiveSection:s}),(0,t.jsxs)(I.Command.List,{className:et.default.list,disableDynamicHeight:!0,maxHeight:730,emptyMessage:(0,t.jsx)(eI,{canViewRepositories:j,inputValue:l,isLoading:v,projects:f,repositories:x,setInputValue:n}),children:[(0,t.jsx)(eR,{closeSwitcher:u,favorites:p,isLoading:v,removeFavorite:m,selectedScope:c}),(0,t.jsx)(eF,{addFavorite:d,closeSwitcher:u,isFavorite:h,isLoading:v,microfrontendGroups:g,removeFavorite:m,selectedScope:c,teamId:w}),(0,t.jsx)(eE,{canViewRepositories:j,closeSwitcher:u,inputValue:l,isLoading:v,repositories:x,selectedScope:c}),(0,t.jsx)(eL,{addFavorite:d,closeSwitcher:u,inputValue:l,isFavorite:h,isLoading:v,projects:f,removeFavorite:m,selectedScope:c}),(0,t.jsx)(eO,{closeSwitcher:u,selectedScope:c})]})]})})}):null}function eA(e){let{activeSection:r,children:a,primary:i,setActiveSection:n,style:l}=e;return(0,t.jsx)(ey.m.div,{animate:{opacity:1},className:(0,s.clsx)(l.command,{[l.focused]:"projects"===r,[l.primary]:i}),"data-testid":(0,g.tid)("project-switcher","dropdown"),exit:{opacity:0},initial:{opacity:1},onMouseEnter:()=>n("projects"),onMouseLeave:e=>{let t=document.querySelector("[data-radix-popper-content-wrapper]");e.relatedTarget instanceof Node&&t?.contains(e.relatedTarget)&&n("teams")},children:a})}function eI(e){let{canViewRepositories:r,inputValue:a,isLoading:i,projects:s,repositories:n,setInputValue:l}=e;if(i||""===a||s.length>0||n.length>0)return null;let o=`Projects${r?" or Repositories":""}`;return(0,t.jsxs)(u.Stack,{align:"start",gap:4,justify:"start",children:[(0,t.jsxs)(d.Text,{align:"left",weight:500,children:["No ",o," Found"]}),(0,t.jsxs)(d.Text,{align:"left",color:"gray-900",children:['Your search for "',a,'" did not match any ',o,"."]}),(0,t.jsx)(m.Button,{onClick:()=>{l("")},size:"small",type:"secondary",width:"100%",children:"Clear Search"})]},"searchNotFound")}function eR(e){let{closeSwitcher:r,favorites:s,isLoading:n,removeFavorite:l,selectedScope:o}=e,{teams:c}=(0,y.useTeam)(),u=eV((0,i.useParams)());return n||null===c||0===s.length?null:(0,t.jsxs)(a.Fragment,{children:[(0,t.jsx)(I.Command.Group,{"data-order":"1",heading:"Favorites",children:s.map(e=>{let a=c.find(t=>t.id===e.teamId);return a?(0,t.jsx)(eu,{activeSlug:u,closeSwitcher:r,contentRight:(0,t.jsx)("button",{"aria-label":"Remove from favorites",className:et.default["fav-button"],onPointerUp:t=>{t.preventDefault(),t.stopPropagation(),l(e)},type:"button",children:(0,t.jsx)(ev.Cross,{})}),fav:e,isCurrent:!1,scopeSlug:o,teamId:e.teamId,teamSlug:a.slug},(0,eT.serializeFavorite)(e)):null})}),(0,t.jsx)(I.Command.Separator,{})]},"favorites")}function eF(e){let{addFavorite:r,closeSwitcher:a,isFavorite:s,isLoading:n,microfrontendGroups:l,removeFavorite:o,selectedScope:c,teamId:u}=e,d=(0,i.useParams)(),{user:m,isLoading:p}=(0,S.useUser)();if(n||p)return null;let h=eV(d);return(0,t.jsx)(t.Fragment,{children:l.map(e=>{let i=e.group.name?e.group.name:e.group.slug;return(0,t.jsx)(I.Command.Group,{"data-order":"2",heading:i,children:e.projects.map(e=>(0,t.jsx)(en,{closeSwitcher:a,contentRight:u?(0,t.jsx)(eM,{addFavorite:r,isFavorited:s({projectId:e.id,teamId:u}),project:e,removeFavorite:o,selectedScope:c,teamId:u,limited:!!m?.limited}):null,isCurrent:e.name===h,project:e,scopeSlug:c},`scope-project-${e.id}`))},i)})})}function eE(e){let{closeSwitcher:r,repositories:a,inputValue:s,isLoading:n,selectedScope:l,canViewRepositories:o}=e,c=eV((0,i.useParams)());if(!o)return null;let u={"data-order":"3",heading:"Repositories"};return n?(0,t.jsx)(I.Command.Group,{...u,children:[,,,,,].fill(0).map((e,r)=>(0,t.jsx)(eo,{index:r},(0,eC.getUnsafeKey)(r,"space-loader")))}):0===a.length&&""===s?(0,t.jsx)(I.Command.Group,{...u,children:(0,t.jsx)(e$,{type:"repositories"})}):(0,t.jsx)(I.Command.Group,{...u,children:a.map(e=>(0,t.jsx)(el,{closeSwitcher:r,isCurrent:e.slug===c,isTeam:e.ownerId.startsWith("team"),repo:e,scopeSlug:l},`scope-repo-${e.id}`))})}function eL(e){let{addFavorite:r,closeSwitcher:a,inputValue:s,isFavorite:n,isLoading:l,projects:o,removeFavorite:c,selectedScope:u}=e,{user:d}=(0,S.useUser)(),{teams:m}=(0,y.useTeam)(),p=eV((0,i.useParams)()),h=eU(u,d),f=m?.find(e=>e.slug===u)??null,g=f?.id??null;if(h)return null;let x={"data-order":"4",heading:"Projects"},j=!(0,_.isAuthenticationRequired)(f)&&!function(e){let{teamOrUser:t,user:r}=e;return!!(t?.mfa&&"enforced"in t.mfa&&t.mfa.enforced)&&!r?.mfa?.enabled}({teamOrUser:f,user:d});return l?(0,t.jsx)(I.Command.Group,{...x,children:[,,,,,].fill(0).map((e,r)=>(0,t.jsx)(eo,{index:r},(0,eC.getUnsafeKey)(r,"scope-loader")))}):0===o.length&&""===s?(0,t.jsxs)(I.Command.Group,{...x,children:[(0,t.jsx)(eD,{closeSwitcher:a,selectedScope:u}),j?(0,t.jsx)(e$,{type:"projects"}):null]}):(0,t.jsxs)(I.Command.Group,{...x,children:[(0,t.jsx)(eD,{closeSwitcher:a,selectedScope:u}),j?o.map(e=>(0,t.jsx)(en,{closeSwitcher:a,contentRight:(0,t.jsx)(eM,{addFavorite:r,isFavorited:n({teamId:e.accountId??"",projectId:e.id}),project:e,removeFavorite:c,selectedScope:u,teamId:g,limited:!!d?.limited}),isCurrent:e.name===p,project:e,scopeSlug:u},`scope-project-${e.id}`)):null]})}function eO(e){let{closeSwitcher:r,selectedScope:a}=e,{user:s}=(0,S.useUser)(),{teams:n}=(0,y.useTeam)(),o=(0,i.useRouter)(),c=eB(a,n,s);return(0,_.isAuthenticationRequired)(c)||eU(a,s)?null:(0,t.jsx)(I.Command.Item,{callback:e=>{let t=`/new/${a}`;e.ctrlKey||e.metaKey||"button"in e&&1===e.button?window.open(t,"_blank","noopener"):o.push(t),r()},"data-order":"5","data-testid":(0,g.tid)("scope-switcher","create-project"),hideOnFilter:!1,children:(0,t.jsxs)(u.Stack,{align:"center",direction:"row",gap:3,children:[(0,t.jsx)(l.PlusCircle,{color:"blue-900",size:16}),(0,t.jsx)(d.Text,{children:"Create Project"})]})})}function e$(e){let{type:r}=e,a="projects"===r;return(0,t.jsxs)(u.Stack,{align:"start",className:et.default.empty,gap:1,justify:"start",children:[(0,t.jsxs)(d.Text,{align:"left",color:"gray-1000",weight:600,children:["No ",a?"projects":"repositories",", yet!"]}),(0,t.jsxs)(d.Text,{align:"left",color:"gray-900",children:["This team has no ",a?"projects":"repositories","."]})]})}function eM(e){let{isFavorited:r,addFavorite:a,removeFavorite:i,selectedScope:s,project:n,teamId:l,limited:o}=e;return s&&l&&!o?(0,t.jsx)("button",{"aria-label":`${r?"Remove from your":"Add project to your"} favorites`,className:et.default["fav-button"],onPointerUp:e=>{e.preventDefault(),e.stopPropagation(),l&&(r?i:a)({teamId:l,projectId:n.id})},style:{background:"none",height:32,borderRadius:4},type:"button",children:r?(0,t.jsx)(ej.StarFill,{size:16,style:{marginRight:-2,flexShrink:0}}):(0,t.jsx)(ex.Star,{size:16,style:{marginRight:-2,flexShrink:0}})}):null}function eD(e){let{closeSwitcher:r,selectedScope:a}=e,{user:s}=(0,S.useUser)(),{teams:n}=(0,y.useTeam)(),l=(0,i.useRouter)(),o=eB(a,n,s),c=(0,_.isAuthenticationRequired)(o),p=(0,_.getTeamLimitedBy)(o);if(!c)return null;let h=!!o&&"saml"in o&&(o.saml?.enforced??!1),f="Re-Authenticate",g=h?"You must authenticate with SAML to access projects in":"You must re-authenticate to access projects in",x=h?"Continue with SAML SSO":"Continue",j=()=>{(0,_.requireAuthentication)({slug:a,next:`/${a}`,push:e=>{l.push(e)}}),r()};return 1===p.length&&p.includes("mfa")&&(f="Two-Factor Required",g="You must enable two-factor authentication to access projects in",x="Configure 2FA",j=()=>{l.push("/account/settings/authentication#two-factor-authentication"),r()}),(0,t.jsxs)(u.Stack,{align:"center",className:et.default.empty,gap:3,justify:"center",children:[(0,t.jsxs)(u.Stack,{align:"start",gap:1,justify:"start",children:[(0,t.jsx)(d.Text,{align:"left",color:"gray-1000",weight:600,children:f}),(0,t.jsxs)(d.Text,{align:"left",color:"gray-900",children:[g," ",(0,t.jsx)(d.Text,{as:"span",weight:600,children:o?.name}),"."]})]}),(0,t.jsx)(m.Button,{onClick:j,size:"small",width:"100%",children:x})]})}function e_(e){let{canViewRepositories:r,setActiveSection:a}=e;return(0,t.jsxs)(u.Stack,{align:"center",className:et.default.input,direction:"row",children:[(0,t.jsx)(o.MagnifyingGlass,{color:"gray-500",size:20}),(0,t.jsx)(I.Command.Input,{autoFocus:!1,itemID:L.PROJECTS,onFocus:()=>a("projects"),placeholder:`Find Project${r?" or Repository":""}...`})]})}let eB=(e,t,r)=>r?.username===e?r??null:t?.find(t=>t.slug===e)||null,eU=(e,t)=>e===t?.username,eV=e=>e?.project||e?.spaceIdOrSlug;function eq(e){let{primary:r,activeSection:a,setActiveSection:i,commandProps:s,selectedScope:n,closeSwitcher:l,onShowCreateTeam:o}=e;return n===ed?(0,t.jsx)(ez,{onShowCreateTeam:o,primary:r}):(0,t.jsx)(eN,{activeSection:a,closeSwitcher:l,commandProps:s,primary:r,selectedScope:n,setActiveSection:i})}function ez(e){let{onShowCreateTeam:r,primary:a}=e;return(0,t.jsxs)("div",{className:(0,f.cn)("!w-72 !max-w-none flex flex-grow flex-col gap-4 cursor-pointer",et.default.command,et.default.focused,{[et.default.primary]:a}),onClick:()=>r(),children:[(0,t.jsxs)("div",{className:"flex h-36 flex-col items-center justify-center gap-4 px-4 py-8",children:[(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(em.Badge,{variant:"blue",children:"Pro"})}),(0,t.jsxs)("span",{className:"text-copy-14 text-gray-900 text-center",children:["Everything you need to build and scale your app. Starting at"," ",(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"$20/month."})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-5 border-t px-[18px] py-4",children:[(0,t.jsx)(eK,{icon:(0,t.jsx)(ep.ChartBarPeak,{color:"gray-900"}),children:"10x more included usage"}),(0,t.jsx)(eK,{icon:(0,t.jsx)(eh.Analytics,{color:"gray-900"}),children:"Observability tools"}),(0,t.jsx)(eK,{icon:(0,t.jsx)(ef.Dollar,{color:"gray-900"}),children:"Spend Management"}),(0,t.jsx)(eK,{icon:(0,t.jsx)(eg.FirewallFlame,{color:"gray-900"}),children:"Advanced WAF Protection"})]})]})}function eK(e){let{icon:r,children:a}=e;return(0,t.jsxs)("div",{className:"flex flex-row items-center gap-3.5 text-gray-1000",children:[r,(0,t.jsx)("span",{className:"text-label-14",children:a})]})}(0,g.markLoadedForTest)("multi-switcher");let eG="powerpicker_create_pro_team_4_aa_test";function eW(e){let{primary:r,activeSection:i,setActiveSection:c,commandProps:p,onShowCreateTeam:h,closeSwitcher:v,team:w}=e,{track:C}=(0,k.useTrackActivity)(),{canCreateTrial:b,isOemPartner:R}=(0,$.useCanCreateTrial)(),F=(0,y.useSortedTeams)(),{setInputValue:E,inputValue:O}=p,M=(0,T.useServerFlag)(eG,(0,A.statsigOption)(!1)).value;return function(){let{user:e}=(0,S.useUser)(),t=(0,a.useRef)(!1),r=(0,T.useServerFlag)(eG,(0,A.statsigOption)(!1));(0,a.useEffect)(()=>{!t.current&&e?.uid&&r.rule&&(0,P.postToStatsigClient)({user:{userID:e.uid},exposures:[{experimentName:eG,ruleID:r.rule}]}).finally(()=>{t.current=!0})},[r.rule,e?.uid])}(),(0,t.jsx)("div",{className:(0,s.clsx)(et.default.command,r&&et.default.primary,{[et.default.focused]:"teams"===i}),"data-testid":(0,g.tid)("scope-switcher","dropdown"),onMouseEnter:()=>c("teams"),onMouseLeave:e=>{let t=document.querySelector("[data-radix-popper-content-wrapper]");e.relatedTarget instanceof Node&&t?.contains(e.relatedTarget)&&c("projects")},children:(0,t.jsxs)(I.Command,{"aria-label":"Command menu",...p,children:[(0,t.jsxs)(u.Stack,{align:"center",className:et.default.input,direction:"row",children:[(0,t.jsx)(o.MagnifyingGlass,{color:"gray-900",size:20}),(0,t.jsx)(I.Command.Input,{autoFocus:!1,itemID:L.TEAMS,onFocus:()=>c("teams"),placeholder:"Find Team..."})]}),(0,t.jsxs)(I.Command.List,{disableDynamicHeight:!0,emptyMessage:(0,t.jsxs)(u.Stack,{align:"start",gap:4,justify:"start",children:[(0,t.jsx)(d.Text,{align:"left",weight:500,children:"No Team Found"}),(0,t.jsxs)(d.Text,{align:"left",color:"gray-900",children:['Your search for "',O,'" did not match any teams.']}),(0,t.jsx)(m.Button,{onClick:()=>{E("")},size:"small",type:"secondary",width:"100%",children:"Clear Search"})]}),maxHeight:730,children:[(0,t.jsx)(I.Command.Group,{heading:"Teams",children:F.map(e=>(0,t.jsx)(er,{closeSwitcher:v,isCurrent:!!(w&&e.slug===w.slug),team:e},`scope-team-${e.slug}`))}),M?(0,t.jsx)(I.Command.Separator,{}):null,(0,t.jsx)(I.Command.Item,{className:(0,f.cn)({"!h-auto !py-2 min-h-10":M}),callback:()=>{h(),x.analytics.track(j.AnalyticsEvent.SCOPE_SWITCHER_CLICKED_NEW_TEAM),C(N.VercelActivityAction.CreateTeamClick,{source:"scope-switcher",hasTrialAvailable:b??!1,isOemPartner:R??!1,createProExperimentEnabled:M}),v()},"data-testid":(0,g.tid)("scope-switcher","create-team"),hideOnFilter:!!O||!M,value:[ed,ed],children:M?(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,t.jsx)("div",{className:"flex w-[22px] shrink-0 justify-center",children:(0,t.jsx)(n.Plus,{color:"gray-900"})}),(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"flex flex-row gap-1",children:(0,t.jsx)("span",{className:"font-medium text-gray-1000",children:"Create Team"})}),(0,t.jsx)("span",{className:"text-copy-13 text-gray-900",children:b?"Unlock team collaboration and additional resources.":"Collaborate with additional resources"})]})]}):(0,t.jsxs)(u.Stack,{align:"center",direction:"row",gap:3,children:[(0,t.jsx)(l.PlusCircle,{className:"translate-z-0 translate-x-[3px]",color:"blue-900"}),(0,t.jsx)("span",{children:"Create Team"})]})})]})]})})}function eH(e){let{team:r,hideTextOnMobile:n}=e,l=(0,E.useIsViewingPublicDeployment)(),{user:o,isNorthstar:c}=(0,S.useUser)(),{name:m,avatar:h}=r||o||{},{slug:f}=r||{},{username:g}=o||{},x=m||f||g,j=(0,i.useSearchParams)(),v=j?.get("teamSlug")||"",y=(0,a.useMemo)(()=>(function(e){let{externalPublicDeployment:t,teamSlug:r,team:a,username:i}=e;return t?`${(0,M.getQueryParam)(r)||""}`:a?void 0:i})({externalPublicDeployment:l,teamSlug:v,team:r,username:g}),[l,v,r,g]),w=!!(!r&&c),C=(0,a.useMemo)(()=>(0,O.getNorthstarDashboardHref)({user:o,teamSlug:f}),[f,o]);return(0,t.jsx)(b.Link,{className:(0,s.clsx)(et.default.scopeLink,{[et.default.disabled]:l}),href:C,children:(0,t.jsxs)(u.Stack,{align:"center",direction:"row",children:[(0,t.jsx)(p.Avatar,{className:et.default.avatar,hash:l?void 0:h,size:22,teamId:r?.id,title:l?v:x,username:y}),(0,t.jsx)(d.Text,{className:(0,s.clsx)(et.default.scopeName,"geist-ellipsis",{[et.default.hideOnMobile]:n}),weight:500,children:l?v:x}),!l&&!w&&(0,t.jsx)("div",{className:"geist-hide-on-tablet",children:(0,t.jsx)(V,{fallbackToPlan:!0,team:r||void 0})})]})})}function eY(e){let{side:s="bottom",children:n,setCreateModalOpen:l,primaryColumn:o,forceVisible:u=!1,...d}=e,{team:p}=(0,y.useTeam)(),{user:f}=(0,S.useUser)(),x=(0,i.useSearchParams)(),j=(0,w.useTeamSlug)(),[b,T]=(0,a.useState)("teams"),P=j||f?.username||"",k=(0,y.useSortedTeams)(),N=p?k.findIndex(e=>e.id===p.id):0,A=(0,R.useCommand)({selected:N}),I=(0,R.useCommand)({selected:0}),[O,$]=(0,a.useState)(!1),M=()=>{$(!1),A.setInputValue(""),I.setInputValue("")};I.map;let D=(0,C.useIsMobile)(),_=(0,E.useIsViewingPublicDeployment)(),B=(0,a.useRef)(0),U=(0,a.useRef)(0);(0,a.useEffect)(()=>{let e=()=>{$(!0)};return document.addEventListener(F.OPEN_SCOPE_SWITCHER_EVENT,e),()=>{cancelAnimationFrame(B.current),cancelAnimationFrame(U.current),document.removeEventListener(F.OPEN_SCOPE_SWITCHER_EVENT,e)}},[]),(0,a.useEffect)(()=>{x?.get(F.OPEN_SCOPE_SWITCHER_EVENT)==="true"&&$(!0)},[x]),(0,a.useEffect)(()=>{let e,{inputValue:t,setInputValue:r,setSelectedIndex:a,selectedIndex:i}=A;return O||(e=setTimeout(()=>{t&&r(""),i!==N&&a(N)},150)),()=>{e&&clearTimeout(e)}},[O,N]),(0,a.useEffect)(()=>{let e,{inputValue:t,setInputValue:r}=I;return O||(e=setTimeout(()=>{t&&r("")},150)),()=>{e&&clearTimeout(e)}},[O]);let V=(0,t.jsx)(eW,{activeSection:b,closeSwitcher:M,commandProps:A,onShowCreateTeam:()=>{l()},primary:!D&&"team"===o,setActiveSection:T,team:p}),q=(0,a.useMemo)(()=>{let{filterList:e,list:t}=A,r=e||t.current,{selectedIndex:a}=A;return r[a]?.value||[]},[A])[1],z=(0,t.jsx)(eq,{activeSection:b,closeSwitcher:M,commandProps:I,onShowCreateTeam:()=>{l()},primary:"project"===o,selectedScope:D?P:q,setActiveSection:T});return(0,a.useEffect)(()=>{O&&setTimeout(()=>{let e="team"===o?L.TEAMS:L.PROJECTS,t=document.querySelector(`[itemId=${e}]`);null!==t&&t instanceof HTMLInputElement&&t.focus()},200)},[O,o]),(0,t.jsxs)(r.Root,{...d,onOpenChange:e=>void(0,v.awaitPaint)().then(()=>$(e)),open:O,children:[(0,t.jsxs)(r.Anchor,{style:{display:"flex",alignItems:"center",width:"100%"},children:[n,u||!_?(0,t.jsx)(r.Trigger,{asChild:!0,children:(0,t.jsx)(m.Button,{"aria-label":"Switch team",className:et.default.trigger,"data-testid":(0,g.tid)("scope-switcher","toggle"),style:{marginLeft:2,flexShrink:0,width:28,padding:0,backgroundColor:O?"var(--ds-gray-alpha-200)":void 0},type:"tertiary",typeName:"button",children:(0,t.jsx)(c.ChevronUpDown,{color:"gray-900"})})}):null]}),D?(0,t.jsx)(h.Drawer,{fixed:!0,height:"80vh",onDismiss:M,show:O,children:(0,t.jsx)("div",{style:{position:"relative"},children:"team"===o?(0,t.jsx)("div",{children:V},"teams"):(0,t.jsx)("div",{children:z},"projects")})}):(0,t.jsxs)(r.Content,{align:"start",alignOffset:"team"===o?-16:-255,className:et.default.content,onKeyDown:e=>{if("ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;let t=I.inputRef.current,r=A.inputRef.current;t?.selectionStart!=null&&e.target===t&&(t.selectionStart>0||t.selectionStart!==t.selectionEnd)||(r?.selectionStart==null||e.target!==r||!(r.selectionStart<r.value.length)&&r.selectionStart===r.selectionEnd)&&("ArrowRight"===e.key&&t&&document.activeElement!==t?(cancelAnimationFrame(B.current),t.focus(),B.current=requestAnimationFrame(()=>{t.select()})):"ArrowLeft"===e.key&&r&&document.activeElement!==r&&(cancelAnimationFrame(U.current),r.focus(),U.current=requestAnimationFrame(()=>{r.select()})))},onOpenAutoFocus:e=>e.preventDefault(),side:s,sideOffset:8,style:{display:"flex",position:"relative"},children:[V,z]})]})}}}]);

//# sourceMappingURL=9340e23deffb04e6.js.map
//# debugId=fe864445-3197-5f0b-889d-d6ae5d7d8348
