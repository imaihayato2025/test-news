
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="65adbae5-884d-56eb-9850-f0ad0699a28d")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{5154216:e=>{"use strict";e.s({GitCommit:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M8 10.5C9.38071 10.5 10.5 9.38071 10.5 8C10.5 6.61929 9.38071 5.5 8 5.5C6.61929 5.5 5.5 6.61929 5.5 8C5.5 9.38071 6.61929 10.5 8 10.5ZM8 12C9.95279 12 11.5787 10.6006 11.9298 8.75H15.25H16V7.25H15.25H11.9298C11.5787 5.39935 9.95279 4 8 4C6.04721 4 4.42125 5.39935 4.0702 7.25H0.75H0V8.75H0.75H4.0702C4.42125 10.6006 6.04721 12 8 12Z" fill="currentColor"/>')},2293621:e=>{"use strict";e.s({RelativeTimeCard:()=>r,useShortTimeAgo:()=>d});var t=e.i(6645307),a=e.i(6530772),n=e.i(8084653),i=e.i(3583950);function r(e){let{date:a,children:n,...r}=e,o=void 0===n?(0,t.jsx)(l,{date:a}):n;return a?(0,t.jsx)(i.ContextCard.Trigger,{content:(0,t.jsx)(s,{date:a}),...r,children:o}):o}function l(e){let{date:a}=e,i=d(a);return(0,t.jsx)(n.Text,{as:"span",color:"gray-900",variant:"label-14",children:i})}function s(e){let{date:n}=e,i=Intl.DateTimeFormat().resolvedOptions().timeZone,r=function(e){let[t,n]=(0,a.useState)("");return(0,a.useEffect)(()=>{let t=()=>{let t=function(e){let t=Math.abs(e),a=[];for(let{unit:e,ms:n}of u){let i=Math.floor(t/n);if((i>0||a.length>0)&&(a.push(`${i} ${e}${1!==i?"s":""}`),t%=n),3===a.length)break}return a.join(", ")}(new Date().getTime()-e);n(t?`${t} ago`:"Just now")};t();let a=setInterval(t,1e3);return()=>clearInterval(a)},[e]),t}(n);return(0,t.jsxs)("div",{className:"flex flex-col gap-3 min-w-[300px] ",children:[(0,t.jsx)("div",{className:"flex flex-col gap-3",children:(0,t.jsx)("span",{className:"tabular-nums text-label-13 text-gray-900",children:r})}),(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)(o,{date:n,zone:"UTC"}),(0,t.jsx)(o,{date:n,zone:i})]})]})}function o(e){let{date:a,zone:n}=e,i=new Date(a),r=new Intl.DateTimeFormat("en-US",{timeZone:n,timeZoneName:"short"}).formatToParts(i).find(e=>"timeZoneName"===e.type)?.value||n,l=i.toLocaleString("en-US",{timeZone:n,year:"numeric",month:"long",day:"numeric"}),s=i.toLocaleTimeString("en-US",{timeZone:n,hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)("div",{className:"flex items-center justify-center h-4 px-1.5 bg-gray-200 rounded-xs",children:(0,t.jsx)("span",{className:"text-label-12-mono text-gray-900",children:r})}),(0,t.jsx)("span",{className:"text-label-13",children:l})]}),(0,t.jsx)("span",{className:"tabular-nums text-label-12-mono text-gray-900",children:s})]})}let u=[{unit:"year",ms:31536e6},{unit:"month",ms:2628e6},{unit:"day",ms:864e5},{unit:"hour",ms:36e5},{unit:"minute",ms:6e4},{unit:"second",ms:1e3}];function d(e){let[t,n]=(0,a.useState)("");return(0,a.useEffect)(()=>{if(!e)return void n("");let t=()=>{let t=new Date().getTime()-e,a=Math.floor(t/864e5),i=Math.floor(t/36e5),r=Math.floor(t/6e4);a>0?n(`${a} day${a>1?"s":""} ago`):i>0?n(`${i} hour${i>1?"s":""} ago`):r>0?n(`${r} minute${r>1?"s":""} ago`):n("Just now")};t();let a=setInterval(t,6e4);return()=>clearInterval(a)},[e]),t}},6700141:e=>{"use strict";e.s({useAllAccountTypeBadgesFlag:()=>h,useEmailNotificationRulesFlag:()=>R,useEnableAnsiLogs:()=>C,useEnableNewInstantRollbackFlow:()=>g,useEnhancedBuilds:()=>E,useFeedbackVariantsDeployStep:()=>b,useInstantRollbackHobbyRestrictionFlag:()=>v,useIsOemPartner:()=>p,useJWTAccessTokenFlag:()=>F,useLaunchDarklyFeatureFlag:()=>m,useLaunchDarklyFlags:()=>c,useLoginWithVercelTeamFlag:()=>L,useLoginWithVercelUserFlag:()=>D,useManualGitDeployFlag:()=>T,useMonitoringExitSurveyFlag:()=>f,useNetCpuFunctionsFlag:()=>M,useNewFeedbackSharingModal:()=>j,useOpenTelemetryApiScopeFlag:()=>y,useRestrictLogDrainsForHobbyFlag:()=>I,useShowCronJobsSummary:()=>S,useStorageEnterpriseFlag:()=>x,useTrustedIpsCustomLimitFlag:()=>k,useVercelAppsFlag:()=>w});var t=e.i(6530772);e.i(6611132);var a=e.i(6558958),n=e.i(1782286),i=e.i(9902218),r=e.i(5454140),l=e.i(3514588),s=e.i(3326412);let o="vercel:ldFlags",u=(0,a.default)(()=>{let e=i.localStorageWrapper.getItem(o);if(e)return JSON.parse(e)}),d=(0,n.default)(e=>{i.localStorageWrapper.setItem(o,JSON.stringify(e))},1e3),c=()=>{let{flags:e,isLoading:a,mutate:n,isLoggedOut:l}=(0,r.useUser)(),s=(0,t.useMemo)(()=>e??u(),[e]);return(0,t.useEffect)(()=>{e&&(d(e),u.cache.set(void 0,e))},[e]),(0,t.useEffect)(()=>{l&&(i.localStorageWrapper.removeItem(o),u.cache.clear?.(),d.cancel())},[l]),{flags:s,isReady:!a&&void 0!==s,mutate:n}},m=e=>{let{flags:t,isReady:a,mutate:n}=c();return{isReady:a,value:t?.[e]??null,mutate:()=>n().then(t=>({isReady:a,value:t?.flags?.[e]??null}))}},g=()=>m("new-instant-rollback-flow"),h=()=>m("show-all-account-type-badges"),p=()=>m("is-oem-partner"),y=()=>m("open-telemetry-api-scope"),f=()=>m("monitoring-exit-survey"),v=()=>m("instant-rollback-hobby-restriction"),x=e=>{let t=(0,s.useLaunchDarklyTeamFeatureFlag)("storage-enterprise",e),a=t.value?.split(",").map(e=>e.trim()).filter(Boolean)||[];return{isReady:t.isReady,isStorageEnterpriseEnabled:e=>{let{storeType:n,isUnbundled:i,isTrialing:r}=e;return"edge-config"===n||"integration"===n||!!i||!!r||t.isReady&&a.includes(n)}}},j=()=>(0,s.useLaunchDarklyTeamFeatureFlag)("feedback-sharing-modal"),b=()=>{let{isReady:e,value:t}=(0,s.useLaunchDarklyTeamFeatureFlag)("feedback-variants-deploy-step"),{isReady:a,value:n}=m("feedback-variants-deploy-step");return(e&&t||a&&n)??!1},S=()=>{let{isReady:e,value:t}=(0,s.useLaunchDarklyTeamFeatureFlag)("cron-jobs-deploy-summary"),{isReady:a,value:n}=m("cron-jobs-deploy-summary");return(e&&t||a&&n)??!1},E=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("route-to-pdx1-jelly"),t=!!e.isReady,a=!!e.value;return{readyValue:t&&a,isReady:t,value:a}},T=()=>{let e=(0,l.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("manual-git-deploys"),a=m("manual-git-deploys");return{isReady:e.isTeam?t.isReady:a.isReady,value:!!(e.isTeam?t.value:a.value)}},C=()=>{let e=(0,l.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("ansi-logs"),a=m("ansi-logs");return{isReady:e.isTeam?t.isReady:a.isReady,value:!!(e.isTeam?t.value:a.value)}},I=()=>{let e=(0,l.useTeam)(),t=(0,s.useLaunchDarklyTeamFeatureFlag)("restrict-log-drains-for-hobby"),a=m("restrict-log-drains-for-hobby");return{isReady:e.isTeam?t.isReady:a.isReady,value:!!(e.isTeam?t.value:a.value)}},L=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("login-with-vercel");return{isReady:e.isReady,value:!!e.value}},D=()=>{let e=m("login-with-vercel");return{isReady:e.isReady,value:!!e.value}},R=()=>{let{isReady:e,value:t}=m("email-notification-rules");return{isReady:e,value:!!t}},k=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("trusted-i-ps-custom-limit");return{isReady:e.isReady,value:e.value}},F=()=>{let e=m("jwt-access-tokens");return{isReady:e.isReady,value:!!e.value}},w=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("vercel-apps");return{isReady:e.isReady,value:!!e.value}},M=()=>{let e=(0,s.useLaunchDarklyTeamFeatureFlag)("net-cpu-functions");return{isReady:e.isReady,value:!!e.value}}},587741:e=>{"use strict";e.s({default:()=>u,pathFromDeployment:()=>o,useDeploymentLink:()=>d});var t=e.i(6645307),a=e.i(5535439),n=e.i(5454140),i=e.i(3514588),r=e.i(2362802),l=e.i(8025298),s=e.i(5168763);function o(e){let{user:t,team:a,project:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"";let{project:i,idWithoutPrefix:r}=(0,l.default)(e),s=a?.slug||"team"in e&&e?.team?.slug||t?.username||t?.uid||e.creator?.username||e.creator?.uid||null;return`/${encodeURIComponent(s)}/${encodeURIComponent(n?.name??i)}/${r}`}let u=e=>{let{deployment:a,host:n,alias:i,title:l,children:s}=e,o=d(a),u=function(e){return e?`/deployment/redirect?host=${e}`:""}(n);return(0,t.jsx)(r.Link,{className:"font-medium text-foreground no-underline hover:underline",href:o||u,prefetch:!!o,title:l,children:i||s||n||a?.host||a?.url})},d=(e,t)=>{let{user:r}=(0,n.useUser)(),{team:l}=(0,i.useTeam)(),{teamSlug:u,project:d=t}=(0,a.useParams)()??{},c=e&&"id"in e?e.id:e?.uid,m=c?.replace("dpl_","");return u&&d?(0,s.getDashboardHref)(`/${d}/${m}`,u):o(e,{user:r,team:l})}},1635827:e=>{"use strict";e.s({ClockDashed:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M5.35066 2.06247C5.96369 1.78847 6.62701 1.60666 7.32351 1.53473L7.16943 0.0426636C6.31208 0.1312 5.49436 0.355227 4.73858 0.693033L5.35066 2.06247ZM8.67651 1.53473C11.9481 1.87258 14.5 4.63876 14.5 8.00001C14.5 11.5899 11.5899 14.5 8.00001 14.5C4.63901 14.5 1.87298 11.9485 1.5348 8.67722L0.0427551 8.83147C0.459163 12.8594 3.86234 16 8.00001 16C12.4183 16 16 12.4183 16 8.00001C16 3.86204 12.8589 0.458666 8.83059 0.0426636L8.67651 1.53473ZM2.73972 4.18084C3.14144 3.62861 3.62803 3.14195 4.18021 2.74018L3.29768 1.52727C2.61875 2.02128 2.02064 2.61945 1.52671 3.29845L2.73972 4.18084ZM1.5348 7.32279C1.60678 6.62656 1.78856 5.96348 2.06247 5.35066L0.693033 4.73858C0.355343 5.4941 0.131354 6.31152 0.0427551 7.16854L1.5348 7.32279ZM8.75001 4.75V4H7.25001V4.75V7.875C7.25001 8.18976 7.3982 8.48615 7.65001 8.675L9.55001 10.1L10.15 10.55L11.05 9.35L10.45 8.9L8.75001 7.625V4.75Z" fill="currentColor"/>')},9533270:e=>{"use strict";function t(e){let{commandForIgnoringBuildStep:t}=e||{};return"string"==typeof t&&t.trim().length>0}function a(e){let{project:a,deployment:n}=e;return t(a)||t(n?.projectSettings)}e.s({useShowIgnoreBuildStep:()=>a})},7117133:e=>{"use strict";e.s({useIsomorphicSWRInfinite:()=>o});var t=e.i(6530772),a=e.i(7095283),n=e.i(1497618),i=e.i(7631057),r=e.i(1902201),l=e.i(6168322),s=e.i(7244164);function o(e,o,u){let{isServer:d,config:c,fetcher:m,fallbackSource:g}=(0,n.useIsomorphicSwrContext)(!0),h=(0,t.useMemo)(()=>"function"==typeof o?(e,t)=>o(e,t):(e,t)=>t(e),[o]),p=(0,t.useMemo)(()=>e=>{if(d)throw Error("useSWR: swrFetcher is not available on server");return h(e,m)},[d,h,m]),y="object"==typeof o?o:u,{ssr:f,...v}=y??{},x=(0,i.mergeConfig)(c,y),j=e(0,null),b=g(j??null,h,x,!1),{data:S,isLoading:E,error:T}=(0,r.useAsyncValue)(d,b),C=(0,a.default)((t,a)=>{let n=e(t,a);return E&&!d?null:n},p,{...v,suspense:!1,fallback:{[(0,a.unstable_serialize)(e)]:S?[S]:void 0},revalidateOnMount:!d&&(v.revalidateOnMount??(!S&&!E))}),{mutate:I,data:L,isLoading:D}=C,R=(0,t.useMemo)(()=>(0,l.withThrottle)(j,()=>{(0,s.debug)(`Client fallback data fetch for ${j}`),I()},2e3),[j,I]);return(0,t.useEffect)(()=>{!T||D||L||R()},[T,R,L,D]),{...C,isLoading:C.isLoading&&void 0===C.data||E||d}}},1766200:e=>{"use strict";e.s({default:()=>y,useDeploymentsInfinite:()=>p},1766200);var t=e.i(6530772),a=e.i(3521787),n=e.i(6649026),i=e.i(1183506),r=e.i(9336536),l=e.i(3514588),s=e.i(1782286),o=e.i(5454140),u=e.i(5535439),d=e.i(7117133),c=e.i(3326412),m=e.i(6700141),g=e.i(8285977),h=e.i(6676545);function p(e){let{limit:a,project:i,projectId:p,requireProject:y,users:f,target:v,state:x,meta:j,rollbackCandidate:b,since:S,until:E,subscribeToUpdates:T,branch:C,ignoreProjectSlug:I}=e,{refreshInterval:L,...D}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v6",{isReady:k,team:F}=(0,l.useTeam)(),{user:w}=(0,o.useUser)(),[M,A]=(0,t.useState)(()=>L),N=f&&f.length>0?f.map(e=>e.uid).join(","):null,P=i?.id||p,{value:$}=(0,m.useInstantRollbackHobbyRestrictionFlag)(),{value:O}=(0,c.useInstantRollbackHobbyRestrictionTeamFlag)(),{teamSlug:_,project:U}=(0,u.useParams)()??{},B={projectId:P,limit:a,teamId:F?.id,target:v||null,users:N,state:x,meta:j,rollbackCandidate:b,since:S,until:E,branch:C},H=y||($||O)&&void 0!==b&&(!F||F.billing?.plan==="hobby"),z=(0,d.useIsomorphicSWRInfinite)((e,t)=>{if(_&&U&&!I){if(!e)return`${(0,r.API_DEPLOYMENTS)(R)}${(0,n.encode)({...B,teamId:_,projectId:U})}`;let i=t&&t.deployments.length>=a?t.deployments[t.deployments.length-1].created-1:null;return i?`${(0,r.API_DEPLOYMENTS)(R)}${(0,n.encode)({...B,teamId:_,projectId:U,from:i})}`:null}if(H&&!P)return null;if(!e)return k?`${(0,r.API_DEPLOYMENTS)(R)}${(0,n.encode)(B)}`:null;let i=t&&t.deployments.length>=a?t.deployments[t.deployments.length-1].created-1:null;return i&&k?`${(0,r.API_DEPLOYMENTS)(R)}${(0,n.encode)({...B,from:i})}`:null},{...D,refreshInterval:M,ssr:{timeout:1e3}}),{mutate:Y}=z,V=(0,t.useMemo)(()=>(0,s.default)(()=>{Y()},100),[Y]),{isListening:Z}=function(e,t){let a=e?`${e.accountId}-${e.id}`:void 0;return(0,g.usePusherEvent)("deployments",a,"deployment-created",t)}(T?i:void 0,V);Z||L===M?Z&&3e4!==M&&A(3e4):A(L);let G=(0,t.useMemo)(()=>z.data?z.data.flatMap(e=>e.deployments):[],[z.data]),W=F?F.id:w?.uid,J=(0,t.useMemo)(()=>T&&W?G.map(e=>({id:e.uid,readyState:e.readyState??e.state,aliasAssigned:!!e.aliasAssigned,ownerId:W})):[],[G,T,W]);(0,h.useDeploymentsStatusPing)(J,V);let K=!!z.data,q=K&&0===G.length,Q=K&&z.data&&z.size>z.data.length,X=K&&z.data&&z.data[z.data.length-1]?.deployments.length<a;return[z,{deployments:G,initialDataLoaded:K,isEmpty:q,loadMore:()=>z.setSize(e=>e+1),isLoadingMore:Q,isReachingEnd:X,mutate:z.mutate}]}function y(e){let{limit:t,projectId:s,project:o,from:u,target:d,users:c=[],...m}=e,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v6",{isReady:p,team:y}=(0,l.useTeam)(),f=c.length>0?c.map(e=>e.uid).join(","):null,v=!!s||!!o?.id;return(0,a.default)(p&&v&&t>0?`${(0,r.API_DEPLOYMENTS)(h)}${(0,n.encode)({projectId:s||o?.id,limit:t,from:u||null,teamId:y?.id,target:d,users:f,...m})}`:null,e=>(0,i.fetchAPI)(e,{throwOnHTTPError:!0}),g)}},8371532:e=>{"use strict";e.s({DEFAULT_USE_IGNORE_BUILD_STEP_PROMOTE:()=>a,DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY:()=>t,DeploymentOverviewParams:()=>n});let t=!0,a=!1,n={automaticAliases:!0}},1124439:e=>{"use strict";e.s({default:()=>Y},1124439);var t=e.i(6645307),a=e.i(5535439),n=e.i(6530772),i=e.i(2362802),r=e.i(5674541),l=e.i(8247297),s=e.i(1917237),o=e.i(8934201),u=e.i(6921100),d=e.i(889716),c=e.i(8158100),m=e.i(584439),g=e.i(3921802),h=e.i(2293621),p=e.i(1635827),y=e.i(3138389),f=e.i(5154216),v=e.i(1164214),x=e.i(5454140),j=e.i(3514588),b=e.i(4237550),S=e.i(5140160),E=e.i(5249128),T=e.i(3509620),C=e.i(6937468),I=e.i(2448773),L=e.i(5333425),D=e.i(3585235),R=e.i(5785123),k=e.i(6649026),F=e.i(1183506),w=e.i(9336536);async function M(e){let{deployment:t,includeBuildCache:a=!1,skipIgnoreBuildStep:n=!1,project:i,team:r,target:l,customEnvironmentSlugOrId:s}=e,o=r?.id;if(await (async()=>{if("production"!==t.target||!i.targets?.production?.id)return!1;let e=i.targets.production;return!("READY"!==e.readyState||(await (0,F.fetchAPI)(`${(0,w.API_DEPLOYMENTS)("v6")}${(0,k.encode)({teamId:o,projectId:i.id,target:"production",since:t.createdAt+1,limit:30})}`,{throwOnHTTPError:!0})).deployments.every(e=>e.meta?.action==="redeploy"))&&(t.id||t.uid)!==e.id})())throw{message:"A more recent Production Deployment has been created, so the one you are looking at cannot be redeployed anymore.",action:"Learn More",link:"https://vercel.link/redeploy-production-deployment"};return await (0,F.fetchAPI)(`${(0,w.API_DEPLOYMENTS)("v13")}${(0,k.encode)({teamId:o,forceNew:"1",...a&&{withCache:"1"},skipIgnoreBuildStep:n?"1":null})}`,{method:"POST",body:JSON.stringify({deploymentId:t.uid||t.id,meta:{action:"redeploy"},name:i.name,target:l||void 0,customEnvironmentSlugOrId:s}),throwOnHTTPError:!0})}var A=e.i(587741),N=e.i(1922196),P=e.i(9505396),$=e.i(9533270),O=e.i(3156464),_=e.i(3546860),U=e.i(3447305),B=e.i(8371532);function H(e){let{current:a,data:n}=e;return(0,t.jsx)(E.RadioGroup.Item,{className:"cursor-pointer items-start rounded-none border border-solid border-gray-400 p-3 text-sm [&:first-of-type]:rounded-t-md [&:last-of-type]:rounded-b-md",value:n.id,children:(0,t.jsxs)("div",{className:"grid grid-cols-[1fr,auto] gap-1",children:[(0,t.jsx)("div",{className:"overflow-hidden text-ellipsis font-bold",children:(0,t.jsx)("span",{className:"truncate",children:n.url})}),a?(0,t.jsx)(g.Badge,{className:"w-fit p-2 normal-case",size:"sm",variant:"blue-subtle",children:"Current"}):null,(0,t.jsxs)("div",{className:"gray-900 col-start-1 flex items-center gap-x-2",children:[(0,t.jsx)(y.GitBranch,{}),n.meta.githubCommitRef]}),(0,t.jsxs)("div",{className:"gray-900 col-start-1 flex items-center gap-x-2",children:[(0,t.jsx)(f.GitCommit,{}),n.meta.githubCommitMessage]}),(0,t.jsxs)("div",{className:"gray-900 col-start-1 flex items-center gap-x-2",children:[(0,t.jsx)(p.ClockDashed,{}),(0,h.useShortTimeAgo)(n.createdAt)]})]})},n.id)}function z(e){let{deployments:a,onSelect:i}=e,[l,s]=(0,n.useState)(!1),[o,u]=(0,n.useState)(a[0].id);return(0,t.jsx)(E.RadioGroup,{onChange:e=>{u(e),i(e)},value:o,children:(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(H,{current:!0,data:a[0]}),a.length>1&&l?a.slice(1).map(e=>(0,t.jsx)(H,{data:e},e.id)):null,a.length>1&&!l?(0,t.jsx)(r.Button,{className:"mt-3",onClick:()=>s(!l),type:"secondary",children:"Choose a Deployment"}):null]})})}function Y(e){let[r,g]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null),[E,k]=(0,n.useState)(null),[F,w]=(0,n.useState)(void 0),[H,Y]=(0,n.useState)(void 0),[V,Z]=(0,n.useState)(!1),[G,W]=(0,n.useState)(void 0),J=(0,$.useShowIgnoreBuildStep)({project:e,deployment:y}),[K,q]=(0,n.useState)(B.DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY),Q=(0,m.useToasts)(),X=(0,a.useRouter)(),{user:ee}=(0,x.useUser)(),{team:et}=(0,j.useTeam)(),{can:ea}=(0,D.default)({projectIdOrName:e?.name}),en=ea(R.Action.Create,R.Resource.Deployment),ei=ea(R.Action.Create,R.Resource.DeploymentFromProductionBranch)&&en,{data:er}=(0,O.useCustomEnvironments)(e?.id??""),el=(0,n.useMemo)(()=>er?.customEnvironments??[],[er]),es=(0,n.useMemo)(()=>y?Array.from(new Set(Array.isArray(y.alias)?y.alias:[])):null,[y]),{data:eo}=(0,P.useProjectDomains)(e?.id??"",{limit:13,production:"true",redirects:"false",verified:"true",order:"ASC"}),eu=(0,n.useMemo)(()=>{if("production"===G)return eo?.map(e=>e.name)||[];if("preview"===G){if(y)return Array.from(new Set(y.alias))}else if(G&&(0,L.isCustomEnvId)(G)){let e=el.find(e=>{let{id:t}=e;return t===G});if(e)return e.domains?.map(e=>{let{name:t}=e;return t})||[]}return[]},[el,y,eo,G]),ed=(0,n.useCallback)((e,t)=>{let a=Array.isArray(e)?e:[e],n=a[0];k(a),f(n),W(n.customEnvironment?.id??n.target??"preview"),w(t),g(!0),Z(!1),q(B.DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY)},[]),ec=(0,n.useCallback)(()=>{g(!1)},[]),em=(0,n.useCallback)(()=>{p(!1),f(null),W(void 0),Y(void 0)},[]),eg=(0,n.useCallback)(async()=>{let t,a;p(!0),Y(void 0),y&&e&&("production"===G||"staging"===G?t=G:"preview"===G?t=void 0:G&&(0,L.isCustomEnvId)(G)?a=G:y.customEnvironment?a=y.customEnvironment.id:t=y.target,M({deployment:y,includeBuildCache:V,project:e,target:t,skipIgnoreBuildStep:!!J&&!K,team:et,customEnvironmentSlugOrId:a}).then(e=>{if(!e)return;let t=(0,A.pathFromDeployment)(e,{user:ee,team:et});!F||F.redirect?(Q.success("Deployment created successfully."),X.push(t)):Q.success({text:"Deployment created succesfully.",action:"View Deployment",onAction:()=>{X.push(t)}}),ec()}).catch(e=>{Y(e)}).finally(()=>{p(!1),Z(!1),q(B.DEFAULT_USE_IGNORE_BUILD_STEP_REDEPLOY)}))},[G,y,e,Q,X,ee,et,ec,V,F,K,J]),eh=e?.autoAssignCustomDomains??!0,ep=(0,n.useMemo)(()=>{let e;return G?"production"===G?e=(0,t.jsx)(_.EnvironmentBadge,{size:"sm",type:"production"}):"production"!==G&&(e=(0,t.jsx)(_.EnvironmentBadge,{size:"sm",type:"preproduction"})):e=null,(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.default,{color:"gray-1000",noMargin:!0,size:16,weigth:400,children:F?.copy?F.copy:`You are about to create a new Deployment using the same source code as
          your current one, but with the latest configuration from your Project
          Settings.`}),(0,t.jsxs)(d.Stack,{gap:1,children:[(0,t.jsx)(I.default,{color:"gray-900",noMargin:!0,preset:"label",type:"secondary",children:"Select an environment"}),(0,t.jsxs)(u.Select,{"aria-label":"Environments",onChange:e=>{W(e.target.value)},placeholder:"Select an environment",prefix:(0,t.jsx)(U.EnvironmentIcon,{id:G}),suffix:(0,t.jsxs)(d.Stack,{align:"center",direction:"row",gap:3,children:[e," ",(0,t.jsx)(b.ChevronDown,{})]}),value:G,children:[(0,t.jsxs)("optgroup",{label:"System Environments",children:[(0,t.jsx)("option",{disabled:!ei,value:"production",children:"Production"}),(0,t.jsx)("option",{value:T.EnvTarget.Preview,children:"Preview"})]}),el.length>0?(0,t.jsx)("optgroup",{label:(0,C.pluralize)("Custom Environment",el.length),children:el.sort((e,t)=>e.slug.localeCompare(t.slug)).map(e=>(0,t.jsx)("option",{value:e.id,children:e.slug},e.id))}):(0,t.jsx)("option",{disabled:!0,children:"Your project has no custom environments"})]})]})]})},[el,G,ei,F]),ey=(0,n.useMemo)(()=>eh||"production"!==G?eu.length<=0?null:(0,t.jsxs)(d.Stack,{gap:2,children:[(0,t.jsx)(I.default,{noMargin:!0,preset:"body-2",style:{color:"var(--accents-6)"},children:"It will be assigned to the following domains:"}),(0,t.jsxs)(d.Stack,{direction:"column",gap:2,children:[eu.slice(0,2).map(e=>(0,t.jsxs)(d.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(S.Globe,{size:16}),(0,N.default)(e)?(0,t.jsx)(I.default,{children:"name"}):(0,t.jsx)(i.Link,{external:!0,href:`https://${e}`,children:e})]},e)),e&&eu.length-2>0&&eu.length<13?(0,t.jsx)(I.default,{noMargin:!0,children:(0,t.jsxs)(i.Link,{href:`/${et?et.slug:ee?.username}/${encodeURIComponent(e.name)}/settings/domains`,style:{fontSize:13},tab:!0,variant:"highlight",children:["...and ",eu.length-2," more."]})}):null,e&&eu.length>=13?(0,t.jsx)(I.default,{noMargin:!0,children:(0,t.jsxs)(i.Link,{href:`/${et?et.slug:ee?.username}/${encodeURIComponent(e.name)}/settings/domains`,style:{fontSize:13},tab:!0,variant:"highlight",children:["...and over ",10," more."]})}):null]})]}):(0,t.jsx)(c.Note,{fill:!0,size:"small",type:"warning",children:(0,t.jsxs)(I.default,{noMargin:!0,preset:"body-2",children:["Your new Deployment will not be assigned any Custom Domains because"," ","auto-assigning custom production domains is disabled for this project."," ",(0,t.jsx)(i.Link,{external:!0,href:"/docs/deployments/managing-deployments#promote-deployment-to-production",variant:"highlight",children:"Learn more about promoting deployments"})]})}),[e,ee,et,eh,eu,G]);return{modal:(0,n.useMemo)(()=>(0,t.jsxs)(o.Modal.Modal,{active:r,"data-testid":(0,v.tid)("redeploy-modal","modal"),onAnimationDone:em,onClickOutside:ec,width:"600px",children:[(0,t.jsxs)(o.Modal.Body,{className:"[&>hr]:w-full",children:[(0,t.jsx)(o.Modal.Header,{children:(0,t.jsx)(o.Modal.Title,{children:"Redeploy"})}),(0,t.jsxs)(d.Stack,{gap:8,children:[ep,E?(0,t.jsx)(z,{deployments:E,onSelect:e=>f(E.filter(t=>t.uid===e)[0])}):null,eu.length>0&&ey,H?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(s.Error,{error:H})}):null,(0,t.jsxs)(d.Stack,{direction:"row",gap:1,children:[(0,t.jsxs)(l.Checkbox,{checked:V,onChange:()=>{Z(!V)},children:["Use existing Build Cache."," "]}),(0,t.jsx)(i.Link,{external:!0,href:"/docs/deployments/troubleshoot-a-build#understanding-build-cache",style:{fontSize:13},variant:"highlight",children:"Learn more"})]}),J?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.Checkbox,{checked:K,fullWidth:!0,onChange:()=>{q(!K)},children:"Use project's Ignore Build Step"})}):null]})]}),(0,t.jsxs)(o.Modal.Actions,{children:[(0,t.jsx)(o.Modal.Action,{loading:!1,onClick:ec,type:"secondary",children:"Cancel"}),(0,t.jsx)(o.Modal.Action,{"data-testid":(0,v.tid)("redeploy-modal","redeploy-button"),disabled:!es&&!eo&&!y,loading:h,onClick:eg,children:"Redeploy"})]})]}),[r,em,ec,y,E,eu,ep,ey,H,V,J,K,es,eo,h,eg]),close:ec,open:ed}}}}]);

//# sourceMappingURL=835711be9c789280.js.map
//# debugId=65adbae5-884d-56eb-9850-f0ad0699a28d
