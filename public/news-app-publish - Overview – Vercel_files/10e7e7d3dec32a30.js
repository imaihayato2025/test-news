
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="79a9a5ed-52f5-54da-8514-e52c25961535")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{313393:e=>{e.v({container:"percentile-bar-module__Vk4nhW__container",target:"percentile-bar-module__Vk4nhW__target"})},9962287:e=>{"use strict";e.s({MetricDisplay:()=>k},9962287);var t=e.i(6645307),n=e.i(5163670),i=e.i(8034252),r=e.i(9443759),o=e.i(6530772),a=e.i(3114489),l=e.i(2019810),s=e.i(1475325);e.i(6234757);var c=e.i(7151226),u=e.i(523267),d=e.i(4513262),f=e.i(2834676),p=e.i(1235226),h=e.i(5610210),m=e.i(889716),g=e.i(8084653),x=e.i(555528),v=e.i(313393);let{Poor:y,Improvable:j,Good:b}=c.Rating;function S(e){let{active:n,className:i,style:r,percent:o,tooltipText:a,tooltipDelay:l,disabled:s}=e;return(0,t.jsx)(x.Tooltip,{className:(0,p.twMerge)("relative h-full w-full bg-gray-200 transition-all duration-200","first:rounded-l last:rounded-r",i,s&&"pointer-events-none",n?"opacity-100":(0,p.twMerge)("opacity-80 grayscale",!s&&"hover:gray hover:grayscale-0")),delayTime:l,style:{width:`${o}%`,...r},text:a,children:(0,t.jsx)("div",{className:"absolute top-0 h-3 w-full"})})}function w(e){let{distribution:n,targetPercentile:i,showPercentileLabel:r,metricLabel:a,isLoading:l}=e,{good:s=80,improvable:c=15,poor:u=5}=n||{},d=function(){if(!l)return i<=s?b:i<=s+c?j:y}(),f="large"===e.size?4:3,w=(0,o.useMemo)(()=>({disabled:l,tooltipDelay:e.tooltipDelay}),[l,e.tooltipDelay]);return(0,t.jsxs)("div",{className:(0,h.clsx)(v.default.container,"tailwind"),children:[(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsxs)("div",{className:"flex w-full space-x-0.5",style:{height:`${f}px`},children:[s>0&&(0,t.jsx)(S,{...w,active:d===b,className:"bg-green-700",percent:s,tooltipText:`${Math.round(s)}% of visits had a great ${a}`}),c>0&&(0,t.jsx)(S,{...w,active:d===j,className:"bg-amber-700",percent:c,tooltipDelay:e.tooltipDelay,tooltipText:`${Math.round(c)}% of visits scored "needs improvement" on ${a}`}),u>0&&(0,t.jsx)(S,{...w,active:d===y,className:"bg-red-700",percent:u,tooltipDelay:e.tooltipDelay,tooltipText:`${Math.round(u)}% of visits had a poor ${a}`})]}),(0,t.jsx)("div",{className:(0,p.twMerge)(v.default.target,r&&"bg-gray-700",(0,h.clsx)({"bg-green-700":d===b,"bg-amber-700":d===j,"bg-red-700":d===y})),style:{left:`${i}%`}})]}),r?(0,t.jsx)("div",{className:"h-6",children:(0,t.jsx)("div",{className:"absolute mt-1 flex w-0 flex-col items-center justify-center",style:{left:`${i}%`},children:(0,t.jsx)(x.Tooltip,{delayTime:e.tooltipDelay,text:`The score is given on the ${a} most visits (75%) had.`,children:(0,t.jsx)(m.Stack,{className:"cursor-default rounded-sm border bg-background-100 px-1.5 py-0.5",children:(0,t.jsxs)(g.Text,{color:"gray-900",size:12,weight:500,children:["P",i.toString()]})})})})}):null]})}let N={[c.Rating.Good]:"text-green-700",[c.Rating.Improvable]:"text-amber-700",[c.Rating.Poor]:"text-red-700"},M={0:"var(--ds-red-700)",50:"var(--ds-amber-700)",90:"var(--ds-green-700)"};function k(e){let{metric:c,metricDefinitions:p,className:h,size:m,device:g,values:x,isLoading:v,hasData:y,disabled:j}=e,{state:b}=(0,d.useSpeedInsightsUrlState)(),{isEnabled:S}=(0,f.useSpeedInsightsStatus)(),{value:k,rating:E,metricDefinition:T}=(0,o.useMemo)(()=>{let e=p[c].thresholds[g],t=x?.[c]?.p75??0;return{metricDefinition:p[c],value:t,rating:(0,u.getRatingForThresholds)(e,t)}},[x,c,p,g]),C=(0,d.canMetricBeFiltered)(T.type,(0,d.useSpeedInsightsUrlState)().state)&&(y||j)&&k>=0;return"RES"!==c?(0,t.jsxs)("span",{className:(0,r.cn)("flex flex-col gap-2 justify-start",h,j&&"grayscale"),children:[(0,t.jsxs)("span",{className:(0,r.cn)("flex flex-row items-baseline","large"===m?"gap-1":"gap-0.5"),children:[(0,t.jsx)(n.Skeleton,{show:v,children:(0,t.jsx)("p",{className:(0,r.cn)("text-left font-medium font-sans",N[E],"large"===m?"text-[32px]":"text-[20px]"),children:C?(0,t.jsx)(a.AnimatedNumber,{value:(0,u.formatMetric)(k,T).value}):(0,t.jsx)("span",{className:"text-gray-800",children:"â€“"})})}),(0,t.jsx)("p",{className:(0,r.cn)("align-text-bottom text-gray-800 font-normal font-sans","large"===m?"text-[16px]":"text-[12px]"),children:C?T.unit:null})]}),(0,t.jsx)(w,{distribution:x?.[c]?.distribution,isLoading:v||!C,metricLabel:T.type,showPercentileLabel:"large"===m&&C,size:m,targetPercentile:75,tooltipDelay:e.tooltipDelay})]}):(0,t.jsx)("span",{className:"flex flex-row justify-start",children:(0,t.jsx)("div",{children:(0,t.jsx)(n.Skeleton,{pill:!0,show:v,children:(0,t.jsx)(l.default,{colors:M,showValue:!0,size:"large"===m?"medium":"small",value:C?k:null,children:C?null:(0,u.isDisplayingRecentData)(b)&&S?(0,t.jsx)(s.NoData,{size:"large"===m?24:14}):(0,t.jsx)(i.ChartActivity,{className:"!text-gray-700",color:"gray-700",size:"large"===m?22:14})})})})})}},2057040:e=>{"use strict";e.s({VerticalTabs:()=>x});var t=e.i(6645307),n=e.i(2180936),i=e.i(1654180),r=e.i(7151226),o=e.i(5674541),a=e.i(9443759),l=e.i(6530772),s=e.i(5196122),c=e.i(4513262),u=e.i(2834676),d=e.i(3647066),f=e.i(6832703),p=e.i(9962287);let h={[r.MetricType.FCP]:{p75:1160,p90:0,p95:0,p99:0,distribution:{good:84,improvable:10,poor:6}},[r.MetricType.LCP]:{p75:1240,p90:0,p95:0,p99:0,distribution:{good:90,improvable:3,poor:7}},[r.MetricType.INP]:{p75:268,p90:0,p95:0,p99:0,distribution:{good:72,improvable:26,poor:2}},[r.MetricType.CLS]:{p75:.2,p90:0,p95:0,p99:0,distribution:{good:50,improvable:30,poor:20}},[r.MetricType.FID]:{p75:240,p90:0,p95:0,p99:0,distribution:{good:70,improvable:20,poor:10}},[r.MetricType.TTFB]:{p75:530,p90:0,p95:0,p99:0,distribution:{good:95,improvable:5,poor:0}}};function m(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-row lg:flex-col overflow-hidden rounded-md shadow-md enable-vertical group divide-x lg:divide-x-0 lg:divide-y",children:n})}function g(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-col lg:flex-row p-3 pt-3.5 lg:p-2 lg:pt-2 gap-2 items-stretch lg:items-center bg-background-100",children:n})}function x(e){let{metricDefinitions:i}=e,{EnableModal:a,openEnableModal:s}=(0,f.useOpenEnableModal)(),{supportsPlus:p,hasSpeedInsightsPlus:x,hasSpeedInsightsPlusOrRemainingDays:y,isLoading:j}=(0,u.useSpeedInsightsStatus)(),{set:b,state:S}=(0,c.useSpeedInsightsUrlState)(),{data:w}=(0,d.useTimeseriesWithQueryParams)(),N=(0,l.useMemo)(()=>{if(w)return p?p?{...h,...w.overview}:void 0:w.overview},[p,w]),M=(0,l.useMemo)(()=>!!p&&!y,[y,p]);(0,l.useEffect)(()=>{M&&S.metric!==r.MetricType.RES&&b({metric:r.MetricType.RES})},[M,S.metric,b]);let k=(0,t.jsx)(v,{metric:r.MetricType.RES,metricDefinitions:i,overview:N}),E=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v,{disabled:M,metric:r.MetricType.FCP,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.LCP,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.INP,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.CLS,metricDefinitions:i,overview:N})]}),T=j||!p||x?(0,t.jsxs)(m,{children:[k,E]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m,{children:k}),(0,t.jsxs)(m,{children:[(0,t.jsxs)(g,{children:[(0,t.jsx)("span",{className:"font-medium font-sans flex-1 lg:pl-1",children:"Available in Plus"}),(0,t.jsx)(o.Button,{size:"small",type:"secondary",onClick:s,children:"Upgrade"}),a]}),E]})]});return(0,t.jsx)(n.MobileScrollWrapper,{className:"-mx-6 -my-2 max-w-[100vw] flex-1",contentClassName:"py-2 px-6",children:(0,t.jsxs)("div",{className:"flex flex-row lg:flex-col gap-2",children:[T,(0,t.jsxs)(m,{children:[(0,t.jsx)(v,{disabled:M,metric:r.MetricType.FID,metricDefinitions:i,overview:N}),(0,t.jsx)(v,{disabled:M,metric:r.MetricType.TTFB,metricDefinitions:i,overview:N})]})]})})}function v(e){let{metricDefinitions:n,metric:r,disabled:o,overview:l}=e,{set:d,state:{period:f,device:h}}=(0,c.useSpeedInsightsUrlState)(),{metric:m}=(0,s.useApiParams)(),{hasData:g}=(0,u.useSpeedInsightsStatus)();return(0,t.jsx)(i.Tab,{active:m===r,className:(0,a.cn)("px-4","first-child:rounded-tl last-child:rounded-bl","lg:first-child:rounded-tl-0 lg:last-child:rounded-bl-0"),disabled:o,label:n[r].name,loading:!1,onClick:()=>{d({metric:r})},period:f,value:(0,t.jsx)(p.MetricDisplay,{className:"flex-1",device:h,disabled:o,hasData:g,isLoading:!l,metric:r,metricDefinitions:n,size:"small",tooltipDelay:600,values:l})},r)}},1491904:e=>{e.v({"slide-up":"graph-module__tsJdLq__slide-up",slideUpAnimation:"graph-module__tsJdLq__slideUpAnimation","tooltip-bottom":"graph-module__tsJdLq__tooltip-bottom"})},4080265:e=>{"use strict";e.s({MetricView:()=>oN},4080265);var t=e.i(6645307),n=e.i(2362802),i=e.i(7151226),r=e.i(5535439),o=e.i(1776806),a=e.i(5610210),l=e.i(5163670),s=e.i(889716),c=e.i(8084653),u=e.i(6530772);e.i(9832893);var d=e.i(8433452),f=e.i(2707427),p=e.i(2240289),h=e.i(1766200),m=e.i(7378033),g=e.i(2180936),x=e.i(3018791),v=e.i(7466919);e.i(6234757);var y=e.i(523267),j=e.i(2260777),b=e.i(4355604),S=e.i(1183506),w=e.i(3025798),N=e.i(4513262);let M=e=>{let t=(0,w.stringify)(e),{state:n}=(0,N.useSpeedInsightsUrlState)(),{data:r,error:o,isLoading:a}=(0,b.default)(`/api/v0/speed-insights/breakdown?${t}`,t=>(0,N.canMetricBeFiltered)(e.metric,n)?(0,S.fetchAPI)(t):{breakdown:[],notSupported:!0},{revalidateOnFocus:!1});return{data:r?.breakdown&&!r.notSupported?function(e){let t={[i.Rating.Good]:[],[i.Rating.Improvable]:[],[i.Rating.Poor]:[]};for(let{ratings:n}of e)for(let[e,i]of Object.entries(n))for(let{group:n,value:r,datapoints:o}of i)t[e].push({key:"undefined"===n||""===n?"Unknown":n,values:[o,r]});return t}(r.breakdown):void 0,isLoading:a,isError:!!o}};var k=e.i(5196122),E=e.i(7036948),T=e.i(1844402),C=e.i(2784490),R=e.i(4246457),P=["top","left","transform","className","children","innerRef"];function D(){return(D=Object.assign.bind()).apply(this,arguments)}function _(e){var t=e.top,n=e.left,i=e.transform,r=e.className,o=e.children,a=e.innerRef,l=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,P);return u.default.createElement("g",D({ref:a,className:(0,C.default)("visx-group",r),transform:i||"translate("+(void 0===n?0:n)+", "+(void 0===t?0:t)+")"},l),o)}_.propTypes={top:R.default.number,left:R.default.number,transform:R.default.string,className:R.default.string,children:R.default.node,innerRef:R.default.oneOfType([R.default.string,R.default.func,R.default.object])};var I=Math.PI,A=I/2,L=I/4,O=2*I,F=180/I,z=I/180,$=Math.abs,G=Math.atan,W=Math.atan2,U=Math.cos,H=Math.ceil,B=Math.exp,V=Math.log,q=Math.sin,K=Math.sign||function(e){return e>0?1:e<0?-1:0},Q=Math.sqrt,Z=Math.tan;function J(e){return e>1?A:e<-1?-A:Math.asin(e)}function Y(){}function X(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:Y,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ee(e,t){return 1e-6>$(e[0]-t[0])&&1e-6>$(e[1]-t[1])}function et(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function en(e,t,n,i,r){var o,a,l=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(ee(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd();return}a[0]+=2e-6}l.push(n=new et(i,e,null,!0)),s.push(n.o=new et(i,null,n,!1)),l.push(n=new et(a,e,null,!1)),s.push(n.o=new et(a,null,n,!0))}}),l.length){for(s.sort(t),ei(l),ei(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var c,u,d=l[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(o=(c=f.p.z).length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,p=!p}while(!f.v)r.lineEnd()}}}function ei(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}function er(){this.reset()}er.prototype={constructor:er,reset:function(){this.s=this.t=0},add:function(e){ea(eo,e,this.t),ea(this,eo.s,this.s),this.s?this.t+=eo.t:this.s=eo.t},valueOf:function(){return this.s}};var eo=new er;function ea(e,t,n){var i=e.s=t+n,r=i-t;e.t=t-(i-r)+(n-r)}function el(e){return[W(e[1],e[0]),J(e[2])]}function es(e){var t=e[0],n=e[1],i=U(n);return[i*U(t),i*q(t),q(n)]}function ec(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function eu(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function ed(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ef(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function ep(e){var t=Q(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var eh=new er;function em(e){return $(e[0])<=I?e[0]:K(e[0])*(($(e[0])+I)%O-I)}function eg(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var ex=function(e){var t;return 1===e.length&&(t=e,e=function(e,n){return eg(t(e),n)}),{left:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;0>e(t[o],n)?i=o+1:r=o}return i},right:function(t,n,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){var o=i+r>>>1;e(t[o],n)>0?r=o:i=o+1}return i}}}(eg);ex.right,ex.left;var ev=Array.prototype;function ey(e,t,n){e*=1,t*=1,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((t-e)/n)),o=Array(r);++i<r;)o[i]=e+i*n;return o}function ej(e){for(var t,n,i,r=e.length,o=-1,a=0;++o<r;)a+=e[o].length;for(n=Array(a);--r>=0;)for(t=(i=e[r]).length;--t>=0;)n[--a]=i[t];return n}function eb(e,t,n,i){return function(r){var o,a,l,s=t(r),c=X(),u=t(c),d=!1,f={point:p,lineStart:m,lineEnd:g,polygonStart:function(){f.point=x,f.lineStart=v,f.lineEnd=y,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=g,a=ej(a);var e=function(e,t){var n=em(t),i=t[1],r=q(i),o=[q(n),-U(n),0],a=0,l=0;eh.reset(),1===r?i=A+1e-6:-1===r&&(i=-A-1e-6);for(var s=0,c=e.length;s<c;++s)if(d=(u=e[s]).length)for(var u,d,f=u[d-1],p=em(f),h=f[1]/2+L,m=q(h),g=U(h),x=0;x<d;++x,p=y,m=b,g=S,f=v){var v=u[x],y=em(v),j=v[1]/2+L,b=q(j),S=U(j),w=y-p,N=w>=0?1:-1,M=N*w,k=M>I,E=m*b;if(eh.add(W(E*N*q(M),g*S+E*U(M))),a+=k?w+N*O:w,k^p>=n^y>=n){var T=eu(es(f),es(v));ep(T);var C=eu(o,T);ep(C);var R=(k^w>=0?-1:1)*J(C[2]);(i>R||i===R&&(T[0]||T[1]))&&(l+=k^w>=0?1:-1)}}return(a<-1e-6||a<1e-6&&eh<-1e-6)^1&l}(o,i);a.length?(d||(r.polygonStart(),d=!0),en(a,ew,e,n,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,n){e(t,n)&&r.point(t,n)}function h(e,t){s.point(e,t)}function m(){f.point=h,s.lineStart()}function g(){f.point=p,s.lineEnd()}function x(e,t){l.push([e,t]),u.point(e,t)}function v(){u.lineStart(),l=[]}function y(){x(l[0][0],l[0][1]),u.lineEnd();var e,t,n,i,s=u.clean(),f=c.result(),p=f.length;if(l.pop(),o.push(l),l=null,p){if(1&s){if((t=(n=f[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}return}p>1&&2&s&&f.push(f.pop().concat(f.shift())),a.push(f.filter(eS))}}return f}}function eS(e){return e.length>1}function ew(e,t){return((e=e.x)[0]<0?e[1]-A-1e-6:A-e[1])-((t=t.x)[0]<0?t[1]-A-1e-6:A-t[1])}ev.slice,ev.map;let eN=eb(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var l,s,c,u,d,f,p,h=o>0?I:-I,m=$(o-n);1e-6>$(m-I)?(e.point(n,i=(i+a)/2>0?A:-A),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),e.point(o,i),t=0):r!==h&&m>=I&&(1e-6>$(n-r)&&(n-=1e-6*r),1e-6>$(o-h)&&(o-=1e-6*h),l=n,s=i,c=o,u=a,i=$(p=q(l-c))>1e-6?G((q(s)*(f=U(u))*q(c)-q(u)*(d=U(s))*q(l))/(d*f*p)):(s+u)/2,e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),t=0),e.point(n=o,i=a),r=h},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*A,i.point(-I,r),i.point(0,r),i.point(I,r),i.point(I,0),i.point(I,-r),i.point(0,-r),i.point(-I,-r),i.point(-I,0),i.point(-I,r);else if($(e[0]-t[0])>1e-6){var o=e[0]<t[0]?I:-I;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-I,-A]);function eM(e,t){function n(n,i){return t((n=e(n,i))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function ek(e,t){return[$(e)>I?e+Math.round(-e/O)*O:e,t]}function eE(e,t,n){return(e%=O)?t||n?eM(eC(e),eR(t,n)):eC(e):t||n?eR(t,n):ek}function eT(e){return function(t,n){return[(t+=e)>I?t-O:t<-I?t+O:t,n]}}function eC(e){var t=eT(e);return t.invert=eT(-e),t}function eR(e,t){var n=U(e),i=q(e),r=U(t),o=q(t);function a(e,t){var a=U(t),l=U(e)*a,s=q(e)*a,c=q(t),u=c*n+l*i;return[W(s*r-u*o,l*n-c*i),J(u*r+s*o)]}return a.invert=function(e,t){var a=U(t),l=U(e)*a,s=q(e)*a,c=q(t),u=c*r-s*o;return[W(s*r+c*o,l*n+u*i),J(u*n-l*i)]},a}function eP(e,t){t=es(t),t[0]-=e,ep(t);var n,i=(n=-t[1])>1?0:n<-1?I:Math.acos(n);return((0>-t[2]?-i:i)+O-1e-6)%O}ek.invert=ek;function eD(e){return e}function e_(e){return function(t){var n=new eI;for(var i in e)n[i]=e[i];return n.stream=t,n}}function eI(){}function eA(e,t){e&&eO.hasOwnProperty(e.type)&&eO[e.type](e,t)}eI.prototype={constructor:eI,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var eL={Feature:function(e,t){eA(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)eA(n[i].geometry,t)}},eO={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){eF(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)eF(n[i],t,0)},Polygon:function(e,t){ez(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)ez(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)eA(n[i],t)}};function eF(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function ez(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)eF(e[n],t,1);t.polygonEnd()}function e$(e,t){e&&eL.hasOwnProperty(e.type)?eL[e.type](e,t):eA(e,t)}var eG=1/0,eW=1/0,eU=-1/0,eH=eU;let eB={point:function(e,t){e<eG&&(eG=e),e>eU&&(eU=e),t<eW&&(eW=t),t>eH&&(eH=t)},lineStart:Y,lineEnd:Y,polygonStart:Y,polygonEnd:Y,result:function(){var e=[[eG,eW],[eU,eH]];return eU=eH=-(eW=eG=1/0),e}};function eV(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=i&&e.clipExtent(null),e$(n,e.stream(eB)),t(eB.result()),null!=i&&e.clipExtent(i),e}function eq(e,t,n){return eV(e,function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(r-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function eK(e,t,n){return eq(e,[[0,0],t],n)}function eQ(e,t,n){return eV(e,function(n){var i=+t,r=i/(n[1][0]-n[0][0]),o=(i-r*(n[1][0]+n[0][0]))/2,a=-r*n[0][1];e.scale(150*r).translate([o,a])},n)}function eZ(e,t,n){return eV(e,function(n){var i=+t,r=i/(n[1][1]-n[0][1]),o=-r*n[0][0],a=(i-r*(n[1][1]+n[0][1]))/2;e.scale(150*r).translate([o,a])},n)}var eJ=U(30*z);function eY(e,t){var n;return+t?function(e,t){function n(i,r,o,a,l,s,c,u,d,f,p,h,m,g){var x=c-i,v=u-r,y=x*x+v*v;if(y>4*t&&m--){var j=a+f,b=l+p,S=s+h,w=Q(j*j+b*b+S*S),N=J(S/=w),M=1e-6>$($(S)-1)||1e-6>$(o-d)?(o+d)/2:W(b,j),k=e(M,N),E=k[0],T=k[1],C=E-i,R=T-r,P=v*C-x*R;(P*P/y>t||$((x*C+v*R)/y-.5)>.3||a*f+l*p+s*h<eJ)&&(n(i,r,o,a,l,s,E,T,M,j/=w,b/=w,S,m,g),g.point(E,T),n(E,T,M,j,b,S,c,u,d,f,p,h,m,g))}}return function(t){var i,r,o,a,l,s,c,u,d,f,p,h,m={point:g,lineStart:x,lineEnd:y,polygonStart:function(){t.polygonStart(),m.lineStart=j},polygonEnd:function(){t.polygonEnd(),m.lineStart=x}};function g(n,i){n=e(n,i),t.point(n[0],n[1])}function x(){u=NaN,m.point=v,t.lineStart()}function v(i,r){var o=es([i,r]),a=e(i,r);n(u,d,c,f,p,h,u=a[0],d=a[1],c=i,f=o[0],p=o[1],h=o[2],16,t),t.point(u,d)}function y(){m.point=g,t.lineEnd()}function j(){x(),m.point=b,m.lineEnd=S}function b(e,t){v(i=e,t),r=u,o=d,a=f,l=p,s=h,m.point=v}function S(){n(u,d,c,f,p,h,r,o,i,a,l,s,16,t),m.lineEnd=y,y()}return m}}(e,t):(n=e,e_({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var eX=e_({point:function(e,t){this.stream.point(e*z,t*z)}});function e0(e,t,n,i,r,o){var a=U(o),l=q(o),s=a*e,c=l*e,u=a/e,d=l/e,f=(l*n-a*t)/e,p=(l*t+a*n)/e;function h(e,o){return[s*(e*=i)-c*(o*=r)+t,n-c*e-s*o]}return h.invert=function(e,t){return[i*(u*e-d*t+f),r*(p-d*e-u*t)]},h}function e1(e){return e2(function(){return e})()}function e2(e){var t,n,i,r,o,a,l,s,c,u,d=150,f=480,p=250,h=0,m=0,g=0,x=0,v=0,y=0,j=1,b=1,S=null,w=eN,N=null,M=eD,k=.5;function E(e){return s(e[0]*z,e[1]*z)}function T(e){return(e=s.invert(e[0],e[1]))&&[e[0]*F,e[1]*F]}function C(){var e=e0(d,0,0,j,b,y).apply(null,t(h,m)),i=(y?e0:function(e,t,n,i,r){function o(o,a){return[t+e*(o*=i),n-e*(a*=r)]}return o.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},o})(d,f-e[0],p-e[1],j,b,y);return n=eE(g,x,v),l=eM(t,i),s=eM(n,l),a=eY(l,k),R()}function R(){return c=u=null,E}return E.stream=function(e){var t;return c&&u===e?c:c=eX((t=n,e_({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}}))(w(a(M(u=e)))))},E.preclip=function(e){return arguments.length?(w=e,S=void 0,R()):w},E.postclip=function(e){return arguments.length?(M=e,N=i=r=o=null,R()):M},E.clipAngle=function(e){return arguments.length?(w=+e?function(e){var t=U(e),n=6*z,i=t>0,r=$(t)>1e-6;function o(e,n){return U(e)*U(n)>t}function a(e,n,i){var r=es(e),o=es(n),a=[1,0,0],l=eu(r,o),s=ec(l,l),c=l[0],u=s-c*c;if(!u)return!i&&e;var d=eu(a,l),f=ef(a,t*s/u);ed(f,ef(l,-t*c/u));var p=ec(f,d),h=ec(d,d),m=p*p-h*(ec(f,f)-1);if(!(m<0)){var g=Q(m),x=ef(d,(-p-g)/h);if(ed(x,f),x=el(x),!i)return x;var v,y=e[0],j=n[0],b=e[1],S=n[1];j<y&&(v=y,y=j,j=v);var w=j-y,N=1e-6>$(w-I);if(!N&&S<b&&(v=b,b=S,S=v),N||w<1e-6?N?b+S>0^x[1]<(1e-6>$(x[0]-y)?b:S):b<=x[1]&&x[1]<=S:w>I^(y<=x[0]&&x[0]<=j)){var M=ef(d,(-p+g)/h);return ed(M,f),[x,el(M)]}}}function l(t,n){var r=i?e:I-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return eb(o,function(e){var t,n,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(d,f){var p,h,m=[d,f],g=o(d,f),x=i?g?0:l(d,f):g?l(d+(d<0?I:-I),f):0;!t&&(c=s=g)&&e.lineStart(),g!==s&&(!(h=a(t,m))||ee(t,h)||ee(m,h))&&(m[2]=1),g!==s?(u=0,g?(e.lineStart(),h=a(m,t),e.point(h[0],h[1])):(h=a(t,m),e.point(h[0],h[1],2),e.lineEnd()),t=h):r&&t&&i^g&&!(x&n)&&(p=a(m,t,!0))&&(u=0,i?(e.lineStart(),e.point(p[0][0],p[0][1]),e.point(p[1][0],p[1][1]),e.lineEnd()):(e.point(p[1][0],p[1][1]),e.lineEnd(),e.lineStart(),e.point(p[0][0],p[0][1],3))),!g||t&&ee(t,m)||e.point(m[0],m[1]),t=m,s=g,n=x},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return u|(c&&s)<<1}}},function(t,i,r,o){!function(e,t,n,i,r,o){if(n){var a=U(t),l=q(t),s=i*n;null==r?(r=t+i*O,o=t-s/2):(r=eP(a,r),o=eP(a,o),(i>0?r<o:r>o)&&(r+=i*O));for(var c,u=r;i>0?u>o:u<o;u-=s)c=el([a,-l*U(u),-l*q(u)]),e.point(c[0],c[1])}}(o,e,n,r,t,i)},i?[0,-e]:[-I,e-I])}(S=e*z):(S=null,eN),R()):S*F},E.clipExtent=function(e){return arguments.length?(M=null==e?(N=i=r=o=null,eD):function(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,l,c){var u=0,d=0;if(null==r||(u=a(r,l))!==(d=a(o,l))||0>s(r,o)^l>0)do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+l+4)%4)!==d)else c.point(o[0],o[1])}function a(i,r){return 1e-6>$(i[0]-e)?r>0?0:3:1e-6>$(i[0]-n)?r>0?2:1:1e-6>$(i[1]-t)?+(r>0):r>0?3:2}function l(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var s,c,u,d,f,p,h,m,g,x,v,y=a,j=X(),b={point:S,lineStart:function(){b.point=w,c&&c.push(u=[]),x=!0,g=!1,h=m=NaN},lineEnd:function(){s&&(w(d,f),p&&g&&j.rejoin(),s.push(j.result())),b.point=S,g&&y.lineEnd()},polygonStart:function(){y=j,s=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var o,a,l=c[n],s=1,u=l.length,d=l[0],f=d[0],p=d[1];s<u;++s)o=f,a=p,f=(d=l[s])[0],p=d[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(e-o)&&++t:p<=i&&(f-o)*(i-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,r=(s=ej(s)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&en(s,l,t,o,a),a.polygonEnd()),y=a,s=c=u=null}};function S(e,t){r(e,t)&&y.point(e,t)}function w(o,a){var l=r(o,a);if(c&&u.push([o,a]),x)d=o,f=a,p=l,x=!1,l&&(y.lineStart(),y.point(o,a));else if(l&&g)y.point(o,a);else{var s=[h=Math.max(-1e9,Math.min(1e9,h)),m=Math.max(-1e9,Math.min(1e9,m))],j=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,n,i,r,o){var a,l=e[0],s=e[1],c=t[0],u=t[1],d=0,f=1,p=c-l,h=u-s;if(a=n-l,!p&&a>0)return;if(a/=p,p<0){if(a<d)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>d&&(d=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<f&&(f=a)}if(a=i-s,h||!(a>0)){if(a/=h,h<0){if(a<d)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>d&&(d=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>d&&(d=a)}else if(h>0){if(a<d)return;a<f&&(f=a)}return d>0&&(e[0]=l+d*p,e[1]=s+d*h),f<1&&(t[0]=l+f*p,t[1]=s+f*h),!0}}}}(s,j,e,t,n,i)?l&&(y.lineStart(),y.point(o,a),v=!1):(g||(y.lineStart(),y.point(s[0],s[1])),y.point(j[0],j[1]),l||y.lineEnd(),v=!1)}h=o,m=a,g=l}return b}}(N=+e[0][0],i=+e[0][1],r=+e[1][0],o=+e[1][1]),R()):null==N?null:[[N,i],[r,o]]},E.scale=function(e){return arguments.length?(d=+e,C()):d},E.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],C()):[f,p]},E.center=function(e){return arguments.length?(h=e[0]%360*z,m=e[1]%360*z,C()):[h*F,m*F]},E.rotate=function(e){return arguments.length?(g=e[0]%360*z,x=e[1]%360*z,v=e.length>2?e[2]%360*z:0,C()):[g*F,x*F,v*F]},E.angle=function(e){return arguments.length?(y=e%360*z,C()):y*F},E.reflectX=function(e){return arguments.length?(j=e?-1:1,C()):j<0},E.reflectY=function(e){return arguments.length?(b=e?-1:1,C()):b<0},E.precision=function(e){return arguments.length?(a=eY(l,k=e*e),R()):Q(k)},E.fitExtent=function(e,t){return eq(E,e,t)},E.fitSize=function(e,t){return eK(E,e,t)},E.fitWidth=function(e,t){return eQ(E,e,t)},E.fitHeight=function(e,t){return eZ(E,e,t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&T,C()}}function e5(e,t){return[U(t)*q(e),q(t)]}function e6(e,t){var n=q(e),i=(n+q(t))/2;if(1e-6>$(i)){var r=U(e);function o(e,t){return[e*r,q(t)/r]}return o.invert=function(e,t){return[e/r,J(t*r)]},o}var a=1+n*(2*i-n),l=Q(a)/i;function s(e,t){var n=Q(a-2*i*q(t))/i;return[n*q(e*=i),l-n*U(e)]}return s.invert=function(e,t){var n=l-t,r=W(e,$(n))*K(n);return n*i<0&&(r-=I*K(e)*K(n)),[r/i,J((a-(e*e+n*n)*i*i)/(2*i))]},s}function e3(){var e,t,n,i;return(e=0,t=I/3,(i=(n=e2(e6))(e,t)).parallels=function(i){return arguments.length?n(e=i[0]*z,t=i[1]*z):[e*F,t*F]},i).scale(155.424).center([0,33.6442])}function e7(){return e3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function e9(e,t){return[e,V(Z((A+t)/2))]}function e4(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}e5.invert=function(e,t){var n=Q(e*e+t*t),i=J(n),r=q(i);return[W(e*r,n*U(i)),J(n&&t*r/n)]},e9.invert=function(e,t){return[e,2*G(B(t))-A]},e4.invert=function(e,t){var n,i=t,r=25;do{var o=i*i,a=o*o;i-=n=(i*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.045255+a*(-.311325+.259866*o-.005916*11*a)))}while($(n)>1e-6&&--r>0)return[e/(.8707+(o=i*i)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),i]};var e8=Q(3)/2;function te(e,t){var n=J(e8*q(t)),i=n*n,r=i*i*i;return[e*U(n)/(e8*(1.340264+-.24331799999999998*i+r*(.0062510000000000005+.034164*i))),n*(1.340264+-.081106*i+r*(893e-6+.003796*i))]}te.invert=function(e,t){for(var n,i,r=t,o=r*r,a=o*o*o,l=0;l<12&&(i=r*(1.340264+-.081106*o+a*(893e-6+.003796*o))-t,r-=n=i/(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o)),a=(o=r*r)*o*o,!(1e-12>$(n)));++l);return[e8*e*(1.340264+-.24331799999999998*o+a*(.0062510000000000005+.034164*o))/U(r),J(q(r)/e8)]};var tt,tn,ti,tr,to=new er,ta=new er,tl={point:Y,lineStart:Y,lineEnd:Y,polygonStart:function(){tl.lineStart=ts,tl.lineEnd=td},polygonEnd:function(){tl.lineStart=tl.lineEnd=tl.point=Y,to.add($(ta)),ta.reset()},result:function(){var e=to/2;return to.reset(),e}};function ts(){tl.point=tc}function tc(e,t){tl.point=tu,tt=ti=e,tn=tr=t}function tu(e,t){ta.add(tr*e-ti*t),ti=e,tr=t}function td(){tu(tt,tn)}var tf,tp,th,tm,tg=0,tx=0,tv=0,ty=0,tj=0,tb=0,tS=0,tw=0,tN=0,tM={point:tk,lineStart:tE,lineEnd:tR,polygonStart:function(){tM.lineStart=tP,tM.lineEnd=tD},polygonEnd:function(){tM.point=tk,tM.lineStart=tE,tM.lineEnd=tR},result:function(){var e=tN?[tS/tN,tw/tN]:tb?[ty/tb,tj/tb]:tv?[tg/tv,tx/tv]:[NaN,NaN];return tg=tx=tv=ty=tj=tb=tS=tw=tN=0,e}};function tk(e,t){tg+=e,tx+=t,++tv}function tE(){tM.point=tT}function tT(e,t){tM.point=tC,tk(th=e,tm=t)}function tC(e,t){var n=e-th,i=t-tm,r=Q(n*n+i*i);ty+=r*(th+e)/2,tj+=r*(tm+t)/2,tb+=r,tk(th=e,tm=t)}function tR(){tM.point=tk}function tP(){tM.point=t_}function tD(){tI(tf,tp)}function t_(e,t){tM.point=tI,tk(tf=th=e,tp=tm=t)}function tI(e,t){var n=e-th,i=t-tm,r=Q(n*n+i*i);ty+=r*(th+e)/2,tj+=r*(tm+t)/2,tb+=r,tS+=(r=tm*e-th*t)*(th+e),tw+=r*(tm+t),tN+=3*r,tk(th=e,tm=t)}function tA(e){this._context=e}tA.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,O)}},result:Y};var tL,tO,tF,tz,t$,tG=new er,tW={point:Y,lineStart:function(){tW.point=tU},lineEnd:function(){tL&&tH(tO,tF),tW.point=Y},polygonStart:function(){tL=!0},polygonEnd:function(){tL=null},result:function(){var e=+tG;return tG.reset(),e}};function tU(e,t){tW.point=tH,tO=tz=e,tF=t$=t}function tH(e,t){tz-=e,t$-=t,tG.add(Q(tz*tz+t$*t$)),tz=e,t$=t}function tB(){this._string=[]}function tV(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function tq(e,t,n){var i=ey(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[e,t]})}}function tK(e,t,n){var i=ey(e,t-1e-6,n).concat(t);return function(e){return i.map(function(t){return[t,e]})}}tB.prototype={_radius:4.5,_circle:tV(4.5),pointRadius:function(e){return(e*=1)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=tV(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(!this._string.length)return null;var e=this._string.join("");return this._string=[],e}};var tQ=["graticule","lines","outline","extent","extentMajor","extentMinor","step","stepMajor","stepMinor","precision","children"];function tZ(){return(tZ=Object.assign.bind()).apply(this,arguments)}function tJ(e){var t=e.graticule,n=e.lines,i=e.outline,r=e.extent,o=e.extentMajor,a=e.extentMinor,l=e.step,s=e.stepMajor,c=e.stepMinor,d=e.precision,f=e.children,p=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,tQ),h=function(){var e,t,n,i,r,o,a,l,s,c,u,d,f=10,p=10,h=90,m=360,g=2.5;function x(){return{type:"MultiLineString",coordinates:v()}}function v(){return ey(H(i/h)*h,n,h).map(u).concat(ey(H(l/m)*m,a,m).map(d)).concat(ey(H(t/f)*f,e,f).filter(function(e){return $(e%h)>1e-6}).map(s)).concat(ey(H(o/p)*p,r,p).filter(function(e){return $(e%m)>1e-6}).map(c))}return x.lines=function(){return v().map(function(e){return{type:"LineString",coordinates:e}})},x.outline=function(){return{type:"Polygon",coordinates:[u(i).concat(d(a).slice(1),u(n).reverse().slice(1),d(l).reverse().slice(1))]}},x.extent=function(e){return arguments.length?x.extentMajor(e).extentMinor(e):x.extentMinor()},x.extentMajor=function(e){return arguments.length?(i=+e[0][0],n=+e[1][0],l=+e[0][1],a=+e[1][1],i>n&&(e=i,i=n,n=e),l>a&&(e=l,l=a,a=e),x.precision(g)):[[i,l],[n,a]]},x.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],r=+n[1][1],t>e&&(n=t,t=e,e=n),o>r&&(n=o,o=r,r=n),x.precision(g)):[[t,o],[e,r]]},x.step=function(e){return arguments.length?x.stepMajor(e).stepMinor(e):x.stepMinor()},x.stepMajor=function(e){return arguments.length?(h=+e[0],m=+e[1],x):[h,m]},x.stepMinor=function(e){return arguments.length?(f=+e[0],p=+e[1],x):[f,p]},x.precision=function(f){return arguments.length?(g=+f,s=tq(o,r,90),c=tK(t,e,g),u=tq(l,a,90),d=tK(i,n,g),x):g},x.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}();return(r&&h.extent(r),o&&h.extentMajor(o),a&&h.extentMinor(a),l&&h.step(l),s&&h.stepMajor(s),c&&h.stepMinor(c),d&&h.precision(d),f)?u.default.createElement(u.default.Fragment,null,f({graticule:h})):u.default.createElement(_,{className:"visx-geo-graticule"},t&&u.default.createElement("path",tZ({d:t(h()),fill:"none",stroke:"black"},p)),n&&h.lines().map(function(e,t){return u.default.createElement("g",{key:t},u.default.createElement("path",tZ({d:n(e),fill:"none",stroke:"black"},p)))}),i&&u.default.createElement("path",tZ({d:i(h.outline()),fill:"none",stroke:"black"},p)))}tJ.propTypes={graticule:T.default.func,lines:T.default.func,outline:T.default.func,children:T.default.func,precision:T.default.number};var tY=["data","projection","projectionFunc","clipAngle","clipExtent","scale","translate","center","rotate","precision","fitExtent","fitSize","centroid","graticule","graticuleLines","graticuleOutline","className","innerRef","pointRadius","children"];function tX(){return(tX=Object.assign.bind()).apply(this,arguments)}var t0={orthographic:function(){return e1(e5).scale(249.5).clipAngle(90.000001)},albers:function(){return e7()},albersUsa:function(){return function(){var e,t,n,i,r,o,a=e7(),l=e3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=e3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(e,t){o=[e,t]}};function u(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(i.point(t,a),o)||(r.point(t,a),o)}function d(){return e=t=null,u}return u.invert=function(e){var t=a.scale(),n=a.translate(),i=(e[0]-n[0])/t,r=(e[1]-n[1])/t;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?l:r>=.166&&r<.234&&i>=-.214&&i<-.115?s:a).invert(e)},u.stream=function(n){var i,r;return e&&t===n?e:(r=(i=[a.stream(t=n),l.stream(n),s.stream(n)]).length,e={point:function(e,t){for(var n=-1;++n<r;)i[n].point(e,t)},sphere:function(){for(var e=-1;++e<r;)i[e].sphere()},lineStart:function(){for(var e=-1;++e<r;)i[e].lineStart()},lineEnd:function(){for(var e=-1;++e<r;)i[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<r;)i[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<r;)i[e].polygonEnd()}})},u.precision=function(e){return arguments.length?(a.precision(e),l.precision(e),s.precision(e),d()):a.precision()},u.scale=function(e){return arguments.length?(a.scale(e),l.scale(.35*e),s.scale(e),u.translate(a.translate())):a.scale()},u.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],u=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,u-.238*t],[o+.455*t,u+.238*t]]).stream(c),i=l.translate([o-.307*t,u+.201*t]).clipExtent([[o-.425*t+1e-6,u+.12*t+1e-6],[o-.214*t-1e-6,u+.234*t-1e-6]]).stream(c),r=s.translate([o-.205*t,u+.212*t]).clipExtent([[o-.214*t+1e-6,u+.166*t+1e-6],[o-.115*t-1e-6,u+.234*t-1e-6]]).stream(c),d()},u.fitExtent=function(e,t){return eq(u,e,t)},u.fitSize=function(e,t){return eK(u,e,t)},u.fitWidth=function(e,t){return eQ(u,e,t)},u.fitHeight=function(e,t){return eZ(u,e,t)},u.scale(1070)}()},mercator:function(){return(function(e){var t,n,i,r=e1(e),o=r.center,a=r.scale,l=r.translate,s=r.clipExtent,c=null;function u(){var o=I*a(),l=r((function(e){function t(t){return t=e(t[0]*z,t[1]*z),t[0]*=F,t[1]*=F,t}return e=eE(e[0]*z,e[1]*z,e.length>2?e[2]*z:0),t.invert=function(t){return t=e.invert(t[0]*z,t[1]*z),t[0]*=F,t[1]*=F,t},t})(r.rotate()).invert([0,0]));return s(null==c?[[l[0]-o,l[1]-o],[l[0]+o,l[1]+o]]:e===e9?[[Math.max(l[0]-o,c),t],[Math.min(l[0]+o,n),i]]:[[c,Math.max(l[1]-o,t)],[n,Math.min(l[1]+o,i)]])}return r.scale=function(e){return arguments.length?(a(e),u()):a()},r.translate=function(e){return arguments.length?(l(e),u()):l()},r.center=function(e){return arguments.length?(o(e),u()):o()},r.clipExtent=function(e){return arguments.length?(null==e?c=t=n=i=null:(c=+e[0][0],t=+e[0][1],n=+e[1][0],i=+e[1][1]),u()):null==c?null:[[c,t],[n,i]]},u()})(e9).scale(961/O)},naturalEarth:function(){return e1(e4).scale(175.295)},equalEarth:function(){return e1(te).scale(177.158)}};function t1(e){var t=e.data,n=e.projection,i=void 0===n?"mercator":n,r=e.projectionFunc,o=e.clipAngle,a=e.clipExtent,l=e.scale,s=e.translate,c=e.center,d=e.rotate,f=e.precision,p=e.fitExtent,h=e.fitSize,m=e.centroid,g=e.graticule,x=e.graticuleLines,v=e.graticuleOutline,y=e.className,j=e.innerRef,b=e.pointRadius,S=e.children,w=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,tY),N=("string"==typeof i?t0[i]:i)();o&&N.clipAngle&&N.clipAngle(o),a&&N.clipExtent&&N.clipExtent(a),l&&N.scale&&N.scale(l),s&&N.translate&&N.translate(s),c&&N.center&&N.center(c),d&&N.rotate&&N.rotate(d),f&&N.precision&&N.precision(f),p&&N.fitExtent&&N.fitExtent.apply(N,p),h&&N.fitSize&&N.fitSize.apply(N,h);var M=(function(e,t){var n,i,r=4.5;function o(e){return e&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),e$(e,n(i))),i.result()}return o.area=function(e){return e$(e,n(tl)),tl.result()},o.measure=function(e){return e$(e,n(tW)),tW.result()},o.bounds=function(e){return e$(e,n(eB)),eB.result()},o.centroid=function(e){return e$(e,n(tM)),tM.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,eD):(e=t).stream,o):e},o.context=function(e){return arguments.length?(i=null==e?(t=null,new tB):new tA(t=e),"function"!=typeof r&&i.pointRadius(r),o):t},o.pointRadius=function(e){return arguments.length?(r="function"==typeof e?e:(i.pointRadius(+e),+e),o):r},o.projection(e).context(t)})().projection(N);b&&M.pointRadius(b);var k=t.map(function(e,t){return{feature:e,type:i,projection:N,index:t,centroid:M.centroid(e),path:M(e)}});return S?u.default.createElement(u.default.Fragment,null,S({path:M,features:k,projection:N})):u.default.createElement(_,{className:"visx-geo"},g&&!g.foreground&&u.default.createElement(tJ,tX({graticule:function(e){return M(e)||""}},g)),x&&!x.foreground&&u.default.createElement(tJ,tX({lines:function(e){return M(e)||""}},x)),v&&!v.foreground&&u.default.createElement(tJ,tX({outline:function(e){return M(e)||""}},v)),k.map(function(e,t){return u.default.createElement("g",{key:i+"-"+t},u.default.createElement("path",tX({className:(0,C.default)("visx-geo-"+i,y),d:e.path||"",ref:null==j?void 0:j(e,t)},w)),null==m?void 0:m(e.centroid,e))}),null==r?void 0:r(N),(null==g?void 0:g.foreground)&&u.default.createElement(tJ,tX({graticule:function(e){return M(e)||""}},g)),(null==x?void 0:x.foreground)&&u.default.createElement(tJ,tX({lines:function(e){return M(e)||""}},x)),(null==v?void 0:v.foreground)&&u.default.createElement(tJ,tX({outline:function(e){return M(e)||""}},v)))}function t2(e){return u.default.createElement(t1,e)}t1.propTypes={data:T.default.array.isRequired,projectionFunc:T.default.func,clipAngle:T.default.number,scale:T.default.number,precision:T.default.number,centroid:T.default.func,className:T.default.string,children:T.default.func,innerRef:T.default.func,pointRadius:T.default.number};var t5=e.i(1532957);e.i(1524216);var t6=e.i(3697175);function t3(){return(t3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function t7(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function t9(e,t){return(t9=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function t4(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t8={width:"100%",height:"100%"},ne=e.i(2320147);function nt(){}function nn(){var e,t=[];return{point:function(t,n,i){e.push([t,n,i])},lineStart:function(){t.push(e=[])},lineEnd:nt,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}var ni=Math.PI,nr=ni/2,no=ni/4,na=2*ni,nl=180/ni,ns=ni/180,nc=Math.abs,nu=Math.atan,nd=Math.atan2,nf=Math.cos,np=Math.sin,nh=Math.sign||function(e){return e>0?1:e<0?-1:0},nm=Math.sqrt;function ng(e){return e>1?nr:e<-1?-nr:Math.asin(e)}function nx(e,t){return 1e-6>nc(e[0]-t[0])&&1e-6>nc(e[1]-t[1])}function nv(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function ny(e,t,n,i,r){var o,a,l=[],s=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n,i=e[0],a=e[t];if(nx(i,a)){if(!i[2]&&!a[2]){for(r.lineStart(),o=0;o<t;++o)r.point((i=e[o])[0],i[1]);r.lineEnd();return}a[0]+=2e-6}l.push(n=new nv(i,e,null,!0)),s.push(n.o=new nv(i,null,n,!1)),l.push(n=new nv(a,e,null,!1)),s.push(n.o=new nv(a,null,n,!0))}}),l.length){for(s.sort(t),nj(l),nj(s),o=0,a=s.length;o<a;++o)s[o].e=n=!n;for(var c,u,d=l[0];;){for(var f=d,p=!0;f.v;)if((f=f.n)===d)return;c=f.z,r.lineStart();do{if(f.v=f.o.v=!0,f.e){if(p)for(o=0,a=c.length;o<a;++o)r.point((u=c[o])[0],u[1]);else i(f.x,f.n.x,1,r);f=f.n}else{if(p)for(o=(c=f.p.z).length-1;o>=0;--o)r.point((u=c[o])[0],u[1]);else i(f.x,f.p.x,-1,r);f=f.p}c=(f=f.o).z,p=!p}while(!f.v)r.lineEnd()}}}function nj(e){if(t=e.length){for(var t,n,i=0,r=e[0];++i<t;)r.n=n=e[i],n.p=r,r=n;r.n=n=e[0],n.p=r}}class nb{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){let t=this._partials,n=0;for(let i=0;i<this._n&&i<32;i++){let r=t[i],o=e+r,a=Math.abs(e)<Math.abs(r)?e-(o-r):r-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){let e=this._partials,t=this._n,n,i,r,o=0;if(t>0){for(o=e[--t];t>0&&(o=(n=o)+(i=e[--t]),!(r=i-(o-n))););t>0&&(r<0&&e[t-1]<0||r>0&&e[t-1]>0)&&(n=o+(i=2*r),i==n-o&&(o=n))}return o}}function nS(e){return[nd(e[1],e[0]),ng(e[2])]}function nw(e){var t=e[0],n=e[1],i=nf(n);return[i*nf(t),i*np(t),np(n)]}function nN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nM(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function nk(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function nE(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function nT(e){var t=nm(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function nC(e){return nc(e[0])<=ni?e[0]:nh(e[0])*((nc(e[0])+ni)%na-ni)}function nR(e){return Array.from(function*(e){for(let t of e)yield*t}(e))}function nP(e,t,n,i){return function(r){var o,a,l,s=t(r),c=nn(),u=t(c),d=!1,f={point:p,lineStart:m,lineEnd:g,polygonStart:function(){f.point=x,f.lineStart=v,f.lineEnd=y,a=[],o=[]},polygonEnd:function(){f.point=p,f.lineStart=m,f.lineEnd=g,a=nR(a);var e=function(e,t){var n=nC(t),i=t[1],r=np(i),o=[np(n),-nf(n),0],a=0,l=0,s=new nb;1===r?i=nr+1e-6:-1===r&&(i=-nr-1e-6);for(var c=0,u=e.length;c<u;++c)if(f=(d=e[c]).length)for(var d,f,p=d[f-1],h=nC(p),m=p[1]/2+no,g=np(m),x=nf(m),v=0;v<f;++v,h=j,g=S,x=w,p=y){var y=d[v],j=nC(y),b=y[1]/2+no,S=np(b),w=nf(b),N=j-h,M=N>=0?1:-1,k=M*N,E=k>ni,T=g*S;if(s.add(nd(T*M*np(k),x*w+T*nf(k))),a+=E?N+M*na:N,E^h>=n^j>=n){var C=nM(nw(p),nw(y));nT(C);var R=nM(o,C);nT(R);var P=(E^N>=0?-1:1)*ng(R[2]);(i>P||i===P&&(C[0]||C[1]))&&(l+=E^N>=0?1:-1)}}return(a<-1e-6||a<1e-6&&s<-1e-12)^1&l}(o,i);a.length?(d||(r.polygonStart(),d=!0),ny(a,n_,e,n,r)):e&&(d||(r.polygonStart(),d=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),d&&(r.polygonEnd(),d=!1),a=o=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(t,n){e(t,n)&&r.point(t,n)}function h(e,t){s.point(e,t)}function m(){f.point=h,s.lineStart()}function g(){f.point=p,s.lineEnd()}function x(e,t){l.push([e,t]),u.point(e,t)}function v(){u.lineStart(),l=[]}function y(){x(l[0][0],l[0][1]),u.lineEnd();var e,t,n,i,s=u.clean(),f=c.result(),p=f.length;if(l.pop(),o.push(l),l=null,p){if(1&s){if((t=(n=f[0]).length-1)>0){for(d||(r.polygonStart(),d=!0),r.lineStart(),e=0;e<t;++e)r.point((i=n[e])[0],i[1]);r.lineEnd()}return}p>1&&2&s&&f.push(f.pop().concat(f.shift())),a.push(f.filter(nD))}}return f}}function nD(e){return e.length>1}function n_(e,t){return((e=e.x)[0]<0?e[1]-nr-1e-6:nr-e[1])-((t=t.x)[0]<0?t[1]-nr-1e-6:nr-t[1])}let nI=nP(function(){return!0},function(e){var t,n=NaN,i=NaN,r=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var l,s,c,u,d,f,p,h=o>0?ni:-ni,m=nc(o-n);1e-6>nc(m-ni)?(e.point(n,i=(i+a)/2>0?nr:-nr),e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),e.point(o,i),t=0):r!==h&&m>=ni&&(1e-6>nc(n-r)&&(n-=1e-6*r),1e-6>nc(o-h)&&(o-=1e-6*h),l=n,s=i,c=o,u=a,i=nc(p=np(l-c))>1e-6?nu((np(s)*(f=nf(u))*np(c)-np(u)*(d=nf(s))*np(l))/(d*f*p)):(s+u)/2,e.point(r,i),e.lineEnd(),e.lineStart(),e.point(h,i),t=0),e.point(n=o,i=a),r=h},lineEnd:function(){e.lineEnd(),n=i=NaN},clean:function(){return 2-t}}},function(e,t,n,i){var r;if(null==e)r=n*nr,i.point(-ni,r),i.point(0,r),i.point(ni,r),i.point(ni,0),i.point(ni,-r),i.point(0,-r),i.point(-ni,-r),i.point(-ni,0),i.point(-ni,r);else if(nc(e[0]-t[0])>1e-6){var o=e[0]<t[0]?ni:-ni;r=n*o/2,i.point(-o,r),i.point(0,r),i.point(o,r)}else i.point(t[0],t[1])},[-ni,-nr]);function nA(e,t){function n(n,i){return t((n=e(n,i))[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,i){return(n=t.invert(n,i))&&e.invert(n[0],n[1])}),n}function nL(e,t){return nc(e)>ni&&(e-=Math.round(e/na)*na),[e,t]}function nO(e){return function(t,n){return nc(t+=e)>ni&&(t-=Math.round(t/na)*na),[t,n]}}function nF(e){var t=nO(e);return t.invert=nO(-e),t}function nz(e,t){var n=nf(e),i=np(e),r=nf(t),o=np(t);function a(e,t){var a=nf(t),l=nf(e)*a,s=np(e)*a,c=np(t),u=c*n+l*i;return[nd(s*r-u*o,l*n-c*i),ng(u*r+s*o)]}return a.invert=function(e,t){var a=nf(t),l=nf(e)*a,s=np(e)*a,c=np(t),u=c*r-s*o;return[nd(s*r+c*o,l*n+u*i),ng(u*n-l*i)]},a}function n$(e,t){t=nw(t),t[0]-=e,nT(t);var n,i=(n=-t[1])>1?0:n<-1?ni:Math.acos(n);return((0>-t[2]?-i:i)+na-1e-6)%na}nL.invert=nL;let nG=e=>e;function nW(e){return function(t){var n=new nU;for(var i in e)n[i]=e[i];return n.stream=t,n}}function nU(){}function nH(e,t){e&&nV.hasOwnProperty(e.type)&&nV[e.type](e,t)}nU.prototype={constructor:nU,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var nB={Feature:function(e,t){nH(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)nH(n[i].geometry,t)}},nV={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){nq(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)nq(n[i],t,0)},Polygon:function(e,t){nK(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)nK(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)nH(n[i],t)}};function nq(e,t,n){var i,r=-1,o=e.length-n;for(t.lineStart();++r<o;)i=e[r],t.point(i[0],i[1],i[2]);t.lineEnd()}function nK(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)nq(e[n],t,1);t.polygonEnd()}var nQ=1/0,nZ=1/0,nJ=-1/0,nY=nJ;let nX={point:function(e,t){e<nQ&&(nQ=e),e>nJ&&(nJ=e),t<nZ&&(nZ=t),t>nY&&(nY=t)},lineStart:nt,lineEnd:nt,polygonStart:nt,polygonEnd:nt,result:function(){var e=[[nQ,nZ],[nJ,nY]];return nJ=nY=-(nZ=nQ=1/0),e}};function n0(e,t,n){var i,r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),i=e.stream(nX),n&&nB.hasOwnProperty(n.type)?nB[n.type](n,i):nH(n,i),t(nX.result()),null!=r&&e.clipExtent(r),e}function n1(e,t,n){return n0(e,function(n){var i=t[1][0]-t[0][0],r=t[1][1]-t[0][1],o=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),a=+t[0][0]+(i-o*(n[1][0]+n[0][0]))/2,l=+t[0][1]+(r-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,l])},n)}var n2=nf(30*ns);function n5(e,t){var n;return+t?function(e,t){function n(i,r,o,a,l,s,c,u,d,f,p,h,m,g){var x=c-i,v=u-r,y=x*x+v*v;if(y>4*t&&m--){var j=a+f,b=l+p,S=s+h,w=nm(j*j+b*b+S*S),N=ng(S/=w),M=1e-6>nc(nc(S)-1)||1e-6>nc(o-d)?(o+d)/2:nd(b,j),k=e(M,N),E=k[0],T=k[1],C=E-i,R=T-r,P=v*C-x*R;(P*P/y>t||nc((x*C+v*R)/y-.5)>.3||a*f+l*p+s*h<n2)&&(n(i,r,o,a,l,s,E,T,M,j/=w,b/=w,S,m,g),g.point(E,T),n(E,T,M,j,b,S,c,u,d,f,p,h,m,g))}}return function(t){var i,r,o,a,l,s,c,u,d,f,p,h,m={point:g,lineStart:x,lineEnd:y,polygonStart:function(){t.polygonStart(),m.lineStart=j},polygonEnd:function(){t.polygonEnd(),m.lineStart=x}};function g(n,i){n=e(n,i),t.point(n[0],n[1])}function x(){u=NaN,m.point=v,t.lineStart()}function v(i,r){var o=nw([i,r]),a=e(i,r);n(u,d,c,f,p,h,u=a[0],d=a[1],c=i,f=o[0],p=o[1],h=o[2],16,t),t.point(u,d)}function y(){m.point=g,t.lineEnd()}function j(){x(),m.point=b,m.lineEnd=S}function b(e,t){v(i=e,t),r=u,o=d,a=f,l=p,s=h,m.point=v}function S(){n(u,d,c,f,p,h,r,o,i,a,l,s,16,t),m.lineEnd=y,y()}return m}}(e,t):(n=e,nW({point:function(e,t){e=n(e,t),this.stream.point(e[0],e[1])}}))}var n6=nW({point:function(e,t){this.stream.point(e*ns,t*ns)}});function n3(e,t,n,i,r,o){if(!o){function a(o,a){return[t+e*(o*=i),n-e*(a*=r)]}return a.invert=function(o,a){return[(o-t)/e*i,(n-a)/e*r]},a}var l=nf(o),s=np(o),c=l*e,u=s*e,d=l/e,f=s/e,p=(s*n-l*t)/e,h=(s*t+l*n)/e;function m(e,o){return[c*(e*=i)-u*(o*=r)+t,n-u*e-c*o]}return m.invert=function(e,t){return[i*(d*e-f*t+p),r*(h-f*e-d*t)]},m}var n7=Math.abs,n9=Math.PI;function n4(e){return e>0?Math.sqrt(e):0}function n8(e,t){var n=e*e,i=t*t;return[e*(1-.162388*i)*(.87-952426e-9*n*n),t*(1+i/12)]}n4(2),n4(n9),n8.invert=function(e,t){var n,i=e,r=t,o=50;do{var a=r*r;r-=n=(r*(1+a/12)-t)/(1+a/4)}while(n7(n)>1e-6&&--o>0)o=50,e/=1-.162388*a;do{var l=(l=i*i)*l;i-=n=(i*(.87-952426e-9*l)-e)/(.87-.00476213*l)}while(n7(n)>1e-6&&--o>0)return[i,r]};var ie=e.i(458007),it=e.i(9705230);function ii(e){return function(t,n){var i=e((t=(0,ie.hsl)(t)).h,(n=(0,ie.hsl)(n)).h),r=(0,it.default)(t.s,n.s),o=(0,it.default)(t.l,n.l),a=(0,it.default)(t.opacity,n.opacity);return function(e){return t.h=i(e),t.s=r(e),t.l=o(e),t.opacity=a(e),t+""}}}let ir=ii(it.hue);ii(it.default);var io=e.i(1435483),io=io,ia=e.i(7179748);function il(e){return e}function is(e,t){var n=t.id,i=t.bbox,r=null==t.properties?{}:t.properties,o=function(e,t){var n=function(e){if(null==e)return il;var t,n,i=e.scale[0],r=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,l){l||(t=n=0);var s=2,c=e.length,u=Array(c);for(u[0]=(t+=e[0])*i+o,u[1]=(n+=e[1])*r+a;s<c;)u[s]=e[s],++s;return u}}(e.transform),i=e.arcs;function r(e){return n(e)}function o(e){for(var t=[],r=0,o=e.length;r<o;++r)!function(e,t){t.length&&t.pop();for(var r=i[e<0?~e:e],o=0,a=r.length;o<a;++o)t.push(n(r[o],o));e<0&&function(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}(t,a)}(e[r],t);return t.length<2&&t.push(t[0]),t}function a(e){for(var t=o(e);t.length<4;)t.push(t[0]);return t}function l(e){return e.map(a)}return function e(t){var n,i=t.type;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(e)};case"Point":n=r(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(r);break;case"LineString":n=o(t.arcs);break;case"MultiLineString":n=t.arcs.map(o);break;case"Polygon":n=l(t.arcs);break;case"MultiPolygon":n=t.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(t)}(e,t);return null==n&&null==i?{type:"Feature",properties:r,geometry:o}:null==i?{type:"Feature",id:n,properties:r,geometry:o}:{type:"Feature",id:n,bbox:i,properties:r,geometry:o}}var ic=e.i(5547716),iu=e.i(6014112),id=e.i(9221992),ip=e.i(1235226),ih=e.i(4270849),im=e.i(6895406);let ig=(0,im.withNewIcon)(`<path d="M8.5 10.75C8.5 11.7165 7.7165 12.5 6.75 12.5C5.7835 12.5 5 11.7165 5 10.75C5 9.7835 5.7835 9 6.75 9C7.7165 9 8.5 9.7835 8.5 10.75Z" fill="currentColor"/>
  <path opacity="0.25" fill-rule="evenodd" clip-rule="evenodd" d="M6.75 7C7.7165 7 8.5 6.2165 8.5 5.25C8.5 4.2835 7.7165 3.5 6.75 3.5C5.7835 3.5 5 4.2835 5 5.25C5 6.2165 5.7835 7 6.75 7ZM11.25 9.75C12.2165 9.75 13 8.9665 13 8C13 7.0335 12.2165 6.25 11.25 6.25C10.2835 6.25 9.5 7.0335 9.5 8C9.5 8.9665 10.2835 9.75 11.25 9.75Z" fill="currentColor"/>`),ix=(0,im.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.25 9.75C12.2165 9.75 13 8.9665 13 8C13 7.0335 12.2165 6.25 11.25 6.25C10.2835 6.25 9.5 7.0335 9.5 8C9.5 8.9665 10.2835 9.75 11.25 9.75ZM6.75 12.5C7.7165 12.5 8.5 11.7165 8.5 10.75C8.5 9.7835 7.7165 9 6.75 9C5.7835 9 5 9.7835 5 10.75C5 11.7165 5.7835 12.5 6.75 12.5Z" fill="currentColor"/>
  <circle opacity="0.25" cx="6.75" cy="5.25" r="1.75" fill="currentColor"/>`),iv=e=>{let n,{className:i,rating:r}=e;switch(r){case"Low":n=(0,t.jsx)(ig,{className:i});break;case"Medium":n=(0,t.jsx)(ix,{className:i});break;case"High":n=(0,t.jsx)(ih.DataPoint,{className:i})}return n},iy=e=>e<50?"Low":e<100?"Medium":"High";function ij(e){let{dataPoints:n}=e,i=(0,u.useMemo)(()=>iy(n),[n]);return(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between rounded bg-background-100 py-1 pl-3 pr-2 text-foreground shadow-tooltip space-x-2",children:[(0,t.jsx)(c.Text,{color:"gray-900",size:12,weight:400,children:"Data points"}),(0,t.jsxs)(s.Stack,{align:"center",className:(0,a.clsx)("High"===i&&"text-green-800","Medium"===i&&"text-amber-800","Low"===i&&"text-red-800"),direction:"row",justify:"flex-end",children:[(0,t.jsx)(c.Text,{color:"inherit",size:12,weight:500,children:(0,j.formatNumberCompact)(n)}),(0,t.jsx)(iv,{rating:i})]})]})}let ib={[i.Rating.Poor]:"text-red-800 border-red-200",[i.Rating.Improvable]:"text-amber-800 border-amber-200",[i.Rating.Good]:"text-green-800 border-green-200"};function iS(e){let{rating:n,children:i,className:r}=e;return(0,t.jsx)("span",{className:(0,ip.twMerge)(r,"inline-block rounded border px-1 font-medium",n?ib[n]:"border-gray-200 text-gray-800"),children:i??"â€“"})}function iw(e){let{name:n,left:i,values:r,dateLabel:o}=e;return(0,t.jsxs)(id.TooltipWithBounds,{className:"pointer-events-none absolute top-10 space-y-1.5",left:i,style:{background:"auto"},top:40,children:[(0,t.jsxs)("div",{className:"flex min-w-[170px] flex-col rounded-md bg-background-100 px-3 py-2 text-foreground shadow-tooltip",children:[(0,t.jsx)(c.Text,{align:"left",color:"gray-900",size:12,children:o}),(0,t.jsx)(c.Text,{className:"mt-0",color:"gray-1000",weight:600,children:n}),r.length>0?(0,t.jsxs)(s.Stack,{className:"mt-1 border-t pt-1.5 space-y-1",children:[r.map(e=>{let{label:n,unit:i,value:r,rating:o,highlight:a}=e;return(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("div",{className:(0,ip.twMerge)("h-2 w-2 rounded-full bg-blue-700",!a&&"border-2 border-blue-700 bg-transparent")}),(0,t.jsx)(c.Text,{weight:500,children:n}),(0,t.jsx)(iS,{className:"-mr-1",rating:o,children:void 0!==r?(0,t.jsxs)(t.Fragment,{children:[r,i]}):"â€“"})]},n)})," "]}):null]}),(0,t.jsx)(ij,{dataPoints:e.dataPoints})]})}function iN(e){let{data:{name:n,score:i,rating:r},metricDefinition:o}=e;return(0,t.jsxs)("div",{className:"flex-start flex flex-col items-start rounded-md bg-background-100 px-3 py-2 shadow-tooltip",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between font-bold text-gray-1000",children:[n," "]}),(0,t.jsxs)("p",{className:"flex items-center justify-between text-gray-900",children:[(0,t.jsx)("span",{children:o.name}),(0,t.jsxs)(iS,{className:"-mr-1 ml-2",rating:r,children:[(0,y.formatMetric)(i,o).value," ",o.unit]})]})]})}let iM=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(t){return is(e,t)})}:is(e,t)}(iu.default,iu.default.objects.countries);function ik(e){let{isSkeleton:n=!1,metricDefinition:r,scoreData:o,parentHeight:a,parentWidth:l,onClick:s,hoveredCode:c}=e,d=(0,u.useRef)(null),{tooltipData:f,tooltipLeft:p,tooltipTop:h,showTooltip:m,hideTooltip:g}=(0,ne.useTooltip)(),{resolvedTheme:x}=(0,ia.useTheme)(),[v,y]=(0,u.useState)(x);(0,u.useEffect)(()=>{setTimeout(()=>y(x),0)},[x,y]);let j=(0,u.useMemo)(()=>(function(e,t){let n=Object.values(t).flatMap(e=>e.map(e=>{let{datapoints:t}=e;return t})).sort(),r=[Math.min(...n),Math.max(...n)],o=(0,io.default)(r,iE(e,i.Rating.Good)),a=(0,io.default)(r,iE(e,i.Rating.Improvable)),l=(0,io.default)(r,iE(e,i.Rating.Poor)),s=new Map;for(let[e,n]of Object.entries(t))for(let t of n)s.set(t.countryCode,{...t,hoverColor:e===i.Rating.Good?"var(--ds-green-800)":e===i.Rating.Poor?"var(--ds-red-800)":"var(--ds-amber-800)",color:e===i.Rating.Good?o(t.datapoints):e===i.Rating.Poor?l(t.datapoints):a(t.datapoints)});return s})(n,o),[o,v]),b=(0,u.useMemo)(()=>l&&a?(function(e){var t,n,i,r,o,a,l,s,c,u,d=150,f=480,p=250,h=0,m=0,g=0,x=0,v=0,y=0,j=1,b=1,S=null,w=nI,N=null,M=nG,k=.5;function E(e){return s(e[0]*ns,e[1]*ns)}function T(e){return(e=s.invert(e[0],e[1]))&&[e[0]*nl,e[1]*nl]}function C(){var e,i,r,o=n3(d,0,0,j,b,y).apply(null,t(h,m)),c=n3(d,f-o[0],p-o[1],j,b,y);return e=g,i=x,r=v,n=(e%=na)?i||r?nA(nF(e),nz(i,r)):nF(e):i||r?nz(i,r):nL,l=nA(t,c),s=nA(n,l),a=n5(l,k),R()}function R(){return c=u=null,E}return E.stream=function(e){var t;return c&&u===e?c:c=n6((t=n,nW({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}}))(w(a(M(u=e)))))},E.preclip=function(e){return arguments.length?(w=e,S=void 0,R()):w},E.postclip=function(e){return arguments.length?(M=e,N=i=r=o=null,R()):M},E.clipAngle=function(e){return arguments.length?(w=+e?function(e){var t=nf(e),n=6*ns,i=t>0,r=nc(t)>1e-6;function o(e,n){return nf(e)*nf(n)>t}function a(e,n,i){var r=nw(e),o=nw(n),a=[1,0,0],l=nM(r,o),s=nN(l,l),c=l[0],u=s-c*c;if(!u)return!i&&e;var d=nM(a,l),f=nE(a,t*s/u);nk(f,nE(l,-t*c/u));var p=nN(f,d),h=nN(d,d),m=p*p-h*(nN(f,f)-1);if(!(m<0)){var g=nm(m),x=nE(d,(-p-g)/h);if(nk(x,f),x=nS(x),!i)return x;var v,y=e[0],j=n[0],b=e[1],S=n[1];j<y&&(v=y,y=j,j=v);var w=j-y,N=1e-6>nc(w-ni);if(!N&&S<b&&(v=b,b=S,S=v),N||w<1e-6?N?b+S>0^x[1]<(1e-6>nc(x[0]-y)?b:S):b<=x[1]&&x[1]<=S:w>ni^(y<=x[0]&&x[0]<=j)){var M=nE(d,(-p+g)/h);return nk(M,f),[x,nS(M)]}}}function l(t,n){var r=i?e:ni-e,o=0;return t<-r?o|=1:t>r&&(o|=2),n<-r?o|=4:n>r&&(o|=8),o}return nP(o,function(e){var t,n,s,c,u;return{lineStart:function(){c=s=!1,u=1},point:function(d,f){var p,h,m=[d,f],g=o(d,f),x=i?g?0:l(d,f):g?l(d+(d<0?ni:-ni),f):0;!t&&(c=s=g)&&e.lineStart(),g!==s&&(!(h=a(t,m))||nx(t,h)||nx(m,h))&&(m[2]=1),g!==s?(u=0,g?(e.lineStart(),h=a(m,t),e.point(h[0],h[1])):(h=a(t,m),e.point(h[0],h[1],2),e.lineEnd()),t=h):r&&t&&i^g&&!(x&n)&&(p=a(m,t,!0))&&(u=0,i?(e.lineStart(),e.point(p[0][0],p[0][1]),e.point(p[1][0],p[1][1]),e.lineEnd()):(e.point(p[1][0],p[1][1]),e.lineEnd(),e.lineStart(),e.point(p[0][0],p[0][1],3))),!g||t&&nx(t,m)||e.point(m[0],m[1]),t=m,s=g,n=x},lineEnd:function(){s&&e.lineEnd(),t=null},clean:function(){return u|(c&&s)<<1}}},function(t,i,r,o){!function(e,t,n,i,r,o){if(n){var a=nf(t),l=np(t),s=i*n;null==r?(r=t+i*na,o=t-s/2):(r=n$(a,r),o=n$(a,o),(i>0?r<o:r>o)&&(r+=i*na));for(var c,u=r;i>0?u>o:u<o;u-=s)c=nS([a,-l*nf(u),-l*np(u)]),e.point(c[0],c[1])}}(o,e,n,r,t,i)},i?[0,-e]:[-ni,e-ni])}(S=e*ns):(S=null,nI),R()):S*nl},E.clipExtent=function(e){return arguments.length?(M=null==e?(N=i=r=o=null,nG):function(e,t,n,i){function r(r,o){return e<=r&&r<=n&&t<=o&&o<=i}function o(r,o,l,c){var u=0,d=0;if(null==r||(u=a(r,l))!==(d=a(o,l))||0>s(r,o)^l>0)do c.point(0===u||3===u?e:n,u>1?i:t);while((u=(u+l+4)%4)!==d)else c.point(o[0],o[1])}function a(i,r){return 1e-6>nc(i[0]-e)?r>0?0:3:1e-6>nc(i[0]-n)?r>0?2:1:1e-6>nc(i[1]-t)?+(r>0):r>0?3:2}function l(e,t){return s(e.x,t.x)}function s(e,t){var n=a(e,1),i=a(t,1);return n!==i?n-i:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var s,c,u,d,f,p,h,m,g,x,v,y=a,j=nn(),b={point:S,lineStart:function(){b.point=w,c&&c.push(u=[]),x=!0,g=!1,h=m=NaN},lineEnd:function(){s&&(w(d,f),p&&g&&j.rejoin(),s.push(j.result())),b.point=S,g&&y.lineEnd()},polygonStart:function(){y=j,s=[],c=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,r=c.length;n<r;++n)for(var o,a,l=c[n],s=1,u=l.length,d=l[0],f=d[0],p=d[1];s<u;++s)o=f,a=p,f=(d=l[s])[0],p=d[1],a<=i?p>i&&(f-o)*(i-a)>(p-a)*(e-o)&&++t:p<=i&&(f-o)*(i-a)<(p-a)*(e-o)&&--t;return t}(),n=v&&t,r=(s=nR(s)).length;(n||r)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),r&&ny(s,l,t,o,a),a.polygonEnd()),y=a,s=c=u=null}};function S(e,t){r(e,t)&&y.point(e,t)}function w(o,a){var l=r(o,a);if(c&&u.push([o,a]),x)d=o,f=a,p=l,x=!1,l&&(y.lineStart(),y.point(o,a));else if(l&&g)y.point(o,a);else{var s=[h=Math.max(-1e9,Math.min(1e9,h)),m=Math.max(-1e9,Math.min(1e9,m))],j=[o=Math.max(-1e9,Math.min(1e9,o)),a=Math.max(-1e9,Math.min(1e9,a))];!function(e,t,n,i,r,o){var a,l=e[0],s=e[1],c=t[0],u=t[1],d=0,f=1,p=c-l,h=u-s;if(a=n-l,!p&&a>0)return;if(a/=p,p<0){if(a<d)return;a<f&&(f=a)}else if(p>0){if(a>f)return;a>d&&(d=a)}if(a=r-l,p||!(a<0)){if(a/=p,p<0){if(a>f)return;a>d&&(d=a)}else if(p>0){if(a<d)return;a<f&&(f=a)}if(a=i-s,h||!(a>0)){if(a/=h,h<0){if(a<d)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>d&&(d=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>d&&(d=a)}else if(h>0){if(a<d)return;a<f&&(f=a)}return d>0&&(e[0]=l+d*p,e[1]=s+d*h),f<1&&(t[0]=l+f*p,t[1]=s+f*h),!0}}}}(s,j,e,t,n,i)?l&&(y.lineStart(),y.point(o,a),v=!1):(g||(y.lineStart(),y.point(s[0],s[1])),y.point(j[0],j[1]),l||y.lineEnd(),v=!1)}h=o,m=a,g=l}return b}}(N=+e[0][0],i=+e[0][1],r=+e[1][0],o=+e[1][1]),R()):null==N?null:[[N,i],[r,o]]},E.scale=function(e){return arguments.length?(d=+e,C()):d},E.translate=function(e){return arguments.length?(f=+e[0],p=+e[1],C()):[f,p]},E.center=function(e){return arguments.length?(h=e[0]%360*ns,m=e[1]%360*ns,C()):[h*nl,m*nl]},E.rotate=function(e){return arguments.length?(g=e[0]%360*ns,x=e[1]%360*ns,v=e.length>2?e[2]%360*ns:0,C()):[g*nl,x*nl,v*nl]},E.angle=function(e){return arguments.length?(y=e%360*ns,C()):y*nl},E.reflectX=function(e){return arguments.length?(j=e?-1:1,C()):j<0},E.reflectY=function(e){return arguments.length?(b=e?-1:1,C()):b<0},E.precision=function(e){return arguments.length?(a=n5(l,k=e*e),R()):nm(k)},E.fitExtent=function(e,t){return n1(E,e,t)},E.fitSize=function(e,t){return n1(E,[[0,0],e],t)},E.fitWidth=function(e,t){return n0(E,function(t){var n=+e,i=n/(t[1][0]-t[0][0]),r=(n-i*(t[1][0]+t[0][0]))/2,o=-i*t[0][1];E.scale(150*i).translate([r,o])},t)},E.fitHeight=function(e,t){return n0(E,function(t){var n=+e,i=n/(t[1][1]-t[0][1]),r=-i*t[0][0],o=(n-i*(t[1][1]+t[0][1]))/2;E.scale(150*i).translate([r,o])},t)},function(){return t=e.apply(this,arguments),E.invert=t.invert&&T,C()}})(function(){return n8})().scale(131.747).fitSize([l,a],iM).rotate([-13,0]):null,[l,a]);return(0,t.jsxs)("div",{className:"absolute",ref:d,children:[l&&a&&b?(0,t.jsx)("svg",{height:a,width:l,children:(0,t.jsx)(t2,{data:iM.features,projection:()=>b,children:e=>(0,t.jsxs)("g",{children:[Array.from({length:8},(e,n)=>(0,t.jsx)("path",{d:`M 0 ${.045*a+a*n/8} H ${l}`,fill:"none",stroke:"var(--ds-gray-200)",strokeWidth:.2},n)),e.features.map(e=>{let{feature:n,path:i}=e,r=j.get(n.properties.code),o=!!c||!!f?.countryCode,a=n.properties.code===c||f?.countryCode===n.properties.code;return(0,t.jsx)("path",{className:"transition-all duration-100",d:i||"",onClick:()=>r&&s?.(r),onMouseLeave:g,onMouseMove:e=>{if(!d.current)return;let t=(0,E.localPoint)(d.current,e);t&&r&&m({tooltipData:r,tooltipLeft:t.x,tooltipTop:t.y})},...function(e){let t,{details:n,isHovered:i,hasHovered:r}=e;return i?t=n?.hoverColor:r||(t=n?.color),{fill:t??"var(--ds-gray-100)",stroke:"var(--ds-gray-300)"}}({details:r,isHovered:a,hasHovered:o}),strokeWidth:.2},n.properties.id)})]})})}):null,f?(0,t.jsxs)(ic.TooltipWithBounds,{className:"space-y-1",isPinned:!1,left:p,offsetLeft:10,offsetTop:-40,top:h,unstyled:!0,children:[(0,t.jsx)(iN,{data:f,metricDefinition:r}),(0,t.jsx)(ij,{dataPoints:f.datapoints})]},Math.random()):null]})}function iE(e,t){if(e)return()=>"--ds-gray-400";let n=getComputedStyle(document.documentElement),r=t===i.Rating.Good?"green":t===i.Rating.Poor?"red":"amber";return ir(`hsl(${n.getPropertyValue(`--ds-${r}-200-value`)})`,`hsl(${n.getPropertyValue(`--ds-${r}-800-value`)})`)}let iT=function(e){var t,n;return n=t=function(t){function n(){for(var e,n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];return t4(t7(e=t.call.apply(t,[this].concat(i))||this),"state",{parentWidth:void 0,parentHeight:void 0}),t4(t7(e),"animationFrameID",0),t4(t7(e),"resizeObserver",void 0),t4(t7(e),"container",null),t4(t7(e),"setRef",function(t){e.container=t}),t4(t7(e),"resize",(0,t5.default)(function(t){var n=t.width,i=t.height;e.setState({parentWidth:n,parentHeight:i})},e.props.debounceTime,{leading:e.props.enableDebounceLeadingCall})),e}n.prototype=Object.create(t.prototype),n.prototype.constructor=n,t9(n,t);var i=n.prototype;return i.componentDidMount=function(){var e=this;this.resizeObserver=new t6.ResizeObserver(function(t){t.forEach(function(t){var n=t.contentRect,i=n.width,r=n.height;e.animationFrameID=window.requestAnimationFrame(function(){e.resize({width:i,height:r})})})}),this.container&&this.resizeObserver.observe(this.container)},i.componentWillUnmount=function(){window.cancelAnimationFrame(this.animationFrameID),this.resizeObserver&&this.resizeObserver.disconnect(),this.resize.cancel()},i.render=function(){var t=this.props,n=t.initialWidth,i=t.initialHeight,r=this.state,o=r.parentWidth,a=void 0===o?n:o,l=r.parentHeight,s=void 0===l?i:l;return u.default.createElement("div",{style:t8,ref:this.setRef},null!=a&&null!=s&&u.default.createElement(e,t3({parentWidth:a,parentHeight:s},this.props)))},n}(u.default.Component),t4(t,"propTypes",{parentWidth:T.default.number,parentHeight:T.default.number,initialWidth:T.default.number,initialHeight:T.default.number}),t4(t,"defaultProps",{debounceTime:300,enableDebounceLeadingCall:!0}),n}(ik);var iC=e.i(5674541),iR=e.i(555528),iP=e.i(584439),iD=e.i(8890463),i_=e.i(8034252),iI=e.i(4203388),iA=e.i(1573239),iL=e.i(3357281),iO=e.i(7916122),iF=e.i(9027039);let iz=(0,u.createContext)({isAnAccordion:!0,current:null,onChange:()=>void 0});iz.displayName="CollapseContext";let i$=iz.Provider;function iG(e){let{id:n,title:i,className:r,children:o}=e,{isAnAccordion:l,current:s,onChange:c}=(0,u.useContext)(iz),d=s===n;return l?(0,t.jsxs)(iF.Root,{className:(0,a.clsx)("flex flex-col",d?"flex-1":"bg-background-200",r),onOpenChange:e=>{e||s!==n?e&&c(n):c(null)},open:d,children:[(0,t.jsxs)(iF.Trigger,{className:(0,a.clsx)("flex cursor-pointer items-center px-4 py-2 text-gray-800 space-x-2",d?"bg-transparent":"bg-background-200"),children:[(0,t.jsx)(iO.ChevronRight,{className:d?"rotate-90":""}),(0,t.jsx)("span",{className:"flex-1",children:i})]}),(0,t.jsx)(iF.Content,{className:"flex flex-1 flex-col",children:o})]}):(0,t.jsxs)("div",{className:(0,a.clsx)("flex w-0 flex-1 flex-col",r),children:[(0,t.jsx)("div",{className:"px-4 py-2",children:i}),o]})}function iW(e){let{initialyExpanded:n,children:i}=e,[r,o]=(0,u.useState)(n??null);return(0,u.useEffect)(()=>o(n??null),[n]),(0,t.jsxs)("div",{className:"tailwind @container",children:[(0,t.jsx)("div",{className:"hidden divide-x @2xl:flex",children:(0,t.jsx)(i$,{value:{current:r,isAnAccordion:!1,onChange:o},children:i})}),(0,t.jsx)("div",{className:(0,a.clsx)("flex flex-col divide-y @2xl:hidden",r&&"h-full",!r&&"-mb-px border-b"),children:(0,t.jsx)(i$,{value:{current:r,isAnAccordion:!0,onChange:o},children:i})})]})}var iU=e.i(2700425),iH=e.i(3920197),iB=e.i(9443759),iV=e.i(1735144),iq=e.i(1093245),iK=e.i(5528554);function iQ(e){let{rating:n,className:r}=e;return n===i.Rating.Poor?(0,t.jsx)(iV.StopFill,{className:r,color:"red-900"}):n===i.Rating.Improvable?(0,t.jsx)(iq.WarningFill,{className:r,color:"amber-800"}):(0,t.jsx)(iK.CheckCircleFill,{className:r,color:"green-800"})}let iZ={[i.Rating.Poor]:{message:"No poor scores",icon:(0,t.jsx)(iU.CheckCircle,{color:"gray-900",size:20})},[i.Rating.Improvable]:{message:"No needs improvement scores",icon:(0,t.jsx)(iU.CheckCircle,{color:"gray-900",size:20})},[i.Rating.Good]:{message:"No good scores",icon:(0,t.jsx)(iH.CrossCircle,{color:"gray-900",size:20})}};function iJ(e){let{emptyIcon:n,emptyMessage:i,formatKey:r,getPercentages:o,isLoading:a,metricDefinition:l,rowCount:s,rows:u,disabled:d,onRowClick:f,onRowHover:p}=e;return(0,t.jsx)(iL.Table,{className:(0,iB.cn)("mb-2",d&&"pointer-events-none"),data:{rows:u},getColumnClassName:(e,t)=>e.rating?"min-w-[80px]":0===t?"min-w-[30px] ml-2":1===t?"min-w-[45px]":void 0,getPercentages:o,limit:s,onRowClick:f,onRowHover:p,primaryIndex:0,renderEmptyState:()=>(0,t.jsx)("div",{className:"flex flex-1 items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"my-8 flex flex-col items-center justify-center space-y-2",children:[n,(0,t.jsx)(c.Text,{color:"gray-900",size:14,children:i})]})}),renderItemTitle:e=>(0,t.jsx)(t.Fragment,{children:r(e.key)}),renderRowValue:(e,n)=>0===n?(0,t.jsxs)("div",{className:"flex flex-row items-center",children:[(0,t.jsx)("span",{className:"font-normal text-gray-700",children:(0,j.formatNumberCompact)(e.values[0])}),(0,t.jsx)("span",{className:"text-gray-600",children:(0,t.jsx)(iv,{className:"text-gray-700",rating:iy(e.values[0])})})]}):(0,t.jsxs)("span",{className:"-mr-1.5 inline-block",children:[(0,y.formatMetric)(e.values[n],l).value," ",(0,t.jsx)("span",{className:"font-medium",children:l.unit}),e.rating?(0,t.jsx)(iQ,{className:"ml-2 inline",rating:e.rating}):null]}),skeleton:a,style:s?{height:40*s}:{}})}var iY=e.i(6832703),iX=e.i(2824080),i0=e.i(4946541),i1=e.i(8934201),i2=e.i(3026395);function i5(e){let{active:n,metricDefinition:r,onClose:o,title:a}=e,[l,s]=(0,u.useState)(""),[c,d]=(0,u.useState)(e.rating);(0,u.useEffect)(()=>d(e.rating),[e.rating]);let f="selector"===e.by;return(0,t.jsx)(i1.Modal,{active:n,onClickOutside:o,style:{overflow:"visible",height:"80vh"},width:600,children:(0,t.jsxs)("div",{className:"tailwind-preflight",style:{display:"contents"},children:[(0,t.jsx)(iL.PanelHeader,{labels:["",r.type],title:a}),(0,t.jsxs)("span",{className:"flex gap-2 p-4",children:[(0,t.jsx)(i2.SearchBar,{className:"flex-1 p-0",initialValue:l,onChangeSearch:e=>s(e.toLocaleLowerCase())}),(0,t.jsx)(i0.Switch,{name:"score",children:[null,...Object.values(i.Rating).filter(e=>e!==i.Rating.Good||!f)].map(e=>(0,t.jsx)(i0.Switch.Control,{defaultChecked:c===e,icon:e?(0,t.jsx)(iQ,{rating:e}):void 0,label:e?void 0:"All",onChange:()=>d(e),value:e??"All"},e??"All"))})]}),(0,t.jsx)(i1.Modal.Body,{className:"h-[50vh] flex-1 !overflow-hidden md:h-full [&>:first-child]:h-full",padding:!1,children:(0,t.jsx)(i6,{...e,filter:l,rating:c})}),(0,t.jsx)(i1.Modal.Actions,{children:(0,t.jsx)(i1.Modal.Action,{fullWidth:!0,onClick:o,children:"Close"})})]})})}function i6(e){let{filter:n,by:i,formatKey:r,getPercentages:o,metricDefinition:a,initialData:l,rating:s,onRowClick:c}=e,d=(0,k.useApiParams)(),{data:f,isLoading:p}=M({type:i,limit:300,tz:(0,j.getClientTimezone)(),...d}),h=(0,u.useMemo)(()=>{let e=(p?l:f)??{},t=(s?e[s]?.map(e=>({...e,rating:s})):(0,y.mergeAllRatings)(f))??[];return""===n?t:t.filter(e=>{let{key:t}=e,i=r(t);return("string"==typeof i?i:t).toLowerCase().includes(n)})},[f,p,l,r,n,s]);return(0,t.jsx)(iJ,{emptyIcon:s&&0===n.length?iZ[s].icon:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(iX.MagnifyingGlass,{}),(0,t.jsx)("span",{className:"font-medium",children:"No Results Found"})]}),emptyMessage:s&&0===n.length?iZ[s].message:`Your search for "${n}" did not return any results.`,formatKey:r,getPercentages:o,metricDefinition:a,onRowClick:c,rows:h})}var i3=e.i(6726897),i7=e.i(2834676);let i9={[i.Rating.Poor]:{color:"red-900",text:"Poor"},[i.Rating.Improvable]:{color:"amber-900",text:"Needs Improvement"},[i.Rating.Good]:{color:"green-900",text:"Great"}},i4={default:[{key:"/home",values:[934,35]},{key:"/checkout",values:[500,47]},{key:"/landing",values:[254,32]},{key:"/cart",values:[109,24]},{key:"/product",values:[10,38]}],country:[{key:"DE",values:[934,35]},{key:"JP",values:[500,47]},{key:"BR",values:[254,32]},{key:"KY",values:[109,24]},{key:"KE",values:[10,38]}]};function i8(e){let{rating:n,count:r,thresholds:o,metricDefinition:a}=e,{color:l,text:s}=i9[n],u=(0,y.formatMetric)(o.poor,a),d=(0,y.formatMetric)(o.good,a),f=o.poor<o.good,p=f?["<",">"]:[">","<"],h=f?[u.value,d.value]:[d.value,u.value],m={[i.Rating.Poor]:`${p[0]}${u.full}`,[i.Rating.Improvable]:`${h[0]} - ${h[1]}${d.unit}`,[i.Rating.Good]:`${p[1]}${d.full}`};return(0,t.jsxs)("div",{className:"flex flex-1 items-center justify-between overflow-hidden px-1 py-2 space-x-2",children:[(0,t.jsxs)("div",{className:"flex items-center truncate",children:[(0,t.jsx)(iQ,{className:"mr-2 shrink-0",rating:n}),(0,t.jsx)(c.Text,{className:"flex-1 shrink truncate",color:l,children:(0,t.jsx)("span",{className:"truncate font-medium",children:s})}),void 0!==r?(0,t.jsxs)(c.Text,{className:"ml-0.5 inline-block",color:l,children:["(",r,")"]}):null]}),(0,t.jsx)(c.Text,{className:"whitespace-nowrap",color:"gray-800",children:m[n]})]})}function re(e){let{rating:n,insignificantCount:i,thresholds:r,rowCount:o=7,onShowMore:a,className:l,additionalContent:s,disabled:d,...f}=e,{rows:p,metricDefinition:h}=f,m=p.length<o&&i>0;return(0,t.jsx)(iG,{className:l,id:n,title:(0,t.jsx)(i8,{metricDefinition:h,rating:n,thresholds:r}),children:(0,t.jsxs)("div",{className:"relative flex flex-1 flex-col",children:[d?(0,t.jsx)(u.Suspense,{children:(0,t.jsx)(ru,{})}):null,(0,t.jsx)(iJ,{...f,disabled:d,emptyMessage:f.emptyMessage+(i>0?" Â¹":""),rowCount:o,rows:p}),p.length>o||i?(0,t.jsx)(iL.ViewAllButton,{className:"bottom-4",onClick:d?()=>void 0:a}):null,m?(0,t.jsx)("div",{className:"absolute inset-x-0 bottom-0 flex items-center justify-center pb-2",children:(0,t.jsxs)(c.Text,{color:"gray-800",size:12,weight:500,children:[0===p.length&&"Â¹ ","Some with insignificant traffic"," ","(<0.5%)"]})}):null,s]})})}function rt(e){let{title:n,by:r,metricDefinitions:o,perTableLimit:a,onRowHover:l}=e,[s,c]=(0,u.useState)(null),[d,f]=(0,u.useState)(!1),p="selector"===r;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ro,{by:r,children:[i.Rating.Poor,i.Rating.Improvable,...p?[]:[i.Rating.Good]].map(e=>(0,t.jsx)(rn,{by:r,metricDefinitions:o,onRowHover:l,perTableLimit:a,rating:e,setShowMoreRating:c,setShowMoreVisible:f},e))}),(0,t.jsx)(u.Suspense,{children:(0,t.jsx)(rc,{by:r,metricDefinitions:o,setShowMoreVisible:f,showMoreRating:s,showMoreVisible:d,title:n})})]})}function rn(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(re,{additionalContent:null,emptyIcon:(0,t.jsx)(l.Skeleton,{}),emptyMessage:"",formatKey:()=>void 0,insignificantCount:0,isLoading:!0,metricDefinition:e.metricDefinitions[i.MetricType.RES],rating:e.rating,rowCount:e.perTableLimit,rows:[],thresholds:e.metricDefinitions[i.MetricType.RES].thresholds[i.DeviceType.Desktop]}),children:(0,t.jsx)(rr,{...e})})}function ri(e){let{by:n,hostname:i,key:r}=e;return"Unknown"===r?(0,t.jsx)(iR.Tooltip,{text:"This data was not collected in the previous version of Speed Insights. Please migrate to the @vercel/speed-insights package.",children:(0,t.jsx)("span",{className:"mr-px inline-block border-b border-dashed border-gray-700",title:"",children:"Unknown"})}):"country"===n?(0,j.getCountryName)(r):"route"===n?(0,t.jsx)(i3.RouteHighlighter,{route:r}):"selector"===n?(0,t.jsxs)("span",{className:"group flex w-full items-center gap-1 border-none py-0.5 leading-5",children:[(0,t.jsx)("span",{className:"flex-1 truncate",children:r}),(0,t.jsx)("button",{"aria-label":"Copy Selector",className:(0,a.clsx)("-translate-x-0.5 rounded-sm bg-transparent p-0.5 opacity-0 transition-transform group-hover:ml-2 group-hover:block group-hover:translate-x-0 group-hover:opacity-75 hover:!opacity-100 focus-visible:ml-2 focus-visible:block focus-visible:translate-x-0 focus-visible:opacity-100"),onClick:e=>{e.preventDefault(),e.stopPropagation(),iP.toasts.message("Copied selector to clipboard"),navigator.clipboard.writeText(r)},type:"button",children:(0,t.jsx)(iI.Copy,{className:"min-h-4 min-w-4 text-gray-800"})})]}):(0,t.jsx)("a",{className:(0,a.clsx)("text-black no-underline ",i&&"hover:underline"),href:i?`https://${i||""}${r}`:"#",target:"_blank noopener noreferrer",children:r})}function rr(e){let{by:n,metricDefinitions:r,onRowHover:o,perTableLimit:a,rating:l,setShowMoreRating:s,setShowMoreVisible:c}=e,d=(0,k.useApiParams)(),{data:f,isLoading:p}=M({type:n,limit:51,tz:(0,j.getClientTimezone)(),...d}),{supportsPlus:h,hasSpeedInsightsPlusOrRemainingDays:m,hasData:g,isLoading:x}=(0,i7.useSpeedInsightsStatus)(),{state:y,set:b}=(0,N.useSpeedInsightsUrlState)(),S=(0,v.useHostname)(),w=rs(f),E=r[d.metric],T=(0,u.useMemo)(()=>!!y[n],[y,n]),C=(0,u.useMemo)(()=>!!(y.country||y.path||y.route),[y]),R=T&&f?.[l]?.length===1,P=T&&f?.[l]?.length===0,{emptyIcon:D,emptyMessage:_}=function(e){let{noData:n,hasFilter:i,rating:r}=e;return n?{emptyIcon:(0,t.jsx)(i_.ChartActivity,{className:"!text-gray-700"}),emptyMessage:"No data available"}:i?{emptyIcon:(0,t.jsx)(iD.Filter,{className:"!text-gray-700"}),emptyMessage:"No results for active filter"}:{emptyIcon:iZ[r].icon,emptyMessage:iZ[r].message}}({noData:!g&&!p&&!x,hasFilter:C,rating:l}),I=(0,u.useMemo)(()=>h&&!m&&l===i.Rating.Poor,[h,m,l]),{rows:A,insignificantCount:L}=w[l];return(0,t.jsx)(re,{additionalContent:R?(0,t.jsx)("div",{className:"flex items-center justify-center",children:(0,t.jsx)(iL.FilterTag,{onRemoveTag:()=>{b({[n]:void 0})},value:"Clear Filter"})}):null,className:P?"bg-background-200 text-opacity-50":"",disabled:I,emptyIcon:D,emptyMessage:_,formatKey:e=>ri({by:n,hostname:S,key:e}),insignificantCount:L,isLoading:p,metricDefinition:E,onRowClick:e=>b({[n]:e.key}),onRowHover:o,onShowMore:()=>{s(l),c(!0)},rating:l,rowCount:R?1:a,rows:I?i4[n]??i4.default:A,thresholds:E.thresholds[y.device]},l)}function ro(e){let{by:n,children:r}=e;return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(iW,{initialyExpanded:i.Rating.Good,children:r}),children:(0,t.jsx)(ra,{by:n,children:r})})}function ra(e){let{by:n,children:r}=e,o=(0,k.useApiParams)(),{data:a}=M({type:n,limit:51,tz:(0,j.getClientTimezone)(),...o}),l=rs(a),s=(0,u.useMemo)(()=>l[i.Rating.Poor].rows.length>0?i.Rating.Poor:l[i.Rating.Improvable].rows.length>0?i.Rating.Improvable:i.Rating.Good,[l]);return(0,t.jsx)(iW,{initialyExpanded:s,children:r})}function rl(e){return(0,u.useMemo)(()=>{let t=Object.values(e??{}).flat();return(0,j.createPercentages)(t,e=>e.values[0])},[e])}function rs(e){let t=rl(e),n={[i.Rating.Poor]:{rows:[],insignificantCount:0},[i.Rating.Improvable]:{rows:[],insignificantCount:0},[i.Rating.Good]:{rows:[],insignificantCount:0}};for(let r of[i.Rating.Poor,i.Rating.Improvable,i.Rating.Good]){let i=0,o=[];for(let n of e?.[r]??[]){let{relativeToMax:e}=t(n);e<.005?i++:o.push(n)}n[r]={rows:o,insignificantCount:i}}return n}function rc(e){let{by:n,metricDefinitions:i,setShowMoreVisible:r,showMoreRating:o,showMoreVisible:a,title:l}=e,s=(0,k.useApiParams)(),{data:c}=M({type:n,limit:51,tz:(0,j.getClientTimezone)(),...s}),{set:u}=(0,N.useSpeedInsightsUrlState)(),d=(0,v.useHostname)(),f=rl(c),p=i[s.metric];return(0,t.jsx)(i5,{active:a,by:n,formatKey:e=>ri({by:n,hostname:d,key:e}),getPercentages:f,initialData:c,metricDefinition:p,onClose:()=>r(!1),onRowClick:e=>{r(!1),u({[n]:e.key})},rating:o,title:l})}function ru(){let{openEnableModal:e,EnableModal:n}=(0,iY.useOpenEnableModal)();return(0,t.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-gradient-to-b from-background-100/50 via-background-100/80 to-background-100 z-10",children:[(0,t.jsx)(iC.Button,{className:"group/lock",shadow:!0,shape:"rounded",size:"small",type:"secondary",onClick:e,prefix:(0,t.jsxs)("span",{className:"relative",children:[(0,t.jsx)("div",{className:"h-[7px] origin-[90%,50%] overflow-hidden transition-transform duration-150 group-hover/lock:translate-x-1 group-hover/lock:-scale-x-100",children:(0,t.jsx)(iA.LockClosedSmall,{className:"size-4"})}),(0,t.jsx)("div",{className:"h-[9px] overflow-hidden",children:(0,t.jsx)(iA.LockClosedSmall,{className:"mt-[-7px]"})})]}),children:"Unlock with Plus"}),n]})}function rd(e){let{metricDefinitions:n}=e,i="Countries",[r,o]=(0,u.useState)(null);return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"border-b px-6 py-4 font-semibold",children:i}),(0,t.jsxs)("div",{className:"grid border-b divide-y lg:grid-cols-[auto_350px] lg:divide-x lg:divide-y-0",children:[(0,t.jsx)("div",{className:"relative max-h-[400px] min-h-[240px] max-w-full overflow-hidden py-2 md:max-h-[550px] md:min-h-[382px]",children:(0,t.jsx)(rf,{hoveredCode:r?.key,metricDefinitions:n})}),(0,t.jsx)(rt,{by:"country",metricDefinitions:n,onRowHover:o,perTableLimit:5,title:i})]})]})}function rf(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(ik,{isSkeleton:!0,metricDefinition:e.metricDefinitions[i.MetricType.RES],parentHeight:366,parentWidth:622,scoreData:{good:[],improvable:[],poor:[]}}),children:(0,t.jsx)(rp,{...e})})}function rp(e){let{hoveredCode:n,metricDefinitions:r}=e,{set:o}=(0,N.useSpeedInsightsUrlState)(),a=(0,k.useApiParams)(),{data:l}=M({type:"country",limit:200,tz:(0,j.getClientTimezone)(),...a}),s=r[a.metric];return(0,t.jsx)(iT,{hoveredCode:n,metricDefinition:s,onClick:e=>o({country:e.countryCode}),scoreData:function(e){let t={[i.Rating.Good]:[],[i.Rating.Improvable]:[],[i.Rating.Poor]:[]};for(let[n,i]of Object.entries(e??{}))for(let{key:e,values:[r,o]}of i)t[n].push({countryCode:e,score:o,datapoints:r,name:(0,j.getCountryName)(e),rating:n});return t}(l)})}var rh=e.i(3647066),rm=e.i(1098821),rg=e.i(704609);function rx(e){let{metricDefinitions:n}=e,[i,r]=(0,u.useState)("route"),{state:o}=(0,N.useSpeedInsightsUrlState)(),a=rg.MetricsWithAttributionSelectors.includes(o.metric);return(0,u.useEffect)(()=>{a||"selector"!==i||r("route")},[a,i]),(0,t.jsxs)("div",{className:"border-b",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between border-b px-6",children:[(0,t.jsx)(rm.Tabs,{border:!1,selected:i,setSelected:r,tabs:[{title:"Routes",value:"route"},{title:"Paths",value:"path"},...a?[{title:"Selectors",value:"selector"}]:[]]}),(0,t.jsx)(rv,{metricDefinitions:n})]}),(0,t.jsx)(rt,{by:i,metricDefinitions:n,title:"route"===i?"Routes":"Paths"})]})}function rv(e){let{metricDefinitions:n}=e;return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(iL.HeaderLabels,{labels:[n[i.MetricType.RES].type]}),children:(0,t.jsx)(ry,{metricDefinitions:n})})}function ry(e){let{metricDefinitions:n}=e,i=n[(0,k.useApiParams)().metric];return(0,t.jsx)(iL.HeaderLabels,{labels:[i.type]})}var rj=e.i(1265902),rb=e.i(503726),rS=e.i(9309638),rw=e.i(5027635);function rN(){let{set:e}=(0,N.useSpeedInsightsUrlState)(),{account:n}=(0,rb.useAccount)(),i=n?.billing?.plan||"hobby",r=(0,rw.useTimeSelection)(i,"speedInsightsPlans",!1,"7d"),o=(0,u.useMemo)(()=>(0,rS.findAvailablePresets)(i,"speedInsightsPlans"),[i]);return(0,t.jsx)(rj.Calendar,{compact:!0,minValue:r.minAllowedDate,onChange:(t,n)=>{let{start:i,end:r}=t;n?e({period:n}):e({from:new Date(i),to:new Date(r)})},presetIndex:Object.values(o).findIndex(e=>e.period===r.period),presets:o,value:{start:r.range.from,end:r.range.to},width:"164px"})}var rM=e.i(2774739);function rk(e){let{dataPoints:n,className:i,lastUpdated:r,isLoading:o}=e,s=(0,rM.useAgo)(Number(r),{justNowThreshold:3e4,justNowLabel:"just now"}),c=iy(n);return(0,t.jsxs)("div",{className:(0,a.clsx)("flex flex-col justify-between gap-4 px-3 align-middle text-sm text-gray-900","text-center md:flex-row md:text-left",i),children:[0!==n||o?(0,t.jsxs)("span",{children:["This report is based on"," ",o?(0,t.jsx)(l.Skeleton,{className:"mx-1 inline-block align-middle",height:18,width:55}):(0,t.jsxs)("span",{className:(0,a.clsx)("whitespace-nowrap","Low"===c&&"text-red-800","Medium"===c&&"text-amber-800"),children:[(0,t.jsx)(iv,{className:"-mt-px mr-px inline ",rating:c}),(0,t.jsx)("span",{className:"font-medium",children:(0,j.formatNumber)(n)})]}),(0,t.jsx)("span",{children:" data points"})]}):(0,t.jsx)("span",{children:"No data points collected"}),s?(0,t.jsxs)("span",{className:"text-gray-800",children:[" Updated ",s||"just now"]}):(0,t.jsx)(l.Skeleton,{autoSize:!1,height:18,style:{height:18},width:90})]})}var rE=e.i(104622),rT=e.i(604868),rC=e.i(6781187),rR=e.i(6101805);function rP(e,t,n){var i=e._x1-e._x0,r=t-e._x1,o=(e._y1-e._y0)/(i||r<0&&-0),a=(n-e._y1)/(r||i<0&&-0);return((o<0?-1:1)+(a<0?-1:1))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs((o*r+a*i)/(i+r)))||0}function rD(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function r_(e,t,n){var i=e._x0,r=e._y0,o=e._x1,a=e._y1,l=(o-i)/3;e._context.bezierCurveTo(i+l,r+l*t,o-l,a-l*n,o,a)}function rI(e){this._context=e}function rA(e){this._context=e}function rL(e){return new rI(e)}rI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:r_(this,this._t0,rD(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,r_(this,rD(this,n=rP(this,e,t)),n);break;default:r_(this,this._t0,n=rP(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},((function(e){this._context=new rA(e)}).prototype=Object.create(rI.prototype)).point=function(e,t){rI.prototype.point.call(this,t,e)},rA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,o){this._context.bezierCurveTo(t,e,i,n,o,r)}};var rO=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function rF(){return(rF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function rz(e){var t=e.children,n=e.id,i=e.from,r=e.to,o=e.x1,a=e.y1,l=e.x2,s=e.y2,c=e.fromOffset,d=e.fromOpacity,f=e.toOffset,p=e.toOpacity,h=e.rotate,m=e.transform,g=e.vertical,x=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,rO),v=o,y=l,j=a,b=s;return void 0!==g&&!g||v||y||j||b||(v="0",y="0",j="0",b="1"),u.default.createElement("defs",null,u.default.createElement("linearGradient",rF({id:n,x1:v,y1:j,x2:y,y2:b,gradientTransform:h?"rotate("+h+")":m},x),!!t&&t,!t&&u.default.createElement("stop",{offset:void 0===c?"0%":c,stopColor:i,stopOpacity:void 0===d?1:d}),!t&&u.default.createElement("stop",{offset:void 0===f?"100%":f,stopColor:r,stopOpacity:void 0===p?1:p})))}rz.propTypes={id:T.default.string.isRequired,from:T.default.string,to:T.default.string,x1:T.default.oneOfType([T.default.string,T.default.number]),x2:T.default.oneOfType([T.default.string,T.default.number]),y1:T.default.oneOfType([T.default.string,T.default.number]),y2:T.default.oneOfType([T.default.string,T.default.number]),fromOffset:T.default.oneOfType([T.default.string,T.default.number]),fromOpacity:T.default.oneOfType([T.default.string,T.default.number]),toOffset:T.default.oneOfType([T.default.string,T.default.number]),toOpacity:T.default.oneOfType([T.default.string,T.default.number]),rotate:T.default.oneOfType([T.default.string,T.default.number]),transform:T.default.string,children:T.default.node,vertical:T.default.bool};var r$=e.i(6102013),rG=e.i(2419587),rW=e.i(7517602),rU=e.i(7836556),rH=e.i(5083139),rB=e.i(5919491),rV=e.i(1799819),rq=e.i(1059749),rK=e.i(2059154),rQ=e.i(714511),rZ=e.i(212277),rJ=e.i(9855071),rY=e.i(4283553);function rX(e){return e}var r0=e.i(7632876),r1=e.i(587741),r2=e.i(3900584),r5=e.i(5196742);let r6=(0,u.forwardRef)((e,n)=>{let{deployments:i,dateLabel:r,onMouseEnter:o,onMouseLeave:a,onTitleClick:l,left:s,bottom:u}=e;return(0,t.jsx)(id.TooltipWithBounds,{className:"tooltip pointer-events-none absolute flex items-end justify-center py-3",left:s,offsetLeft:8,style:{width:300,height:u},top:0,children:(0,t.jsxs)("div",{className:"tooltip pointer-events-auto flex max-h-44 max-w-full flex-col rounded-md bg-background-100 text-foreground shadow-tooltip",onMouseEnter:o,onMouseLeave:a,ref:n,children:[(0,t.jsxs)("div",{className:"py-x flex items-center justify-between border-b p-1 pr-3",children:[(0,t.jsx)(iC.Button,{onClick:l,size:"small",type:"tertiary",children:(0,t.jsxs)(c.Text,{weight:500,children:["Deployments",(0,t.jsx)(c.Text,{as:"span",weight:400,children:i?.length?` (${i.length})`:""})]})}),(0,t.jsx)(c.Text,{color:"gray-800",children:r})]}),(0,t.jsx)("div",{className:"w-full flex-1 overflow-y-auto overflow-x-hidden px-3 py-2 space-y-3",children:i?.length?i.map(e=>(0,t.jsx)(r3,{deployment:e},e.url)):(0,t.jsx)(c.Text,{color:"gray-900",children:"No production deployments"})})]})})});function r3(e){let{deployment:i}=e,r=(0,r5.getGitInfoFromDeployment)(i),o=(0,r1.useDeploymentLink)(i);return r?(0,t.jsxs)("div",{className:"my-1 flex w-full space-x-2",children:[(0,t.jsx)(r2.DeploymentCreatorAvatar,{deployment:i}),(0,t.jsx)(n.Link,{className:"truncate",href:o,title:r.commitMessage,variant:"underline",children:r.commitMessage})]},i.url):null}r6.displayName="DeploymentsTooltip";var r7=e.i(1491904);let r9={top:25,right:30,bottom:50,left:60};function r4(e){let{value:n,formattedValue:i,x:r,y:o,thresholds:a}=e,l={dominantBaseline:"middle",fontSize:12,textAnchor:"end",x:-16,y:o};return n===a?.good?(0,t.jsxs)("g",{children:[(0,t.jsx)("circle",{cx:r,cy:o,fill:"var(--ds-green-700)",r:3}),(0,t.jsx)(rq.Text,{...l,fill:"var(--ds-green-700)",fontWeight:500,children:i})]}):n===a?.poor?(0,t.jsxs)("g",{children:[(0,t.jsx)(rq.Text,{...l,fill:"var(--ds-amber-800)",fontWeight:500,children:i}),(0,t.jsx)("path",{d:`M${r-3},${o-3} L${r+3},${o-3} L${r},${o+3} Z`,fill:"var(--ds-amber-800)",transform:`rotate(180, ${r}, ${o})`})]}):(0,t.jsx)("g",{children:(0,t.jsx)("text",{...l,fill:"var(--accents-4)",x:-10,children:i})})}function r8(e){let{className:n,data:r,width:o,metric:l,activeDevice:s,activePercentiles:c,height:f,hasFilters:p,deployments:h,dateRange:{from:m,to:g},onClickFindDeployments:x,onSelectionChange:v}=e,j=(0,rT.useIsMobile)(),b=(0,u.useRef)(null),S=(0,u.useRef)(null),w=(0,u.useRef)(!1),{resolvedTheme:N}=(0,ia.useTheme)(),[M,k]=(0,u.useState)(null),T=Math.max(o-r9.left-r9.right,0),C=Math.max(f-r9.top-r9.bottom,0),R=(0,d.getGranularity)(m,g),P=l.type,D=(0,u.useMemo)(()=>h?h.map(e=>({date:new Date(e.createdAt),...e})).filter(e=>e.date>=m&&e.date<=g):[],[h,m,g]),_=(0,u.useMemo)(()=>(function(e){for(var t,n,i,r,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return t=e,n=rX,i=rX,r=a,function e(t,o){if(o>=r.length)return i(t);let a=new rY.InternMap,l=r[o++],s=-1;for(let e of t){let n=l(e,++s,t),i=a.get(n);i?i.push(e):a.set(n,[e])}for(let[t,n]of a)a.set(t,e(n,o));return n(a)}(t,0)})(D,e=>(0,d.roundDateWithGranularity)(e.date,R).toString()),[D,R]),I=(0,u.useMemo)(()=>Array.from(_.values(),e=>(0,d.roundDateWithGranularity)(e[0].date,R)),[R,_]),A=(0,u.useCallback)(e=>e.date,[]),L=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:75;return e[P]?.[`p${t}`]??NaN},O=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:75;return t=>!isNaN(t[l.type]?.[`p${e}`]??NaN)},F=O(),z=l.thresholds[s]??l.thresholds,$=(0,rZ.bisector)(e=>e.date),G=$.left.bind($),[W,U]=(0,rJ.extent)(r,A),H=[m<W?m:W,U],B=(0,rU.scaleTime)({range:[0,T],domain:H}),V=Math.max(...c),q=p?1.05:1,K=(0,rW.scaleLinear)({domain:l.type===i.MetricType.RES?[0,100*q]:[0,Math.max((0,r0.max)(r,e=>e[l.type]?.[`p${V}`])??1,1.03*z.poor)*q],range:[C,0],nice:!0}),Q=(0,ne.useTooltip)(),{tooltipData:Z,tooltipLeft:J}=Q,Y=(0,u.useCallback)(()=>{setTimeout(()=>{w.current||Q.hideTooltip()},0)},[Q]),X=e=>{if(0===r.length||!b.current)return void Q.hideTooltip();let t=(0,E.localPoint)(b.current,e)||{x:0,y:0};if(t.y>C+r9.top)return void Y();let n=B.invert(t.x-r9.left),i=r[0];if(r.length>1){let e=G(r,n,1),t=r[e-1],o=r[e];if(!o||!A(o))return;i=n.valueOf()-t.date.valueOf()>o.date.valueOf()-n.valueOf()?o:t}i.range=(0,d.formatWithGranularity)(i.date,R);let o=B(A(i)),a=_.get((0,d.roundDateWithGranularity)(i.date,R).toString());i.deployments=a;let l=t.y>K(0)-32;i.inDeploymentArea=l,Q.showTooltip({tooltipData:i,tooltipLeft:o})},ee=r.reduce((e,t)=>l.type in t?t:e,void 0),et="dark"===N?"var(--ds-gray-400)":"#D9D9D9",en=Z?.inDeploymentArea&&Z.deployments?.length,ei=Z?en?(0,t.jsx)(r6,{bottom:K(0),dateLabel:(0,d.formatRangeWithGranularity)(Z.date,R),deployments:Z.deployments,left:(J??0)+r9.left,onMouseEnter:()=>{w.current=!0},onMouseLeave:()=>{w.current=!1},onTitleClick:()=>{let e=(0,d.getDateRangeFromGranularity)(Z.date,R);x?.(e)},ref:S}):(0,t.jsx)(iw,{dataPoints:Z[P]?.datapoints||0,dateLabel:(0,d.formatWithGranularity)(Z.date,R,!0),left:(J??0)+r9.left,name:l.name,values:O()(Z)?c.map(e=>{let t=L(Z,e);return{value:(0,y.formatMetric)(t,l).value,unit:l.unit,label:`P${e}`,rating:(0,y.getRatingForThresholds)(l.thresholds[s],t),highlight:75===e}}):c.map(e=>({value:void 0,unit:l.unit,rating:void 0,label:`P${e}`,highlight:75===e}))}):null,er=(0,u.useMemo)(()=>24>=(0,rK.differenceInHours)(g,m),[m,g]);return(0,t.jsxs)("div",{className:(0,a.clsx)(n,"relative *:select-none"),children:[(0,t.jsxs)("svg",{height:f,onMouseDown:(0,rE.withAwaitPaint)(()=>{er||j||Z&&k(Z.date)}),onMouseLeave:(0,rE.withAwaitPaint)(()=>{Y(),er||k(null)}),onMouseMove:(0,rE.withAwaitPaint)(X),onMouseUp:(0,rE.withAwaitPaint)(()=>{if(er||!M||!Z)return;let e=(0,d.roundDateWithGranularity)(M,R),t=(0,d.roundDateWithGranularity)(Z.date,R);if(e>t&&([e,t]=[t,e]),e.getTime()!==t.getTime()){let n=(0,rQ.subMinutes)((0,d.getDateRangeFromGranularity)(t,R).to,1);v?.([e,n])}k(null)}),onTouchMove:(0,rE.withAwaitPaint)(X),onTouchStart:e=>{e.preventDefault()},ref:b,width:"100%",children:[(0,t.jsx)(rz,{from:et,fromOpacity:0,id:"deployment-line-gradient",to:et,toOffset:80,vertical:!0}),(0,t.jsx)(rz,{from:"var(--ds-gray-400)",fromOpacity:.2,id:"deployment-line-active",to:"var(--ds-gray-1000)",vertical:!0}),(0,t.jsx)(rz,{from:"var(--ds-background-100)",id:"deployment-fade-gradient",to:"var(--ds-gray-100)",width:T}),(0,t.jsx)("clipPath",{id:"deployment-circles",children:(0,t.jsx)("rect",{height:32,width:T+20,x:-10,y:K(0)-32})}),(0,t.jsxs)(rG.Group,{left:r9.left,top:r9.top,children:[0!==I.length&&(0,t.jsx)("rect",{fill:"url('#deployment-fade-gradient')",height:32,opacity:en?1:.5,style:{transition:"opacity 0.2s ease-in-out"},width:T,x:0,y:K(0)-32}),(0,t.jsx)(rR.AxisLeft,{hideTicks:!0,numTicks:2,scale:K,stroke:"var(--accents-2)",tickComponent:r4,tickFormat:e=>{let{value:t,unit:n}=(0,y.formatMetric)(e.valueOf(),l);return`${t}${n}`},tickLabelProps:e=>({dx:"-0.5em",dy:"0.25em",fill:"var(--accents-4)",fontSize:12,textAnchor:"end",thresholds:z,value:Number(e)}),tickValues:[z.good,z.poor,...K.ticks(1)]}),(0,t.jsx)(r$.GridRows,{numTicks:3,pointerEvents:"none",scale:K,stroke:"var(--accents-2)",width:T}),(0,t.jsx)("path",{d:`M 0 ${K(z.poor)} H ${T}`,stroke:"var(--ds-amber-700)",strokeDasharray:4,strokeWidth:1}),(0,t.jsx)("path",{d:`M 0 ${K(z.good)} H ${T}`,stroke:"var(--ds-green-700)",strokeDasharray:4,strokeWidth:1}),M&&Z?.date&&!er?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("rect",{fill:"var(--geist-success)",fillOpacity:.1,height:C,pointerEvents:"none",width:Math.abs(B(Z.date)-B(M)),x:Math.min(B(M),B(Z.date)),y:0}),(0,t.jsx)(rB.Line,{from:{x:B(M),y:0},opacity:.2,pointerEvents:"none",stroke:"var(--geist-success)",strokeWidth:1.5,to:{x:B(M),y:C}})]}):null,(0,t.jsx)(rG.Group,{children:0!==r.length&&0!==I.length&&I.map((e,n)=>{let i=Z&&en&&(0,d.roundDateWithGranularity)(e,R).toString()===(0,d.roundDateWithGranularity)(Z.date,R).toString();return(0,t.jsx)(rG.Group,{clipPath:"url(#deployment-circles)",children:(0,t.jsxs)("g",{className:r7.default.slideUpAnimation,style:{animationDelay:`${25*n}ms`},children:[!i&&(0,t.jsx)("rect",{fill:"url('#deployment-line-gradient')",height:30,width:1.5,x:B(e)-.75,y:K(0)-30}),(0,t.jsx)(rH.Circle,{cx:B(e),cy:K(0),fill:i?"var(--ds-gray-1000)":"var(--ds-gray-500)",onClick:()=>{let t=(0,d.getDateRangeFromGranularity)(e,R);x?.(t)},r:i?4:3,style:{transition:"all 0.05s ease-in-out"}})]})},`deployments-${e.toString()}`)})}),c.includes(75)&&r.map(e=>F(e)?(0,t.jsx)("circle",{cx:B(A(e)),cy:K(L(e)),fill:"var(--accents-3)",r:2},`p-${A(e).toString()}`):null),c.map(e=>(0,t.jsx)(u.Fragment,{children:(0,t.jsx)(rV.LinePath,{curve:rL,data:r,defined:O(e),opacity:en?.5:1,stroke:"var(--geist-success)",strokeWidth:75===e?2:1,x:e=>B(A(e)),y:t=>K(L(t,e))})},e)),0!==r.length&&[...c].reverse().map(e=>(0,t.jsxs)(u.Fragment,{children:[c.length>1&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("rect",{height:"20",rx:"5",ry:"5",style:{fill:"var(--geist-background)",opacity:.8,filter:"blur(5px)"},width:"30",x:(ee?B(A(ee)):T)-27,y:K(ee?L(ee,e):0)-20}),(0,t.jsx)(rq.Text,{color:"gray-1000",fill:"var(--geist-success)",fontSize:12,fontWeight:500,textAnchor:"end",x:ee?B(A(ee)):T,y:K(ee?L(ee,e):0)-5,children:`P${e.toString()}`},e)]}),ee?(0,t.jsx)(rH.Circle,{cx:B(A(ee)),cy:K(L(ee,e)),fill:"var(--geist-success)",r:3}):null]},`active-p-${e}`)),(0,t.jsx)(rC.AxisBottom,{hideAxisLine:!0,hideTicks:!0,numTicks:j||R===i.Granularity.Month?2:6,scale:B,tickFormat:e=>(0,d.formatWithGranularity)(e,0===e.getHours()&&R===i.Granularity.Hour?i.Granularity.Day:R),tickLabelProps:()=>({dy:"0.25em",dx:"0.4em",fill:"var(--accents-4)",fontSize:12,textAnchor:"middle"}),top:C}),Z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("rect",{fill:en?"url(#deployment-line-active)":"var(--ds-gray-1000)",height:C,width:2,x:(J||0)-1,y:0}),!en&&F(Z)&&c.map(e=>(0,t.jsx)(rH.Circle,{cx:J,cy:K(L(Z,e)),fill:"var(--geist-success)",pointerEvents:"none",r:4},e))]}):null]})]}),ei]})}var oe=e.i(9962287);function ot(){let{state:e}=(0,N.useSpeedInsightsUrlState)(),{device:n}=e;return(0,t.jsx)(c.Text,{color:"gray-800",size:14,children:(0,y.getLabelForDevice)(n)})}function on(){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(c.Text,{color:"gray-800",size:14,children:(0,y.getLabelForDevice)(i.DeviceType.Desktop)}),children:(0,t.jsx)(ot,{})})}function oi(e){let{metricDefinitions:n}=e,{metric:i}=(0,k.useApiParams)(),{state:r}=(0,N.useSpeedInsightsUrlState)(),{device:o}=r,a=n[i];return(0,t.jsx)(c.Text,{color:"gray-900",children:(0,y.getMetricDescription)(a,o)})}function or(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(c.Text,{color:"gray-900",children:(0,y.getMetricDescription)(e.metricDefinitions[i.MetricType.RES],i.DeviceType.Desktop)}),children:(0,t.jsx)(oi,{...e})})}function oo(e){let{metricDefinitions:n}=e,{state:i}=(0,N.useSpeedInsightsUrlState)(),{hasData:r}=(0,i7.useSpeedInsightsStatus)(),{metric:o}=(0,k.useApiParams)(),{data:a,isLoading:l}=(0,rh.useTimeseriesWithQueryParams)(),{device:s}=i;return(0,t.jsx)(oe.MetricDisplay,{className:"h-20",device:s,hasData:r,isLoading:l,metric:o,metricDefinitions:n,size:"large",values:a?.overview},o)}function oa(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(oe.MetricDisplay,{className:"h-20",device:i.DeviceType.Desktop,hasData:!1,isLoading:!0,metric:"RES",metricDefinitions:e.metricDefinitions,size:"large"}),children:(0,t.jsx)(oo,{...e})})}function ol(e){let{metricDefinitions:n}=e,{state:r}=(0,N.useSpeedInsightsUrlState)(),{data:o}=(0,rh.useTimeseriesWithQueryParams)(),{metric:a}=(0,k.useApiParams)();if(!(0,N.canMetricBeFiltered)(a,r))return(0,t.jsxs)(c.Text,{color:"amber-900",size:14,children:[n[a].name," does not support attribution selectors."]});let{overview:u}=o||{};if(!u)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Skeleton,{height:20,width:50}),(0,t.jsx)(l.Skeleton,{height:20,width:80})]});let{device:d}=r,f=u[a]?.p75;if(!f)return null;let p=n[a],h=p.thresholds[d],m=(0,y.getRatingForThresholds)(h,f),g=h.good<h.poor,x={good:(0,y.formatMetric)(h.good,p).full,poor:(0,y.formatMetric)(h.poor,p).full},v={[i.Rating.Poor]:g?`Above ${x.poor}`:`Below ${x.poor}`,[i.Rating.Improvable]:g?`Above ${x.good}`:`Below ${x.good}`,[i.Rating.Good]:g?`Below ${x.good}`:`Above ${x.good}`};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Text,{weight:600,children:(0,y.getLabelForRating)(m)}),(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(iQ,{rating:m}),(0,t.jsx)(c.Text,{color:"gray-900",size:14,children:v[m]})]})]})}function os(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Skeleton,{height:20,width:50}),(0,t.jsx)(l.Skeleton,{height:20,width:80})]}),children:(0,t.jsx)(ol,{...e})})}function oc(e){let{metricDefinitions:r}=e,{state:o}=(0,N.useSpeedInsightsUrlState)(),{metric:a}=(0,k.useApiParams)(),{data:s,isLoading:u}=(0,rh.useTimeseriesWithQueryParams)(),{isEnabled:d,microfrontendsDataInDefaultApp:f}=(0,i7.useSpeedInsightsStatus)(),{overview:p}=s||{},{device:h}=o,m=p?.[a],g=r[a],x=g.thresholds[h],v=m?.p75||0,j=(0,y.getRatingForThresholds)(x,v),b=(s?.timeseries??[]).some(e=>a in e);if(u)return(0,t.jsx)(l.Skeleton,{animated:u,height:"20px",width:"70%"});if(f)return null;if(!m||!b||!(0,N.canMetricBeFiltered)(a,o)){let{color:e,label:i}=function(e,i){let r="gray-900";return i?(0,y.isDisplayingRecentData)(e)?{color:"amber-900",label:(0,t.jsxs)(t.Fragment,{children:["No data available. Make sure you are using the latest @vercel/speed-insights package.",(0,t.jsx)(n.Link,{external:!0,href:"/docs/speed-insights/quickstart#add-@vercel/speed-insights-to-your-project",variant:"highlight",children:"Learn more"})]})}:{color:r,label:"No data available for the selected filters."}:{color:r,label:"No data collected yet."}}(o,d);return(0,t.jsx)(c.Text,{color:e,children:i})}return(0,t.jsxs)(c.Text,{color:"gray-900",children:[j===i.Rating.Good?"More":"Less",g.type===i.MetricType.RES?" than 75% of visits had a great experience.":` than 75% of visits scored a great ${g.type}.`]})}function ou(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(l.Skeleton,{animated:!0,height:"20px",width:"70%"}),children:(0,t.jsx)(oc,{...e})})}function od(e){let{metricDefinitions:r}=e,{metric:o}=(0,k.useApiParams)(),a=r[o],{data:l}=(0,rh.useTimeseriesWithQueryParams)(),{state:{device:s}}=(0,N.useSpeedInsightsUrlState)(),c=a.type===i.MetricType.RES?function(e,t,n){if(!t||!e)return e;let i=new URL(e,"http://acme.com");for(let e of["FCP","LCP","CLS","INP"])t[e]&&i.searchParams.append(e,t[e].p75.toString());return i.searchParams.append("device",n?.toString()??"desktop"),i.toString().replace(i.origin,"")}(a.learnMoreLink,l?.overview,s):a.learnMoreLink;return(0,t.jsxs)(n.Link,{external:!0,href:c,variant:"highlight",children:["Learn more about ",a.type]})}function of(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsxs)(n.Link,{external:!0,href:e.metricDefinitions[i.MetricType.RES].learnMoreLink,variant:"highlight",children:["Learn more about ",e.metricDefinitions[i.MetricType.RES].type]}),children:(0,t.jsx)(od,{...e})})}function op(e){let{metricDefinitions:n}=e,{metric:i}=(0,k.useApiParams)(),r=n[i];return(0,t.jsx)(c.Text,{size:24,children:r.name})}function oh(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(c.Text,{size:24,children:e.metricDefinitions[i.MetricType.RES].name}),children:(0,t.jsx)(op,{...e})})}function om(e){let{isLoading:n}=(0,rh.useTimeseriesWithQueryParams)();return(0,t.jsx)(s.Stack,{className:(0,a.clsx)(!n&&"no-skeleton-animations"),direction:"column",gap:1,...e})}function og(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(s.Stack,{gap:1,...e}),children:(0,t.jsx)(om,{...e})})}function ox(e){let{metricDefinitions:n,className:i}=e;return(0,t.jsxs)(s.Stack,{className:i,gap:2,padding:3,children:[(0,t.jsx)(on,{}),(0,t.jsx)(oh,{metricDefinitions:n}),(0,t.jsx)(oa,{metricDefinitions:n}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(og,{children:(0,t.jsx)(os,{metricDefinitions:n})}),(0,t.jsx)(ou,{metricDefinitions:n})]}),(0,t.jsx)("hr",{className:"my-4 mr-6 border-0 border-b border-gray-100"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(or,{metricDefinitions:n}),(0,t.jsx)(of,{metricDefinitions:n})]})]})]})}function ov(e){let{height:n,width:o,metricDefinitions:a}=e,l=(0,r.useRouter)(),{set:s,state:c}=(0,N.useSpeedInsightsUrlState)(),{data:m}=(0,rh.useTimeseriesWithQueryParams)(),g=(0,r.useParams)(),{metric:x}=(0,k.useApiParams)(),{activePercentiles:y}=(0,u.useContext)(v.SpeedInsightsContext),{data:j}=(0,p.useProject)(g?.project,{apiVersion:"v13"}),{data:b}=(0,h.default)({limit:function(e){let{period:t,...n}=e,{from:r,to:o}=n.from&&n.to?{from:n.from,to:n.to}:(0,f.getRangeFromPeriod)(t);return(0,d.getGranularity)(r,o)===i.Granularity.Hour?25:100}(c),until:c.to?.getTime()??null,target:"production",projectId:j?.id||""}),S=(0,u.useMemo)(()=>b?.deployments&&"production"===c.environment?b.deployments:[],[b,c.environment]),w=(0,u.useMemo)(()=>N.speedInsightsFilterKeys.some(e=>c[e]),[c]),{timeseries:M}=m||{},{device:E,period:T,from:C,to:R}=c,P=a[x];return(0,t.jsx)(r8,{activeDevice:E,activePercentiles:y,data:M??[],dateRange:C&&R?{from:C,to:R}:(0,f.getRangeFromPeriod)(T),deployments:S,hasFilters:w,height:n||400,metric:P,onClickFindDeployments:function(e){let t={start:e.from,end:e.to},n=g?.teamSlug,i=g?.project;n&&i&&l.push(`/${String(n)}/${String(i)}/deployments?range=${encodeURIComponent(encodeURIComponent(JSON.stringify(t)))}&environment=production`)},onSelectionChange:e=>{s({from:e[0],to:e[1]})},width:o||573})}function oy(e){let n={from:new Date,to:new Date};return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r8,{activeDevice:i.DeviceType.Desktop,activePercentiles:[75],className:"block md:hidden",data:[],dateRange:n,deployments:void 0,hasFilters:!1,height:300,metric:e.metricDefinitions[i.MetricType.RES],width:560}),(0,t.jsx)(r8,{activeDevice:i.DeviceType.Desktop,activePercentiles:[75],className:"hidden md:block",data:[],dateRange:n,deployments:void 0,hasFilters:!1,height:400,metric:e.metricDefinitions[i.MetricType.RES],width:600})]}),children:(0,t.jsx)(ov,{...e})})}function oj(){let{metric:e}=(0,k.useApiParams)(),{data:n,isLoading:i}=(0,rh.useTimeseriesWithQueryParams)(),{timeseries:r}=n||{},o=(0,u.useMemo)(()=>{if(!i&&n)return new Date},[i,n]);return(0,t.jsx)(rk,{className:"mt-4",dataPoints:r?.reduce((t,n)=>t+(n[e]?.datapoints??0),0)??0,isLoading:i,lastUpdated:o})}function ob(){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)(rk,{className:"mt-4",dataPoints:0,isLoading:!0}),children:(0,t.jsx)(oj,{})})}function oS(e){let{children:n}=e,{hasData:i}=(0,i7.useSpeedInsightsStatus)(),{isLoading:r}=(0,rh.useTimeseriesWithQueryParams)();return(0,t.jsx)("div",{className:(0,a.clsx)("relative -mx-6 flex h-[300px] md:mx-0 md:h-[400px]",!i&&!r&&"opacity-75 grayscale"),children:n})}function ow(e){return(0,t.jsx)(u.Suspense,{fallback:(0,t.jsx)("div",{className:"relative -mx-6 flex h-[300px] opacity-75 grayscale md:mx-0 md:h-[400px]",...e}),children:(0,t.jsx)(oS,{...e})})}function oN(e){let{metricDefinitions:n}=e,{activePercentiles:i,setActivePercentiles:l}=(0,u.useContext)(v.SpeedInsightsContext),c=(0,r.useParams)(),{data:d}=(0,p.useProject)(c?.project,{apiVersion:"v13"}),f=d?.microfrontends?.enabled&&!d.microfrontends.isDefaultApp&&!d.microfrontends.routeObservabilityToThisProject;return(0,t.jsxs)("div",{className:"flex-1 rounded bg-background-100 px-3 py-4 shadow-md",children:[(0,t.jsxs)(s.Stack,{direction:{sm:"column",md:"row"},gap:2,children:[(0,t.jsx)(ox,{className:"mb-2 flex-[4] md:mb-0",metricDefinitions:n}),(0,t.jsxs)("div",{className:"relative flex-[7] px-2",children:[(0,t.jsxs)("div",{className:"flex flex-col-reverse justify-end gap-4 md:flex-row",children:[(0,t.jsx)("div",{className:"flex justify-end",children:[75,90,95,99].map(e=>{let n=i.includes(e);return(0,t.jsxs)("button",{className:(0,a.clsx)("rounded-sm","mx-0 my-1 cursor-pointer border-none bg-transparent text-sm",n?"text-blue-900":"text-gray-700 hover:text-gray-900"),onClick:()=>{l(n?i.filter(t=>t!==e):[...i,e].sort())},children:[(0,t.jsx)("span",{className:(0,a.clsx)("inline-block size-2 rounded-full ",n?"bg-blue-800":"border")})," ","P",e]},e)})}),(0,t.jsx)(rN,{})]}),(0,t.jsx)(ow,{children:(0,t.jsxs)(m.ErrorBoundary,{fallback:(0,t.jsx)("div",{className:"my-2 flex size-full items-center justify-center rounded-md bg-red-100 text-red-900",children:(0,t.jsx)("span",{children:"Error loading graph. Please reload."})}),children:[(0,t.jsx)(o.ParentSize,{children:e=>{let{width:i,height:r}=e;return(0,t.jsx)(oy,{height:r,metricDefinitions:n,width:i})}}),(0,t.jsx)("div",{className:"absolute w-full px-1 md:px-0",children:(0,t.jsx)(g.MobileScrollWrapper,{className:"my-2 w-full",contentClassName:"pb-3 pr-3 px-2 md:px-0 md:pr-px",children:(0,t.jsx)(u.Suspense,{children:(0,t.jsx)(x.SpeedInsightsFilters,{})})})})]})})]})]}),f?null:(0,t.jsxs)("div",{className:"-mx-3",children:[(0,t.jsx)(rx,{metricDefinitions:n}),(0,t.jsx)(rd,{metricDefinitions:n})]}),(0,t.jsx)(ob,{})]})}},7378279:e=>{"use strict";e.s({Onboarding:()=>p});var t=e.i(6645307),n=e.i(6530772),i=e.i(7311779),r=e.i(8158100),o=e.i(2362802),a=e.i(8975439),l=e.i(6232184),s=e.i(1389821),c=e.i(7239128),u=e.i(2834676);let d={migration:{title:"Migrate to our new package",description:(0,t.jsxs)("p",{children:["Get the most out of Speed Insights by upgrading to our new package."," ",(0,t.jsx)("br",{}),(0,t.jsx)(o.Link,{external:!0,href:"/docs/speed-insights/migrating-from-legacy",variant:"highlight",children:"Learn more about the migration from legacy Speed Insights."})," "]}),dissmisable:!0},new:{title:"Get Started",description:"To start collecting performance metrics, follow these steps.",dissmisable:!1}},f=[{id:"nextjs",name:"Next.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/next"',title:"Add the Next.js component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," ","Next.js component into your app's layout or your main file."]})}},{id:"sveltekit",name:"SvelteKit",addStep:{snippet:`import { injectSpeedInsights } from '@vercel/speed-insights/sveltekit';

injectSpeedInsights();`,title:"Use Sveltekit function",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"injectSpeedInsights"})," ","sveltekit function in your layout file."]})}},{id:"remix",name:"Remix",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/remix"',title:"Add the Remix component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Remix component into your root file."]})}},{id:"astro",name:"Astro",addStep:{snippet:'import  SpeedInsights  from "@vercel/speed-insights/astro"',title:"Add the Astro component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Astro component into one of your Astro layout."]})}},{id:"nuxtjs",name:"Nuxt.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/nuxt"',title:"Add the Nuxt component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Nuxt component into your default layout."]})}},{id:"vue",name:"Vue.js",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/vue"',title:"Add the Vue component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," Vue component into your main app template."]})}},{id:"create-react-app",name:"React",addStep:{snippet:'import { SpeedInsights } from "@vercel/speed-insights/react"',title:"Add the React component",description:(0,t.jsxs)(t.Fragment,{children:["Import and use the ",(0,t.jsx)(a.default,{children:"<SpeedInsights/>"})," React component into your main file."]})}},{id:"other",name:"Other",addStep:{snippet:`import { injectSpeedInsights } from '@vercel/speed-insights';

injectSpeedInsights();`,title:"Use injectSpeedInsights()",description:(0,t.jsxs)(t.Fragment,{children:["Import and call the ",(0,t.jsx)(a.default,{children:"injectSpeedInsights()"})," ","function once, on the client side."]})}}];function p(){let{isEnabled:e,isLoading:p,hasData:h,receivedDataFromPackage:m,isLegacyEnabled:g,legacySampleRate:x,microfrontendsDataInDefaultApp:v,dsn:y}=(0,u.useSpeedInsightsStatus)(),j=(0,s.useProjectIdOrName)(),b=(0,s.useIsExternal)(j),S=e&&!p&&!h&&!m,w=e&&!p&&g&&!m,N=(0,n.useMemo)(()=>f.map(e=>{let{id:n,name:l,addStep:s}=e;return{id:n,name:l,icon:(0,t.jsx)("div",{}),steps:function(e,n){let{snippet:l,title:s,description:u}=e,{isExternal:d,dsn:f,legacySampleRate:p}=n,h=void 0!==p&&100!==p,m=!l.includes("injectSpeedInsights"),g=m?`<SpeedInsights dsn="${f||""}" />`:`injectSpeedInsights({ dsn: "${f||""}" })`,x=(0,t.jsxs)(r.Note,{className:"mt-4",type:"warning",children:["To keep your sample rate, ",m?"add ":"include the ",(0,t.jsx)(a.default,{children:m?`sampleRate={${(p??0)/100}}`:`sampleRate: ${(p??0)/100}`}),m?" as a prop to the component.":" option when calling the function."]});return[{title:"Install our package",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("span",{children:"Start by installing @vercel/speed-insights in your existing project."}),(0,t.jsx)(c.DependencySnippet,{dependency:"@vercel/speed-insights"})]})},{title:(0,t.jsx)("span",{className:"whitespace-nowrap",children:s}),content:(0,t.jsxs)("span",{children:[u,(0,t.jsx)(i.CodeBlock,{className:"grid",hideLineNumbers:!0,language:"javascript",textToCopy:l,children:l}),d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["Add the ",(0,t.jsx)(a.default,{children:"dsn"})," property when self-hosting."]}),(0,t.jsx)(i.CodeBlock,{className:"grid",hideLineNumbers:!0,language:m?"jsx":"javascript",textToCopy:g,children:g})]}):null,(0,t.jsxs)("span",{children:["For full examples and further reference, please refer to our"," ",(0,t.jsx)(o.Link,{external:!0,href:"/docs/speed-insights/quickstart#add-the-speedinsights-component-to-your-app",variant:"highlight",children:"documentation"})]}),h?x:null]})},{title:"Deploy & Visit your Site",content:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{children:"Deploy your changes and visit the deployment to collect your first data points."}),(0,t.jsx)("p",{className:"text-gray-900",children:"If you don't see data after 30 seconds, please check for content blockers and try to navigate between pages on your site."})]})}]}(s,{legacySampleRate:x,isExternal:b,dsn:y})}}),[x,b,y]),M=(0,n.useMemo)(()=>d[w?"migration":"new"],[w]);return(0,t.jsx)(l.Onboarding,{...M,frameworks:N,visible:S||w})}}}]);

//# sourceMappingURL=62e783d87cbb4ec6.js.map
//# debugId=79a9a5ed-52f5-54da-8514-e52c25961535
