
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="434226e3-f1b4-5508-89b0-8cd19b5f553b")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{8242359:[e=>{"use strict";e.s({SubscriptionDetails:()=>E,SubscriptionDetailsSkeleton:()=>_},8242359);var i=e.i(6645307),t=e.i(6530772),n=e.i(5674541),a=e.i(889716),s=e.i(8084653),l=e.i(5163670),r=e.i(7315617),o=e.i(1164214),d=e.i(7573892),c=e.i(9802771),u=e.i(534589),h=e.i(2362802),g=e.i(7630089),m=e.i(974550),x=e.i(7150089);e.i(7901367);var p=e.i(540570);e.s({formatBillingCycle:()=>A,formatCommitmentCycle:()=>C,formatCommitmentDate:()=>k,isPaymentOverdue:()=>v,isPlanExpired:()=>T,isProTrial:()=>w},2268917);var b=e.i(9630325),j=e.i(7945022),f=e.i(2013047),y=e.i(1330899);let S={day:"numeric",month:"long",year:"numeric"};function v(e){return e?.status==="overdue"}function w(e){return e?.status==="trialing"}function T(e){return e?.status==="expired"||e?.status==="canceled"}function A(e){let{start:i,end:t}=(0,j.getBillingRange)(e);return i&&t?`${(0,b.formatDate)(i,S)} - ${(0,b.formatDate)(t,S)}`:""}function C(e){let{periodStart:i,periodEnd:t}=e;return`${(0,f.default)((0,y.calculateCommitmentCadence)({periodStart:new Date(i),periodEnd:new Date(t)}))} Commitment`}function k(e){let{periodStart:i,periodEnd:t}=e;return`${(0,b.formatDate)(Number(new Date(i)),S)} - ${(0,b.formatDate)(Number(new Date(t)),S)}`}function _(e){let{planName:t,error:n}=e;return(0,i.jsx)(a.Stack,{align:"center",className:"rounded-b bg-background-200 px-6 py-3",direction:"row",justify:"space-between",children:n?(0,i.jsx)(s.Text,{className:"leading-8",color:"gray-900",children:" "}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Skeleton,{boxHeight:32,height:24,vcenter:!0,width:120}),t&&"enterprise"!==t?(0,i.jsx)(l.Skeleton,{boxHeight:32,height:24,vcenter:!0,width:200}):null]})})}function I(e){let{plan:t,...n}=e;return(0,i.jsxs)(a.Stack,{align:"center",direction:"row",gap:3,...n,children:[(0,i.jsx)(s.Text,{as:"span",className:"geist-hide-on-mobile",color:"gray-900",children:"Custom needs?"}),(0,i.jsx)(h.ButtonLink,{"data-testid":(0,o.tid)("account-settings","billing","contact-sales"),href:u.CONTACT_SALES_DASHBOARD_HREF,onClick:()=>{d.analytics.track(c.AnalyticsEvent.BILLING_CONTACT_SALES_CLICKED,{plan:t})},size:"small",type:"secondary",children:"Contact Sales"})]})}let E=(0,t.memo)((0,m.withStripe)(function(e){let{billing:t,canUpdatePayment:l,teamId:d}=e,c=(0,p.useOpenUpgradeModal)(),{data:u}=(0,x.useStripeSources)({enabled:!0}),{trial:m,plan:b,status:j}=t,f="enterprise"===b,y="trialing"===j&&!u?.defaultSource,S=!f&&m;return(0,i.jsx)(a.Stack,{className:"rounded-b bg-background-200 px-6 py-3",children:function(){if(!l)return(0,i.jsx)(s.Text,{className:"leading-8",color:"gray-900",children:"You need additional permissions to manage your team's plan."});if(T(t))return(0,i.jsxs)(a.Stack,{align:"center",direction:"row",gap:4,justify:"space-between",children:[(0,i.jsx)(h.Link,{href:"/pricing",variant:"highlight",children:"Learn more"}),(0,i.jsx)(n.Button,{onClick:()=>c({teamHint:d,source:"billing"}),size:"small",children:"Reactivate Plan"})]});if(v(t)&&!f)return(0,i.jsxs)(a.Stack,{align:{sm:"flex-start",md:"center"},direction:{sm:"column",md:"row"},gap:4,justify:"space-between",children:[(0,i.jsx)(g.DowngradeFromProButton,{className:"w-full md:w-auto"}),(0,i.jsx)(a.Stack,{align:"center",className:"w-full md:w-auto",direction:"row",gap:2,children:(0,i.jsx)(h.ButtonLink,{className:"flex-1 md:flex-auto",href:"invoices",size:"small",type:"error",children:"Pay Overdue Invoice"})})]});if(y||S){let e=S?{disabledSteps:["team-members"],forceImmediateUpgrade:!0}:{};return(0,i.jsxs)(a.Stack,{align:"center",direction:"row",gap:4,justify:"space-between",children:[(0,i.jsx)(n.Button,{"data-testid":(0,o.tid)("account-settings","billing","upgrade"),onClick:()=>c({source:"billing",teamHint:d,...e}),size:"small",children:"End Trial and Start Pro Plan"}),(0,i.jsx)(I,{plan:b})]})}return"hobby"===b?(0,i.jsxs)(a.Stack,{align:"center",direction:"row",gap:4,justify:"space-between",children:[(0,i.jsx)(n.Button,{"data-testid":(0,o.tid)("account-settings","billing","upgrade"),onClick:()=>c({teamHint:d,source:"billing"}),size:"small",children:"Upgrade to Pro"}),(0,i.jsx)(I,{plan:b})]}):"pro"===b?(0,i.jsxs)(a.Stack,{align:"center",direction:"row",gap:4,children:[(0,i.jsx)(g.DowngradeFromProButton,{}),(0,i.jsx)(I,{className:"ml-auto",plan:b})]}):(0,i.jsx)(a.Stack,{align:"center",direction:"row",gap:4,children:(0,i.jsx)(h.ButtonLink,{href:"/help#issues",prefix:(0,i.jsx)(r.Headset,{}),size:"small",tab:!0,type:"secondary",children:"Contact Support"})})}()})}))},[2268917]],6175781:e=>{"use strict";e.s({BillingOverviewContent:()=>B,BillingOverviewHeader:()=>R},6175781);var i=e.i(6645307),t=e.i(889716),n=e.i(8692769),a=e.i(8084653),s=e.i(3921802),l=e.i(555528),r=e.i(9240532),o=e.i(503726),d=e.i(2781454),c=e.i(3585235),u=e.i(5785123),h=e.i(5168763),g=e.i(2013047),m=e.i(854226),x=e.i(2362802);function p(e){let{plan:t,event:n,href:a,children:s,...l}=e,{track:r}=(0,m.useTrackActivity)();return(0,i.jsx)(x.ButtonLink,{...l,href:a,onClick:()=>{r(n,{plan:t})},children:s})}var b=e.i(5163670),j=e.i(8158100),f=e.i(4007328),y=e.i(5528554),S=e.i(1330899),v=e.i(2344652),w=e.i(654868),T=e.i(3233863),A=e.i(2268917);function C(){return(0,i.jsx)(t.Stack,{className:"min-h-[166px] p-6",children:(0,i.jsxs)(t.Stack,{align:"center",className:"rounded p-6 text-center",gap:2,children:[(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(f.ChartBarMiddle,{className:"shrink-0"}),(0,i.jsx)(a.Text,{variant:"label-14",weight:500,children:"Your plan includes a fixed amount of free usage."})]}),(0,i.jsxs)(a.Text,{children:["To unlock additional usage and add team members, upgrade your plan to Pro."," ",(0,i.jsx)(x.Link,{external:!0,href:"/pricing",variant:"highlight",children:"Pricing and Plans"})]})]})})}function k(e){let{invoice:n,owner:r,teamSlug:o,canReadInvoice:d,planName:c}=e,u=(0,h.getDashboardHref)("/~/settings/invoices/upcoming",o),g=n&&(0,S.filterInvoiceItems)(n).length>0;return"hobby"===c?(0,i.jsx)(C,{}):(0,i.jsxs)(t.Stack,{gap:3,padding:6,children:[(0,i.jsxs)(t.Stack,{gap:1,paddingBottom:3,children:[(0,i.jsx)(a.Text,{variant:"heading-16",children:"On-demand Charges"}),(0,i.jsxs)(t.Stack,{align:{sm:"flex-start",md:"center"},direction:{sm:"column",md:"row"},gap:1.5,children:[(0,i.jsx)(a.Text,{variant:"label-14",weight:500,children:"Current Billing Cycle"}),(0,i.jsx)(a.Text,{variant:"label-14",children:(0,A.formatBillingCycle)(r)})]})]}),(0,i.jsx)(w.default,{margin:0}),(0,S.isReseller)(r)?(0,i.jsx)(T.ResellerBillingNote,{}):d?g?(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:{sm:6,md:2},justify:"space-between",children:[(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsxs)(a.Text,{variant:"heading-16",weight:500,children:["Total Due ",(0,S.formatInvoiceCurrency)(n.total,n.currency)]}),(0,A.isPaymentOverdue)(r?.billing)?(0,i.jsx)(s.Badge,{variant:"amber-subtle",children:"Overdue"}):null]}),(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:4,children:[(0,i.jsx)(a.Text,{className:"geist-hide-on-mobile",color:"gray-900",children:(0,S.formatPaymentByline)(n)}),(0,i.jsx)(l.Tooltip,{desktopOnly:!0,forceHide:d,text:"You need additional permissions to view upcoming charges",children:(0,i.jsx)(x.ButtonLink,{className:"leading-5",disabled:!d,href:u,size:"small",type:"secondary",children:"View Charges"})})]})]}):(0,i.jsxs)(t.Stack,{align:"center",className:"min-h-[40px] flex-wrap text-gray-900",direction:"row",gap:2,children:[(0,i.jsx)(y.CheckCircleFill,{}),(0,i.jsx)(a.Text,{as:"span",color:"gray-900",variant:"label-14",weight:500,children:"No on-demand charges"}),r?.billing?.plan==="enterprise"?(0,i.jsx)(a.Text,{as:"span",color:"gray-900",variant:"label-14",children:"Charges for usage beyond your commitment will appear here."}):null]}):(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:{sm:6,md:2},justify:"space-between",children:[(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(a.Text,{variant:"heading-16",weight:500,children:"Total Due"}),(0,i.jsx)(b.Skeleton,{animated:!1,boxHeight:24,className:"bg-gray-400 !bg-none",height:16,vcenter:!0,width:50})]}),(0,i.jsx)(l.Tooltip,{desktopOnly:!0,forceHide:d,text:"You need additional permissions to view upcoming charges",children:(0,i.jsx)(x.ButtonLink,{className:"leading-5",disabled:!d,href:u,size:"small",type:"secondary",children:"View Charges"})})]}),d&&r?.billing?.awsMarketplace?(0,i.jsx)(v.default,{children:(0,i.jsxs)(j.Note,{fill:!0,type:"secondary",children:["To view and manage your billing please visit your"," ",(0,i.jsx)(x.Link,{external:!0,href:"https://us-east-1.console.aws.amazon.com/marketplace/home",variant:"highlight",children:"AWS Marketplace console"}),"."]})}):null]})}var _=e.i(8242359),I=e.i(684229),E=e.i(6530772),N=e.i(5610210),M=e.i(5674541),F=e.i(1157778);function P(e){let{children:t,disabled:n,closedHeight:a,className:s,trackingAction:l,trackingMeta:r}=e,{track:o}=(0,m.useTrackActivity)(),[d,c]=(0,E.useState)(!1);return(0,i.jsxs)("div",{className:(0,N.clsx)("relative",s),"data-expanded":d,children:[(0,i.jsx)("div",{className:(0,N.clsx)("overflow-hidden",{"gradient-mask":!d}),style:{height:d?"auto":a},children:t}),!d&&(0,i.jsx)(M.Button,{className:"[&>span:first-child]: absolute bottom-1 left-1/2 translate-x-1/2 !text-xs !font-normal !shadow-tooltip [&>span:first-child]:p-0 [&>span:first-child]:pl-1.5",disabled:n,onClick:()=>{c(!0),o(l,r)},shape:"rounded",size:"small",style:{"--height":"28px"},suffix:(0,i.jsx)(F.ChevronDownSmall,{}),type:"secondary",children:"Show All"})]})}function O(e){let{creditLedgers:t,plan:n}=e;return t.length>1?(0,i.jsx)(P,{closedHeight:160,trackingAction:d.VercelActivityAction.BillingOverviewShowAllClicked,trackingMeta:{plan:n,section:"upcoming-commitments"},children:(0,i.jsx)(L,{creditLedgers:t})}):(0,i.jsx)(L,{creditLedgers:t})}function L(e){let{creditLedgers:n}=e;return(0,i.jsxs)(t.Stack,{gap:6,padding:6,children:[(0,i.jsxs)(t.Stack,{gap:1,children:[(0,i.jsx)(a.Text,{variant:"heading-16",children:(0,A.formatCommitmentCycle)(n[0])}),(0,i.jsx)(a.Text,{variant:"label-14",children:(0,A.formatCommitmentDate)(n[0])})]}),n.map(e=>{let{total:n,remaining:s}=e,l=n-s;return(0,i.jsxs)(t.Stack,{gap:2,children:[(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(a.Text,{weight:500,children:e.title}),(0,i.jsx)(D,{className:"geist-hide-on-mobile",total:n,used:l}),(0,i.jsxs)(a.Text,{className:"geist-hide-on-mobile ml-auto",color:"gray-900",weight:400,children:[(0,S.formatCreditLedgerCount)(s)," available"]})]}),(0,i.jsx)(I.Progress,{colors:{0:"var(--ds-green-700)"},max:n,value:l}),(0,i.jsx)(D,{className:"geist-show-on-mobile",total:n,used:l})]},e.title)})]})}function D(e){let{total:n,used:s,...l}=e;return(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:1,...l,children:[(0,i.jsx)(a.Text,{weight:500,children:(0,S.formatCreditLedgerCount)(s)}),(0,i.jsxs)(a.Text,{color:"gray-900",weight:400,children:["/ ",(0,S.formatCreditLedgerCount)(n)]})]})}function B(e){let{teamSlug:m,upcomingCommitmentUsage:x,invoice:b,...j}=e,{account:f,isLoading:y}=(0,o.useAccount)(),{can:S,isLoading:v}=(0,c.default)(),w=v?j.canReadInvoice:S(u.Action.Read,u.Resource.BillingInvoice),T=v?j.canUpdatePayment:S(u.Action.Update,u.Resource.PaymentMethod),C=y?j.owner:f,I=C?.billing,E=I?.plan??j.plan,N=(0,h.getDashboardHref)("/~/settings/invoices",m),M=(0,h.getDashboardHref)("/~/usage",m);return(0,i.jsxs)(n.Material,{className:"divide-y divide-gray-200",children:[(0,i.jsxs)(R,{children:[(0,i.jsxs)(t.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(a.Text,{variant:"heading-20",children:(0,i.jsxs)(r.SearchContextHighlighter,{children:[(0,g.default)(E)," Plan"]})}),(0,A.isPlanExpired)(C?.billing)?(0,i.jsx)(s.Badge,{variant:"red-subtle",children:"Expired"}):(0,A.isProTrial)(C?.billing)?(0,i.jsx)(s.Badge,{variant:"trial",children:"Pro Trial"}):null]}),(0,i.jsxs)(t.Stack,{align:"center",className:"md:ml-auto",direction:"row",gap:2,children:[(0,i.jsx)(l.Tooltip,{desktopOnly:!0,forceHide:w,text:"You need additional permissions to view invoices",children:(0,i.jsx)(p,{className:"flex-1",disabled:!w,event:d.VercelActivityAction.BillingOverviewViewInvoicesClicked,href:N,plan:E,type:"secondary",children:"View Invoices"})}),(0,i.jsx)(p,{className:"flex-1",event:d.VercelActivityAction.BillingOverviewViewUsageClicked,href:M,plan:E,type:"secondary",children:"View Usage"})]})]}),x&&x.creditLedgers.length>0?(0,i.jsx)(O,{creditLedgers:x.creditLedgers,plan:E}):null,(0,i.jsx)(k,{canReadInvoice:w,invoice:b,owner:C,planName:E,teamSlug:m}),C?.billing?(0,i.jsx)(_.SubscriptionDetails,{billing:C.billing,canUpdatePayment:T,teamId:"id"in C?C.id:void 0}):null]})}function R(e){let{children:n}=e;return(0,i.jsx)(t.Stack,{align:{sm:"stretch",md:"center"},className:"w-full",direction:{sm:"column",md:"row"},gap:{sm:5,md:10},padding:6,children:n})}},5298403:e=>{"use strict";e.s({AdditionalTeamFieldset:()=>d});var i=e.i(6645307),t=e.i(889716),n=e.i(8084653),a=e.i(2362802),s=e.i(503726),l=e.i(8727559),r=e.i(7337588);function o(){let{team:e}=(0,s.useAccount)();if(!e)return null;let t=`/${e.slug}/~/usage`;return(0,i.jsxs)(i.Fragment,{children:["To track your usage go to the ",(0,i.jsx)(a.Link,{href:t,variant:"highlight",children:"Usage"})," page."]})}function d(){return(0,i.jsx)(r.Entity,{filled:!0,children:(0,i.jsxs)(t.Stack,{gap:6,style:{padding:"var(--geist-space-2x)"},children:[(0,i.jsx)(t.Stack,{direction:"row",gap:2,children:(0,i.jsx)(n.Text,{size:20,weight:600,children:"Plan"})}),(0,i.jsxs)(n.Text,{children:["Your team is on the ",(0,i.jsx)(l.FixedPlanBadge,{plan:"enterprise"})," plan as part of an organization."]}),(0,i.jsxs)(n.Text,{children:["You don't need to set up billing for this team. ",(0,i.jsx)(o,{})]})]})})}},2798184:e=>{"use strict";e.s({AiCreditsFieldset:()=>T,AiCreditsSkeleton:()=>A});var i=e.i(6645307),t=e.i(6530772),n=e.i(5674541),a=e.i(6531164),s=e.i(611347),l=e.i(7238633),r=e.i(8350390),o=e.i(8084653),d=e.i(9495609),c=e.i(631755),u=e.i(5163670),h=e.i(889716),g=e.i(2254575),m=e.i(7488765),x=e.i(7916122),p=e.i(5610210),b=e.i(1164214),j=e.i(3585235),f=e.i(5785123),y=e.i(1343577),S=e.i(147494),v=e.i(7543841),w=e.i(2362802);function T(e){let{isAutoRechargeEnabled:u=!1,isUpdatedStripeElementsEnabled:T}=e,{can:A}=(0,j.default)(),C=A(f.Action.Update,f.Resource.PaymentMethod),{balance:k}=(0,v.useAiCreditsBalance)(),[_,I]=(0,t.useState)(!1),[E,N]=(0,t.useState)(5),[M,F]=(0,t.useState)(25),[P,O]=(0,t.useState)(500),[L,D]=(0,t.useState)(!1);return(0,i.jsx)("div",{id:"ai-credits",children:(0,i.jsxs)(s.Fieldset,{disabled:!C,children:[(0,i.jsx)(a.FieldsetContent,{children:(0,i.jsxs)(h.Stack,{gap:4,children:[(0,i.jsxs)(h.Stack,{children:[(0,i.jsx)(y.FieldsetTitle,{id:"ai-credits",children:"AI Gateway Credits"}),(0,i.jsx)(r.FieldsetSubtitle,{children:"Purchase credits to use for your team's AI Gateway usage."})]}),(0,i.jsxs)(h.Stack,{className:"overflow-hidden rounded-md border border-gray-alpha-400",children:[(0,i.jsxs)(h.Stack,{direction:"row",justify:"space-between",align:"center",gap:4,padding:4,className:(0,p.clsx)(u&&"border-b border-gray-alpha-400"),children:[(0,i.jsxs)(h.Stack,{direction:"row",gap:4,align:"center",children:[(0,i.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,i.jsx)(m.Coins,{})}),(0,i.jsxs)(h.Stack,{direction:"column",children:[(0,i.jsx)(o.Text,{color:"gray-900",size:14,weight:400,children:"Current Balance"}),(0,i.jsxs)(o.Text,{size:14,weight:600,children:["$",Number(k??0).toFixed(2)]})]})]}),(0,i.jsx)(S.ViewBalanceAndPurchaseCreditsModal,{type:"on-demand",isUpdatedStripeElementsEnabled:T})]}),u?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Entity,{as:"button",disabled:!C,onClick:()=>D(!L),style:{cursor:"pointer"},className:"hover:bg-transparent",left:(0,i.jsx)(x.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:L?"rotate(90deg)":"rotate(0deg)"}}),right:(0,i.jsx)(d.Toggle,{checked:_,disabled:!C,onChange:e=>{I(e),e?D(!0):D(!1)},size:"large",stopPropagation:!0}),children:(0,i.jsx)(g.Entity.Content,{title:"Auto-Recharge"})}),L?(0,i.jsxs)(h.Stack,{direction:"column",gap:4,padding:4,children:[(0,i.jsxs)(h.Stack,{direction:"row",gap:4,children:[(0,i.jsx)(c.Input,{"aria-labelledby":"threshold-label",label:"When balance falls below",disabled:!C||!_,onChange:e=>N(Number(e.target.value)),placeholder:"5",suffix:"USD",suffixStyling:!1,width:"100%",value:E.toString()}),(0,i.jsx)(c.Input,{"aria-labelledby":"add-amount-label",label:"Add the following to balance",disabled:!C||!_,onChange:e=>F(Number(e.target.value)),placeholder:"25",suffix:"USD",suffixStyling:!1,width:"100%",value:M.toString()})]}),(0,i.jsxs)(h.Stack,{direction:"column",gap:2,children:[(0,i.jsx)(c.Input,{"aria-labelledby":"monthly-max-label",label:"Monthly spend maximum",disabled:!C||!_,onChange:e=>O(Number(e.target.value)),placeholder:"500",suffix:"USD",suffixStyling:!1,width:"100%",value:`$ ${P.toString()}`}),(0,i.jsx)(o.Text,{color:"gray-800",size:13,children:"This is your maximum allowed monthly spend"})]}),(0,i.jsx)(h.Stack,{direction:"row",justify:"end",align:"center",children:(0,i.jsx)(n.Button,{"data-testid":(0,b.tid)("ai-credits","save-auto-recharge"),disabled:!_,size:"small",children:"Save"})})]}):null]}):null]})]})}),(0,i.jsx)(l.FieldsetFooter,{disabled:!1,children:(0,i.jsx)(l.FieldsetFooter.Status,{children:C?(0,i.jsxs)(o.Text,{color:"gray-900",children:["Credits expire 1 year after purchase. Learn more about"," ",(0,i.jsx)(w.Link,{external:!0,href:"/docs/ai-gateway/pricing",variant:"highlight",children:"AI Gateway Credits"})]}):"You need additional permissions to manage your team's AI Gateway credits."})})]})})}function A(e){let{canUpdateCredits:t,isAutoRechargeEnabled:c=!1}=e;return(0,i.jsx)("div",{id:"ai-credits",children:(0,i.jsxs)(s.Fieldset,{disabled:!t,children:[(0,i.jsx)(a.FieldsetContent,{children:(0,i.jsxs)(h.Stack,{gap:4,children:[(0,i.jsxs)(h.Stack,{children:[(0,i.jsx)(y.FieldsetTitle,{id:"ai-credits",children:"AI Gateway Credits"}),(0,i.jsx)(r.FieldsetSubtitle,{children:"Purchase credits to use for your team's AI Gateway usage."})]}),(0,i.jsxs)(h.Stack,{className:"overflow-hidden rounded-md border border-gray-alpha-400",children:[(0,i.jsxs)(h.Stack,{direction:"row",justify:"space-between",align:"center",gap:4,padding:4,className:(0,p.clsx)(c&&"border-b border-gray-alpha-400"),children:[(0,i.jsxs)(h.Stack,{direction:"row",gap:4,align:"center",children:[(0,i.jsx)("div",{className:"flex size-8 items-center justify-center rounded-full border border-gray-alpha-400 bg-gray-100",children:(0,i.jsx)(m.Coins,{})}),(0,i.jsxs)(h.Stack,{direction:"column",children:[(0,i.jsx)(o.Text,{color:"gray-900",size:14,weight:400,children:"Current Balance"}),(0,i.jsx)(u.Skeleton,{children:(0,i.jsx)(o.Text,{size:14,weight:600,children:"$0.00"})})]})]}),(0,i.jsx)(u.Skeleton,{children:(0,i.jsx)(n.Button,{"data-testid":(0,b.tid)("ai-credits","add-funds"),disabled:!t,type:"default",size:"small",children:"Buy Credits"})})]}),c?(0,i.jsx)(g.Entity,{as:"button",disabled:!t,style:{cursor:"pointer"},className:"hover:bg-transparent",left:(0,i.jsx)(x.ChevronRight,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:"rotate(0deg)"}}),right:(0,i.jsx)(d.Toggle,{checked:!1,disabled:!t,size:"large",stopPropagation:!0}),children:(0,i.jsx)(g.Entity.Content,{title:"Auto-Recharge"})}):null]})]})}),(0,i.jsx)(l.FieldsetFooter,{disabled:!1,children:(0,i.jsx)(l.FieldsetFooter.Status,{children:t?(0,i.jsx)(u.Skeleton,{children:(0,i.jsx)(o.Text,{color:"gray-900",children:"Credits expire 1 year after purchase. Learn more about AI Gateway Credits"})}):(0,i.jsx)(u.Skeleton,{children:(0,i.jsx)(o.Text,{color:"gray-900",children:"You need additional permissions to manage your team's AI Gateway credits."})})})})]})})}},8785957:e=>{"use strict";e.s({ANALYTICS_DATA:()=>i,LIMITS:()=>t});let i={spendMinimum:1,spendMaximum:999999,spendDefault:500,sampleRateDefault:100},t={hobby:{bandwidth:0x1900000000,logs:1/0,concurrentInstances:3,concurrentBuilds:1},pro:{bandwidth:1073741824e3,logs:1/0,concurrentInstances:1/0,instances:1/0,concurrentBuilds:1,teamSeats:10},enterprise:{bandwidth:1/0,logs:1/0,concurrentInstances:1/0,teamSeats:1/0}}},5280733:e=>{e.v({root:"index-module__iNCUEG__root"})},805894:e=>{e.v({borderBottom:"index-module__hxsydG__borderBottom",configureCTA:"index-module__hxsydG__configureCTA",container:"index-module__hxsydG__container",content:"index-module__hxsydG__content",disabled:"index-module__hxsydG__disabled",disabledGutter:"index-module__hxsydG__disabledGutter",footnote:"index-module__hxsydG__footnote",hr:"index-module__hxsydG__hr",innerDropdown:"index-module__hxsydG__innerDropdown",learnMore:"index-module__hxsydG__learnMore",webAnalyticsTableCell:"index-module__hxsydG__webAnalyticsTableCell",webAnalyticsTableRow:"index-module__hxsydG__webAnalyticsTableRow"})},8519768:[e=>{"use strict";e.s({useToggleConcurrentBuilds:()=>b},8519768);var i=e.i(6645307),t=e.i(503726),n=e.i(5535439),a=e.i(5674541),s=e.i(889716),l=e.i(8084653),r=e.i(4843199),o=e.i(4652282),d=e.i(5280733),c=e.i(9561794),u=e.i(1183506),h=e.i(9336536),g=e.i(3904906);let m="Error updating Concurrent Builds",x=async e=>{let{addOnValue:i,team:t}=e;if(!i)throw Error(g.IS_DEV?"`addOnValue` not found in `generateEnableDisableConcurrentBuildsFunction`":m);if(!t)throw Error(g.IS_DEV?"`team` not found in `generateEnableDisableConcurrentBuildsFunction`":m);let n=new URLSearchParams({teamId:t.id}),a=`${h.API_CONCURRENT_BUILDS}?${n.toString()}`;await (0,u.fetchAPI)(a,{method:"PUT",throwOnHTTPError:!0,body:JSON.stringify({concurrentBuilds:i})})},p={name:"concurrentBuilds",price:5e3,enable:x,disable:x,update:x,enableSteps:{confirm:{lineItems:[{name:"1 slot",price:0,priceDescriptor:"/ month"}],nonProratedCustomCopy:(0,i.jsxs)(i.Fragment,{children:[" ","and your credit card will be charged at the end of your next billing cycle."]})}},disableSteps:{disable:{customDisableCopy:"You will only have the 1 concurrent build included with your plan."}},includedQuantity:1,unit:"slot"},b=e=>{let{account:u}=(0,t.useAccount)(),h=(0,n.useRouter)(),g=u?.billing?.status==="trialing",m=g?3:32,x=p.includedQuantity??1,b=(u?.billing?.invoiceItems?.concurrentBuilds?.quantity??1)>x,j={...p,analyticsEventSource:e,description:(0,i.jsxs)(i.Fragment,{children:["Determines how many builds you can run at the same time. By increasing the number, you are increasing the level of concurrency (maximum ",m,g?" while on trial":null,")."]}),onSuccess:()=>{h.refresh()},enableSteps:{...p.enableSteps,configure:{...p.enableSteps.configure,instructions:"1 slot is included in your plan for free.",content:function(e){let{min:t,max:n}=e;return function(e){let{addOnValue:c=t,setAddOnValue:u}=e;return(0,i.jsxs)(s.Stack,{align:"center",className:d.default.root,direction:"row",gap:6,justify:"center",paddingY:16,children:[(0,i.jsx)(a.Button,{"aria-label":"Decrement counter",disabled:c===t,onClick:()=>u(Math.max(t,c-1)),svgOnly:!0,type:"secondary",typeName:"button",children:(0,i.jsx)(r.Minus,{})}),(0,i.jsx)(l.Text,{align:"center",size:40,style:{width:"44px"},weight:600,children:c}),(0,i.jsx)(a.Button,{"aria-label":"Increment counter",disabled:c===n,onClick:()=>u(Math.min(n,c+1)),svgOnly:!0,type:"secondary",typeName:"button",children:(0,i.jsx)(o.Plus,{})})]})}}({min:x,max:m})}}},f=(0,c.useTogglePaidAddOn)(j);return{addOn:j,isConcurrentBuildsEnabled:f.isEnabled&&b,enableConcurrentBuilds:f.openEnableOrUpdateModal,disableConcurrentBuilds:f.openDisableModal,ConcurrentBuildsModal:f.AddOnModal,pricingCopy:`${f.formattedPrice} / month per additional build`}};e.s({PaidAddOn:()=>M},6987262);var j=e.i(3921802),f=e.i(9495609),y=e.i(2362802),S=e.i(2934175),v=e.i(6530772),w=e.i(5610210),T=e.i(604868),A=e.i(3585235),C=e.i(5785123),k=e.i(654868),_=e.i(7949279),I=e.i(2909188),E=e.i(805894),N=e.i(540570);function M(e){let{addOn:t,children:n,disable:r,enableOrUpdate:o,isEnabled:d,modal:c,pricingCopy:u,team:h,descriptionOverride:g,showPrice:m=!0,showTitle:x=!0,disabledFillsGutter:p=!0,configureUIText:b,allowUpgrade:M}=e,{can:F}=(0,A.default)(),P=F(C.Action.Read,_.ADD_ON_PERMISSIONS[t]),O=F(C.Action.Update,_.ADD_ON_PERMISSIONS[t]),L=F(C.Action.Create,_.ADD_ON_PERMISSIONS[t]),D=(0,N.useOpenUpgradeModal)(),B=h.billing?.plan==="hobby",R=h.billing?.plan==="pro"&&"trialing"===h.billing.status,G=M&&(B||R),U=(0,T.useIsMobile)(),z=()=>{o&&r&&(d?r():o(),(0,I.trackAddOnEvent)({eventName:d?"toggle_off":"toggle_on",addOn:t,source:"billing-settings-add-ons"}))},$=()=>{(0,I.trackAddOnEvent)({eventName:"learn_more",addOn:t,source:"billing-settings-add-ons"})},H=!(h.billing?.plan==="pro"||G)||!O||!P||!L,Y=(0,v.useMemo)(()=>{let e;if("concurrentBuilds"!==t&&"previewDeploymentSuffix"!==t&&"analytics"!==t&&"observabilityBase"!==t)return null;let n="";if("concurrentBuilds"===t){n="1 total build";let i=h.billing?.invoiceItems?.concurrentBuilds?.quantity??1;e=i,h.billing?.invoiceItems?.concurrentBuilds&&(n=`${i} total builds`)}if("previewDeploymentSuffix"===t){let i=h.previewDeploymentSuffix??"vercel.app";e=i,n=i}if("analytics"===t){n="team";let e=h.billing?.invoiceItems?.analytics?.quantity??0;h.billing?.invoiceItems?.analytics&&(n=`${e} project${1===e?"":"s"}`)}if("observabilityBase"===t){if(!b)return null;n=b}return(0,i.jsx)(a.Button,{className:E.default.configureCTA,onClick:()=>{o?.(e),(0,I.trackAddOnEvent)({eventName:"open_update_modal",addOn:t,source:"billing-settings-add-ons"})},size:"tiny",suffix:(0,i.jsx)(S.ChevronUpDown,{}),type:"tertiary",typeName:"button",children:n})},[t,h,o,b]),W=(0,v.useMemo)(()=>d?"concurrentBuilds"===t||"analytics"===t?"Enabled for":"previewDeploymentSuffix"===t?"Enabled as":"Enabled":"Disabled",[t,d]);return(0,i.jsxs)("div",{className:(0,w.clsx)(E.default.container,{[E.default.disabledGutter]:p&&H,[E.default.disabled]:H,"geist-disabled":H}),id:_.ADD_ON_IDS[t],children:[(0,i.jsxs)(s.Stack,{gap:5,children:[m?(0,i.jsx)(l.Text,{color:H?"gray-800":"gray-900",children:u}):null,(0,i.jsxs)(s.Stack,{gap:2,children:[x?(0,i.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,i.jsx)(l.Text,{as:"h2",color:H?"gray-800":"gray-1000",size:16,weight:600,children:(0,_.getAddOnDisplayName)(t)}),G?(0,i.jsx)(j.Badge,{size:"sm",variant:"blue",children:"Pro"}):null]}):null,(0,i.jsxs)(s.Stack,{className:(0,w.clsx)({[E.default.borderBottom]:!n}),color:H?"gray-800":"gray-900",gap:2,children:[(0,i.jsx)(l.Text,{children:g??_.ADD_ON_DESCRIPTIONS[t]}),U?(0,i.jsx)(y.Link,{className:E.default.learnMore,external:!0,href:_.ADD_ON_LEARN_MORE_LINKS[t],onClick:$,target:"_blank",children:"Learn More"}):null]})]}),n?(0,i.jsx)(s.Stack,{children:n}):null,(0,i.jsxs)(s.Stack,{align:"center",direction:"row",justify:"space-between",children:[(0,i.jsxs)(s.Stack,{align:"center",direction:"row",gap:1,children:[(0,i.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(f.Toggle,{checked:d,onChange:()=>{G?D({source:`billing-add-ons-${t}`,teamHint:h.id,onConversionSuccess:()=>{z()}}):z()},size:"large"}),(0,i.jsx)(l.Text,{children:W})]}),d?Y:null]}),U?null:(0,i.jsx)(y.Link,{className:E.default.learnMore,external:!0,href:_.ADD_ON_LEARN_MORE_LINKS[t],onClick:$,target:"_blank",children:"Learn More"})]})]}),(0,i.jsx)(k.default,{className:E.default.hr}),c]})}},[6987262]],932790:e=>{"use strict";e.s({default:()=>p});var i=e.i(6645307),t=e.i(6530772),n=e.i(6531164),a=e.i(611347),s=e.i(7238633),l=e.i(889716),r=e.i(503726),o=e.i(3585235),d=e.i(5785123),c=e.i(8785957),u=e.i(260979),h=e.i(8519768),g=e.i(6987262),m=e.i(1343577),x=e.i(1155472);function p(){let e=(0,r.useAccount)(),{isLoading:t}=(0,o.default)();return!e||e.isLoading||!e.user||t?(0,i.jsx)(x.default,{height:108}):(0,i.jsx)(b,{})}function b(){let e=(0,r.useAccount)(),{can:x}=(0,o.default)(),p=x(d.Action.Update,d.Resource.ConcurrentBuilds),{team:b}=e,j=b?.billing?.plan,f=function(e){if(!e?.billing?.plan)return null;let i=e.billing.plan,t=e.resourceConfig?.concurrentBuilds;if("enterprise"===i&&t)return t;let n=c.LIMITS[i];return("concurrentBuilds"in n?n.concurrentBuilds:null)||null}(b),y="enterprise"===j,S=(0,h.useToggleConcurrentBuilds)("billing-settings-concurrent-builds"),v=!p||y,w=(0,t.useMemo)(()=>"hobby"===j?"Concurrent Builds are not available on the Hobby plan.":y?"The number of included concurrent builds is specified by your Enterprise contract.":p?`Your plan grants you ${f} free Concurrent Build${1!==(f||0)?"s":""}.`:"You need additional permissions to manage your team's concurrent builds.",[j,y,p,f]);return b?(0,i.jsx)("div",{children:(0,i.jsxs)(a.Fieldset,{disabled:v,children:[(0,i.jsx)(n.FieldsetContent,{disabled:v,noBottomPadding:!0,children:(0,i.jsxs)(l.Stack,{gap:3,children:[(0,i.jsx)(m.FieldsetTitle,{id:u.TEAM_SETTINGS_NAVIGATION_TITLES.billing.concurrentBuilds,children:u.TEAM_SETTINGS_NAVIGATION_TITLES.billing.concurrentBuilds}),(0,i.jsx)(g.PaidAddOn,{addOn:"concurrentBuilds",descriptionOverride:S.addOn.description,disable:S.disableConcurrentBuilds,disabledFillsGutter:!1,enableOrUpdate:S.enableConcurrentBuilds,isEnabled:S.isConcurrentBuildsEnabled,modal:S.ConcurrentBuildsModal,pricingCopy:S.pricingCopy,showPrice:!1,showTitle:!1,team:b})]})}),(0,i.jsx)(s.FieldsetFooter,{disabled:!1,highlight:v,children:(0,i.jsx)(s.FieldsetFooter.Status,{children:w})})]})}):null}},3768337:e=>{"use strict";e.s({CurrencyInput:()=>s});var i=e.i(6645307),t=e.i(631755),n=e.i(6530772),a=e.i(6325202);let s=(0,n.forwardRef)(function(e,s){let{currency:l="usd",onChange:r,placeholder:o,requireWholeNumbers:d=!1,value:c,...u}=e,[h,g]=(0,n.useState)(!1),m=(0,n.useCallback)(e=>{let i=e.target.value;if(""===i)return r(null);let t=Number(i);d&&(t=Math.floor(t)),r(100*t)},[r,d]),x=(0,n.useMemo)(()=>null===c?"":h?(c/100).toString():(0,a.formatCurrency)(c,l),[l,h,c]);return(0,i.jsx)(t.Input,{onBlur:e=>{g(!1),u.onBlur?.(e)},onChange:m,onFocus:e=>{g(!0),u.onFocus?.(e)},placeholder:(0,a.formatCurrency)(o??1e6,l),ref:s,suffix:l.toUpperCase(),typeName:h?"number":"text",value:x,...u})})},4274141:e=>{"use strict";e.s({default:()=>M});var i=e.i(6645307),t=e.i(6530772),n=e.i(7315479),a=e.i(5674541),s=e.i(6531164),l=e.i(1917237),r=e.i(8448595),o=e.i(611347),d=e.i(7238633),c=e.i(4789498),u=e.i(6921100),h=e.i(889716),g=e.i(8350390),m=e.i(8084653),x=e.i(584439),p=e.i(2362802),b=e.i(1164214),j=e.i(6944370),f=e.i(9336536),y=e.i(503726),S=e.i(9326250),v=e.i(3585235),w=e.i(5785123),T=e.i(8785957),A=e.i(6325202),C=e.i(260979),k=e.i(3768337),_=e.i(1283166),I=e.i(1343577),E=e.i(1155472),N=e.i(5071261);function M(){let e=(0,y.useAccount)(),{isLoading:t}=(0,v.default)();return!e||e.isLoading||!e.user||t?(0,i.jsx)(E.default,{}):(0,i.jsx)(P,{})}let F=new Intl.NumberFormat("en-US").format;function P(){var e;let E=(0,y.useAccount)(),{can:M}=(0,v.default)(),{user:P,team:O}=E,L=O||P,D=O?.billing?.awsMarketplace,B=L?.billing?.controls,[R,G]=(0,t.useState)(null),[U,z]=(0,t.useState)(!1),[$,H]=(0,t.useState)(100*(B?.analyticsSpendLimitInDollars||T.ANALYTICS_DATA.spendDefault)),[Y,W]=(0,t.useState)(B?.analyticsSampleRateInPercent||T.ANALYTICS_DATA.sampleRateDefault),V=(0,x.useToasts)(),q=(e=L?.billing,{batch:e?.invoiceItems?.analyticsUsage?.batch??1e4,price:e?.invoiceItems?.analyticsUsage?.price??65}),X=(0,_.billingFeatureSupported)(L,"speedInsights.sampling"),Q=X?C.TEAM_SETTINGS_NAVIGATION_TITLES.billing.analyticsSampling:"Speed Insights Cost Limit",K=(0,t.useCallback)(async e=>{e.preventDefault();try{G(null),z(!0);let e=new URLSearchParams(O?{teamId:O.id}:{});await (0,j.default)(`${f.API_SPEED_INSIGHTS_SETTINGS}?${e}`,{method:"PATCH",body:JSON.stringify({spendLimit:null!==$?$/100:null,sampleRate:X?Y:void 0})}),await E.mutate(),V.success(`Your ${Q} settings have been updated.`)}catch(e){G((0,n.normalizeError)(e))}finally{z(!1)}},[O,$,X,Y,E,V,Q]),Z=M(w.Action.Update,w.Resource.AnalyticsSampling)&&!D,J=M(w.Action.Read,w.Resource.AnalyticsSampling),ee=(L?.billing?.invoiceItems?.analytics?.quantity||0)>0;return(0,i.jsx)("div",{id:"analytics-sampling",children:(0,i.jsx)("form",{onSubmit:(0,S.promiseToCallback)(K),children:(0,i.jsxs)(o.Fieldset,{disabled:!Z,children:[(0,i.jsxs)(s.FieldsetContent,{disabled:!Z||!ee,children:[(0,i.jsx)(I.FieldsetTitle,{id:C.TEAM_SETTINGS_NAVIGATION_TITLES.billing.analyticsSampling,children:Q}),X?(0,i.jsx)(g.FieldsetSubtitle,{children:"Control Speed Insights usage with sampling, limiting the amount of Data Points collected, reducing your monthly cost."}):(0,i.jsx)(g.FieldsetSubtitle,{children:"Control Speed Insights usage with a cost limit, reducing your monthly cost."}),(0,i.jsxs)("div",{children:[(0,i.jsxs)(h.Stack,{align:"flex-start",direction:{sm:"column",md:"row"},gap:3,children:[(0,i.jsx)("div",{style:{width:`${(0,A.formatCurrency)(100*T.ANALYTICS_DATA.spendMaximum,L?.billing?.currency).toString().length+10}ch`},children:J?(0,i.jsx)(k.CurrencyInput,{"aria-label":"Cost Limit",currency:L?.billing?.currency,disabled:U||!Z||!ee,label:"Cost Limit",max:T.ANALYTICS_DATA.spendMaximum,min:T.ANALYTICS_DATA.spendMinimum,onChange:e=>{null!==e?e/100>=T.ANALYTICS_DATA.spendMinimum&&e/100<=T.ANALYTICS_DATA.spendMaximum&&H(e):H(null)},placeholder:100*T.ANALYTICS_DATA.spendDefault,readOnly:U,requireWholeNumbers:!0,required:!0,value:$,width:"100%"}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Label,{value:"Cost Limit"}),(0,i.jsx)(N.default,{})]})}),X?(0,i.jsx)("div",{children:J?(0,i.jsx)(u.Select,{disabled:U||!Z||!ee,label:"Sampling Percentage",onChange:e=>W(Number.parseInt(e.target.value)),value:Y,children:[10,20,30,40,50,60,70,80,90,100].map(e=>(0,i.jsxs)("option",{value:e,children:[e,"%"]},`sample-${e}`))}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.Label,{value:"Sampling Percentage"}),(0,i.jsx)(N.default,{width:128})]})}):null]}),J&&X?(0,i.jsxs)(h.Stack,{gap:6,style:{paddingTop:"1.5rem"},children:[(0,i.jsx)("hr",{className:"geist-hr-reset"}),(0,i.jsxs)(m.Text,{as:"span",children:[(0,i.jsx)(m.Text,{as:"span",weight:700,children:(0,A.formatCurrency)(q.price,L?.billing?.currency)})," ","per ",F(q.batch)," Data Points"]})]}):null]})]}),(0,i.jsxs)(d.FieldsetFooter,{disabled:!1,highlight:!Z||!ee,children:[(0,i.jsx)(d.FieldsetFooter.Status,{children:function(e){let{error:t,isAwsMpCustomer:n,canUpdateSpeedInsights:a,featureName:s}=e;return t?.message?(0,i.jsx)(r.ErrorText,{children:(0,i.jsx)(l.Error,{error:t})}):n?`Contact your sales rep to manage your team's ${s.toLowerCase()} percentage and cost limits.`:a?(0,i.jsxs)("span",{children:["The cost limit will apply to all Speed Insights projects.",(0,i.jsx)("br",{}),"Projects using ",(0,i.jsx)("code",{children:"@vercel/speed-insights"})," package must control sampling in code."," ",(0,i.jsx)(p.Link,{external:!0,href:"/docs/speed-insights/migrating-from-legacy",variant:"highlight",children:"Learn how"}),".",(0,i.jsx)("br",{}),"This sampling rate will only apply to projects that are not using the package."]}):`You need additional permissions to manage your team's ${s.toLowerCase()} percentage and cost limits.`}({error:R,isAwsMpCustomer:D,canUpdateSpeedInsights:Z,featureName:Q})}),Z&&ee?(0,i.jsx)(d.FieldsetFooter.Actions,{children:(0,i.jsx)(a.Button,{"data-testid":(0,b.tid)("account-settings","billing","analytics-save"),disabled:!$,loading:U,size:"small",width:U?100:80,children:U?"Saving":"Save"})}):null]})]})})})}},3763596:e=>{"use strict";e.s({BillingFlagsExplorer:()=>C});var i=e.i(6645307),t=e.i(6530772),n=e.i(6531164),a=e.i(1917237),s=e.i(611347),l=e.i(7238633),r=e.i(8934201),o=e.i(889716),d=e.i(8350390),c=e.i(584439),u=e.i(8158100),h=e.i(9495609),g=e.i(8084653),m=e.i(3821772),x=e.i(6649026),p=e.i(36632),b=e.i(2362802),j=e.i(1183506),f=e.i(9336536),y=e.i(503726),S=e.i(3585235),v=e.i(5785123),w=e.i(7210350),T=e.i(1343577),A=e.i(1155472);function C(){let e=(0,y.useAccount)(),t=(0,S.default)(),n=(0,w.useBillingSubscription)(e.team?.slug);return!e.team||t.isLoading||n.isLoading?(0,i.jsx)(A.default,{extraHeight:38}):(0,i.jsx)(k,{})}function k(){let{team:e}=(0,y.useAccount)(),{data:A}=(0,w.useBillingSubscription)(e?.slug),C=(0,t.useMemo)(()=>A?.products.find(e=>"flags-explorer"===e.slug),[A?.products]),k=!!(C?.entitlement?.createdAt&&!C.entitlement.expiredAt),_=!!(C?.entitlement?.createdAt&&C.entitlement.expiredAt),I=!!(C?.entitlement?.expiredAt&&C.entitlement.expiredAt<Date.now()),{can:E}=(0,S.default)(),{upgradeModal:N,openUpgradeModal:M,isSubmitting:F}=function(e){let{isEnabled:n,isFeatureExpired:s,isFeaturePreviouslyEnabled:l}=e,o=(0,c.useToasts)(),[d,u]=(0,t.useState)(!1),[h,m]=(0,t.useState)(null),[S,v]=(0,t.useState)(!1),{team:T}=(0,y.useAccount)(),A=T?.id,C=(0,w.useBillingSubscription)(T?.slug),k=()=>{S||(u(!1),m(null))},_=(0,t.useCallback)(async e=>{let{isReEnabling:t}=e;m(null),v(!0),t&&o.success("Enabling unlimited overrides for Flags Explorer.");try{let e=n?`${f.API_FLAGS_EXPLORER}/disable`:`${f.API_FLAGS_EXPLORER}/enable`;await (0,j.fetchAPI)(`${e}${(0,x.encode)({teamId:A})}`,{method:"POST",throwOnHTTPError:!0,headers:{"content-type":"application/json"}}),await C.mutate(),n?o.success("Disabled unlimited overrides for Flags Explorer."):o.success("Enabled unlimited overrides for Flags Explorer."),u(!1)}catch(e){if((0,p.isError)(e))m(e),t&&o.error({text:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.Text,{as:"span",weight:700,children:"Error:"})," ",e.message]})});else throw e}finally{v(!1)}},[n,o,v,u,C,A]);return{openUpgradeModal:()=>{if(!s&&l&&!n){u(!1),_({isReEnabling:!0});return}u(!0)},upgradeModal:(0,i.jsxs)(r.Modal.Modal,{active:d,onClickOutside:()=>k(),children:[(0,i.jsxs)(r.Modal.Body,{children:[(0,i.jsx)(r.Modal.Header,{children:(0,i.jsx)(r.Modal.Title,{children:"Flags Explorer"})}),n?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Modal.P,{children:"You are about to disable unlimited feature flag overrides for your team."}),(0,i.jsx)(r.Modal.P,{children:"Once disabled, at the end of your team's billing period, your team will revert to the standard plan limit of 150 overrides per month across all projects."}),(0,i.jsx)(r.Modal.P,{children:(0,i.jsx)("b",{children:"Disable unlimited overrides."})})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.Modal.P,{children:"Unlock unlimited overrides within the Flags Explorer for your team."}),(0,i.jsxs)(r.Modal.P,{children:["The Flags Explorer is part of the Vercel Toolbar and allows you to easily view and override feature flags without leaving your browser tab."," ",(0,i.jsx)(b.Link,{external:!0,href:"/docs/feature-flags/flags-explorer",variant:"highlight",children:"Learn More"})]}),(0,i.jsx)(r.Modal.P,{children:(0,i.jsx)("b",{children:"Enable unlimited overrides for 250 USD per month."})})]}),h?(0,i.jsx)(a.Error,{error:h}):null]}),(0,i.jsxs)(r.Modal.Actions,{children:[(0,i.jsx)(r.Modal.Action,{buttonType:"button",onClick:()=>k(),type:"secondary",children:"Cancel"}),(0,i.jsx)(r.Modal.Action,{buttonType:"submit",loading:S,onClick:()=>void _({}),children:n?"Disable":"Pay & Enable"})]})]}),isSubmitting:S}}({isEnabled:k,isFeatureExpired:I,isFeaturePreviouslyEnabled:_}),P=E(v.Action.Update,v.Resource.FlagsExplorerSubscription),O=!P,L=(0,t.useMemo)(()=>P?(0,i.jsxs)(i.Fragment,{children:["Learn more about ",(0,i.jsx)(b.Link,{external:!0,href:"/docs/feature-flags/flags-explorer",variant:"highlight",children:"Flags Explorer"})]}):(0,i.jsx)(i.Fragment,{children:"You need additional permissions to manage your team's Flags Explorer."}),[P]);return(0,i.jsxs)(i.Fragment,{children:[N,(0,i.jsxs)(s.Fieldset,{disabled:O,children:[(0,i.jsxs)(n.FieldsetContent,{children:[(0,i.jsx)(T.FieldsetTitle,{children:"Flags Explorer"}),(0,i.jsx)(d.FieldsetSubtitle,{children:"Unrestricted feature flag testing through the Vercel Toolbar, enabling your team to validate multiple configurations across environments without leaving your application."}),(0,i.jsxs)(o.Stack,{gap:3,children:[(0,i.jsx)(o.Stack,{direction:"row",children:(0,i.jsx)(h.Toggle,{"aria-label":"Toggle unlimited overrides",checked:k,direction:"switch-first",disabled:F,label:"Toggle unlimited overrides",onChange:()=>M(),size:"large",children:(0,i.jsxs)(o.Stack,{direction:"row",gap:2,children:[F?(0,i.jsx)(m.Spinner,{color:"var(--accents-5)",size:20}):null,"Enable unlimited overrides"]})})}),C?.entitlement?.expiredAt?(0,i.jsxs)(u.Note,{children:["Your access to flags explorer will be disabled on"," ",new Date(C.entitlement.expiredAt).toDateString()]}):null]})]}),(0,i.jsx)(l.FieldsetFooter,{children:(0,i.jsx)(l.FieldsetFooter.Status,{children:L})})]})]})}},2198535:e=>{"use strict";e.s({default:()=>m});var i=e.i(6645307),t=e.i(6531164),n=e.i(611347),a=e.i(7238633),s=e.i(889716),l=e.i(8350390),r=e.i(9495609),o=e.i(2362802),d=e.i(503726),c=e.i(3585235),u=e.i(5785123),h=e.i(1343577),g=e.i(1155472);function m(){let e=(0,d.useAccount)(),{isLoading:t}=(0,c.default)();return!e||e.isLoading||!e.user||t?(0,i.jsx)(g.default,{}):(0,i.jsx)(x,{})}function x(){let{can:e}=(0,c.default)(),{team:g}=(0,d.useAccount)();e(u.Action.Read,u.Resource.BillingInformation);let m=!e(u.Action.Update,u.Resource.BillingInformation);return(0,i.jsxs)(n.Fieldset,{disabled:m,children:[(0,i.jsxs)(t.FieldsetContent,{disabled:m,children:[(0,i.jsx)(h.FieldsetTitle,{children:"HIPAA BAA"}),(0,i.jsx)(l.FieldsetSubtitle,{children:"Your team has a Business Associate Agreement (BAA) with Vercel."}),(0,i.jsx)(s.Stack,{gap:3,children:(0,i.jsx)(s.Stack,{direction:"row",children:(0,i.jsx)(r.Toggle,{"aria-label":"HIPAA BAA Addon status",checked:!0,direction:"switch-first",disabled:!0,label:"HIPAA BAA Addon status",onChange:()=>{},size:"large",children:(0,i.jsx)(s.Stack,{direction:"row",gap:2,children:"Agreement is active"})})})})]}),(0,i.jsx)(a.FieldsetFooter,{disabled:!1,highlight:m,children:(0,i.jsx)(a.FieldsetFooter.Status,{children:(0,i.jsxs)("span",{children:["Learn more about Vercel's"," ",(0,i.jsx)(o.Link,{external:!0,href:"/docs/security/shared-responsibility",variant:"highlight",children:"Shared Responsibility Model"})]})})})]})}},4226837:e=>{e.v({actionContainer:"index-module__npMpuG__actionContainer",modalTitle:"index-module__npMpuG__modalTitle"})},2809071:e=>{e.v({billingForm:"enable-modal-module__QXLe5G__billingForm",body:"enable-modal-module__QXLe5G__body",feature:"enable-modal-module__QXLe5G__feature",featureStack:"enable-modal-module__QXLe5G__featureStack",features:"enable-modal-module__QXLe5G__features",featuresGrid:"enable-modal-module__QXLe5G__featuresGrid",finePrintStack:"enable-modal-module__QXLe5G__finePrintStack",heading:"enable-modal-module__QXLe5G__heading",noBorder:"enable-modal-module__QXLe5G__noBorder",pricing:"enable-modal-module__QXLe5G__pricing",terms:"enable-modal-module__QXLe5G__terms",textBox:"enable-modal-module__QXLe5G__textBox"})},7031892:e=>{"use strict";e.s({DataCacheBilling:()=>D},7031892);var i=e.i(6645307),t=e.i(6530772),n=e.i(6531164),a=e.i(8448595),s=e.i(611347),l=e.i(7238633),r=e.i(8350390),o=e.i(1917237),d=e.i(3821772),c=e.i(889716),u=e.i(8084653),h=e.i(9495609),g=e.i(584439),m=e.i(2362802),x=e.i(1164214),p=e.i(7573892),b=e.i(9802771),j=e.i(2270026),f=e.i(1183506),y=e.i(9336536),S=e.i(3585235),v=e.i(5785123),w=e.i(1155472),T=e.i(1343577),A=e.i(4226837),C=e.i(9948746),k=e.i(8934201),_=e.i(7945022),I=e.i(6325202),E=e.i(2809071);let N=[{title:"Unlimited Cache Writes",description:"Uninterrupted writes to your Data Caches for enabled projects."},{title:"Unlimited Cache Reads",description:"Uninterrupted reads from your Data Caches for enabled projects."},{title:"Unlimited Revalidations",description:"Revalidate your Data Cache entries however much you need it whenever you need it."}];function M(e){let{active:t,currentValue:n,hide:a,submit:s,team:l}=e,{end:r}=(0,_.getBillingRange)(l),o=r?`on ${new Date(r).toLocaleDateString()} `:"";return(0,i.jsxs)(k.Modal.Modal,{active:t,onClickOutside:a,width:"540px",children:[(0,i.jsx)(k.Modal.Body,{className:E.default.body,padding:!1,children:n?(0,i.jsx)(P,{cycleEndText:o}):(0,i.jsx)(F,{cycleEndText:o,team:l})}),(0,i.jsxs)(k.Modal.Actions,{children:[(0,i.jsx)(k.Modal.Action,{onClick:a,type:"secondary",children:"Cancel"}),(0,i.jsx)(k.Modal.Action,{onClick:s,children:n?"Disable":"Enable"})]})]})}function F(e){let{cycleEndText:t,team:n}=e,a=n.billing?.currency;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(k.Modal.Header,{children:[(0,i.jsx)(k.Modal.Title,{children:"Enable Data Cache Unlimited"}),(0,i.jsx)(k.Modal.Subtitle,{children:(0,i.jsx)(u.Text,{as:"span",color:"gray-900",children:"Keep your site performant by removing limits on the Data Cache:"})})]}),(0,i.jsx)("div",{className:E.default.featuresGrid,children:(0,i.jsx)(O,{})}),(0,i.jsx)(u.Text,{as:"p",className:E.default.textBox,color:"gray-900",children:"The following charges will be applied to your invoice:"}),(0,i.jsxs)(c.Stack,{className:E.default.pricing,gap:3,children:[(0,i.jsxs)(c.Stack,{direction:"row",justify:"space-between",children:[(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{weight:600,children:"Data Writes"}),(0,i.jsx)(u.Text,{children:"Price per GB of data written to the cache"})]}),(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{align:"right",weight:600,children:(0,I.formatCurrency)(10,a)}),(0,i.jsx)(u.Text,{children:"per GB"})]})]}),(0,i.jsxs)(c.Stack,{direction:"row",justify:"space-between",children:[(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{weight:600,children:"Data Reads"}),(0,i.jsx)(u.Text,{children:"Price per GB of data retrieved from the cache"})]}),(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{align:"right",weight:600,children:(0,I.formatCurrency)(10,a)}),(0,i.jsx)(u.Text,{children:"per GB"})]})]}),(0,i.jsxs)(c.Stack,{direction:"row",justify:"space-between",children:[(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{weight:600,children:"Revalidations"}),(0,i.jsx)(u.Text,{children:"Number of tags or items requested to revalidate."})]}),(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{align:"right",weight:600,children:(0,I.formatCurrency)(25,a)}),(0,i.jsxs)(u.Text,{align:"right",children:["per 1,000",(0,i.jsx)("br",{}),"revalidations"]})]})]})]}),(0,i.jsx)(c.Stack,{className:E.default.finePrintStack,children:(0,i.jsxs)(u.Text,{color:"gray-1000",lineHeight:20,size:12,children:["In case the feature is disabled, Data Cache will be disabled when you exceed your free quota. An invoice will be sent ",t,"for already consumed resources. Data Cache Unlimited can be re-enabled at any time without an additional fee, but a service gap may occur."," ",(0,i.jsx)(m.Link,{external:!0,href:"https://vercel.com/docs/infrastructure/data-cache/limits",variant:"highlight",children:"Learn more"})]})})]})}function P(e){let{cycleEndText:t}=e;return(0,i.jsxs)(c.Stack,{className:E.default.heading,gap:5,children:[(0,i.jsx)(k.Modal.Title,{children:"Disable Data Cache Unlimited"}),(0,i.jsxs)(u.Text,{children:["By clicking Disable, Data Cache will be disabled when you exceed your free quota. If you are currently over quota, an invoice will be sent at"," ",(0,i.jsxs)("strong",{children:[" the end of the billing cycle ",t]})]})]})}function O(){return(0,i.jsx)(i.Fragment,{children:N.map(e=>(0,i.jsx)(L,{feature:e},e.title))})}function L(e){let{feature:t}=e;return(0,i.jsxs)(c.Stack,{className:E.default.featureStack,direction:"row",gap:3,children:[(0,i.jsx)(C.Check,{}),(0,i.jsxs)(c.Stack,{gap:2,children:[(0,i.jsx)(u.Text,{weight:600,children:t.title}),(0,i.jsx)(u.Text,{children:t.description})]})]},t.title)}function D(e){let{team:t}=e,{isLoading:n,can:a}=(0,S.default)(),s=(0,g.useToasts)(),l=t.dataCache?.excessBillingEnabled??!1;return n||!s.loaded?(0,i.jsx)(w.default,{height:108}):(0,i.jsx)(R,{can:a,isEnabled:!!l,team:t,toasts:s})}function B(e){let{error:t,canUpdate:n}=e;return t?.message?(0,i.jsx)(a.ErrorText,{children:(0,i.jsx)(o.Error,{error:t})}):n?(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(m.Link,{external:!0,href:"https://vercel.com/docs/infrastructure/data-cache/limits",onClick:()=>p.analytics.track(b.AnalyticsEvent.REMOTE_CACHING_LEARN_MORE),variant:"highlight",children:"Data Cache Unlimited"})]}):(0,i.jsx)("span",{children:"You need additional permissions to manage your team's Data Cache billing."})}function R(e){let{isEnabled:a,team:o,can:g,toasts:m}=e,[S,w]=(0,t.useState)(a),[C,k]=(0,t.useState)(null),[_,I]=(0,t.useState)(!1),[E,N]=(0,t.useState)(!1),F=g(v.Action.Update,v.Resource.DataCacheBillingSettings),P=async e=>{I(!1);let i=`?teamId=${encodeURIComponent(o.id)}`,t=`${y.API_DATA_CACHE_BILLING_SETTINGS}${i}`;N(!0);try{await (0,f.fetchAPI)(t,{method:"PATCH",body:{excessBillingEnabled:e}}),m.success("Successfully updated Data Cache Unlimited settings")}catch(i){k(i),w(!e),m.error("Failed to update Data Cache Unlimited settings")}finally{w(e),N(!1),p.analytics.track(b.AnalyticsEvent.DATA_CACHE_BILLING_TOGGLE,{enabled:e})}};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(s.Fieldset,{disabled:!F,children:[(0,i.jsxs)(n.FieldsetContent,{disabled:!F,children:[(0,i.jsx)(T.FieldsetTitle,{id:"datacahe-billing-title",children:"Data Cache Unlimited"}),(0,i.jsx)(r.FieldsetSubtitle,{children:"Continue using Data Cache when you exceed your free quota."}),(0,i.jsxs)(c.Stack,{align:"center",className:A.default.actionContainer,direction:"row",justify:"space-between",children:[(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(u.Text,{weight:700,children:`Data Cache Unlimited is ${S?"enabled":"disabled"}.`}),(0,i.jsx)(u.Text,{color:"gray-900",children:S?"You will be billed for excess data cache usage.":"Data cache service will be disabled when you exceed your free quota"})]}),(0,i.jsx)(c.Stack,{children:E?(0,i.jsx)(d.Spinner,{}):(0,i.jsx)(h.Toggle,{checked:S,"data-testid":(0,x.tid)("data-cache-opt-in","toggle"),onChange:()=>I(!0),size:"large"})})]})]}),(0,i.jsx)(l.FieldsetFooter,{disabled:!1,highlight:!F,children:(0,i.jsx)(l.FieldsetFooter.Status,{children:(0,i.jsx)(B,{canUpdate:F,error:C})})})]}),(0,i.jsx)(M,{active:_,currentValue:S,hide:()=>I(!1),submit:()=>{P(!S).catch(j.captureError)},team:o})]})}},544174:e=>{e.v({actionContainer:"index-module__WoWkvW__actionContainer",modalTitle:"index-module__WoWkvW__modalTitle"})},2825330:e=>{"use strict";e.s({EnhancedBuilds:()=>f});var i=e.i(6645307),t=e.i(6531164),n=e.i(611347),a=e.i(7238633),s=e.i(889716),l=e.i(8350390),r=e.i(8084653),o=e.i(9495609),d=e.i(6530772),c=e.i(5454140),u=e.i(534589),h=e.i(2362802),g=e.i(6700141),m=e.i(260979),x=e.i(1343577),p=e.i(1155472),b=e.i(544174),j=e.i(3514588);function f(){let{readyValue:e,isReady:t}=(0,g.useEnhancedBuilds)(),{team:n,isLoading:a}=(0,j.useTeam)(),s=n?.resourceConfig?.buildEntitlements?.enhancedBuilds,{user:l,isLoading:r}=(0,c.useUser)();return t||r||a?(0,i.jsx)(y,{email:l?.email,isEnabled:!!(e||s)}):(0,i.jsx)(p.default,{height:108})}function y(e){let{isEnabled:c,email:g}=e,p=(0,d.useMemo)(()=>{let e=new URLSearchParams({content:"I'd like to learn more about enhanced build machines."});return g&&e.set("email",g),e.toString()},[g]);return(0,i.jsx)("div",{children:(0,i.jsxs)(n.Fieldset,{disabled:!0,children:[(0,i.jsxs)(t.FieldsetContent,{disabled:!0,children:[(0,i.jsx)(x.FieldsetTitle,{children:m.TEAM_SETTINGS_NAVIGATION_TITLES.billing.enhancedBuildMachines}),(0,i.jsx)(l.FieldsetSubtitle,{children:"Build your deployments on machines with double the CPUs, memory, and disk space."}),(0,i.jsxs)(s.Stack,{align:"center",className:b.default.actionContainer,direction:"row",justify:"space-between",children:[(0,i.jsx)(s.Stack,{children:(0,i.jsx)(r.Text,{weight:700,children:`Enhanced Build Machines is ${c?"enabled":"disabled"}.`})}),(0,i.jsx)(s.Stack,{children:(0,i.jsx)(o.Toggle,{checked:c,size:"large"})})]})]}),(0,i.jsx)(a.FieldsetFooter,{disabled:!1,highlight:!0,children:(0,i.jsx)(a.FieldsetFooter.Status,{children:(0,i.jsxs)("span",{children:["Enhanced build machines are determined by your Enterprise contract."," ",(0,i.jsx)(h.Link,{external:!0,href:`${u.CONTACT_SALES_DASHBOARD_HREF}&${p}`,type:"highlight",children:"Contact Sales"})]})})})]})})}},675945:e=>{"use strict";e.s({LogDrainCard:()=>w});var i=e.i(6645307),t=e.i(5175803),n=e.i(5674541),a=e.i(6531164),s=e.i(611347),l=e.i(7238633),r=e.i(8934201),o=e.i(889716),d=e.i(8350390),c=e.i(8084653),u=e.i(584439),h=e.i(2362802),g=e.i(6530772),m=e.i(5140160),x=e.i(6649026),p=e.i(6944370),b=e.i(9336536),j=e.i(3514588),f=e.i(9326250),y=e.i(5006659),S=e.i(1343577),v=e.i(1155472);function w(){let{team:e,isReady:t}=(0,j.useTeam)();return t&&e?(0,i.jsx)(T,{team:e}):(0,i.jsx)(v.default,{height:108})}function T(e){let t,{team:r}=e,[m,j]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),T=(0,u.useToasts)(),C=`/teams/${r.slug}/settings/log-drains`,{logDrainsGroups:k,isLoading:_}=(0,y.useLogDrains)({teamSlug:r.slug}),{deleteLogDrain:I,permissions:E}=(0,y.useLogDrainsOperations)({teamSlug:r.slug}),N=k.selfServed.length+k.integrations.length,M=_||E.isLoading||!E.remove||0===N;M&&(E.isLoading||E.remove||(t="Additional permissions required to remove log drains"),0===N&&(t="No log drains to remove"));let F=async()=>{w(!0);let{selfServed:e,integrations:i}=k,t=new Set(i.map(e=>e.configurationId).filter(Boolean));try{await Promise.all([...Array.from(t).map(async e=>{let i=`${b.API_INTEGRATION_CONTROLLER}/configuration/${e}${(0,x.encode)({teamId:r.id})}`;await (0,p.default)(i,{method:"DELETE"})}),...e.map(e=>I({id:e.id}))]),T.success("Log drains removed successfully")}catch(e){T.error("Failed to remove log drains")}finally{w(!1),j(!1)}};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(s.Fieldset,{children:[(0,i.jsxs)(a.FieldsetContent,{children:[(0,i.jsx)(S.FieldsetTitle,{children:"Log Drains"}),(0,i.jsx)(d.FieldsetSubtitle,{children:(0,i.jsxs)(c.Text,{color:"gray-900",children:["Collect and forward your logs to third-party logging providers. Managed from"," ",(0,i.jsx)(h.Link,{href:C,target:"_self",type:"highlight",children:"Team Settings"}),"."]})}),(0,i.jsxs)(o.Stack,{align:"center",className:"border-accent-2 m-1 rounded border p-4",direction:"row",justify:"space-between",children:[(0,i.jsxs)(o.Stack,{children:[(0,i.jsx)(c.Text,{weight:700,children:"Log Drains are automatically enabled for pro and enterprise users."}),(0,i.jsx)(c.Text,{color:"gray-900",children:t||"Remove all active log drains to stop billing"})]}),N>0&&(0,i.jsx)(o.Stack,{children:(0,i.jsx)(n.Button,{disabled:M,onClick:()=>j(!0),children:"Remove All"})})]})]}),(0,i.jsx)(l.FieldsetFooter,{children:(0,i.jsx)(l.FieldsetFooter.Status,{children:(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(h.Link,{external:!0,href:"/docs/log-drains#usage-and-pricing",variant:"highlight",children:"Log Drains"})]})})})]}),(0,i.jsx)(A,{active:m,isLoading:v,logDrains:[...k.selfServed,...k.integrations],onClick:(0,f.promiseToCallback)(F),onClose:()=>j(!1)})]})}function A(e){let{onClose:t,onClick:n,active:a,isLoading:s,logDrains:l}=e;return(0,i.jsxs)(r.Modal.Modal,{active:a,onClickOutside:t,width:"500px",children:[(0,i.jsxs)(r.Modal.Body,{children:[(0,i.jsx)(r.Modal.Header,{children:(0,i.jsx)(r.Modal.Title,{children:"Delete All Log Drains"})}),(0,i.jsxs)(o.Stack,{gap:3,children:[(0,i.jsx)(c.Text,{children:"The following log drains will be permanently removed from your account."}),(0,i.jsx)(o.Stack,{children:l.map(e=>(0,i.jsx)(C,{logDrain:e},e.id))}),(0,i.jsx)(c.Text,{children:"Are you sure you want to continue?"})]})]}),(0,i.jsxs)(r.Modal.Actions,{children:[(0,i.jsx)(r.Modal.Action,{loading:s,onClick:t,type:"secondary",children:"Cancel"}),(0,i.jsx)(r.Modal.Action,{loading:s,onClick:n,children:"Yes, I'm sure"})]})]})}function C(e){let{logDrain:n}=e,a=n.integrationIcon?{hash:n.integrationIcon}:{placeholder:!0};return(0,i.jsxs)(o.Stack,{direction:"row",gap:1,children:["integration"===n.createdFrom?(0,i.jsx)(t.Avatar,{...a,size:20}):(0,i.jsx)("div",{children:(0,i.jsx)(m.Globe,{color:"gray-700",size:20})}),(0,i.jsx)(c.Text,{color:"gray-900",size:14,weight:500,children:"self-served"===n.createdFrom?n.url:n.name})]})}},7269462:e=>{"use strict";e.s({BillingMonitoring:()=>k},7269462);var i=e.i(6645307),t=e.i(6530772),n=e.i(6531164),a=e.i(611347),s=e.i(7238633),l=e.i(889716),r=e.i(8350390),o=e.i(8084653),d=e.i(9495609),c=e.i(584439),u=e.i(2362802),h=e.i(1164214),g=e.i(503726),m=e.i(3585235),x=e.i(5785123),p=e.i(5788068),b=e.i(6031903),j=e.i(9336536),f=e.i(7315479);let y=async e=>{let{settings:i,teamId:t}=e;try{let e=await (0,b.fetchApi)(`${j.API_MONITORING_SETTINGS}?teamId=${encodeURIComponent(t)}`,{method:"PATCH",body:i,throwOnHTTPError:!0});if(e&&"object"==typeof e&&"isEnabled"in e)return{kind:"ok",...e};throw Error("Failed to update monitoring settings")}catch(e){return{kind:"error",error:(0,f.normalizeError)(e)}}};var S=e.i(260979),v=e.i(6325202),w=e.i(9195014),T=e.i(2358177),A=e.i(1155472),C=e.i(1343577);function k(){let{isLoading:e,data:t}=(0,p.useMonitoringSettings)();return e||t?.isEnabled?e?(0,i.jsx)(A.default,{}):(0,i.jsx)(_,{settings:t}):null}function _(e){let{settings:p}=e,b=(0,g.useAccount)(),{team:j}=b,f=(0,m.default)(),[k,_]=(0,t.useState)(()=>{var e;return e=b.team,!!e&&(p?.isEnabled||!!e.enabledInvoiceItems?.monitoring?.enabled)}),I=(0,c.useToasts)(),{can:E}=f,N=E(x.Action.Update,x.Resource.MonitoringSettings),M=(0,t.useMemo)(()=>{if(N){let{basePrice:e,metricsPrice:i,batch:t,threshold:n}=function(e){let{price:i}=e?.invoiceItems?.monitoring??{price:1e3},{price:t,batch:n,threshold:a}=e?.invoiceItems?.monitoringMetric??{price:120,batch:1e6,threshold:25e4};return{basePrice:i,metricsPrice:t,batch:n,threshold:a}}(j?.billing);return`${(0,v.formatCurrency)(e,j?.billing?.currency)} for the first ${(0,w.countFormatter)(n,"display")} data points, then ${(0,v.formatCurrency)(i,j?.billing?.currency)} per ${(0,w.countFormatter)(t,"long")} data points.`}return"You need additional permissions to manage your team's Monitoring settings."},[N,j]),F=(0,t.useCallback)(async e=>{if(j){_(e);let i=await y({teamId:j.id,settings:{isEnabled:e}});"error"===i.kind&&(_(!e),I.error(i.error.message))}},[j,I]);return j?b.isLoading||f.isLoading?(0,i.jsx)(A.default,{}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.Fieldset,{disabled:!N,children:[(0,i.jsxs)(n.FieldsetContent,{disabled:!N,children:[(0,i.jsx)(C.FieldsetTitle,{children:S.TEAM_SETTINGS_NAVIGATION_TITLES.billing.monitoring}),(0,i.jsxs)(r.FieldsetSubtitle,{children:["Monitoring is a query editor that allows you to visualize errors, debug bandwidth issues, and monitor usage and web traffic for the past ",(0,T.getMaxRetention)(j).days," days."," ",N?(0,i.jsxs)(i.Fragment,{children:["Learn more about"," ",(0,i.jsx)(u.Link,{external:!0,href:"/docs/observability/monitoring",variant:"highlight",children:"Monitoring"})]}):null]}),(0,i.jsxs)(l.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(d.Toggle,{checked:k,"data-testid":(0,h.tid)("billing","monitoring","toggle"),onChange:()=>{j.billing?.plan==="enterprise"&&F(!k)},size:"large"}),(0,i.jsx)(o.Text,{color:"gray-900",children:k?"Disable":"Enable"})]})]}),(0,i.jsx)(s.FieldsetFooter,{disabled:!1,highlight:!N,children:(0,i.jsx)(s.FieldsetFooter.Status,{children:(0,i.jsx)(o.Text,{color:"gray-900",children:M})})})]})}):null}},3680120:e=>{"use strict";e.s({BillingObservability:()=>E});var i=e.i(6645307),t=e.i(5674541),n=e.i(6531164),a=e.i(611347),s=e.i(7238633),l=e.i(889716),r=e.i(8350390),o=e.i(8084653),d=e.i(9495609),c=e.i(2362802),u=e.i(3585235),h=e.i(5785123),g=e.i(1164214),m=e.i(6530772);e.i(9576255);var x=e.i(9720336),p=e.i(329718),b=e.i(986386),j=e.i(7949279),f=e.i(2796292),y=e.i(1343577),S=e.i(1155472),v=e.i(8035362),w=e.i(2934175),T=e.i(2909188);let A=j.ADD_ON_PERMISSIONS.observabilityBase,C=(0,j.getAddOnDisplayName)("observabilityBase"),k=j.ADD_ON_DESCRIPTIONS.observabilityBase,_=j.ADD_ON_LEARN_MORE_LINKS.observabilityBase,I=j.ADD_ON_IDS.observabilityBase;function E(){let e=(0,p.useOpenEnableModal)(),{ready:j,hasObservabilityPlusSubscribed:E}=(0,b.useHasObservabilityPlus)(),{disableObservabilityPlus:N,ObservabilityPlusModal:M,enableObservabilityPlus:F}=(0,f.useToggleObservabilityPlus)({analyticsEventSource:"billing",skipPostConfirm:!1}),{excludedProjects:P,isObservabilityPlusForProjectsFlagEnabled:O}=(0,v.useObservabilityPlusForProjects)(),{can:L}=(0,u.default)(),D=L(h.Action.Read,A),B=L(h.Action.Update,A),R=L(h.Action.Create,A),G=D&&B&&R,U=(0,m.useCallback)(()=>{E?N?.():e({from:"billing",via:"billing"})},[e,N,E]);return j?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.Fieldset,{disabled:!G,children:[(0,i.jsxs)(n.FieldsetContent,{disabled:!G,children:[(0,i.jsx)(y.FieldsetTitle,{children:C}),(0,i.jsx)(r.FieldsetSubtitle,{children:k}),(0,i.jsxs)(l.Stack,{direction:"row",gap:2,align:"center",children:[(0,i.jsxs)(l.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(d.Toggle,{checked:E,"data-testid":(0,g.tid)("billing",I,"toggle"),onChange:U,size:"large"}),(0,i.jsx)(o.Text,{color:"gray-900",children:E?"Downgrade":"Upgrade"})]}),O?(0,i.jsx)(t.Button,{className:"flex flex-row items-center px-4 text-[var(--accents-5)] hover:text-[var(--geist-foreground)]",onClick:()=>{F?.(),(0,T.trackAddOnEvent)({eventName:"open_update_modal",addOn:"observabilityBase",source:"billing-settings-add-ons"})},type:"tertiary",variant:"unstyled",typeName:"button",children:(0,i.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:[P?.length?`${P.length} project excluded`:"Manage projects",(0,i.jsx)(w.ChevronUpDown,{})]})}):null]})]}),(0,i.jsx)(s.FieldsetFooter,{disabled:!1,highlight:!G,children:(0,i.jsx)(s.FieldsetFooter.Status,{children:G?(0,i.jsxs)(i.Fragment,{children:["Learn more about ",(0,i.jsx)(c.Link,{external:!0,href:_,target:"_blank",variant:"highlight",children:C})]}):"You need additional permissions to manage your team's Observability Plus subscription."})})]}),(0,i.jsx)(x.EnableModal,{}),M]}):(0,i.jsx)(S.default,{})}},9344749:e=>{e.v({actionContainer:"index-module__bhtKBq__actionContainer",modalTitle:"index-module__bhtKBq__modalTitle"})},8062066:e=>{"use strict";e.s({RemoteCaching:()=>_,RemoteCachingFieldSet:()=>E});var i=e.i(6645307),t=e.i(6530772),n=e.i(6531164),a=e.i(1917237),s=e.i(8448595),l=e.i(611347),r=e.i(7238633),o=e.i(8934201),d=e.i(889716),c=e.i(8350390),u=e.i(8084653),h=e.i(9495609),g=e.i(2362802),m=e.i(1164214),x=e.i(7573892),p=e.i(9802771),b=e.i(2270026),j=e.i(1183506),f=e.i(9336536),y=e.i(3514588),S=e.i(5454140),v=e.i(3585235),w=e.i(5785123),T=e.i(9551456),A=e.i(1155472),C=e.i(1343577),k=e.i(9344749);function _(){let{team:e,isTeam:t,isReady:n}=(0,y.useTeam)(),{user:a}=(0,S.useUser)(),{isLoading:s}=(0,v.default)(),l=t?e?.remoteCaching?.enabled:a?.remoteCaching?.enabled;return n||s?(0,i.jsx)(E,{isEnabled:!!l,isTeam:t,team:e}):(0,i.jsx)(A.default,{height:108})}function I(e){let{error:t,canUpdate:n}=e;return t?.message?(0,i.jsx)(s.ErrorText,{children:(0,i.jsx)(a.Error,{error:t})}):n?(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(g.Link,{external:!0,href:"https://vercel.com/docs/monorepos/remote-caching",onClick:()=>x.analytics.track(p.AnalyticsEvent.REMOTE_CACHING_LEARN_MORE),variant:"highlight",children:"Remote Caching"})]}):(0,i.jsx)("span",{children:"You need additional permissions to manage your team's remote caching configuration."})}function E(e){let{isEnabled:a,team:s,isTeam:o}=e,{can:g}=(0,v.default)(),[y,S]=(0,t.useState)(a),[A,_]=(0,t.useState)(null),[E,M]=(0,t.useState)(!1),F=!o||g(w.Action.Update,w.Resource.Team),P=g(w.Action.Update,w.Resource.RemoteCaching),O=F&&P,L=async e=>{let i=o?`${f.API_TEAMS}/${s?.id||""}`:f.API_USER;S(e);try{await (0,j.fetchAPI)(`${i}`,{method:"PATCH",body:{remoteCaching:{enabled:e}}})}catch(i){_(i),S(!e)}finally{x.analytics.track(p.AnalyticsEvent.REMOTE_CACHING_TOGGLE,{enabled:e})}};return(0,i.jsxs)("div",{children:[(0,i.jsxs)(l.Fieldset,{disabled:!O,children:[(0,i.jsxs)(n.FieldsetContent,{disabled:!O,children:[(0,i.jsx)(C.FieldsetTitle,{id:T.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.remoteCaching,children:T.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.remoteCaching}),(0,i.jsx)(c.FieldsetSubtitle,{children:o?"Allows you to share a single cache with your team.":"Allows you to share a cache of artifacts to optimize speed."}),(0,i.jsxs)(d.Stack,{align:"center",className:k.default.actionContainer,direction:"row",justify:"space-between",children:[(0,i.jsxs)(d.Stack,{children:[(0,i.jsx)(u.Text,{weight:700,children:`Remote caching is ${y?"enabled":"disabled"}.`}),(0,i.jsx)(u.Text,{color:"gray-900",children:"Remote caching allows you to share a single cache across multiple machines."})]}),(0,i.jsx)(d.Stack,{children:(0,i.jsx)(h.Toggle,{checked:y,"data-testid":(0,m.tid)("remote-caching","toggle"),disabled:!O,onChange:()=>{let e=!y;e?L(e):M(!0)},size:"large"})})]})]}),(0,i.jsx)(r.FieldsetFooter,{disabled:!1,highlight:!O,children:(0,i.jsx)(r.FieldsetFooter.Status,{children:(0,i.jsx)(I,{canUpdate:O,error:A})})})]}),(0,i.jsx)(N,{active:E,isTeam:o,onConfirm:()=>{L(!1).catch(b.captureError)},setActive:M})]})}function N(e){let{active:t,setActive:n,isTeam:a,onConfirm:s}=e;return(0,i.jsxs)(o.Modal.Modal,{active:t,onClickOutside:()=>{x.analytics.track(p.AnalyticsEvent.REMOTE_CACHING_CONFIRMATION_CLOSE),n(!1)},width:"500px",children:[(0,i.jsxs)(o.Modal.Body,{children:[(0,i.jsx)(d.Stack,{className:k.default.modalTitle,children:(0,i.jsx)(o.Modal.Title,{children:"Disable Remote Caching"})}),(0,i.jsxs)(o.Modal.Subtitle,{children:[a?"Disabling remote caching will reduce your monorepo's performance across your team.":"Disabling remote caching can reduce your monorepo's build performance."," ",(0,i.jsx)(g.Link,{external:!0,href:"https://vercel.com/docs/monorepos/remote-caching",variant:"highlight",children:"Learn more"})]})]}),(0,i.jsxs)(o.Modal.Actions,{children:[(0,i.jsx)(o.Modal.Action,{onClick:()=>{x.analytics.track(p.AnalyticsEvent.REMOTE_CACHING_CONFIRMATION_CANCEL),n(!1)},type:"secondary",children:"Cancel"}),(0,i.jsx)(o.Modal.Action,{onClick:()=>{n(!1),s()},children:"Continue"})]})]})}},5227109:e=>{e.v({budgetAmountStack:"index-module__GYcspG__budgetAmountStack",chevron:"index-module__GYcspG__chevron",detailsEntityDivider:"index-module__GYcspG__detailsEntityDivider",detailsEntityForm:"index-module__GYcspG__detailsEntityForm",detailsEntityTopSpacer:"index-module__GYcspG__detailsEntityTopSpacer",spendManagementEntity:"index-module__GYcspG__spendManagementEntity",spendManagementEntityDetailsActive:"index-module__GYcspG__spendManagementEntityDetailsActive",spendMangementEntity:"index-module__GYcspG__spendMangementEntity",webhookText:"index-module__GYcspG__webhookText"})},1229582:e=>{"use strict";e.s({SpendManagement:()=>ea,SpendManagementFieldSet:()=>el},1229582);var i=e.i(6645307),t=e.i(6530772),n=e.i(5674541),a=e.i(6531164),s=e.i(1917237),l=e.i(8448595),r=e.i(611347),o=e.i(7238633),d=e.i(3162912),c=e.i(889716),u=e.i(8350390),h=e.i(8084653),g=e.i(9495609),m=e.i(555528),x=e.i(584439),p=e.i(2362802),b=e.i(7916122),j=e.i(5610210),f=e.i(703223),y=e.i(1164214),S=e.i(7573892),v=e.i(9802771),w=e.i(3514588),T=e.i(3326412),A=e.i(3585235),C=e.i(5785123),k=e.i(2145411),_=e.i(3604170),I=e.i(7337588),E=e.i(6649026),N=e.i(1183506),M=e.i(9336536);async function F(e,i){return(0,N.fetchAPI)(`${M.API_BUDGETS}${(0,E.encode)({teamId:i})}`,{method:"POST",body:JSON.stringify(e),throwOnHTTPError:!0})}var P=e.i(4276190),O=e.i(3521787),L=e.i(9551456),D=e.i(3115188);async function B(e,i){return(0,N.fetchAPI)(`${M.API_BUDGETS}/disable/${e}${(0,E.encode)({teamId:i})}`,{method:"POST",body:{},throwOnHTTPError:!0})}var R=e.i(575229),G=e.i(1155472),U=e.i(1343577),z=e.i(5528554),$=e.i(5175803),H=e.i(8934201),Y=e.i(631755);function W(e){let{active:n,budgetAmount:a,save:s,hide:l,pauseProjects:r,webhookConfigured:o,willTriggerImmediately:d}=e,{team:u}=(0,w.useTeam)(),g=u?.name??"",m=u?.id??"",x=(0,t.useMemo)(()=>{let e=["Notifications are sent to team owner and billing members."];return o&&e.unshift("A webhook is triggered."),r&&e.unshift("All deployments are paused."),e},[r,o]),[p,b]=(0,t.useState)(!1),j=(0,t.useMemo)(()=>d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("strong",{style:{fontWeight:500},children:["Your current spend exceeds $",a]}),". Continuing will immediately cause the following actions on the"," ",(0,i.jsxs)("span",{children:[(0,i.jsx)($.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:g})," ",(0,i.jsx)("strong",{style:{fontWeight:500},children:g})]})," ","team:"]}):(0,i.jsxs)(i.Fragment,{children:["Continuing will set a spend amount of"," ",(0,i.jsxs)("strong",{style:{fontWeight:500},children:["$",a]})," for all projects in the"," ",(0,i.jsxs)("span",{children:[(0,i.jsx)($.Avatar,{size:20,style:{verticalAlign:"top"},teamId:m,title:g})," ",(0,i.jsx)("strong",{style:{fontWeight:500},children:g})]})," ","team. If the amount is reached within a billing cycle the following actions will take place:"]}),[d,a,m,g]),f=(0,t.useCallback)(async e=>{e.preventDefault(),b(!0);try{await s()}catch(e){l()}finally{b(!1)}},[s,l,b]);return(0,i.jsx)(H.Modal.Modal,{active:n,onClickOutside:l,children:(0,i.jsxs)("form",{"data-testid":(0,y.tid)("spend-management","trigger-modal"),onSubmit:f,children:[(0,i.jsxs)(H.Modal.Body,{children:[(0,i.jsx)(H.Modal.Header,{children:(0,i.jsx)(H.Modal.Title,{children:"Spend Management"})}),j,(0,i.jsx)(c.Stack,{gap:4,style:{margin:"1em 0"},children:x.map(e=>(0,i.jsxs)(c.Stack,{align:"center",direction:"row",gap:4,children:[(0,i.jsx)(z.CheckCircleFill,{size:22}),(0,i.jsx)(h.Text,{children:e})]},e))}),(0,i.jsx)(H.Modal.Inset,{last:!0,children:(0,i.jsx)(c.Stack,{gap:6,children:(0,i.jsx)("label",{children:(0,i.jsxs)(c.Stack,{gap:2,children:[(0,i.jsxs)(h.Text,{color:"gray-900",size:14,weight:400,children:["Enter the team name"," ",(0,i.jsx)("strong",{style:{fontWeight:500,overflowWrap:"anywhere"},children:g})," ","to continue:"]}),(0,i.jsx)(Y.Input,{"aria-label":"Team Name","data-testid":(0,y.tid)("spend-management","confirm-input"),disabled:p,name:"teamName",pattern:`\\s*${g}\\s*`,required:!0})]})})})})]}),(0,i.jsxs)(H.Modal.Actions,{children:[(0,i.jsx)(H.Modal.Action,{"data-testid":(0,y.tid)("spend-management","cancel-confirm-button"),onClick:l,type:"secondary",children:"Cancel"}),(0,i.jsx)(H.Modal.Action,{buttonType:"submit","data-testid":(0,y.tid)("spend-management","continue-button"),disabled:p,loading:p,type:"error",children:"Continue"})]})]})})}var V=e.i(8811733),q=e.i(1164918),X=e.i(7329332),Q=e.i(3768337),K=e.i(6202145),Z=e.i(5227109);let J={100:"var(--ds-red-800)",75:"var(--ds-amber-700)",0:"var(--ds-blue-700)"};function ee(e){let{disabled:t,onChange:n,value:a,handleSetUpdatedBudget:s}=e;return(0,i.jsxs)("label",{style:{cursor:"pointer"},children:[(0,i.jsx)(h.Text,{as:"span",weight:500,children:a?"Enabled":"Disabled"}),(0,i.jsx)(V.Spacer,{inline:!0,x:.5}),(0,i.jsx)(g.Toggle,{checked:a,disabled:t,onChange:function(){n(!a),s(!0)},size:"large"})]})}function ei(e){let{budgetAmount:t,currentMonthSpend:n,handleSetBudgetAmount:a,handleSetPauseProjects:s,handleSetUpdatedBudget:l,handleSetWebhook:r,percentageBudgetUsed:o,pauseProjects:d=!0,prevMonthSpend:u,showPauseProjectsToggle:g,spendManagementEnabled:x,teamSlug:p,threeMonthAvgSpend:b,webhook:j}=e;return(0,i.jsxs)(X.EntityForm,{className:Z.default.detailsEntityForm,title:"",children:[(0,i.jsx)("div",{className:Z.default.detailsEntityTopSpacer}),(0,i.jsxs)(I.Entity,{children:[(0,i.jsx)(et,{dataTestId:"current-billing-cycle",dollarAmount:n,externalLinkPath:`/${p}/~/usage`,gaugeValue:t?o:0,title:"Current Billing Cycle"}),(0,i.jsx)("div",{className:Z.default.detailsEntityDivider}),(0,i.jsx)(et,{dataTestId:"previous-billing-cycle",dollarAmount:u,externalLinkPath:`/${p}/~/usage?range=previous-billing-cycle`,gaugeValue:t&&u?u/t*100:0,title:"Previous Billing Cycle"}),(0,i.jsx)("div",{className:Z.default.detailsEntityDivider}),(0,i.jsx)(et,{dataTestId:"average-monthly-spend",dollarAmount:b,externalLinkPath:`/${p}/~/usage?range=last-3-months`,gaugeValue:b&&t?b/t*100:0,title:"3 Month Average Spend",type:"3-month-avg"})]}),(0,i.jsxs)(c.Stack,{align:"center",className:g?void 0:Z.default.budgetAmountStack,direction:"row",justify:"space-between",paddingBottom:4*!g,paddingTop:4,style:{height:55},children:[(0,i.jsxs)(c.Stack,{align:"center",direction:"row",gap:1,children:[(0,i.jsx)(h.Text,{color:"gray-900",children:"Set amount"}),(0,i.jsx)(m.Tooltip,{delay:!1,maxWidth:"288px",padding:"6px 12px",position:"bottom",text:"Set the metered usage amount, including bandwidth, functions, and storage to trigger notifications and an optional webhook if the amount is reached within a billing cycle.",children:(0,i.jsx)(q.InformationFill,{})})]}),(0,i.jsx)(Q.CurrencyInput,{"aria-label":"Spend Amount",currency:"usd","data-testid":(0,y.tid)("spend-management","amount-input-field"),disabled:!x,onChange:e=>{a(e?e/100:0),l(!!e)},placeholder:0,requireWholeNumbers:!0,required:!0,size:"small",value:t?100*t:null,width:"156px"})]}),g?(0,i.jsxs)(c.Stack,{align:"center",className:Z.default.budgetAmountStack,direction:"row",justify:"space-between",paddingBottom:4,paddingTop:2,children:[(0,i.jsxs)(c.Stack,{align:"center",direction:"row",gap:1,children:[(0,i.jsx)(h.Text,{color:"gray-900",children:"Pause production deployments"}),(0,i.jsx)(m.Tooltip,{delay:!1,maxWidth:"288px",padding:"6px 12px",position:"bottom",text:"When enabled, production deployments for all projects on this team will be paused when the spend amount is reached.",children:(0,i.jsx)(q.InformationFill,{})})]}),(0,i.jsx)(ee,{disabled:!x,handleSetUpdatedBudget:l,onChange:s,value:d})]}):null,(0,i.jsxs)(c.Stack,{gap:4,paddingY:4,children:[(0,i.jsxs)(h.Text,{id:"spend-management-webhook-input",children:["Set a webhook URL, to receive a ",(0,i.jsx)(K.InlineCode,{children:"POST"})," request when the amount is reached. A ",(0,i.jsx)(K.InlineCode,{children:"POST"})," request will also be sent at the end of each billing cycle, which can be used to resume paused projects."]}),(0,i.jsx)(Y.Input,{"aria-labelledby":"spend-management-webhook-input","data-testid":(0,y.tid)("spend-management","webhook-input-field"),disabled:!x,onChange:e=>{r(e.target.value),l(!!e.target.value)},placeholder:"https://my-app.com/webhooks",size:"small",value:j,width:"100%"})]})]})}function et(e){let{dollarAmount:t,dataTestId:n,externalLinkPath:a,gaugeValue:s,title:l,type:r}=e;return(0,i.jsx)(k.EntityField,{"data-testid":(0,y.tid)("spend-management",`${n}`),children:(0,i.jsxs)(c.Stack,{direction:"row",justify:"space-between",children:[(0,i.jsxs)(c.Stack,{gap:1,children:[(0,i.jsx)(h.Text,{color:"gray-800",lineHeight:24,size:12,weight:500,children:l}),"3-month-avg"===r&&null===t?(0,i.jsxs)(c.Stack,{align:"center",direction:"row",gap:1,children:[(0,i.jsx)(h.Text,{color:"gray-900",children:"‒"}),(0,i.jsx)(m.Tooltip,{delay:!1,padding:"6px 12px",position:"bottom",text:"Insufficient historical usage data",children:(0,i.jsx)(q.InformationFill,{})})]}):(0,i.jsx)(p.Link,{external:!0,href:a,children:(0,i.jsxs)(h.Text,{color:"gray-1000",size:16,weight:500,children:["$",t]})})]}),(0,i.jsx)(_.EntityThumbnail,{size:24,children:(0,i.jsx)(d.Gauge,{colors:J,size:"small",value:s})})]})})}let en={100:"var(--ds-red-800)",75:"var(--ds-amber-700)",0:"var(--ds-blue-700)"};function ea(){let{isReady:e,team:t}=(0,w.useTeam)(),{isReady:n,value:a}=(0,T.usePauseTeamProjectsFlag)(),{isLoading:s}=(0,A.default)(),{activeBudget:l,isLoading:r}=(0,P.useActiveBudget)(),{webhookUrl:o,isLoading:d}=(0,D.useBudgetWebhookUrl)(),{spend:c,isLoading:u}=(()=>{let{isReady:e,team:i}=(0,w.useTeam)(),t=(0,O.default)(()=>e&&i?`${M.API_TEAMS}/${i.id}/spend`:null,e=>(0,N.fetchAPI)(e,{throwOnHTTPError:!0}));return{...t,spend:t.data?.data??void 0}})();return e||s||r||d||n||u?t?(0,i.jsx)(el,{budget:l,showPauseProjectsToggle:a??!1,spend:c,team:t,webhookUrl:o}):null:(0,i.jsx)(G.default,{height:108})}function es(e){let{error:t,canUpdateSpendManagement:n}=e;return t?.message?(0,i.jsx)(l.ErrorText,{children:(0,i.jsx)(s.Error,{error:t})}):n?(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(p.Link,{external:!0,href:"/docs/accounts/spend-management",onClick:()=>S.analytics.track(v.AnalyticsEvent.SPEND_MANAGEMENT),variant:"highlight",children:"Spend Management"})]}):(0,i.jsx)("span",{children:"You need additional permissions to manage your team's spend management configuration."})}function el(e){let{budget:s,team:l,webhookUrl:w,showPauseProjectsToggle:T,spend:E}=e,{can:N}=(0,A.default)(),[M,P]=(0,t.useState)(null),[O,D]=(0,t.useState)(!1),[G,z]=(0,t.useState)(!1),[$,H]=(0,t.useState)(!1),[Y,V]=(0,t.useState)(!1),[q,X]=(0,t.useState)(0),[Q,K]=(0,t.useState)(""),[J,ee]=(0,t.useState)(!1),[et,ea]=(0,t.useState)(!0),[el,er]=(0,t.useState)(0),[eo,ed]=(0,t.useState)(0),[ec,eu]=(0,t.useState)(null),[eh,eg]=(0,t.useState)(null),em=N(C.Action.Update,C.Resource.Budget),ex=!s&&!G,ep=(0,x.useToasts)();(0,t.useEffect)(()=>{if(!E)return;let{currentSpend:e,avgSpend:i,prevMonthSpend:t}=E;er(e/100),null!==i&&i>=0&&eu(Math.ceil(i/100)),t>0&&ed(t/100)},[E]),(0,t.useEffect)(()=>{G?D(!0):(D(!1),X(0),K(""))},[G]),(0,t.useEffect)(()=>{s&&(z(!0),X(s.fixedBudget),ea(s.pauseProjects??!1))},[s]),(0,t.useEffect)(()=>{if(!w)return void K("");K(w)},[w]);let eb=(0,t.useCallback)(async()=>{if(s?.id){try{await B(s.id,l.id),ep.success("Your Spend Management settings have been turned off.")}catch(e){P(e)}V(!1)}},[s,l.id,ep]),ej=(0,t.useCallback)(async()=>{V(!0),P(null);try{if(0===q)P({message:"Must have a spend amount set.",name:"spend_invalid"});else if(q<0)P({message:"Must have positive spend amount.",name:"spend_invalid"});else if(q>1e6)P({message:"Budget too high",name:"budget_invalid"});else{let e=await F({webhookUrl:Q,type:"fixed",fixedBudget:q,pauseProjects:et},l.id);e.webhookSecret&&eg(e.webhookSecret),ep.success("Your Spend Management settings have been updated.")}}catch(e){P(e)}finally{V(!1)}},[q,l.id,ep,Q,et]),ef=(0,t.useCallback)(async()=>{J&&(V(!0),G?(await ej(),ee(!1),S.analytics.track(v.AnalyticsEvent.SPEND_MANAGEMENT_TOGGLE,{enabled:!0,teamId:l.id})):(await eb(),X(0),K(""),ee(!1),S.analytics.track(v.AnalyticsEvent.SPEND_MANAGEMENT_TOGGLE,{enabled:!1,teamId:l.id})))},[J,G,ej,l.id,eb]),ey=(e,i)=>{let t=e/i*100;return(t=Math.ceil(t))>99.5&&t<100?99:t>100?100:t||0},eS=`$${el} / ${q} (${ey(el,q)}%)`,ev=q-el;return(0,i.jsxs)("div",{children:[(0,i.jsxs)(r.Fieldset,{disabled:!em,children:[(0,i.jsxs)(a.FieldsetContent,{disabled:!em,children:[(0,i.jsx)(U.FieldsetTitle,{id:L.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.spendManagement,children:L.PERSONAL_ACCOUNT_SETTINGS_NAVIGATION_TITLES.billing.spendManagement}),(0,i.jsxs)(u.FieldsetSubtitle,{children:["Set a spend amount towards"," ",(0,i.jsx)(p.Link,{href:"/docs/accounts/spend-management#what-does-spend-management-include",variant:"highlight",children:"metered resources"}),". Configure notifications, set a webhook, or choose to pause the production deployment for all your team’s projects when the amount is reached."]}),(0,i.jsxs)(c.Stack,{children:[(0,i.jsx)(I.Entity,{actions:(0,i.jsxs)(c.Stack,{direction:"row",gap:2,children:[w?(0,i.jsxs)(c.Stack,{align:"center",direction:"row",gap:1,children:[(0,i.jsx)(f.Webhook,{color:"gray-700"}),(0,i.jsx)(h.Text,{className:Z.default.webhookText,color:"gray-900",children:"Webhook"})]}):null,(0,i.jsx)(g.Toggle,{checked:G,"data-testid":(0,y.tid)("spend-management","toggle"),disabled:!em,label:"toggle spend management",onChange:()=>{z(!G),ee(!0),ea(!G)},size:"large",stopPropagation:!0})]}),as:"button",checkbox:(0,i.jsx)(b.ChevronRight,{className:Z.default.chevron,color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:O?"rotate(90deg)":"rotate(0deg)"}}),className:(0,j.clsx)(Z.default.spendManagementEntity,{[Z.default.spendManagementEntityDetailsActive]:O}),"data-testid":(0,y.tid)("spend-management","button"),disabled:!em,height:74,onClick:()=>{D(!O)},thumbnail:(0,i.jsx)(_.EntityThumbnail,{size:24,children:G?(0,i.jsx)(m.Tooltip,{position:"bottom",text:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(h.Text,{children:["$",ev>0?ev:0]}),(0,i.jsx)(h.Text,{children:"Remaining"})]}),children:(0,i.jsx)(d.Gauge,{colors:en,size:"small",value:q?ey(el,q):0})}):(0,i.jsx)(d.Gauge,{colors:en,size:"small",value:0})}),children:(0,i.jsx)(k.EntityField,{description:G?"Spend Management Enabled":"Spend Management Disabled",height:40,title:G?eS:""})}),O?(0,i.jsx)(ei,{budgetAmount:q,currentMonthSpend:el,handleSetBudgetAmount:X,handleSetPauseProjects:ea,handleSetUpdatedBudget:ee,handleSetWebhook:K,pauseProjects:et,percentageBudgetUsed:ey(el,q),prevMonthSpend:eo,showPauseProjectsToggle:T,spendManagementEnabled:G,teamSlug:l.slug,threeMonthAvgSpend:ec,webhook:Q}):null,(0,i.jsxs)(c.Stack,{align:"center",direction:"row",justify:"space-between",paddingTop:4,children:[(0,i.jsx)(u.FieldsetSubtitle,{children:"Manage your notifications"}),(0,i.jsx)(n.Button,{Component:"a",href:`/${l.slug}/~/settings/notifications`,size:"small",type:"secondary",width:ex?80:100,children:"Manage"})]})]})]}),(0,i.jsxs)(o.FieldsetFooter,{disabled:!1,highlight:!em,children:[(0,i.jsx)(o.FieldsetFooter.Status,{children:(0,i.jsx)(es,{canUpdateSpendManagement:em,error:M})}),em?(0,i.jsx)(o.FieldsetFooter.Actions,{children:(0,i.jsx)(n.Button,{"data-testid":(0,y.tid)("spend-management","save-button"),disabled:!J,loading:Y,onClick:()=>H(!0),size:"small",width:Y?100:80,children:Y?"Saving":"Save"})}):null]})]}),(0,i.jsx)(W,{active:$,budgetAmount:q,hide:()=>{V(!1),H(!1)},pauseProjects:et,save:async()=>{await ef(),H(!1)},webhookConfigured:Q.length>0,willTriggerImmediately:ev<=0}),eh?(0,i.jsx)(R.FormAddWebhookModal,{onClose:()=>eg(null),webhook:{secret:eh}}):null]})}},2619090:e=>{e.v({hr:"fieldset-module__DpKbhG__hr"})},7254920:e=>{"use strict";e.s({BillingWebAnalytics:()=>w});var i=e.i(6645307),t=e.i(6531164),n=e.i(611347),a=e.i(7238633),s=e.i(889716),l=e.i(8350390),r=e.i(8084653),o=e.i(9495609),d=e.i(2362802),c=e.i(6530772),u=e.i(1164214),h=e.i(9802771),g=e.i(7573892),m=e.i(3514588),x=e.i(3585235),p=e.i(5785123),b=e.i(7930584),j=e.i(4348128),f=e.i(6689585),y=e.i(1343577),S=e.i(1155472),v=e.i(2619090);function w(){let{team:e}=(0,m.useTeam)(),{currency:w="USD"}=e?.billing??{},T=(0,x.default)(),{plan:A}=(0,f.useIsWebAnalyticsBilling)(),[C,k]=(0,c.useState)(null),{can:_}=T,I=_(p.Action.Update,p.Resource.WebAnalytics);return"pro"!==A?null:!e||T.isLoading?(0,i.jsx)(S.default,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.Fieldset,{disabled:!I,children:[(0,i.jsxs)(t.FieldsetContent,{disabled:!I,children:[(0,i.jsx)(y.FieldsetTitle,{children:"Web Analytics"}),(0,i.jsxs)(l.FieldsetSubtitle,{children:["Monitor the traffic to your project in real-time, including the number of visitors, the pages they view, and their origin."," ",I?(0,i.jsxs)(i.Fragment,{children:["Learn more about"," ",(0,i.jsx)(d.Link,{external:!0,href:"/docs/analytics",variant:"highlight",children:"Web Analytics"})]}):null]}),(0,i.jsx)("hr",{className:v.default.hr}),(0,i.jsxs)(s.Stack,{direction:"column",gap:4,children:[(0,i.jsx)("div",{children:(0,i.jsxs)(r.Text,{as:"h5",size:16,weight:600,wrap:!1,children:["Web Analytics Plus"," ",(0,i.jsx)("span",{style:{color:"var(--accents-4)"},children:"(Add-on)"})]})}),(0,i.jsx)(r.Text,{color:"gray-900",size:14,children:(0,j.withPricing)("{plusDescription}",{offering:"plus",currency:w})}),(0,i.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,i.jsx)(o.Toggle,{checked:!1,"data-testid":(0,u.tid)("billing","web-analytics","toggle"),onChange:()=>{g.analytics.track(h.AnalyticsEvent.ANALYTICS_UPSELL_CLICKED,{currentPlan:A,teamId:e.id,type:"billing"}),k("billing")},size:"large"}),(0,i.jsx)(r.Text,{color:"gray-900",children:"Enable"})]})]})]}),(0,i.jsx)(a.FieldsetFooter,{disabled:!1,highlight:!I,children:(0,i.jsx)(a.FieldsetFooter.Status,{children:(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(d.Link,{external:!0,href:"/docs/analytics/limits-and-pricing",variant:"highlight",children:"Limits & Pricing"})," ","for Web Analytics."]})})})]}),(0,i.jsx)(b.UpgradeModal,{onClose:()=>k(null),source:C})]})}},5532105:e=>{e.v({list:"index-module__i7X2-G__list"})},7694253:e=>{"use strict";e.s({PaidAddOns:()=>V},7694253);var i=e.i(6645307),t=e.i(6531164),n=e.i(611347),a=e.i(654868),s=e.i(1343577),l=e.i(5193454),r=e.i(8519768),o=e.i(6700141),d=e.i(9561794),c=e.i(1183506),u=e.i(9336536);let h=e=>async i=>{let{team:t}=i,n=t?new URLSearchParams({teamId:t.id}):"";return(0,c.fetchAPI)(`${u.API_STRIPE_MONITORING}?${n.toString()}`,{method:"PUT",body:JSON.stringify({monitoring:e}),throwOnHTTPError:!0})},g={surveyName:"Disable Monitoring User Feedback",surveySlug:"disable-monitoring-user-feedback",surveySteps:[{title:"Monitoring has been disabled",description:"Any reasons for disabling monitoring?",fields:[{type:"select",id:"reasons-why",label:"Any reasons for disabling monitoring?",selectMultiple:!0,options:[{id:"just-looking-around",label:"I was just looking around"},{id:"not-working-as-expected",label:"It is not working as expected"},{id:"missing-features",label:"Missing features"},{id:"too-expensive",label:"Too expensive"},{id:"prefer-another-product",label:"I prefer another product"},{id:"other",label:"Other (please explain on the next page)"}]}]},{title:"Monitoring has been disabled",fields:[{type:"text",id:"explanation-detailed",instructions:"Please add any other feedback you have.",label:"Enter feedback here",size:"long"},{type:"text",id:"email",instructions:"If you'd like to hear from our team, enter your email below.",label:"Enter email",size:"short"}]}]},m={name:"monitoring",price:1e3,enable:h(!0),disable:h(!1),enableSteps:{confirm:{lineItems:[{name:"Monitoring with 250k data points",price:"from_invoice_item"},{name:"On-Demand data points",shortDescription:"Billed after 250k data points",price:120,priceDescriptor:"/ month per million data points"}],nonProratedCustomCopy:(0,i.jsxs)(i.Fragment,{children:[" ","and your credit card will be charged ",(0,i.jsx)("b",{children:"immediately"}),"."]})}},disableSteps:{disable:{customDisableCopy:"Disabling it will prevent your team members from accessing it in the dashboard. You will no longer be able to visualize your bandwidth, errors, performance, and traffic across projects."},exitSurvey:g}};var x=e.i(2796292),p=e.i(5045499),b=e.i(3514588),j=e.i(1782286),f=e.i(6530772),y=e.i(9948746),S=e.i(6960707),v=e.i(2254575),w=e.i(889716),T=e.i(8084653),A=e.i(5674541),C=e.i(3621043),k=e.i(3431702),_=e.i(8790148),I=e.i(5532105),E=e.i(2907955),N=e.i(6649026),M=e.i(3904906);let F={name:"analytics",price:1e3,enable:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return async i=>{let{addOnValue:t,team:n}=i;if(!t||!n)throw Error(M.IS_DEV?"`addOnValue` or `team` not found in `generateEnableOrDisableSpeedInsightFunction`":"Error enabling Speed Insights");await Promise.all(t.map(i=>{let{id:t}=i;return(0,c.fetchAPI)(`${u.API_SPEED_INSIGHTS_TOGGLE}${(0,N.encode)({projectId:t,teamId:n.id})}`,{method:"POST",body:{value:e},throwOnHTTPError:!0})}))}}(!0),enableSteps:{configure:{instructions:"Add at least one project to enable Speed Insights on.",content:function(e){let{addOnValue:t=[],setAddOnValue:n}=e,[a,s]=(0,f.useState)(!1),[l,r]=(0,f.useState)(""),o=(0,f.useCallback)(e=>{let i=e.target.value;(0,j.default)(()=>r(i),500)},[]),{data:d,isLoading:c}=(0,k.default)({search:l,latestDeployments:null},{});return(0,f.useEffect)(()=>{d?s(!1):s(!0)},[d]),(0,i.jsxs)(w.Stack,{gap:3,children:[(0,i.jsxs)(C.Combobox,{clearable:!1,onChange:e=>{if(e&&d){let i=d.projects.find(i=>i.id===e);i&&n([...t,i])}},placeholder:"Search Projects...",value:l,children:[(0,i.jsx)(C.Combobox.Input,{disabled:c||a,onChange:o}),(0,i.jsx)(C.Combobox.List,{children:d?.projects.map(e=>{let n=t.some(i=>i.id===e.id);return(0,i.jsx)(C.Combobox.Option,{disabled:n,suffix:n?(0,i.jsx)(y.Check,{className:"ml-auto",size:20}):null,value:e.id,children:e.name},e.id)})})]}),t.length>0?(0,i.jsx)(v.Entity.List,{className:I.default.list,children:t.map(e=>(0,i.jsxs)(v.Entity,{padding:2,children:[(0,i.jsx)(v.Entity.Content,{fill:!0,title:(0,i.jsxs)(w.Stack,{direction:"row",gap:2,paddingLeft:1,children:[(0,i.jsx)(_.FrameworkAvatar,{project:e}),(0,i.jsx)(T.Text,{weight:500,children:e.name})]})}),(0,i.jsx)(v.Entity.Content,{title:(0,i.jsx)(A.Button,{"aria-label":`Remove project ${e.name}`,onClick:()=>{var i;return i=e.id,void n(t.filter(e=>e.id!==i))},shape:"circle",size:"small",svgOnly:!0,type:"tertiary",children:(0,i.jsx)(S.MinusCircle,{color:"gray-700"})})})]},e.id))}):null]})}},confirm:{lineItems:[],nonProratedCustomCopy:(0,i.jsxs)(i.Fragment,{children:[" ","and your credit card will be charged ",(0,i.jsx)("b",{children:"immediately"}),"."]})},postConfirmProjectList:{description:"Speed Insights was added to your plan. You can view your insights on the Speed Insights page for each of your projects.",ctaCopy:"View",ctaHrefBase:"/speed-insights"}}};var P=e.i(8348671),O=e.i(6987262),L=e.i(7337588),D=e.i(2145411),B=e.i(7329332),R=e.i(4237550),G=e.i(6621512),U=e.i(555528),z=e.i(4348128),$=e.i(2909188),H=e.i(805894);function Y(e){let{children:t,addOn:n}=e,[a,s]=(0,f.useState)(!1);return(0,i.jsxs)(w.Stack,{children:[(0,i.jsx)(L.Entity,{as:"button",checkbox:(0,i.jsx)(R.ChevronDown,{color:"gray-700",size:20,style:{transition:"transform 200ms ease",transform:a?"rotate(180deg)":"rotate(0deg)"}}),onClick:()=>{s(e=>!e),a||(0,$.trackAddOnEvent)({eventName:"more_details",addOn:n,source:"billing-settings-add-ons"})},children:(0,i.jsx)(D.EntityField,{title:"More Details"})}),a?(0,i.jsx)(B.EntityForm,{className:H.default.innerDropdown,title:"",children:t}):null]})}function W(){let e=[{included:{content:(0,z.withPricing)("{reportingWindow} viewable history"),tooltip:(0,z.withPricing)("See data from the past {reportingWindow}.")},addon:{content:(0,z.withPricing)("{reportingWindow} viewable history",{offering:"plus"}),tooltip:(0,z.withPricing)("See data from the past {reportingWindow}.",{offering:"plus"})}},{included:{content:"Custom Events with 2 properties",tooltip:"Track custom events to gain better insights."},addon:{content:"Custom Events with 8 properties",tooltip:"Track custom events to gain better insights."}},{included:{content:"-"},addon:{content:"UTM Parameters support",tooltip:"Filter visitors according to the UTM parameters."}}];return(0,i.jsxs)(Y,{addOn:"webAnalytics",children:[(0,i.jsxs)(w.Stack,{className:H.default.webAnalyticsTableRow,direction:"row",children:[(0,i.jsx)(T.Text,{className:H.default.webAnalyticsTableCell,weight:500,children:"Included in your plan"}),(0,i.jsx)(T.Text,{className:H.default.webAnalyticsTableCell,weight:500,children:"Web Analytics Plus"})]}),e.map((e,t)=>{let{included:n,addon:a}=e;return(0,i.jsxs)(w.Stack,{className:H.default.webAnalyticsTableRow,direction:"row",children:[n.tooltip?(0,i.jsx)(U.Tooltip,{boxAlign:"left",className:H.default.webAnalyticsTableCell,position:"bottom",text:n.tooltip,children:(0,i.jsxs)(w.Stack,{direction:"row",gap:2,children:[(0,i.jsx)(T.Text,{children:n.content}),(0,i.jsx)(G.Information,{})]})}):(0,i.jsx)(w.Stack,{className:H.default.webAnalyticsTableCell,children:(0,i.jsx)(T.Text,{children:n.content})}),a.tooltip?(0,i.jsx)(U.Tooltip,{boxAlign:"left",className:H.default.webAnalyticsTableCell,position:"bottom",text:a.tooltip,children:(0,i.jsxs)(w.Stack,{direction:"row",gap:2,children:[(0,i.jsx)(T.Text,{children:a.content}),(0,i.jsx)(G.Information,{})]})}):(0,i.jsx)(w.Stack,{className:H.default.webAnalyticsTableCell,children:(0,i.jsx)(T.Text,{children:a.content})})]},t)})]})}function V(e){let{team:c}=e;c.billing?.plan;let{isADPEnabled:u,enableADP:h,disableADP:g,ADPModal:j,pricingCopy:f}=(0,l.useToggleAdvancedDeploymentProtection)("billing-settings-add-ons"),{isMonitoringEnabled:y,enableMonitoring:S,disableMonitoring:v,MonitoringModal:w,pricingCopy:T}=(e=>{let{value:i}=(0,o.useMonitoringExitSurveyFlag)();i||delete m.disableSteps.exitSurvey;let t={...m,analyticsEventSource:e},{isEnabled:n,openEnableOrUpdateModal:a,openDisableModal:s,AddOnModal:l,formattedPrice:r}=(0,d.useTogglePaidAddOn)(t);return{addOn:t,isMonitoringEnabled:n,enableMonitoring:a,disableMonitoring:s,MonitoringModal:l,pricingCopy:`${r} / month`}})("billing-settings-add-ons"),{isObservabilityPlusEnabled:A,enableObservabilityPlus:C,disableObservabilityPlus:k,ObservabilityPlusModal:_,pricingCopy:I,configureUIText:N}=(0,x.useToggleObservabilityPlus)({analyticsEventSource:"billing-settings-add-ons"}),{isWebAnalyticsPlusEnabled:M,enableWebAnalyticsPlus:L,disableWebAnalyticsPlus:D,WebAnalyticsPlusModal:B,pricingCopy:R}=(0,P.useToggleWebAnalyticsPlus)({source:"billing-settings-add-ons"}),G=(e=>{let{team:t}=(0,b.useTeam)(),n={...F,analyticsEventSource:e,enableSteps:{...F.enableSteps,postConfirmConfiguration:{instructions:null,content:(0,i.jsx)(E.ProjectList,{addOn:"analytics",ctaCopy:"View",ctaHrefBase:"/speed-insights",description:"The following project(s) have Speed Insights enabled. To add another project, navigate to your project's Speed Insights page.",team:t})}},disableSteps:{disable:{customDisableModal:(0,i.jsx)(E.ProjectList,{addOn:"analytics",ctaCopy:"View",ctaHrefBase:"/speed-insights",description:"To remove the add-on, visit the Speed Insights page for each of your enabled projects.",team:t})}}},{isEnabled:a,openEnableOrUpdateModal:s,openDisableModal:l,AddOnModal:r,formattedPrice:o}=(0,d.useTogglePaidAddOn)(n);return{addOn:n,isSpeedInsightsEnabled:a,enableSpeedInsights:s,disableSpeedInsights:l,SpeedInsightsModal:r,pricingCopy:`${o} / month per project`}})("billing-settings-add-ons"),U=(0,r.useToggleConcurrentBuilds)("billing-settings-add-ons"),z=(0,p.useTogglePreviewDeploymentSuffix)("billing-settings-add-ons");return(0,i.jsx)("div",{id:"paid-add-ons",children:(0,i.jsx)(n.Fieldset,{children:(0,i.jsxs)(t.FieldsetContent,{className:H.default.content,children:[(0,i.jsx)(s.FieldsetTitle,{id:"paid-add-ons",children:"Add-Ons"}),(0,i.jsx)(a.default,{className:H.default.hr}),(0,i.jsx)(O.PaidAddOn,{addOn:"passwordProtection",disable:g,enableOrUpdate:h,isEnabled:u,modal:j,pricingCopy:f,team:c,allowUpgrade:!0}),(0,i.jsx)(O.PaidAddOn,{addOn:"analytics",disable:G.disableSpeedInsights,enableOrUpdate:G.enableSpeedInsights,isEnabled:G.isSpeedInsightsEnabled,modal:G.SpeedInsightsModal,pricingCopy:G.pricingCopy,team:c,allowUpgrade:!0}),(0,i.jsx)(O.PaidAddOn,{addOn:"concurrentBuilds",disable:U.disableConcurrentBuilds,enableOrUpdate:U.enableConcurrentBuilds,isEnabled:U.isConcurrentBuildsEnabled,modal:U.ConcurrentBuildsModal,pricingCopy:U.pricingCopy,team:c,allowUpgrade:!0}),(0,i.jsx)(O.PaidAddOn,{addOn:"previewDeploymentSuffix",disable:z.disablePreviewDeploymentSuffix,enableOrUpdate:z.enablePreviewDeploymentSuffix,isEnabled:z.isPreviewDeploymentSuffixEnabled,modal:z.PreviewDeploymentSuffixModal,pricingCopy:z.pricingCopy,team:c,allowUpgrade:!0}),y?(0,i.jsx)(O.PaidAddOn,{addOn:"monitoring",disable:v,enableOrUpdate:S,isEnabled:y,modal:w,pricingCopy:T,team:c,allowUpgrade:!0}):null,(0,i.jsx)(O.PaidAddOn,{addOn:"observabilityBase",configureUIText:N,disable:k,enableOrUpdate:C,isEnabled:A,modal:_,pricingCopy:I,team:c,allowUpgrade:!0}),(0,i.jsx)(O.PaidAddOn,{addOn:"webAnalytics",disable:D,enableOrUpdate:L,isEnabled:M,modal:B,pricingCopy:R,team:c,allowUpgrade:!0,children:(0,i.jsx)(W,{})})]})})})}},6815439:e=>{"use strict";e.s({ImageOptimizationNewPrice:()=>G},6815439);var i=e.i(6645307),t=e.i(6530772),n=e.i(2567082),a=e.i(3921802),s=e.i(5674541),l=e.i(6531164),r=e.i(1917237),o=e.i(8448595),d=e.i(611347),c=e.i(7238633),u=e.i(8934201),h=e.i(8158100),g=e.i(5163670),m=e.i(889716),x=e.i(8350390),p=e.i(8084653),b=e.i(555528),j=e.i(584439),f=e.i(2362802),y=e.i(3514588),S=e.i(1183506),v=e.i(9336536),w=e.i(3585235),T=e.i(5785123),A=e.i(7573892),C=e.i(9802771),k=e.i(8679640),_=e.i(6465700),I=e.i(5725529),E=e.i(3521787),N=e.i(6649026);async function M(e){return(await (0,S.fetchAPI)(e,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}var F=e.i(1343577);async function P(e){return(await (0,S.fetchAPI)(e,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}let O=e=>{let i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);return i.endsWith(".00")?i.slice(0,-3):i},L=e=>{let i=new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(e),t=i.endsWith(".00")?i.slice(0,-3):i;return`${t} MIU`};function D(e){let{desc:t,tooltip:n,cost:a,format:s}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(p.Text,{className:"flex items-center gap-1",color:"gray-900",size:14,children:[t,(0,i.jsx)(b.Tooltip,{text:n,children:(0,i.jsx)(_.InformationFillSmall,{color:"gray-900"})})]}),void 0===a?(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsx)(g.Skeleton,{height:10,width:35})}):(0,i.jsx)(p.Text,{align:"right",color:"gray-900",size:14,children:s(a)})]})}function B(e){let{now:t,team:a}=e,s=new Date(t-(0,n.default)("1d")),l=new Date(t-(0,n.default)("31d")),r={dedupingInterval:(0,n.default)("1d")},o=a?.id||void 0,d=function(e,i){let{teamId:t}=e;return(0,E.default)(t?`${v.API_BILLING}/product-catalog${(0,N.encode)({teamId:t})}`:null,M,i)}({teamId:o},r),c=a?.billing?.plan==="enterprise"&&"unbundled"===a.billing.planIteration?L:O,u=function(e,i){if(!e||!i)return;let t=0;for(let i of e.data)t+=i.count;let n=t;return"pro"===i&&(n=Math.max(0,t-5e3)),n/1e3*5}(function(e,i){let{teamId:t,from:n,to:a}=e;return(0,E.default)(t?`${v.API_USAGE_IMAGE_OPTIMIZATIONS}${(0,N.encode)({teamId:t,from:n,to:a})}`:null,P,void 0)}({teamId:o,from:l.toISOString(),to:s.toISOString()}).data,a?.billing?.plan),m=(0,I.useNewUsageMetrics)({metric:"image_transformations_preview",teamId:o,from:l.toISOString(),to:s.toISOString(),format:"timeseries",views:{count:{groupBy:["billableRegion"]}},userAgent:"vercel-site.usage-estimate.image-transformations-preview"},r),x=(0,I.useNewUsageMetrics)({metric:"data_cache_reads",teamId:o,from:l.toISOString(),to:s.toISOString(),filterBy:{origin:["IMAGE_OPTIMIZATION_PREVIEW"]},format:"timeseries",views:{count:{groupBy:["billableRegion"]}},userAgent:"vercel-site.usage-estimate.image-cache-reads"},r),b=(0,I.useNewUsageMetrics)({metric:"data_cache_writes",teamId:o,from:l.toISOString(),to:s.toISOString(),filterBy:{origin:["IMAGE_OPTIMIZATION_PREVIEW"]},format:"timeseries",views:{count:{groupBy:["billableRegion"]}},userAgent:"vercel-site.usage-estimate.image-cache-writes"},r),{newPrice:j,imageOptimizationTransformation:f,imageOptimizationCacheRead:y,imageOptimizationCacheWrite:S}=function(e,i,t,n,a){if(!e||!i||!t||!n||!a)return{newPrice:void 0,imageOptimizationTransformation:0,imageOptimizationCacheRead:0,imageOptimizationCacheWrite:0};let s=e.products.find(e=>"image-optimization"===e.slug)?.prices;if(!s||0===s.length)throw Error('Expected product catalog prices for "image-optmization"');let l=(e,i)=>{let t=0,n=(e=>{let i=s.find(i=>i.item.billableItem.slug===e)?.priceModel;if(!i||"matrix"!==i.type)throw Error(`Expected matrix price for slug ${e}`);let{config:{matrixRates:t,fallbackRate:n,usageAllocation:a}}=i,l={};for(let e in t)l[e]=Number(t[e].value);return{matrix:l,fallback:Number(n.value),usageAllocation:a}})(i),l=e.results.totalValue,r=n.usageAllocation;for(let i of e.results.views.count.results){let e=i.totalValue??0;if("pro"===a&&r&&e&&l){let i=e/l;e=Math.max(0,e-r*i)}let s=i.dimensionValues?.billableRegion??"";t+=e*(n.matrix[s]??n.fallback)}return t},r=l(i,"imageOptimizationTransformation"),o=l(t,"imageOptimizationCacheRead"),d=l(n,"imageOptimizationCacheWrite");return{newPrice:r+o+d,imageOptimizationTransformation:r,imageOptimizationCacheRead:o,imageOptimizationCacheWrite:d}}(d.data,m.data,x.data,b.data,a?.billing?.plan);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"mt-2 flex flex-col gap-2",children:[(0,i.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border ",children:[(0,i.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between p-3 transition-opacity hover:opacity-80 [&::-webkit-details-marker]:hidden",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,i.jsx)(k.ChevronRightSmall,{})}),(0,i.jsx)(p.Text,{color:"gray-1000",weight:500,children:"New Cost Estimate*"})]}),(0,i.jsx)(p.Text,{className:"flex items-center gap-1",color:"gray-1000",weight:500,children:void 0===j?(0,i.jsx)(g.Skeleton,{height:18,width:30}):`~ ${c(j)}`})]}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"col-span-2 border-t bg-background-100 p-3 pl-9 tabular-nums space-y-2",children:(0,i.jsxs)("div",{className:"grid grid-cols-[2fr,1fr] gap-x-4 gap-y-1",children:[(0,i.jsx)(D,{cost:f,desc:"Image Transformations",format:c,tooltip:"Incurred on cache MISS or STALE"}),(0,i.jsx)(D,{cost:y,desc:"Image Cache Reads",format:c,tooltip:"Incurred on cache HIT (global only)"}),(0,i.jsx)(D,{cost:S,desc:"Image Cache Writes",format:c,tooltip:"Incurred on cache MISS or STALE"})]})})})]}),(0,i.jsxs)("details",{className:"group -mx-2 overflow-hidden rounded border",children:[(0,i.jsxs)("summary",{className:"flex cursor-pointer list-none items-center justify-between bg-background-200 p-3 text-gray-1000 transition-opacity hover:opacity-80 dark:text-gray-900 [&::-webkit-details-marker]:hidden",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"transition-transform group-open:rotate-90",children:(0,i.jsx)(k.ChevronRightSmall,{})}),(0,i.jsx)(p.Text,{color:"inherit",weight:500,children:"Old Cost Estimate*"})]}),(0,i.jsx)(p.Text,{className:"flex items-center gap-1",color:"inherit",weight:500,children:void 0===u?(0,i.jsx)(g.Skeleton,{height:18,width:30}):`~ ${c(u)}`})]}),(0,i.jsx)("div",{children:(0,i.jsx)("div",{className:"col-span-2 border-t bg-background-200 p-3 pl-9 tabular-nums space-y-2",children:(0,i.jsx)("div",{className:"grid grid-cols-[2fr,1fr] gap-x-4 gap-y-1",children:(0,i.jsx)(D,{cost:u,desc:"Source Images",format:c,tooltip:"Unique Source Images"})})})})]}),(0,i.jsx)(p.Text,{className:"mt-2",color:"gray-800",size:14,children:"* Price estimate is based on your team's activity over the last 30 days and may not reflect current or actual usage."}),(0,i.jsx)(p.Text,{className:"mt-2",color:"gray-800",size:14,children:"By clicking to accept, you agree to the new pricing for this product, notwithstanding any terms in your written agreement, and authorize Vercel to invoice you for any additional fees incurred by your use after the change."}),a?.billing?.plan==="enterprise"&&"unbundled"!==a.billing.planIteration?(0,i.jsx)(h.Note,{className:"-mx-2 mt-2",type:"cyan",children:"To enable, please contact your account executive."}):null]})})}function R(e){let{isDisabled:t,error:n}=e;return n?.message?(0,i.jsx)(o.ErrorText,{children:(0,i.jsx)(r.Error,{error:n})}):t?(0,i.jsx)("span",{children:"You need additional permissions to manage your team's Image Optimization price."}):(0,i.jsxs)("span",{children:["Learn more about"," ",(0,i.jsx)(f.Link,{external:!0,href:"https://vercel.com/docs/image-optimization",onClick:()=>A.analytics.track(C.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_LEARN_MORE),variant:"highlight",children:"Image Optimization"})]})}function G(){let{team:e,isReady:r,mutate:o}=(0,y.useTeam)(),{can:g}=(0,w.default)(),p=g(T.Action.Update,T.Resource.Team),b=g(T.Action.Update,T.Resource.ImageOptimizationNewPrice),k=r&&p&&b,_=!!e?.enableImageOptimizationNewPrice,I=(0,j.useToasts)(),[E,N]=(0,t.useState)(null),[M,P]=(0,t.useState)(!1),[O,L]=(0,t.useState)(!1),[D,G]=(0,t.useState)(Date.now());if((0,t.useEffect)(()=>{let e="#image-optimization-new-price";window.location.hash===e&&document.querySelector(e)?.scrollIntoView()},[]),e?.billing?.plan==="hobby")return null;let U=r&&e?.enableImageOptimizationNewPrice;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(d.Fieldset,{disabled:!k,children:[(0,i.jsxs)(l.FieldsetContent,{disabled:!k,children:[(0,i.jsx)(F.FieldsetTitle,{suffix:U?void 0:(0,i.jsx)(a.Badge,{variant:"teal-subtle",children:"New Pricing available"}),children:"Image Optimization"}),(0,i.jsx)(x.FieldsetSubtitle,{children:"On-demand image optimization for device-specific adjustments, edge caching, and format conversion for optimal performance."}),U?(0,i.jsxs)(h.Note,{type:"secondary",children:[(0,i.jsx)("strong",{className:"font-semibold",children:"New pricing enabled"}),(0,i.jsx)("br",{}),"You are using the new pricing model based on image transformations, cache reads, and cache writes."]}):(0,i.jsxs)(h.Note,{action:(0,i.jsx)(s.Button,{className:"mr-2",disabled:!k||_,loading:O,onClick:()=>{Date.now()-D>(0,n.default)("1h")&&G(Date.now()),P(!0)},children:"Review Cost Estimate"}),children:[(0,i.jsx)("strong",{className:"font-semibold",children:"Move to the new pricing"}),(0,i.jsx)("br",{}),"See your cost estimate and move to the new pricing, based on image transformations, cache reads, and cache writes."]})]}),(0,i.jsx)(c.FieldsetFooter,{disabled:!1,highlight:!k,children:(0,i.jsx)(c.FieldsetFooter.Status,{children:(0,i.jsx)(R,{error:E,isDisabled:!k})})})]}),(0,i.jsxs)(u.Modal.Modal,{active:M,onClickOutside:()=>{A.analytics.track(C.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_CONFIRMATION_CLOSE),P(!1)},width:"500px",children:[(0,i.jsxs)(u.Modal.Body,{className:"tailwind",children:[(0,i.jsx)(m.Stack,{className:"modal-content",children:(0,i.jsx)(u.Modal.Title,{children:"Review Image Optimization Pricing"})}),(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)("p",{className:"py-2",children:["Move to our new pricing model, which charges for image transformations, cache reads, and cache writes, instead of source images."," ",(0,i.jsx)(f.Link,{external:!0,href:"https://vercel.com/docs/image-optimization/limits-and-pricing",variant:"highlight",children:"Learn more"})]}),(0,i.jsx)(B,{now:D,team:e})]})]}),(0,i.jsxs)(u.Modal.Actions,{children:[(0,i.jsx)(u.Modal.Action,{onClick:async()=>{A.analytics.track(C.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_CONFIRMATION_CANCEL),await o(),P(!1)},type:"secondary",children:"Cancel"}),(0,i.jsx)(u.Modal.Action,{disabled:e?.billing?.plan==="enterprise"&&"unbundled"!==e.billing.planIteration,loading:O,onClick:async()=>{L(!0);try{await (0,S.fetchAPI)(`${v.API_TEAMS}/${e?.id||""}`,{throwOnHTTPError:!0,method:"PATCH",body:{enableImageOptimizationNewPrice:!0}}),I.success("New pricing enabled successfully")}catch(e){N(e)}finally{await o(),L(!1),P(!1),A.analytics.track(C.AnalyticsEvent.IMAGE_OPTIMIZATION_NEW_PRICE_ENABLED,{enabled:!0})}},children:"Accept"})]})]})]})}}}]);

//# sourceMappingURL=eb523019ad16204b.js.map
//# debugId=434226e3-f1b4-5508-89b0-8cd19b5f553b
