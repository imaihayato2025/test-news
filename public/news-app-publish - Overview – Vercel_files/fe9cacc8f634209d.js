
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="66b2f519-fe12-5d79-b496-330912c564ad")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{7253353:e=>{var{m:t,e:n}=e;t.exports=new Set(["for","and","nor","but","or","yet","so","a","an","the","aboard","about","above","across","after","against","along","amid","among","anti","around","as","at","before","behind","below","beneath","beside","besides","between","beyond","but","by","concerning","considering","despite","down","during","except","excepting","excluding","following","for","from","in","inside","into","like","minus","near","of","off","on","onto","opposite","over","past","per","plus","regarding","round","save","since","than","through","to","toward","towards","under","underneath","unlike","until","up","upon","versus","via","with","within","without"])},1289406:e=>{var{m:t,e:n}=e;t.exports=["ZEIT","ZEIT Inc.","Vercel","Vercel Inc.","CLI","API","HTTP","HTTPS","JSX","DNS","URL","now.sh","now.json","vercel.app","vercel.json","CI","CD","CDN","package.json","GitHub","GitLab","CSS","Sass","JS","JavaScript","TypeScript","HTML","WordPress","JavaScript","Next.js","Node.js","Webpack","Docker","Bash","Kubernetes","SWR","TinaCMS","UI","UX","TS","TSX","iPhone","iPad","watchOS","iOS","iPadOS","macOS"]},4283941:e=>{var{m:t,e:n}=e;{let n=e.r(7253353),i=e.r(1289406),r=/(?:(?:(\s?(?:^|[.\(\)!?;:"-])\s*)(\w))|(\w))(\w*[â€™']*\w*)/g;t.exports=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=e.toLowerCase().replace(r,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,l=e.length+s>=a.length,c=function(e){let t=e[0];return/\s/.test(t)?e.substr(1):/[\(\)]/.test(t)?null:e}(e);if(!c)return e;if(!i){let e=r+o;if(n.has(e)&&!l)return c}return t+(r||i).toUpperCase()+o}),[...i,...t.special||[]].map(e=>[RegExp(`\\b${e}\\b`,"gi"),e]).forEach(t=>{let[n,i]=t;e=e.replace(n,i)}),e}}},6382421:e=>{"use strict";e.s({AdditionalPermissionsRequired:()=>c});var t=e.i(6645307),n=e.i(4283941),i=e.i(5175803),r=e.i(889716),o=e.i(8084653),s=e.i(2362802),a=e.i(7573892),l=e.i(9802771);function c(e){let{team:c,resource:d,title:u="Additional Permissions Required",customMessage:g,className:h}=e,p=c?.membership?.role??"",m=(0,n.default)(p.replaceAll("_"," "));return(0,t.jsxs)(r.Stack,{align:"center",className:h??"min-h-56 rounded border border-solid border-gray-200 bg-background-200",gap:4,justify:"center",children:[(0,t.jsx)(o.Text,{align:"center",weight:500,children:u}),(0,t.jsx)(o.Text,{align:"center",as:"p",className:"max-w-[720px] break-words",children:p?(0,t.jsxs)(t.Fragment,{children:["As a ",(0,t.jsx)(o.Text,{as:"span",weight:500,children:m})," on the ",(0,t.jsx)(i.Avatar,{size:20,teamId:c?.id??""}),(0,t.jsx)(o.Text,{as:"span",weight:500,children:` ${c?.name??""}`})," team, ",g||`you do not have permission to view ${d}.`]}):`You do not have permission to view ${d}.`}),(0,t.jsxs)(o.Text,{align:"center",as:"p",className:"break-words pt-2",color:"gray-900",children:["Learn more about"," ",(0,t.jsx)(s.Link,{external:!0,href:"/docs/rbac/access-roles",onClick:()=>{a.analytics.track(l.AnalyticsEvent.PERMISSIONS_CLICKED_LEARN_MORE)},type:"highlight",children:"Roles and Permissions"})]})]})}},3509620:e=>{"use strict";e.s({ENV_VAR_COMMENT_MAX_LENGTH:()=>r,EnvTarget:()=>t,EnvType:()=>i,isSystemEnvTarget:()=>n});var t=function(e){return e.Production="production",e.Preview="preview",e.Development="development",e}({});function n(e){return Object.values(t).includes(e)}var i=function(e){return e.Plain="plain",e.Secret="secret",e.System="system",e.Encrypted="encrypted",e.Sensitive="sensitive",e}({});let r=500},5602331:e=>{e.v({checked:"toggle-module__fUrgQa__checked",disabled:"toggle-module__fUrgQa__disabled",input:"toggle-module__fUrgQa__input "+e.i(7431715).visuallyHidden,large:"toggle-module__fUrgQa__large",medium:"toggle-module__fUrgQa__medium",noMargin:"toggle-module__fUrgQa__noMargin",switchFirst:"toggle-module__fUrgQa__switchFirst",thumb:"toggle-module__fUrgQa__thumb",thumbIcon:"toggle-module__fUrgQa__thumbIcon",titleCasing:"toggle-module__fUrgQa__titleCasing",toggle:"toggle-module__fUrgQa__toggle",wrapper:"toggle-module__fUrgQa__wrapper"})},9495609:e=>{"use strict";e.s({Toggle:()=>l});var t=e.i(6645307),n=e.i(6530772),i=e.i(5610210),r=e.i(1164214),o=e.i(9362924),s=e.i(5602331);let a={amber:{background:"--ds-amber-700",foreground:"--ds-amber-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-gray-100"},"amber-inverted":{background:"--ds-gray-100",foreground:"--ds-gray-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-amber-700"},"amber-track-only":{background:"--ds-amber-700",foreground:"--ds-black",lightModeForeground:"--ds-black",checkedBackground:"--ds-gray-100"},red:{background:"--ds-red-600",foreground:"--ds-red-100",lightModeForeground:"--ds-red-1000",checkedBackground:"--ds-gray-100"}},l=e=>{let{className:l,children:c,size:d,disabled:u,name:g,checked:h,onChange:p,onClick:m,onBlur:f,onFocus:x,onKeyDown:v,noMargin:b,direction:j="label-first",labelCasing:C="title",stopPropagation:k=!1,icon:S,color:_,...w}=e,y=(0,o.useDisabled)()||u,I=(0,n.useCallback)(e=>{!y&&p&&(k&&e.stopPropagation(),p(!h))},[h,p,y,k]),E={...w.style};if(_){let e=a[_];E["--unchecked-bg-color-override"]=`var(${e.background})`,E["--checked-bg-color-override"]=`var(${e.checkedBackground})`,E["--thumb-fg-color-override"]=`var(${e.foreground})`,e.lightModeForeground&&(E["--thumb-light-fg-color-override"]=`var(${e.lightModeForeground})`)}return(0,t.jsxs)("label",{className:(0,i.clsx)(s.default.wrapper,l,{[String(s.default.large)]:"large"===d,[String(s.default.medium)]:"medium"===d,[String(s.default.switchFirst)]:"switch-first"===j,[String(s.default.titleCasing)]:"title"===C}),"data-version":"v1",...w,style:E,children:[c?(0,t.jsx)("span",{children:c}):null,(0,t.jsx)("input",{checked:h,className:(0,i.clsx)(s.default.input,"group"),"data-testid":(0,r.tid)(w["data-testid"]??"toggle","input"),disabled:y,name:g,onBlur:f,onChange:I,onClick:m,onFocus:x,onKeyDown:e=>{"Enter"===e.key&&I(e),v?.(e)},type:"checkbox"}),(0,t.jsx)("span",{className:(0,i.clsx)(s.default.toggle,{[String(s.default.checked)]:h,[String(s.default.disabled)]:y,[String(s.default.noMargin)]:b},""),children:(0,t.jsx)("div",{className:(0,i.clsx)(s.default.thumb,{[String(s.default.checked)]:h}),children:S?(0,t.jsxs)("div",{"aria-hidden":!0,className:(0,i.clsx)({[String(s.default.checked)]:h,[String(s.default.thumbIcon)]:!y},"flex justify-center items-center w-full h-full",y?"text-gray-700":"text-gray-900 dark:text-background-100"),children:[h?S.checked:null,h?null:S.unchecked]}):null})})]})}},3093478:e=>{"use strict";var{m:t,e:n}=e;t.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!=r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!=r--;){var i,r,o,s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n}},2013047:e=>{"use strict";function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}e.s({default:()=>t})},534589:e=>{"use strict";e.s({CONTACT_SALES_DASHBOARD_HREF:()=>t});let t="/contact/sales?p=1"},5747252:e=>{"use strict";e.s({default:()=>n});var t=e.i(6530772);function n(e){let[n,i]=(0,t.useState)(e),r=(0,t.useRef)(!1);(0,t.useEffect)(()=>{r.current||i(e)},[e]);let o=(0,t.useCallback)(e=>(r.current=!0,i(e)),[]);return[n,o,(0,t.useCallback)(()=>{r.current=!1},[]),r.current]}},4774832:e=>{"use strict";e.s({isEnterprise:()=>i,isHobby:()=>n});let t=e=>t=>t?.billing?.plan===e,n=t("hobby"),i=t("enterprise")},5982361:[e=>{"use strict";e.s({capitalizeSlug:()=>r,getAllEnvironmentConfigurations:()=>i},5982361);var t=e.i(3509620),n=e.i(2013047);function i(e,n){if(!e||!n)return[{envId:t.EnvTarget.Production,envSlug:t.EnvTarget.Production,buildsEnabled:!1},{envId:t.EnvTarget.Preview,envSlug:t.EnvTarget.Preview,buildsEnabled:!1}];let i=n.reduce((e,t)=>(e[t.Id]=t,e),{}),r=e.connectConfigurations?.reduce((e,t)=>{t.envId in e||(e[t.envId]={activeConfiguration:void 0,passiveConfiguration:void 0,buildsEnabled:!1});let n=e[t.envId];return t.passive?n.passiveConfiguration=i[t.connectConfigurationId]:(n.activeConfiguration=i[t.connectConfigurationId],n.buildsEnabled=t.buildsEnabled),e},{})??{},o=e=>r[e]??{activeConfiguration:void 0,passiveConfiguration:void 0,buildsEnabled:!1},s=(e.customEnvironments??[]).sort((e,t)=>t.updatedAt-e.updatedAt);return[{envId:t.EnvTarget.Production,envSlug:t.EnvTarget.Production,...o(t.EnvTarget.Production)},{envId:t.EnvTarget.Preview,envSlug:t.EnvTarget.Preview,...o(t.EnvTarget.Preview)},...s.map(e=>{let{id:t,slug:n}=e;return{envId:t,envSlug:n,...o(t)}})]}function r(e){return"production"===e||"preview"===e?(0,n.default)(e):e}e.s({Shortlist:()=>d},7712830);var o=e.i(6645307),s=e.i(889716),a=e.i(555528),l=e.i(3921802),c=e.i(8084653);function d(e){let{list:t,visibleCount:n,allCount:i,allMessage:r,maxItemWidth:d}=e;return t.length===i&&r?r:(0,o.jsxs)(s.Stack,{direction:"row",gap:1,children:[(0,o.jsx)(s.Stack,{direction:"row",gap:1,children:t.slice(0,n).map((e,i)=>(0,o.jsxs)(s.Stack,{align:"center",direction:"row",children:[(0,o.jsx)(c.Text,{as:"span",style:{maxWidth:d},title:e,truncate:void 0!==d,children:e}),(0,o.jsx)(c.Text,{as:"span",children:i<Math.min(t.length,n)-1?",":null})]},e))}),t.length>n?(0,o.jsx)(a.Tooltip,{text:(0,o.jsx)(s.Stack,{direction:"column",children:t.slice(n).map(e=>(0,o.jsx)("div",{children:e},e))}),children:(0,o.jsxs)(l.Badge,{size:"sm",children:["+",t.length-n]})}):null]})}},[7712830]],5209606:[e=>{"use strict";e.s({useConfigurations:()=>l},5209606);var t=e.i(3521787),n=e.i(1183506),i=e.i(3514588),r=e.i(3585235),o=e.i(5785123);e.s({getConfigurationsKey:()=>a},930958);var s=e.i(9336536);function a(e){let{teamId:t,search:n,includePeeringConnections:i,includeProjects:r}=e,o=new URLSearchParams({teamId:t});return n&&o.set("search",n),!1===i&&o.set("includePeeringConnections","false"),!1===r&&o.set("includeProjects","false"),`${s.API_CONNECT_CONFIGURATIONS}?${o.toString()}`}function l(e,s){let{team:l}=(0,i.useTeam)(),{can:c}=(0,r.default)(),d=c(o.Action.List,o.Resource.ConnectConfiguration);return(0,t.default)(()=>e.teamId&&d&&l?.connect?.enabled?a({...e,teamId:e.teamId}):null,e=>(0,n.fetchAPI)(e,{throwOnHTTPError:!0}),s)}},[930958]],1180734:e=>{"use strict";e.s({IpIcon:()=>n});var t=e.i(6645307);function n(){return(0,t.jsxs)("svg",{"data-testid":"connected-dots-icon",fill:"none",height:66,viewBox:"0 0 66 66",width:66,xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"33",cy:"33",opacity:"0.3",r:"32",stroke:"url(#ip-icon-fill)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M26 40.3542C25.2671 39.5238 24.1947 39 23 39C20.7909 39 19 40.7909 19 43C19 45.2091 20.7909 47 23 47C25.2091 47 27 45.2091 27 43C27 41.9856 26.6224 41.0593 26 40.3542ZM26 40.3542L40.3542 26M40.3542 26C41.0593 26.6224 41.9856 27 43 27C45.2091 27 47 25.2091 47 23C47 20.7909 45.2091 19 43 19C40.7909 19 39 20.7909 39 23C39 24.1947 39.5238 25.2671 40.3542 26Z",stroke:"url(#ip-icon-fill)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"}),(0,t.jsxs)("g",{opacity:"0.25",children:[(0,t.jsx)("path",{d:"M27 23C27 25.2091 25.2091 27 23 27C21.9856 27 21.0593 26.6224 20.3542 26C19.5238 25.2671 19 24.1947 19 23C19 20.7909 20.7909 19 23 19C25.2091 19 27 20.7909 27 23Z",stroke:"url(#ip-icon-fill)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"}),(0,t.jsx)("path",{d:"M47 43C47 45.2091 45.2091 47 43 47C41.9856 47 41.0593 46.6224 40.3542 46C39.5238 45.2671 39 44.1947 39 43C39 40.7909 40.7909 39 43 39C45.2091 39 47 40.7909 47 43Z",stroke:"url(#ip-icon-fill)",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3"})]}),(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:"ip-icon-fill",x1:"0",x2:"66",y1:"66",y2:"0",children:[(0,t.jsx)("stop",{stopColor:"var(--accents-3)"}),(0,t.jsx)("stop",{offset:"1",stopColor:"var(--accents-7)"})]})})]})}},6090704:e=>{e.v({badge:"connect-module__ZUsPwW__badge",buildsNotice:"connect-module__ZUsPwW__buildsNotice",buildsNoticeLabel:"connect-module__ZUsPwW__buildsNoticeLabel",connectProjectContainer:"connect-module__ZUsPwW__connectProjectContainer",connectionsDescription:"connect-module__ZUsPwW__connectionsDescription",copy:"connect-module__ZUsPwW__copy",empty:"connect-module__ZUsPwW__empty",emptyContent:"connect-module__ZUsPwW__emptyContent",entity:"connect-module__ZUsPwW__entity",entityDetails:"connect-module__ZUsPwW__entityDetails",entityLink:"connect-module__ZUsPwW__entityLink",entityWithDetails:"connect-module__ZUsPwW__entityWithDetails",icon:"connect-module__ZUsPwW__icon",label:"connect-module__ZUsPwW__label",metadata:"connect-module__ZUsPwW__metadata",name:"connect-module__ZUsPwW__name",wordBreak:"connect-module__ZUsPwW__wordBreak"})},2681784:e=>{"use strict";e.s({ContactSupportButton:()=>m,NoNetworks:()=>f,NotEnterprise:()=>x});var t=e.i(6645307),n=e.i(5674541),i=e.i(889716),r=e.i(8084653),o=e.i(663357),s=e.i(6531164),a=e.i(611347),l=e.i(2362802),c=e.i(534589),d=e.i(7573892),u=e.i(9802771),g=e.i(1180734),h=e.i(6090704);function p(){d.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"secure_compute_contact_sales",click_value:"Clicked on 'contact sales' in secure compute settings"})}function m(){return(0,t.jsx)(l.ButtonLink,{href:c.CONTACT_SALES_DASHBOARD_HREF,onClick:p,type:"secondary",children:"Contact Support"})}function f(){return(0,t.jsx)(o.EmptyState.Root,{description:"You currently don't have any Secure Compute networks. Contact Support to request creating a network.",icon:(0,t.jsx)(g.IpIcon,{}),title:"No Secure Compute Networks",children:(0,t.jsx)(m,{})})}function x(){return(0,t.jsx)(a.Fieldset,{children:(0,t.jsx)(s.FieldsetContent,{className:h.default.emptyContent,children:(0,t.jsxs)(i.Stack,{align:"center",className:h.default.empty,gap:6,justify:"center",children:[(0,t.jsx)(g.IpIcon,{}),(0,t.jsxs)(i.Stack,{align:"center",gap:2,children:[(0,t.jsx)(r.Text,{weight:500,children:"Secure Compute Settings"}),(0,t.jsxs)(r.Text,{align:"center",className:h.default.connectionsDescription,color:"gray-900",children:["Secure Compute is a paid feature available on the"," ",(0,t.jsx)(l.Link,{href:"/pricing",onClick:function(){d.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"secure_compute_enterprise_plan",click_value:"Clicked on 'enterprise plan' of secure compute settings"})},variant:"highlight",children:"Enterprise Plan"}),"."]})]}),(0,t.jsx)(n.Button,{Component:"a",href:c.CONTACT_SALES_DASHBOARD_HREF,onClick:function(){d.analytics.track(u.AnalyticsEvent.CLICK_EVENT,{click_name:"secure_compute_upgrade_cta",click_value:"Clicked on 'upgrade' plan of secure compute settings"})},children:"Upgrade"})]})})})}},7842236:e=>{"use strict";e.s({SecureComputeEnvironments:()=>z,SecureComputeEnvironmentsSkeleton:()=>K},7842236);var t=e.i(6645307),n=e.i(6530772),i=e.i(3093478),r=e.i(5674541),o=e.i(8247297),s=e.i(889716),a=e.i(8084653),l=e.i(584439),c=e.i(8158100),d=e.i(555528),u=e.i(5163670),g=e.i(9495609),h=e.i(8811733),p=e.i(6621512),m=e.i(5535439),f=e.i(6649026),x=e.i(1183506),v=e.i(9336536),b=e.i(4418725),j=e.i(3514588),C=e.i(3585235),k=e.i(5785123),S=e.i(2362802),_=e.i(5209606),w=e.i(2240289),y=e.i(5747252),I=e.i(1389821),E=e.i(2681784),T=e.i(4774832),N=e.i(6382421);let P="lg:grid-cols-[minmax(90px,0.5fr)_1fr_1fr_50px]";function A(e){let{children:n}=e;return(0,t.jsx)("div",{className:`hidden lg:grid ${P} text-label-14 h-10 items-center px-4 text-gray-900 lg:gap-5`,children:n})}function O(e){let{children:n}=e;return(0,t.jsx)("div",{className:"flex flex-col rounded border border-solid border-gray-alpha-400 bg-background-100 [&>*:not(:last-child)]:border-0 [&>*:not(:last-child)]:border-b [&>*:not(:last-child)]:border-solid [&>*:not(:last-child)]:border-gray-alpha-400",children:n})}function L(e){let{children:n}=e;return(0,t.jsx)("div",{className:`grid gap-2 p-4 lg:gap-5 lg:py-0 ${P} lg:h-[52px] lg:items-center`,children:n})}var M=e.i(5982361),U=e.i(3621043),B=e.i(1318155);let R="__multipleSelected";function W(e){return e.configurations?(0,t.jsx)(D,{...e}):(0,t.jsx)(u.Skeleton,{className:"min-w-0 grow p-px"})}function D(e){let{configurations:n,disabled:i,disabledMessage:r,omit:o,value:s,onChange:a,multipleSelected:l,showMultipleSelectedOption:c}=e,g=(0,b.useTeamSlug)(),h=!n,p=o?.some(e=>!e),m=n?.filter(e=>!o||o.every(t=>t&&t.dc!==e.dc))??[],f=n?.filter(e=>o?.some(t=>!t||t.dc===e.dc))??[],x=[...c?[(0,t.jsx)(U.Combobox.Option,{value:R,children:"Multiple options selected"},R)]:[],...m.map(e=>(0,t.jsx)(U.Combobox.Option,{suffix:(0,t.jsx)(Z,{configurationId:e.Id,teamSlug:g}),value:e.Id,children:e.ConfigurationName},e.Id)),...f.map(e=>(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(d.Tooltip,{as:"div",className:"w-full",desktopOnly:!0,text:p?"Active network must be selected":"Passive network must be in different region than active network",children:(0,t.jsx)(U.Combobox.Option,{className:"w-full",disabled:!0,suffix:(0,t.jsx)(Z,{configurationId:e.Id,teamSlug:g}),value:e.Id,children:e.ConfigurationName})})},e.Id))];return(0,t.jsx)(u.Skeleton,{className:"min-w-0 grow p-px",show:h,children:(0,t.jsx)(d.Tooltip,{className:"w-full",desktopOnly:!0,text:i&&r?r:void 0,children:(0,t.jsx)("div",{className:"w-full",title:s===R?"Multiple options selected":s?.ConfigurationName,children:(0,t.jsxs)(U.Combobox,{disabled:i,displaySelectedSuffix:!0,noInputPrefix:!0,onChange:e=>{l?a(e===R?e:n?.find(t=>t.Id===e)??void 0):a(n?.find(t=>t.Id===e)??void 0)},placeholder:"Not configured",size:"small",value:s===R?s:s?.Id??null,children:[(0,t.jsx)(U.Combobox.Input,{}),(0,t.jsx)(U.Combobox.List,{children:x})]})})})})}function Z(e){let{teamSlug:n,configurationId:i}=e;return(0,t.jsx)(S.Link,{className:"block h-[16px] text-gray-700 hover:text-black",href:`/${n}/~/settings/secure-compute/networks/${i}`,onMouseUp:e=>{e.stopPropagation(),e.preventDefault()},target:"_blank",children:(0,t.jsx)(B.External,{})})}var F=e.i(8934201),$=e.i(7712830);function H(e){let{allEnvConfs:i,onClose:r,selectedEnvConfs:l,configurations:c,setFormState:u}=e,g=new Set(l.map(e=>e.activeConfiguration)),h=g.size>1,p=h?R:Array.from(g)[0],m=new Set(l.map(e=>e.passiveConfiguration)),f=m.size>1,x=f?R:Array.from(m)[0],v=new Set(l.map(e=>e.buildsEnabled)),b=v.size>1,j=!b&&Array.from(v)[0],[C,k]=(0,n.useState)(!0),[S,_,,w]=(0,y.default)(p),[I,E,,T]=(0,y.default)(x),[N,P,,A]=(0,y.default)(j);function O(){k(!1),_(void 0),E(void 0),P(!1)}return(0,t.jsxs)(F.Modal.Modal,{active:C,onAnimationDone:()=>{r()},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||k(!1)},children:[(0,t.jsx)(F.Modal.Body,{children:(0,t.jsxs)(s.Stack,{gap:5,children:[(0,t.jsx)(F.Modal.Title,{children:"Edit Secure Compute Connections"}),(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsx)(a.Text,{children:"Editing"}),(0,t.jsx)($.Shortlist,{allCount:i.length,allMessage:"all environments",list:l.map(e=>e.envSlug),visibleCount:3})]}),(0,t.jsxs)(s.Stack,{gap:2,children:[(0,t.jsx)(a.Text,{className:"text-gray-800",children:"Active network:"}),(0,t.jsx)(W,{configurations:c,multipleSelected:!0,onChange:e=>{_(e);let t=!1;t=e===R?Array.from(g).some(e=>I!==R&&e?.dc===I?.dc):I===R?Array.from(m).some(t=>t?.dc===e?.dc):e?.dc===I?.dc,(!e||t)&&E(void 0)},showMultipleSelectedOption:!!h&&!w,value:S})]}),(0,t.jsxs)(s.Stack,{gap:2,children:[(0,t.jsx)(a.Text,{className:"text-gray-800",children:"Passive Network:"}),(0,t.jsx)(W,{configurations:c,disabled:!S,disabledMessage:"Active network must be selected",multipleSelected:!0,omit:S===R?Array.from(g):S&&[S],onChange:e=>{E(e)},showMultipleSelectedOption:!!f&&!T,value:I})]}),(0,t.jsxs)(s.Stack,{gap:2,children:[(0,t.jsx)(a.Text,{className:"text-gray-800",children:"Builds:"}),(0,t.jsx)(d.Tooltip,{as:"div",className:"w-[130px]",text:S?void 0:"Active network must be selected",children:(0,t.jsx)(o.Checkbox,{checked:N||b&&!A&&void 0,disabled:!S,id:"includeBuilds",indeterminate:!!(b&&!A),name:"includeBuilds",onChange:()=>{P(!N)},children:"Include Builds"})})]})]})}),(0,t.jsxs)(F.Modal.Actions,{children:[(0,t.jsx)(F.Modal.Action,{onClick:O,type:"secondary",children:"Cancel"}),(0,t.jsx)(F.Modal.Action,{onClick:function(){u(e=>({...e,...Object.fromEntries(l.map(e=>[e.envId,{...e,...S===R?{}:{activeConfiguration:S},...I===R?{}:{passiveConfiguration:I},...A?{buildsEnabled:N}:{}}]))})),O()},children:"Apply"})]})]})}function z(e){let{teamSlug:n,projectId:i}=e,{team:r,isLoading:o}=(0,j.useTeam)(),{can:s,isLoading:a}=(0,C.default)(),l=s(k.Action.Read,k.Resource.ConnectConfigurationLink),c=s(k.Action.Update,k.Resource.ConnectConfigurationLink),{data:d,isLoading:u,mutate:g}=(0,w.useProject)(i,{apiVersion:"v9"}),{data:h,isLoading:p}=(0,_.useConfigurations)({teamId:n,includeProjects:!1,includePeeringConnections:!1});return o||a||u||p?(0,t.jsx)(J,{}):d&&r?l?(0,T.isEnterprise)(r)?h?.length?(0,t.jsx)(V,{children:(0,t.jsx)(q,{configurations:h,disabled:!c,project:d,revalidateProject:g})}):(0,t.jsx)(V,{children:(0,t.jsx)(E.NoNetworks,{})}):(0,t.jsx)(V,{children:(0,t.jsx)(E.NotEnterprise,{})}):(0,t.jsx)(N.AdditionalPermissionsRequired,{resource:"project's Secure Compute connections",team:r}):(0,m.notFound)()}let Q=()=>{};function K(){let[e,n]=(0,M.getAllEnvironmentConfigurations)();return(0,t.jsx)(V,{children:(0,t.jsxs)(s.Stack,{gap:4,children:[(0,t.jsxs)(s.Stack,{children:[(0,t.jsxs)(A,{children:[(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(o.Checkbox,{disabled:!0}),(0,t.jsx)("span",{children:"Environment"})]}),(0,t.jsx)("span",{children:"Active network"}),(0,t.jsx)("span",{children:"Passive network"}),(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:1,children:["Builds",(0,t.jsx)(d.Tooltip,{text:"When enabled builds will run in Secure Compute network",children:(0,t.jsx)(p.Information,{align:"middle",color:"gray-900",size:12})})]})]}),(0,t.jsx)(O,{children:(0,t.jsx)(X,{disabled:!0,envConf:e,isSelected:!1,onChange:Q,toggleIsSelected:Q})}),(0,t.jsx)(h.Spacer,{y:.5}),(0,t.jsx)(O,{children:(0,t.jsx)(X,{disabled:!0,envConf:n,isSelected:!1,onChange:Q,toggleIsSelected:Q})})]}),(0,t.jsxs)(s.Stack,{direction:"row",gap:4,justify:"space-between",children:[(0,t.jsx)(r.Button,{disabled:!0,type:"secondary",children:"Edit Selected"}),(0,t.jsxs)(s.Stack,{direction:"row",gap:2,justify:"flex-end",children:[(0,t.jsx)(r.Button,{disabled:!0,type:"secondary",children:"Reset"}),(0,t.jsx)(r.Button,{disabled:!0,children:"Save"})]})]})]})})}function V(e){let{children:n}=e;return(0,t.jsxs)(s.Stack,{gap:7,children:[(0,t.jsxs)(s.Stack,{gap:2,children:[(0,t.jsx)("h2",{className:"text-heading-24",children:"Secure Compute"}),(0,t.jsxs)("span",{className:"text-label-14 text-balance text-gray-900",children:["Manage project's connections to Secure Compute networks. Learn more about"," ",(0,t.jsx)(S.Link,{external:!0,href:"/docs/secure-compute",type:"highlight",children:"Secure Compute"})]})]}),n]})}function J(){return(0,t.jsx)(G,{})}function G(e){let{configurations:n,disabled:i=!1,project:r,revalidateProject:o}=e;return(0,t.jsx)(V,{children:(0,t.jsx)(q,{configurations:n,disabled:i,project:r,revalidateProject:o})})}function q(e){let{configurations:a,disabled:u=!1,project:g,revalidateProject:m}=e,j=(0,b.useTeamSlug)(),C=(0,I.useProjectIdOrName)(),k=(0,n.useMemo)(()=>(0,M.getAllEnvironmentConfigurations)(g,a),[g,a]),S=!a||!g,_=(0,n.useMemo)(()=>k.reduce((e,t)=>(e[t.envId]={...t,passiveConfiguration:t.activeConfiguration?t.passiveConfiguration:void 0},e),{}),[k]),[w,E]=(0,n.useState)(new Set),[T,N]=(0,n.useState)(!1),[P,L,U]=(0,y.default)(_),B=(0,n.useMemo)(()=>(0,i.default)(_,P),[_,P]),R=(0,n.useMemo)(()=>Object.values(P).filter(e=>w.has(e.envId)),[P,w]),W=R.length===k.length,D=R.length>0,Z=(0,n.useCallback)(()=>{E(e=>{let t=new Set(e);return W?k.forEach(e=>{t.delete(e.envId)}):k.forEach(e=>{t.add(e.envId)}),t})},[E,k,W]),[F,$]=(0,n.useState)(!1),z=(0,n.useCallback)(()=>{L(_),U()},[L,_,U]),Q=(0,n.useCallback)(async()=>{let e=Object.values(P).flatMap(e=>[...e.activeConfiguration?[{envId:e.envId,connectConfigurationId:e.activeConfiguration.Id,passive:!1,buildsEnabled:e.buildsEnabled}]:[],...e.passiveConfiguration?[{envId:e.envId,connectConfigurationId:e.passiveConfiguration.Id,passive:!0,buildsEnabled:!1}]:[]]);try{$(!0);let t=await (0,x.fetchAPI)(`${(0,v.API_PROJECTS_VERSION)("v9")}/${C}${(0,f.encode)({teamId:j})}`,{method:"PATCH",body:JSON.stringify({connectConfigurations:e.length?e:null}),throwOnHTTPError:!0});await m?.(t,{revalidate:!1}),l.toasts.success("Secure Compute connections updated.")}catch(e){l.toasts.error(e.message)}finally{$(!1)}U()},[P,m,U,C,j,$]),K=k[0],V=k.slice(1);return(0,t.jsxs)(s.Stack,{gap:4,children:[u?(0,t.jsx)(c.Note,{type:"warning",children:"You do not have permission to edit Secure Compute connections"}):null,(0,t.jsxs)(s.Stack,{children:[(0,t.jsxs)(A,{children:[(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(o.Checkbox,{checked:W||D&&void 0,disabled:u||S,id:"selectAllEnvironments",indeterminate:D,name:"selectAllEnvironments",onChange:Z}),(0,t.jsx)("span",{children:"Environment"})]}),(0,t.jsx)("span",{children:"Active network"}),(0,t.jsx)("span",{children:"Passive network"}),(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:1,children:["Builds",(0,t.jsx)(d.Tooltip,{text:"When enabled builds will run in Secure Compute network",children:(0,t.jsx)(p.Information,{align:"middle",color:"gray-900",size:12})})]})]}),(0,t.jsx)(O,{children:(0,t.jsx)(X,{configurations:a,disabled:u,envConf:P[K.envId],isSelected:w.has(K.envId),onChange:e=>{L({...P,[e.envId]:e})},project:g,toggleIsSelected:()=>{E(e=>{let t=new Set(e);return e.has(K.envId)?t.delete(K.envId):t.add(K.envId),t})}},K.envId)}),(0,t.jsx)(h.Spacer,{y:.5}),(0,t.jsx)(O,{children:V.map(e=>(0,t.jsx)(X,{configurations:a,disabled:u,envConf:P[e.envId],isSelected:w.has(e.envId),onChange:e=>{L({...P,[e.envId]:e})},project:g,toggleIsSelected:()=>{E(t=>{let n=new Set(t);return t.has(e.envId)?n.delete(e.envId):n.add(e.envId),n})}},e.envId))})]}),(0,t.jsxs)(s.Stack,{direction:"row",gap:4,justify:"space-between",children:[(0,t.jsx)(r.Button,{disabled:u||!D,onClick:()=>N(!0),type:"secondary",children:"Edit Selected"}),(0,t.jsxs)(s.Stack,{direction:"row",gap:2,justify:"flex-end",children:[(0,t.jsx)(r.Button,{disabled:u||B||F,onClick:z,type:"secondary",children:"Reset"}),(0,t.jsx)(r.Button,{disabled:u||B||F,loading:F,onClick:()=>void Q(),children:"Save"})]})]}),a&&T?(0,t.jsx)(H,{allEnvConfs:k,configurations:a,onClose:()=>N(!1),selectedEnvConfs:R,setFormState:L}):null]})}function X(e){let{envConf:n,configurations:i,disabled:r=!1,onChange:l,isSelected:c,toggleIsSelected:h}=e,m=!i;return(0,t.jsxs)(L,{children:[(0,t.jsx)(o.Checkbox,{checked:c,disabled:r||m,id:`selectEnvironment-${n.envSlug}`,labelClassName:"min-w-0",name:`selectEnvironment-${n.envSlug}`,onChange:()=>{h()},children:(0,t.jsx)(a.Text,{as:"span",className:"mb-[-5px]",title:n.envSlug,truncate:!0,children:(0,M.capitalizeSlug)(n.envSlug)})}),(0,t.jsxs)(s.Stack,{align:"center",className:"min-w-0",direction:"row",gap:2,children:[(0,t.jsx)(a.Text,{className:"shrink-0 basis-28 text-gray-800 lg:hidden",children:"Active network:"}),(0,t.jsx)(W,{configurations:i,disabled:r,onChange:e=>{l({...n,activeConfiguration:e,passiveConfiguration:e&&e.dc!==n.passiveConfiguration?.dc?n.passiveConfiguration:void 0})},value:n.activeConfiguration})]}),(0,t.jsxs)(s.Stack,{align:"center",className:"min-w-0",direction:"row",gap:2,children:[(0,t.jsx)(a.Text,{className:"shrink-0 basis-28 text-gray-800 lg:hidden",children:"Passive Network:"}),(0,t.jsx)(W,{configurations:i,disabled:r||!n.activeConfiguration,disabledMessage:!r&&"Active network must be selected",omit:n.activeConfiguration?[n.activeConfiguration]:void 0,onChange:e=>{l({...n,passiveConfiguration:e})},value:n.passiveConfiguration})]}),(0,t.jsxs)(s.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(a.Text,{className:"shrink-0 basis-28 text-gray-800 lg:hidden",children:(0,t.jsxs)(s.Stack,{align:"center",as:"span",direction:"row",children:["Builds"," ",(0,t.jsx)(d.Tooltip,{text:"When enabled builds will run in Secure Compute network",children:(0,t.jsx)(p.Information,{align:"middle",color:"gray-900",size:12})}),":"]})}),(0,t.jsx)(u.Skeleton,{show:m,children:(0,t.jsx)(d.Tooltip,{text:r||n.activeConfiguration?void 0:"Active network must be selected",children:(0,t.jsx)(g.Toggle,{checked:n.buildsEnabled,disabled:r||!n.activeConfiguration,id:"includeBuilds",name:"includeBuilds",onChange:()=>{l({...n,buildsEnabled:!n.buildsEnabled})},size:"medium"})})})]})]})}}}]);

//# sourceMappingURL=e6da5f9fd3fd1889.js.map
//# debugId=66b2f519-fe12-5d79-b496-330912c564ad
