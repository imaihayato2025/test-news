
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="ae344e71-ab4d-55eb-a12b-9e7d866552e0")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{2549948:e=>{e.v({child:"transfer-modal-step-module__6QESnW__child",inset:"transfer-modal-step-module__6QESnW__inset",padding:"transfer-modal-step-module__6QESnW__padding"})},4992686:e=>{e.v({avatar:"index-module__rVE1IW__avatar",padding:"index-module__rVE1IW__padding",pill:"index-module__rVE1IW__pill"})},1677153:e=>{e.v({checkbox:"select-projects-module__GbQ21W__checkbox",checkboxContainer:"select-projects-module__GbQ21W__checkboxContainer",header:"select-projects-module__GbQ21W__header",label:"select-projects-module__GbQ21W__label",list:"select-projects-module__GbQ21W__list",row:"select-projects-module__GbQ21W__row",rowContainer:"select-projects-module__GbQ21W__rowContainer",skeleton:"select-projects-module__GbQ21W__skeleton"})},1750654:e=>{e.v({container:"confirmation-module__KGv8fq__container",details:"confirmation-module__KGv8fq__details",detailsTitle:"confirmation-module__KGv8fq__detailsTitle",inline:"confirmation-module__KGv8fq__inline",loadMore:"confirmation-module__KGv8fq__loadMore",note:"confirmation-module__KGv8fq__note",subDetails:"confirmation-module__KGv8fq__subDetails",summary:"confirmation-module__KGv8fq__summary",summaryIcon:"confirmation-module__KGv8fq__summaryIcon",warnings:"confirmation-module__KGv8fq__warnings"})},3761970:e=>{e.v({row:"error-module__stLFja__row",rows:"error-module__stLFja__rows"})},183943:e=>{"use strict";e.s({EagerTransferModal:()=>eS},183943);var t=e.i(6645307),r=e.i(6530772),n=e.i(5535439),s=e.i(8934201),a=e.i(9802771),l=e.i(7573892),i=e.i(1164214),o=e.i(2452546),c=e.i(503726),d=e.i(1312661),u=e.i(3431702),m=e.i(3585235),j=e.i(5785123),f=e.i(540570),p=e.i(1209519),h=e.i(5165976),x=e.i(889716),g=e.i(8084653),b=e.i(5175803),T=e.i(3621043),_=e.i(1094487),y=e.i(3514588),v=e.i(5454140),S=e.i(8727559),C=e.i(645595),A=e.i(5610210),w=e.i(2549948);function k(e){let{title:n,subtitle:a,previousText:l,nextText:o,children:c,inset:d=!1,padding:u=!1,disableSkip:m,disableNext:j,disablePrevious:f,nextLoading:p,previousLoading:h,skipLoading:b,disabled:T,loading:_,next:y,previous:v,skip:S,disableClose:k}=e,{setDisableClose:M}=(0,C.useTransferModalContext)();return(0,r.useEffect)(()=>{M(k??!1)},[k,M]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Modal.Body,{padding:!1,children:[(0,t.jsx)(s.Modal.Header,{children:(0,t.jsxs)(x.Stack,{gap:4,style:{padding:24,paddingBottom:0},children:[(0,t.jsx)(g.Text,{size:24,weight:600,children:n}),"string"==typeof a?(0,t.jsx)(g.Text,{color:"gray-800",size:14,weight:400,children:a}):a]})}),(0,t.jsx)("div",{className:(0,A.clsx)(w.default.child,d&&w.default.inset,u&&w.default.padding),children:c})]}),(0,t.jsx)(s.Modal.Actions,{children:(0,t.jsxs)(x.Stack,{direction:"row",gap:3,justify:"flex-end",style:{width:"100%"},children:[v?(0,t.jsx)(s.Modal.Action,{disabled:T||f,loading:_||h,onClick:v,type:"secondary",children:l??"Back"}):null,(0,t.jsxs)(x.Stack,{direction:"row",gap:3,justify:"flex-end",style:{flexGrow:1},children:[S?(0,t.jsx)(s.Modal.Action,{"data-testid":(0,i.tid)("transfer-modal","skip-button"),disabled:T||m,loading:_||b,onClick:S,type:"secondary",children:"Skip"}):null,y?(0,t.jsx)(s.Modal.Action,{disabled:T||j,loading:_||p,onClick:y,children:o??"Continue"}):null]})]})})]})}var M=e.i(6727308),O=e.i(4992686);let E=(0,r.memo)(function(e){let{projectOrAccount:n,padding:s=!1}=e,a=(0,r.useMemo)(()=>{if(!n)return null;if("type"in n){if("user"===n.type){let e=n.userOrTeam;return e.name??e.username}return n.userOrTeam.name}return n.name},[n]);return n?(0,t.jsxs)("div",{className:(0,A.clsx)(O.default.pill,s&&O.default.padding),children:["type"in n?(0,t.jsx)(b.Avatar,{className:O.default.avatar,hash:n.userOrTeam.avatar,size:16}):(0,t.jsx)(M.FaviconOrFramework,{hideSkeleton:!0,project:n,size:16,style:{alignSelf:"center"}}),(0,t.jsx)(g.Text,{size:14,weight:500,children:a})]}):null}),N="create-team";function P(e){let{team:r}=e;return r.limited?(0,t.jsx)(R,{team:r}):(0,t.jsx)(I,{team:r})}function I(e){let{team:n}=e,{can:s}=(0,m.default)({teamId:n.id}),a=(0,r.useMemo)(()=>s(j.Action.Create,j.Resource.ProjectTransferIn),[s]);return(0,t.jsx)(R,{disabled:!a,team:n})}function R(e){let{team:r,disabled:n}=e;return(0,t.jsx)(T.Combobox.Option,{disabled:n||r.limited,label:r.name,prefix:(0,t.jsx)(b.Avatar,{size:24,teamId:r.id}),suffix:r.limited?(0,t.jsx)(h.LockClosed,{}):null,value:r.id,children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("span",{children:r.name}),(0,t.jsx)(S.PlanBadge,{team:r})]})})}var $=e.i(8247297),L=e.i(631755),F=e.i(584439),D=e.i(2824080),W=e.i(1183506),G=e.i(9336536),z=e.i(1389821),V=e.i(5261442),K=e.i(1677153);function B(e){let{project:n,selected:s,setSelected:a}=e,l=(0,r.useMemo)(()=>s.includes(n.id),[s,n]),i=(0,r.useCallback)(()=>a(e=>e.includes(n.id)?[...e.filter(e=>e!==n.id)]:[...e,n.id]),[a,n]),o=(0,r.useMemo)(()=>n.targets?.production?.alias?.[0]??null,[n]);return(0,t.jsx)("label",{className:K.default.label,htmlFor:n.id,children:(0,t.jsx)(x.Stack,{align:"center",className:K.default.row,direction:"row",gap:4,children:(0,t.jsx)($.Checkbox,{checked:l,className:K.default.checkbox,containerClassName:K.default.checkboxContainer,id:n.id,onChange:i,children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:4,style:{width:"100%"},children:[(0,t.jsx)(q,{project:n}),(0,t.jsxs)(x.Stack,{gap:1,children:[(0,t.jsx)(g.Text,{size:14,weight:600,children:n.name}),o?(0,t.jsx)(g.Text,{color:"gray-800",size:14,children:o}):null]})]})})})})}function q(e){let{project:n}=e,{data:s}=(0,V.default)({project:n}),a=(0,z.useFramework)(n),l=(0,r.useMemo)(()=>s?.src??a?.logo??null,[s,a?.logo]);return l?(0,t.jsx)(b.Avatar,{size:32,src:l}):(0,t.jsx)(b.Avatar,{hash:n.id,size:32})}function Q(e){let{selected:n,setSelected:s,projects:a}=e,l=(0,r.useMemo)(()=>`${n.length} selected`,[n]),i=(0,r.useMemo)(()=>n.length===a.length&&0!==a.length,[n,a]),o=(0,r.useMemo)(()=>n.length<a.length&&n.length>0,[n,a]),c=(0,r.useCallback)(()=>s(e=>e.length===a.length?[]:a.map(e=>e.id)),[a,s]);return(0,t.jsx)("label",{htmlFor:"select-projects-header",children:(0,t.jsx)("div",{className:K.default.header,children:(0,t.jsx)($.Checkbox,{checked:i,className:K.default.checkbox,id:"select-projects-header",indeterminate:o,onChange:c,children:(0,t.jsx)(g.Text,{color:"gray-800",size:14,children:l})})})})}function U(e){let{selected:r,setSelected:n,projects:s,filteredProjects:a}=e;return(0,t.jsxs)(x.Stack,{className:K.default.list,gap:1,children:[(0,t.jsx)(Q,{projects:s,selected:r,setSelected:n}),(0,t.jsx)("div",{className:K.default.rowContainer,children:a.map(e=>(0,t.jsx)(B,{project:e,selected:r,setSelected:n},e.id))})]})}async function H(e){let{projectId:t,destinationAccount:r,sourceAccount:n}=e,s="";"team"===n.type&&(s=`?${new URLSearchParams({teamId:n.id}).toString()}`);let a=await (0,W.fetchAPI)(`${(0,G.API_PROJECTS_TRANSFER)(t,r.id)}${s}`,{method:"GET",throwOnHTTPError:!0});return{projectId:t,error:a.error,resources:{domains:a.domains,newProjectName:a.newProjectName}}}var Y=e.i(9185154),J=e.i(8158100),X=e.i(7916122),Z=e.i(2362802),ee=e.i(5485417),et=e.i(4418725),er=e.i(969352),en=e.i(8955572),es=e.i(2265089),ea=e.i(5006659),el=e.i(4092061),ei=e.i(8298192),eo=e.i(1795525),ec=e.i(1750654);function ed(e){let{children:r,title:n}=e;return(0,t.jsx)(er.Details,{className:ec.default.subDetails,noMaxHeight:!0,title:n,children:r})}function eu(e){let{value:r,from:n=r,to:s=r}=e;return(0,t.jsx)(er.Item,{children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:2,justify:"space-between",style:{width:"100%"},children:[(0,t.jsx)(g.Text,{truncate:!0,children:n}),(0,t.jsx)(ee.ArrowRight,{className:"shrink-0"}),(0,t.jsx)(g.Text,{truncate:!0,children:s})]})})}function em(e){let{bold:r,normal:n,prefix:s}=e;return(0,t.jsxs)("span",{className:ec.default.detailsTitle,children:[s,(0,t.jsxs)("span",{children:[(0,t.jsx)("b",{children:r})," ",n]})]})}function ej(e){let{projectWithTransfer:n}=e,{sourceAccount:s}=(0,C.useTransferModalContext)(),a=(0,et.useTeamSlug)(),l=s?.type==="user"?void 0:s?.userOrTeam.slug,{data:i}=(0,en.default)(n.project.id,void 0,l),{data:o}=(0,es.default)(n.project.id,void 0,l),{logDrainsGroups:c}=(0,ea.useLogDrains)({projectSlug:n.project.name,teamSlug:a??null}),d=c.stopped.length>0||c.active.length>0,u=!!i?.envs.some(e=>e.edgeConfigId),m=!!i?.envs.some(e=>e.contentHint?.type==="blob-read-write-token"),j=o&&o.integrations.length>0,f=(0,r.useMemo)(()=>{let e=[];if(j&&e.push("Integrations won't be transferred. They need to be added again after the transfer is complete."),0!==e.length)return(0,t.jsx)(x.Stack,{className:ec.default.warnings,gap:2,padding:4,children:e.map(e=>(0,t.jsx)(J.Note,{className:ec.default.note,fill:!0,label:!1,type:"warning",children:e},e))})},[j]),p=(0,r.useMemo)(()=>m||u,[m,u]);return(0,t.jsxs)("details",{className:ec.default.details,children:[(0,t.jsxs)("summary",{className:ec.default.summary,children:[(0,t.jsx)("span",{className:ec.default.summaryIcon,children:(0,t.jsx)(X.ChevronRight,{})}),(0,t.jsx)(E,{padding:!0,projectOrAccount:n.project})]}),f,(0,t.jsxs)(x.Stack,{className:(0,A.clsx)(ec.default.inline),children:[(0,t.jsx)(ex,{projectWithTransfer:n}),(0,t.jsx)(ef,{domains:n.transferResources.domains}),(0,t.jsx)(ep,{overWriteTeamSlug:l,project:n.project}),(0,t.jsx)(eh,{project:n.project}),p?(0,t.jsx)(eg,{blob:m,edge:u}):null,d?(0,t.jsx)(eb,{integrations:c.integrations,selfServed:c.selfServed}):null,(0,t.jsx)(ed,{title:(0,t.jsx)(em,{bold:"All Deployments",normal:"will be transferred"})})]})]})}function ef(e){let{domains:r}=e;return r&&0!==r.length?(0,t.jsx)(ed,{title:(0,t.jsx)(em,{bold:`${r.length} Domains`,normal:"will be copied"}),children:r.map(e=>{let r="string"==typeof e?e:e.name;return(0,t.jsx)(eu,{value:r},r)})}):null}function ep(e){let{project:n,overWriteTeamSlug:s}=e,[,{aliases:a,loadMore:l,isLoadingMore:i,isReachingEnd:o}]=(0,el.useProjectAliasesInfinite)({projectId:n.id,limit:10},void 0,s),c=(0,r.useMemo)(()=>a.map(e=>e?.alias),[a]);return 0===c.length?null:(0,t.jsxs)(ed,{title:(0,t.jsx)(em,{bold:`${a.length}${10===a.length&&!o?"+":""} Aliases`,normal:"will be copied"}),children:[c.map(e=>(0,t.jsx)(eu,{value:e},e)),10===a.length&&!o&&(0,t.jsx)("div",{className:ec.default.loadMore,children:(0,t.jsx)(Y.LoadMoreButton,{loading:i,onClick:l})})]})}function eh(e){let{project:n}=e,s=(0,r.useMemo)(()=>(n.env??[]).map(e=>e.key),[n]);return 0===s.length?null:(0,t.jsx)(ed,{title:(0,t.jsx)(em,{bold:`${s.length} Environment Variables`,normal:"will be moved"}),children:s.map(e=>(0,t.jsx)(eu,{value:e},`${n.id}-${e}`))})}function ex(e){let{projectWithTransfer:r}=e;return r.transferResources.newProjectName===r.project.name?null:(0,t.jsx)(ed,{title:(0,t.jsx)(em,{bold:"Will be named",normal:r.transferResources.newProjectName})})}function eg(e){let{blob:n,edge:s}=e,a=(0,r.useMemo)(()=>{let e=[];n&&e.push("Blob Store"),s&&e.push("Edge Config Store");let r=function(e,t){let{join:r=" ",last:n}=t??{};if(!Array.isArray(e))throw TypeError("stringConcat expects an array of strings");if(0===e.length)return"";if(1===e.length)return e[0];let s="";for(let t=0;t<e.length;t++){let a=e[t];if(0===a.length)continue;let l="";t<e.length-2?l=r:t===e.length-2&&(l=n??r),s+=a+l}return s}(e,{join:", ",last:", and "}),a=`store${e.length>1?"s":""}`;return(0,t.jsxs)(x.Stack,{children:[(0,t.jsxs)("p",{children:["Project will keep access to its ",(0,t.jsx)("b",{children:r}),", though the",` ${a} `,"will not be transferred."]}),(0,t.jsxs)("p",{children:["The existing connection can be managed from the"," ","project's ",(0,t.jsx)("b",{children:"Environment Variable"})," settings, as it will not be visible from the Database."]})]})},[n,s]);return(0,t.jsx)(ed,{title:(0,t.jsx)(em,{bold:"Databases",normal:"will stay connected, but will not be moved."}),children:(0,t.jsx)(er.Item,{children:a})})}function eb(e){let{integrations:r,selfServed:n}=e,s=r.length+n.length;return(0,t.jsxs)(ed,{title:(0,t.jsx)(em,{bold:`${s} Log Drains`,normal:(0,t.jsxs)(t.Fragment,{children:["will ",(0,t.jsx)("b",{children:"not"})," be transferred"]})}),children:[r.map(e=>(0,t.jsx)(er.Item,{children:e.name},e.id)),n.map(e=>(0,t.jsx)(er.Item,{children:e.name},e.id))]})}var eT=e.i(3761970);function e_(){let{transferResponse:e}=(0,C.useTransferModalContext)();return e?(0,t.jsx)("div",{className:eT.default.rows,children:e.filter(e=>!!e.error).map(e=>(0,t.jsx)(ey,{row:e},e.projectId))}):null}function ey(e){let{row:n}=e,{projects:s}=(0,C.useTransferModalContext)(),a=(0,r.useMemo)(()=>s.find(e=>e.project.id===n.projectId)?.project,[s,n.projectId]);return a&&n.error?(0,t.jsxs)("div",{className:eT.default.row,children:[(0,t.jsx)(E,{projectOrAccount:a}),(0,t.jsx)(J.Note,{fill:!0,type:"error",children:n.error.message})]}):null}let ev={source:function(){let{setStep:e,setSourceAccount:n}=(0,C.useTransferModalContext)(),s=(0,y.useSortedTeams)(),[a,l]=(0,r.useState)(null),i=(0,r.useMemo)(()=>s.find(e=>e.id===a)??null,[s,a]),o=(0,r.useMemo)(()=>(0,t.jsxs)(T.Combobox,{onChange:l,placeholder:"Select a Vercel Team",value:a,children:[(0,t.jsx)(T.Combobox.Input,{}),(0,t.jsx)(T.Combobox.List,{children:s.map(e=>(0,t.jsx)(T.Combobox.Option,{prefix:(0,t.jsx)(b.Avatar,{size:24,teamId:e.id}),value:e.id,children:e.name},e.id))})]}),[s,a,l]),c=(0,r.useCallback)(()=>{i&&(e("destination"),n({id:i.id,type:"team",userOrTeam:i}))},[e,n,i]);return(0,t.jsx)(k,{disableNext:0===s.length||null===a,inset:!0,next:c,padding:!0,previous:()=>e(null),previousText:"Cancel",subtitle:"Select a Vercel team to transfer your project(s) from.",title:"Transfer",children:o})},destination:function(){let{setStep:e,setDestinationAccount:n,destinationAccount:s,sourceAccount:a,openCreateTeamModal:i,close:o,source:c,projects:d}=(0,C.useTransferModalContext)(),{user:u,isNorthstar:m}=(0,v.useUser)(),j=(0,y.useSortedTeams)(),f=(0,r.useMemo)(()=>j.filter(e=>!a||"uid"in a||e.id!==a.id),[j,a]),[h,A]=(0,r.useState)(s?.id??null),w=(0,r.useMemo)(()=>{if(!h)return null;if(h.startsWith("team")){let e=j.find(e=>e.id===h);if(e)return{id:e.id,type:"team",userOrTeam:e}}else if(u)return{id:u.uid,type:"user",userOrTeam:u};return null},[j,h,u]),M=(0,r.useMemo)(()=>h?h===N?(0,t.jsx)(p.PlusCircle,{color:"green-700",size:24}):w?(0,t.jsx)(b.Avatar,{hash:w.userOrTeam.avatar,size:24}):null:null,[h,w]),O=(0,r.useMemo)(()=>h?h===N?"Create Team":w?w.userOrTeam.name??null:null:null,[h,w]),I=(0,r.useMemo)(()=>(0,t.jsxs)(T.Combobox,{disabled:!u,onChange:A,placeholder:"Select a Vercel Team",prefixIcon:M,value:O,children:[(0,t.jsx)(T.Combobox.Input,{}),(0,t.jsx)(T.Combobox.List,{children:(0,t.jsxs)(t.Fragment,{children:[f.map(e=>(0,t.jsx)(P,{team:e},e.id)),u&&a?.type!=="user"&&!m?(0,t.jsx)(T.Combobox.Option,{prefix:(0,t.jsx)(b.Avatar,{size:24,uid:u.uid}),value:u.uid,children:(0,t.jsxs)(x.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("span",{children:u.name}),(0,t.jsx)(S.PlanBadge,{user:u})]})}):null,(0,t.jsx)(T.Combobox.Option,{prefix:(0,t.jsx)(p.PlusCircle,{color:"green-700",size:24}),value:N,children:"Create Team"})]})})]}),[u,f,M,O,a,m]),R=(0,r.useCallback)(()=>{if(h===N){l.analytics.track(_.VercelAnalyticsEvent.TRANSFER_MODAL_CREATED_TEAM,{source:c}),i();return}w&&(l.analytics.track(_.VercelAnalyticsEvent.TRANSFER_MODAL_SELECTED_EXISTING_TEAM,{source:c}),e("projects"),n(w))},[h,w,c,e,n,i]);return(0,t.jsx)(k,{disableNext:null===h,inset:!0,next:R,padding:!0,previous:o,previousText:"Cancel",subtitle:(0,t.jsxs)(g.Text,{color:"gray-800",children:["Transfer your project",d.length>0?"":"s"," from"," ",(0,t.jsx)(E,{projectOrAccount:a})," to another Vercel team."]}),title:"Transfer",children:I})},projects:function(){let{setStep:e,sourceAccount:s,setProjects:a,destinationAccount:l,projects:i,availableProjects:c,showSkipAndCloseButton:d,close:u,hadPreselectedProjects:m}=(0,C.useTransferModalContext)(),j=(0,r.useCallback)(()=>{e("destination")},[e]),[f,p]=(0,r.useState)(!1),[h,b]=(0,r.useState)(Array.from(new Set(i.map(e=>e.project.id)))),[T,_]=(0,r.useState)(""),y=(0,F.useToasts)(),v=(0,n.useRouter)(),S=(0,r.useCallback)(()=>{l&&s&&(p(!0),(function(e){let{projectIds:t,sourceAccount:r,destinationAccount:n}=e;return Promise.all(t.map(e=>H({projectId:e,destinationAccount:n,sourceAccount:r})))})({projectIds:h,destinationAccount:l,sourceAccount:s}).then(t=>{let r=[];for(let e of h){let n=c.find(t=>t.id===e);if(n||(n=i.find(t=>t.project.id===e)?.project),!n)continue;let s=t.find(t=>t.projectId===e)?.resources;s&&r.push({project:n,transferResources:{domains:s.domains??[],newProjectName:s.newProjectName??n.name}})}a(r),e("confirmation")}).catch(e=>{let t="";e instanceof Error&&(t=`: ${e.message}`),y.error(`Failed to fetch project(s) resources${t}`)}).finally(()=>{p(!1)}))},[l,c,h,a,e,s,y,i]),A=(0,r.useMemo)(()=>{let e=T.trim().toLowerCase();return""===e?c:c.filter(t=>t.name.toLowerCase().includes(e))},[c,T]),w=(0,r.useCallback)(e=>{_(e.target.value)},[_]),M=(0,r.useMemo)(()=>(0,t.jsxs)(x.Stack,{gap:3,children:[(0,t.jsx)(L.Input,{"aria-label":"Search projects",onChange:w,placeholder:"Search projects...",prefix:(0,t.jsx)(D.MagnifyingGlass,{}),prefixStyling:!1,value:T}),(0,t.jsx)(U,{filteredProjects:A,projects:c,selected:h,setSelected:b})]}),[A,w,c,T,h]),O=(0,r.useCallback)(()=>{u();let e="/new";if(l?.type==="team"){let t=l.userOrTeam.slug;e=`${e}/${t}`,(0,o.setScope)(t)}v.push(e)},[u,l,v]),N=(0,r.useMemo)(()=>{if(d)return(0,t.jsxs)(g.Text,{color:"gray-1000",children:["Would you like to transfer any projects from"," ",(0,t.jsx)(E,{projectOrAccount:s})," to your new team"," ",(0,t.jsx)(E,{projectOrAccount:l}),"?"]});let e="Which project(s)";return m&&(e="Which additional project(s)"),(0,t.jsxs)(g.Text,{color:"gray-1000",children:[`${e} `," would you like to transfer from"," ",(0,t.jsx)(E,{projectOrAccount:s})," to"," ",(0,t.jsx)(E,{projectOrAccount:l}),"?"]})},[l,m,d,s]);return(0,t.jsx)(k,{disableNext:0===h.length,inset:!0,next:S,nextLoading:f,padding:!0,previous:d?void 0:j,skip:d?O:void 0,subtitle:N,title:"Transfer",children:M})},confirmation:function(){let{setStep:e,finish:n,sourceAccount:s,setTransferResponse:a,destinationAccount:i,projects:o,source:c}=(0,C.useTransferModalContext)(),{addFavorite:u,favorites:m,removeFavorite:j}=(0,ei.useFavoriteProjectsAndSpaces)(),{shouldShowSpeedInsightsWarning:f,speedInsightsEnabledProject:p}=(0,eo.useShouldShowSpeedInsightsWarningForHobbyToPro)(),h=(0,F.useToasts)(),[b,T]=(0,r.useState)(!1),y=(0,r.useMemo)(()=>(0,t.jsxs)(x.Stack,{gap:4,children:[(0,t.jsxs)(g.Text,{color:"gray-800",children:["Upon confirmation,"," ",1===o.length?(0,t.jsxs)(t.Fragment,{children:["your project ",(0,t.jsx)(E,{projectOrAccount:o[0].project})]}):`${o.length} projects`," ","will be transferred from"," ",(0,t.jsx)(E,{projectOrAccount:s})," to"," ",(0,t.jsx)(E,{projectOrAccount:i}),"."]}),(0,t.jsxs)(g.Text,{color:"gray-800",children:[(0,t.jsx)("b",{children:"Note:"})," Some project functionality cannot be transferred. See"," ",(0,t.jsx)(Z.Link,{external:!0,href:"/docs/projects/transferring-projects#what-is-transferred",type:"highlight",children:"documentation"})," ","for details."]}),s&&f?(0,t.jsxs)(J.Note,{fill:!0,type:"warning",label:!1,children:["Your project ",(0,t.jsx)("b",{children:p.name})," has Speed Insights enabled.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"On th Pro plan, Speed Insights costs $10/project per month, plus $0.65 per 10,000 Data points (",(0,t.jsx)(Z.Link,{external:!0,href:"/docs/speed-insights/limits-and-pricing",children:"Learn more"}),").",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"To avoid being charged, go to"," ",(0,t.jsx)(Z.Link,{external:!0,href:`/${"user"===s.type?s.userOrTeam.username:s.userOrTeam.slug}/${p.name}/speed-insights`,children:"the Speed Insights page"})," ","and disable it from the top menu before transferring."]}):null]}),[f,p,i,s,o]),v=(0,r.useMemo)(()=>(0,t.jsx)("div",{className:ec.default.container,children:o.map(e=>(0,t.jsx)(ej,{projectWithTransfer:e},e.project.id))}),[o]),S=(0,r.useMemo)(()=>i?.userOrTeam.billing?{destinationAccountType:i.type,destinationAccountPlan:i.userOrTeam.billing.plan}:{destinationAccountType:null,destinationAccountPlan:null},[i]),A=(0,r.useCallback)(async()=>{if(!i)throw Error("Can't transfer without a destination account");l.analytics.track(_.VercelAnalyticsEvent.TRANSFER_MODAL_TRANSFER_STARTED,{numberOfProjects:o.length,source:c,...S}),(0,d.postToStatsigClient)({events:[{eventName:"transfer_modal_transfer_started",metadata:{numberOfProjects:`${o.length}`,source:c,destinationAccountType:`${S.destinationAccountType}`,destinationAccountPlan:`${S.destinationAccountPlan}`}}]});let e=new URLSearchParams;s&&"team"===s.type&&e.set("teamId",s.id);let t=e.toString(),r=t?`?${t}`:"",n=await (0,W.fetchAPI)(`${(0,G.API_PROJECTS_TRANSFER_BULK)(i.id)}${r}`,{method:"POST",throwOnHTTPError:!0,body:JSON.stringify({projects:o.map(e=>({projectId:e.project.id,newProjectName:e.transferResources.newProjectName,domains:e.transferResources.domains}))})});if(s){let e=o.map(e=>e.project.id),t=m.filter(e=>"projectId"in e);e.forEach(e=>{let r=t.find(t=>t.projectId===e);r&&("user"===i.type?j(r):u({teamId:i.id,projectId:e}))})}return a(n),n},[S,i,o,a,c,s,m,j,u]),w=(0,r.useCallback)(()=>{T(!0),A().then(t=>{let r=t.filter(e=>!!e.error).length;l.analytics.track(_.VercelAnalyticsEvent.TRANSFER_MODAL_TRANSFER_COMPLETED,{successfulTransfers:o.length,failedTransfers:r,source:c,...S}),(0,d.postToStatsigClient)({events:[{eventName:"transfer_modal_transfer_completed",metadata:{successfulTransfers:`${o.length}`,failedTransfers:`${r}`,source:c,destinationAccountType:`${S.destinationAccountType}`,destinationAccountPlan:`${S.destinationAccountPlan}`}}]}),r>0?(e("error"),l.analytics.track(_.VercelAnalyticsEvent.TRANSFER_MODAL_TRANSFER_ERRORED,{numberOfProjects:r,source:c,...S}),(0,d.postToStatsigClient)({events:[{eventName:"transfer_modal_transfer_errored",metadata:{numberOfProjects:`${r}`,source:c,destinationAccountType:`${S.destinationAccountType}`,destinationAccountPlan:`${S.destinationAccountPlan}`}}]})):(n(),1===o.length?h.success("Your project has been transferred."):h.success("Your projects have been transferred."))}).catch(e=>{let t="Failed to transfer project(s)";e instanceof Error&&(t=`${t}: ${e.message}`),h.error(t)}).finally(()=>{T(!1)})},[S,n,A,o.length,e,c,h]);return(0,t.jsx)(k,{disabled:b,next:w,nextLoading:b,nextText:"Transfer",previous:()=>e("projects"),subtitle:y,title:"Transfer",children:v})},missingPermissions:function(){let{setStep:e,sourceAccount:r}=(0,C.useTransferModalContext)();return(0,t.jsx)(k,{next:()=>e(null),nextText:"Close",subtitle:(0,t.jsxs)(g.Text,{color:"gray-800",children:["You do not have the required permissions to transfer projects from"," ",(0,t.jsx)(E,{projectOrAccount:r}),"."]}),title:"Transfer"})},createTeam:null,error:function(){let{close:e,transferResponse:n}=(0,C.useTransferModalContext)(),s=(0,r.useMemo)(()=>n?.filter(e=>!!e.error).length??0,[n]);return(0,t.jsx)(k,{next:()=>e(),nextText:"Close",subtitle:(0,t.jsxs)(g.Text,{children:["The following ",(0,t.jsxs)("b",{children:[s," projects"]})," errored and could not be transferred. Please try again later."]}),title:"Transfer",children:(0,t.jsx)(e_,{})})}};function eS(){let{close:e,__registerOpenHandler:s}=(0,eo.useTransferModalActions)(),[i,f]=(0,r.useState)("unknown"),[p,h]=(0,r.useState)(null),[x,g]=(0,r.useState)(!1),[b,T]=(0,r.useState)(null),[_,y]=(0,r.useState)(null),[v,S]=(0,r.useState)([]),{team:A,user:w}=(0,c.useAccount)(),[k,M]=(0,r.useState)(!1),[O,E]=(0,r.useState)(!1),[N,P]=(0,r.useState)(null),I=(0,n.useRouter)(),{data:R,isLoading:$}=(0,u.default)({teamId:b?.type==="team"?b.id:void 0,fetchEnabled:!!b&&!b.userOrTeam.limited,limit:100}),[L,F]=(0,r.useState)(!1),{can:D,isLoading:W}=(0,m.default)({teamId:b?.type==="team"?b.id:void 0});(0,r.useEffect)(()=>{if(!k)if(A){if(W||!D(j.Action.Create,j.Resource.ProjectTransferOut))return;T({id:A.id,type:"team",userOrTeam:A})}else w&&T({id:w.uid,type:"user",userOrTeam:w})},[w,k,A,W,D]);let G=(0,r.useCallback)(()=>{h(null),y(null),S([]),M(!1),E(!1),e()},[e]),z=(0,r.useCallback)(e=>{if(G(),e)(0,o.setScope)(e),I.push(`/new/${e}`);else{let t=e;_?.type==="team"?t=_.userOrTeam.slug:_?.type==="user"&&(t=_.userOrTeam.username),t&&(0,o.setScope)(t),I.push(`/${t??""}`)}},[G,I,_?.type,_?.userOrTeam]),V=(0,r.useCallback)(()=>{h("createTeam")},[h]),K=(0,r.useMemo)(()=>R?.projects??[],[R]),B=(0,r.useMemo)(()=>b?.id,[b]),q=(0,r.useMemo)(()=>{if(b&&"user"!==b.type)return b.id},[b]),Q=(0,r.useCallback)(e=>{if(!h)throw Error("The TransferModalContext could not be found in the component tree.");f(e.source),e.preselectedProjects&&(F(!0),S(e.preselectedProjects.map(e=>({project:e,transferResources:{domains:[],newProjectName:e.name}})))),e.skipScopeUpdate&&M(!0),e.showSkipButton&&E(!0),e.project&&S([e.project]),e.team?(y({id:e.team.id,type:"team",userOrTeam:e.team}),0!==K.length||$?h("projects"):z(e.team.slug)):h("destination")},[K.length,$,z]);(0,r.useEffect)(()=>{s(Q)},[s,Q]),(0,r.useEffect)(()=>{p&&(l.analytics.track(a.AnalyticsEvent.TRANSFER_MODAL_STEP,{step:p,source:i}),(0,d.postToStatsigClient)({events:[{eventName:"transfer_modal_step",metadata:{step:p,source:i}}]}))},[i,p]);let U=(0,r.useMemo)(()=>({setStep:h,step:p,disableClose:x,setDisableClose:g,sourceAccount:b,setSourceAccount:T,destinationAccount:_,setDestinationAccount:y,projects:v,setProjects:S,sourceAccountId:B,teamId:q,openCreateTeamModal:V,close:G,skipScopeUpdate:k,setSkipScopeUpdate:M,showSkipAndCloseButton:O,setShowSkipAndCloseButton:E,transferResponse:N,setTransferResponse:P,finish:z,availableProjects:K,hadPreselectedProjects:L,source:i}),[K,G,_,x,z,L,V,v,O,k,i,b,B,p,q,N]);return $?null:(0,t.jsx)(C.transferModalContext.Provider,{value:U,children:(0,t.jsx)(eC,{})})}function eC(){let e=(0,f.useOpenUpgradeModal)(),{setStep:n,step:a,disableClose:l,setDestinationAccount:i,close:o}=(0,C.useTransferModalContext)(),c=(0,r.useMemo)(()=>a?ev[a]:null,[a]),d=(0,r.useCallback)(()=>{l||o()},[l,o]),u=(0,r.useCallback)(()=>{"createTeam"===a&&e({mode:"create",trialBehavior:"choose",source:"transfer-modal",onAbandon:()=>{n("destination"),i(null)},onConversionSuccess:e=>{let{team:t}=e;i({id:t.id,type:"team",userOrTeam:t}),n("projects")}})},[e,i,n,a]),m=(0,r.useMemo)(()=>"createTeam"!==a&&null!==a,[a]);return(0,t.jsx)(s.Modal.Modal,{active:m,onAnimationDone:u,onClickOutside:d,width:450,children:c?(0,t.jsx)(c,{}):null})}(0,i.markLoadedForTest)("transfer-modal")},8337298:e=>{e.n(e.i(183943))}}]);

//# sourceMappingURL=dcb1d7c07c6e6902.js.map
//# debugId=ae344e71-ab4d-55eb-a12b-9e7d866552e0
