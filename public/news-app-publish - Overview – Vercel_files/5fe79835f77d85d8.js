
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="42c541aa-de93-56ce-ae8b-ac9602641128")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{3649433:[e=>{"use strict";e.s({ListItem:()=>F,ListItemFooter:()=>O,ResourceEntityItem:()=>D,ResourceItem:()=>K,ResourceItemPlaceholder:()=>z},3649433);var t=e.i(6645307),r=e.i(889716),o=e.i(5163670),s=e.i(5674541),n=e.i(555528),i=e.i(8084653),c=e.i(5610210),a=e.i(2362802),l=e.i(2774739),u=e.i(1164214),d=e.i(5535439),p=e.i(7337588),h=e.i(2145411),g=e.i(4968913),m=e.i(3277953),y=e.i(1164918),x=e.i(1915818),j=e.i(612939),R=e.i(1227837),C=e.i(3941020);e.s({ProjectConnectionsAssigned:()=>N},5804958);var f=e.i(6530772),v=e.i(653558),b=e.i(2733203),w=e.i(1190215),T=e.i(4105925),S=e.i(2934175),P=e.i(3509620),k=e.i(4418725),A=e.i(2146499),M=e.i(1310591),I=e.i(503549);function E(e){return e===P.EnvTarget.Production?"Production":e===P.EnvTarget.Preview?"Preview":"Development"}function B(e){let{environments:r,className:o}=e,s=r?.length===3?"All Environments":r?.map(E).join(", ");return(0,t.jsx)(i.Text,{className:(0,c.clsx)("whitespace-nowrap rounded bg-gray-200 px-1 text-sm",o),color:"gray-900",monospace:!0,size:13,title:s,truncate:!0,children:s})}function L(e){let{projectConnections:o,teamOrUserSlug:s}=e;return(0,t.jsxs)(w.MenuContainer,{children:[(0,t.jsx)(b.MenuButton,{className:"geist-show-on-mobile",size:"small",type:"secondary",children:"Show Connections"}),(0,t.jsx)(b.MenuButton,{className:"geist-hide-on-mobile mx-0",size:"small",type:"tertiary",children:(0,t.jsx)(S.ChevronUpDown,{color:"gray-700"})}),(0,t.jsx)(v.Menu,{className:"min-h-[10dvh] max-w-full md:min-h-0 md:max-w-[480px]",width:"auto",children:o.map(e=>(0,t.jsx)(T.MenuItem,{Component:a.Link,"data-testid":(0,u.tid)("project-store","item"),href:`/${s?`${s}/`:""}${encodeURIComponent(e.name)}`,isLink:!0,children:(0,t.jsxs)(r.Stack,{align:"center",className:"min-w-20 max-w-full",direction:"row",flex:1,gap:2,justify:"space-between",children:[(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(A.ProjectLogo,{deploymentId:e.latestDeployment,framework:e.framework,project:e,size:18}),(0,t.jsx)(i.Text,{className:"min-w-20 max-w-[50%]",color:"gray-1000",title:e.name,truncate:!0,weight:500,children:e.name})]}),(0,C.isLogDrainInConnection)(e)?(0,t.jsx)(I.LogDrainConnection,{connection:e}):(0,t.jsx)(B,{environments:e.environments})]})},e.id))})]})}function N(e){let{projectConnections:o}=e,s=(0,k.useTeamSlug)(),{projectSlug:n,hasProject:l}=(0,M.useProjectSlug)(),{currentProjectConnection:d}=(0,f.useMemo)(()=>({currentProjectConnection:o.find(e=>e.name===n)}),[n,o]),p=o[0];return(0,t.jsxs)(t.Fragment,{children:[l&&d?(0,t.jsx)(B,{className:"geist-hide-on-mobile",environments:d.environments}):(0,t.jsx)(a.ButtonLink,{className:(0,c.clsx)("geist-hide-on-mobile m-0 -mx-1 h-6 min-w-20 bg-background-200 !px-1 text-sm","hover:!bg-gray-200 [&>svg]:-ml-1"),"data-testid":(0,u.tid)("project-store","item"),href:`/${s?`${s}/`:""}${encodeURIComponent(p.name)}`,size:"small",type:"tertiary",children:(0,t.jsxs)(r.Stack,{align:"center",className:"p-px",direction:"row",gap:1,children:[(0,t.jsx)(A.ProjectLogo,{deploymentId:p.latestDeployment,framework:p.framework,project:{id:p.projectId},size:18}),(0,t.jsx)(i.Text,{color:"gray-1000",size:13,truncate:!0,weight:500,children:p.name})]})}),(0,t.jsx)(L,{projectConnections:o,teamOrUserSlug:s})]})}function F(e){let{Footer:r,Info:o,createdAt:s,link:n,id:i,hasError:d,title:h,description:g,Icon:m,Badge:y}=e,x=(0,l.useAgo)(s,{formatYearsWeeksMonths:!0});return(0,t.jsxs)("div",{className:"min-w-0","data-resource-item":i,children:[(0,t.jsx)(a.Link,{className:"group block","data-testid":(0,u.tid)("store-entity",i),href:n,children:(0,t.jsxs)(p.Entity,{className:(0,c.clsx)("rounded-b-none rounded-t bg-background-100 transition-[background] duration-100 ease-in-out group-hover:bg-background-200",{"border-red-500":d}),gapSize:"small",thumbnail:(0,t.jsx)("div",{className:"mr-2 text-foreground",children:m}),children:[(0,t.jsx)(D,{description:(0,t.jsx)("span",{children:g}),title:(0,t.jsxs)("span",{className:"no-underline",children:[h,y]}),width:o?"30%":void 0}),o,s?(0,t.jsx)(D,{description:(0,t.jsxs)("span",{title:`Created at ${new Date(s).toISOString()}`,children:["Created ",x]}),label:!0,right:!0,width:"auto"}):null]})}),r]})}function O(e){let{children:o,notification:s,justify:n}=e;return(0,t.jsx)(r.Stack,{align:"center",className:(0,c.clsx)("h-14 rounded-b border border-t-0 border-solid px-4 py-3",{"border-gray-200 bg-background-200":s?.level!=="error","border-red-500 bg-red-100":s?.level==="error"}),direction:"row",gap:1.5,justify:s?"end":n,children:s?(0,t.jsx)($,{notification:s}):o})}function $(e){let{notification:o}=e;return(0,t.jsxs)(r.Stack,{direction:"row",gap:{sm:2,md:3,lg:3},children:[(0,t.jsx)(i.Text,{color:"error"===o.level?"red-700":"warn"===o.level?"amber-900":"gray-900",size:13,weight:500,children:o.title}),(0,t.jsxs)(n.Tooltip,{text:o.message,children:["error"===o.level?(0,t.jsx)(g.Stop,{color:"red-700",size:20}):null,"warn"===o.level?(0,t.jsx)(m.Warning,{color:"amber-900",size:20}):null,"info"===o.level?(0,t.jsx)(y.InformationFill,{size:20}):null]})]})}function D(e){let{className:r,...o}=e;return(0,t.jsx)(h.EntityField,{className:(0,c.clsx)("max-md:mt-0 max-md:border-t-0",r),...o})}function K(e){let{Info:r,item:o,Badge:i,resourceLinkFunc:c,showCreatedAt:a=!0,alwaysShowConnectButton:l=!1}=e,u=(0,d.useRouter)(),{openConnectProject:p}=(0,R.useResourceModals)({onSuccess:e=>{u.push(c(e))}}),{permissions:h}=(0,x.useResourcePermissions)(),g=o.billingPlan?.name,m=l||0===o.projectsMetadata.length;return(0,t.jsx)(F,{Badge:i,Footer:(0,t.jsx)(O,{justify:m?"end":"start",notification:o.notification,children:m?(0,t.jsx)(n.Tooltip,{disableTriggers:h.update,text:"You need additional permission to connect a Project.",children:(0,t.jsx)(s.Button,{disabled:!h.update,onClick:()=>p(o),size:"small",type:"secondary",children:(0,C.getConnectProjectOrLogDrainLabel)(o)})}):(0,t.jsx)(N,{projectConnections:o.projectsMetadata})}),Icon:(0,t.jsx)(j.ProductIcon,{icon:o.product.iconUrl,size:"large"}),Info:r?(0,t.jsx)(r,{item:o}):void 0,createdAt:a?o.createdAt:void 0,description:g?`${o.product.name} - ${g}`:o.product.name,hasError:o.notification?.level==="error",id:o.id,link:c(o),title:o.name})}function z(e){let{showRightSkeleton:s=!0}=e;return(0,t.jsxs)("div",{children:[(0,t.jsxs)(p.Entity,{className:"rounded-b-none rounded-t",gapSize:"small",thumbnail:(0,t.jsx)(r.Stack,{align:"center",className:"mr-2",children:(0,t.jsx)(o.Skeleton,{height:36,rounded:!0,width:36})}),children:[(0,t.jsx)(D,{description:(0,t.jsx)(o.Skeleton,{boxHeight:22,height:12,vcenter:!0,width:"40%"}),title:(0,t.jsx)(o.Skeleton,{boxHeight:22,height:14,vcenter:!0,width:"60%"})}),s?(0,t.jsx)(D,{right:!0,title:(0,t.jsx)(o.Skeleton,{className:"h-[18px] md:h-[22px]",height:14,vcenter:!0,width:120})}):null]}),(0,t.jsx)(O,{})]})}},[5804958]],7978003:e=>{"use strict";e.s({ResourceFilters:()=>m,ResourceFiltersPlaceholder:()=>y,useResourceFilters:()=>g});var t=e.i(6645307),r=e.i(6530772),o=e.i(6284911),s=e.i(3621043),n=e.i(5674541),i=e.i(674684),c=e.i(2361612),a=e.i(5535439),l=e.i(8103655),u=e.i(4325351);function d(e){return`Search provider or ${u.resourceTitle[e].toLowerCase()}..`}function p(e){return null!=e}function h(){let e=(0,a.useSearchParams)();return{storeTag:e?.get("type")??"All",search:e?.get("search")??""}}function g(e,t){let o=(0,i.useRouter)(),{storeTag:s,search:n}=h(),[a,l]=(0,r.useState)("All"),d=t?s:a,[g,m]=(0,r.useState)(n),y=(0,r.useMemo)(()=>{let t=new Map;return e?.forEach(e=>{"integration"===e.type?t.set(e.product.integration.id,{value:e.product.integration.id,label:e.product.integration.name}):t.set(e.type,{value:e.type,label:(0,u.getProtocolTitleByResource)(e)})}),[{value:"All",label:"All"},...Array.from(t.values()).filter(p)]},[e]);return{filteredResources:(0,r.useMemo)(()=>e?.filter(e=>{if("All"!==d&&("integration"===e.type?e.product.integration.id!==d:e.type!==d))return!1;let t=g.toLowerCase();return!!(e.name.toLowerCase().includes(t)||e.id.includes(t))||"integration"===e.type&&e.product.name.toLowerCase().includes(t)})??null,[g,e,d]),search:g,onSearchChanged:e=>{m(e),t&&o.replace({query:{...o.query,search:e}},void 0,{shallow:!0,scroll:!1})},storeTagFilter:d,onStoreTagFilterChanged:e=>{t?o.replace({query:"All"===e?(0,c.default)(o.query,"type"):{...o.query,type:e}},void 0,{shallow:!0,scroll:!1}):l(e)},storeTags:y}}function m(e){let{ConnectResourceButton:r,search:n,onSearchChanged:i,storeTagFilter:c,storeTags:a,onStoreTagFilterChanged:l,protocolType:u}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.SearchInput,{className:"[&>div:first-of-type]:flex-1",onChange:e=>{i(e.target.value.trim())},placeholder:d(u),value:n,width:"100%"}),(0,t.jsxs)(s.Combobox,{clearable:!1,onChange:e=>{e&&l(e)},value:c,children:[(0,t.jsx)(s.Combobox.Input,{disabled:!0}),(0,t.jsx)(s.Combobox.List,{children:a.map(e=>(0,t.jsx)(s.Combobox.Option,{value:e.value,children:e.label},e.value))})]}),r]})}function y(e){let{createConnectAction:r,protocolType:i}=e,{storeTag:c}=h();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.SearchInput,{className:"[&>div:first-of-type]:flex-1",placeholder:d(i),width:"100%"}),(0,t.jsxs)(s.Combobox,{clearable:!1,value:c,children:[(0,t.jsx)(s.Combobox.Input,{disabled:!0}),(0,t.jsx)(s.Combobox.List,{children:(0,t.jsx)(s.Combobox.Option,{value:c,children:" "})})]}),"none"!==r?(0,t.jsx)(n.Button,{disabled:!0,type:"secondary",typeName:"button",children:l.createConnectStoreButtonLabel[r]}):null]})}},5602259:e=>{"use strict";e.s({SelectResources:()=>m});var t=e.i(6645307),r=e.i(889716),o=e.i(8084653),s=e.i(3585235),n=e.i(5785123);e.i(9389778);var i=e.i(1310591);e.i(6358385);var c=e.i(4041506);e.i(9198618);var a=e.i(7115374),l=e.i(2240289),u=e.i(8103655),d=e.i(6911881),p=e.i(5330315),h=e.i(4325351),g=e.i(7978003);function m(e){let{ConnectResourceButton:m,onClickConnectStoreModal:y,isStoreTagFilterFromQuery:x,protocolType:j}=e,{data:R}=(0,p.useResourceList)({protocolType:j}),{projectSlug:C}=(0,i.useProjectSlug)(),f=(0,l.useProject)(C),{can:v,isLoading:b}=(0,s.default)(),w={"edge-config":v(n.Action.Update,n.Resource.EdgeConfig),blob:v(n.Action.Create,n.Resource.Blob),integration:v(n.Action.Create,n.Resource.IntegrationResource)},T=R?.stores,{search:S,onSearchChanged:P,storeTagFilter:k,onStoreTagFilterChanged:A,storeTags:M,filteredResources:I}=(0,g.useResourceFilters)(T??null,x);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,justify:"space-between",children:(0,t.jsx)(g.ResourceFilters,{ConnectResourceButton:m,onSearchChanged:P,onStoreTagFilterChanged:A,protocolType:j,search:S,storeTagFilter:k,storeTags:M})}),I&&0===I.length?(0,t.jsxs)(r.Stack,{align:"center",className:"min-h-52",gap:1,justify:"center",children:[(0,t.jsx)(o.Text,{weight:500,children:"No Results Found"}),(0,t.jsx)(o.Text,{align:"center",color:"gray-900",children:`Your search for "${S}" did not return any results.`})]}):null,I&&I.length>0?(0,t.jsx)(c.SelectResourceCardList,{children:I.map(e=>{let r=e.projectsMetadata.some(e=>e.projectId===f.data?.id),o="integration"===e.type?{icon:{url:(0,d.getStoreIcon)(e),size:"large"}}:{Icon:(0,t.jsx)(a.SelectResourceStoreIcon,{iconSize:"large",type:e.type,useColor:w[e.type]})};return(0,t.jsx)(c.SelectResourceCard,{createdAt:e.createdAt,description:"storage"===j?u.storeTitleFull[e.type]:h.resourceTitle[j],isAlreadyConnected:r,isDisabled:!w[e.type],name:e.name,onClick:()=>y(e),tooltip:{isEnabled:!b&&!w[e.type],text:`You do not have permission to connect this ${(0,h.getProtocolTitleByResource)(e)}.`},...o},e.id)})}):null]})}},4366100:e=>{"use strict";e.s({findManyPrivateMarketplaceIntegrationsByProduct:()=>r});var t=e.i(8774211),r=(0,t.createServerReference)("7f5d4bf9342b2e7279c3ba4a216514e9c154bf4717",t.callServer,void 0,t.findSourceMapURL,"findManyPrivateMarketplaceIntegrationsByProduct")},6248954:e=>{"use strict";function t(e,t){return!!(e?.billing?.hasReseller??t)}e.s({isResellerCustomer:()=>t})},1516521:e=>{var{m:t,e:r}=e,o=e.r(6932971),s=e.r(4497678),n=Array.prototype.splice;t.exports=function(e,t){for(var r=e?t.length:0,i=r-1;r--;){var c=t[r];if(r==i||c!==a){var a=c;s(c)?n.call(e,c,1):o(e,c)}}return e}},5691782:e=>{var{m:t,e:r}=e,o=e.r(4564793),s=e.r(1516521);t.exports=function(e,t){var r=[];if(!(e&&e.length))return r;var n=-1,i=[],c=e.length;for(t=o(t,3);++n<c;){var a=e[n];t(a,n,e)&&(r.push(a),i.push(n))}return s(e,i),r}},7247839:[e=>{"use strict";e.s({useIntegrationCategories:()=>d},7247839);var t=e.i(3032247),r=e.i(9336536);e.i(5691782),e.i(2304959),e.i(7732468),e.i(7207682);let o=`${r.API_INTEGRATION_CONTROLLER}/categories`;function s(e){let r="tag_databases"===e.id?"storage":t.INTEGRATION_PROTOCOL_TYPES.find(t=>e.id.replace("tag_","")===t)??null;return{...e,protocol:r}}var n=e.i(1183506);e.s({useMarketplaceNavigation:()=>l},9979668);var i=e.i(5535439),c=e.i(6530772),a=e.i(4049272);function l(){let e=(0,i.useSearchParams)(),t=(0,i.useParams)(),r=e?.get("category")??null,o=e?.get("search")??null,s=!!e?.get("expanded"),n=!!e?.get("isPreview"),l=(0,c.useMemo)(()=>t?.teamSlug?{teamSlug:t.teamSlug.toString(),isPublic:!1}:{isPublic:!0,teamSlug:void 0},[t?.teamSlug]);return{categorySlug:r,isRootCategory:!r||!!s,searchQuery:o,expanded:s,teamSlugOrPublic:l,isPreview:!!n,getBrowseMarketplaceLink:e=>(0,a.getBrowseMarketplaceLink)({teamSlugOrPublic:l,...e})}}var u=e.i(3345839);function d(){let{isPreview:e}=l();return{...(0,u.useIsomorphicSWR)(e?`${o}?status=all`:o,async e=>(await (0,n.fetchAPI)(e)).map(s),{revalidateOnFocus:!1,revalidateOnReconnect:!1})}}},[9979668]],7139689:e=>{"use strict";e.s({AdditionalResourcePermissionsRequired:()=>i});var t=e.i(6645307),r=e.i(3514588),o=e.i(6382421),s=e.i(120802),n=e.i(4325351);function i(e){let{protocolType:i}=e,{team:c}=(0,r.useTeam)();return(0,t.jsx)(s.default,{children:(0,t.jsx)(o.AdditionalPermissionsRequired,{resource:n.resourceTitle[i],team:c})})}},4862373:[e=>{"use strict";e.s({BrowseProducts:()=>C},4862373);var t=e.i(6645307),r=e.i(889716),o=e.i(8084653),s=e.i(3921802),n=e.i(2362802),i=e.i(4049272);e.i(6358385);var c=e.i(7146658),a=e.i(6911881);e.s({useMarketplaceIntegrations:()=>m},3334373);var l=e.i(3521787),u=e.i(4366100),d=e.i(7207682),p=e.i(3514588),h=e.i(4418725),g=e.i(6248954);let m=e=>{let{protocolType:t}=e,r=(0,h.useTeamSlug)(),{isResellerTeam:o,isReady:s}=function(){let e=(0,h.useTeamSlug)(),{team:t,isReady:r}=(0,p.useTeam)(e);return{isReady:r,isResellerTeam:!!(0,g.isResellerCustomer)(t)}}(),n=(0,l.default)(()=>!s||o?null:(0,d.getMarketplaceIntegrationsApiUrl)({teamIdOrSlug:r??null,protocolType:t}),async e=>e&&r?(0,u.findManyPrivateMarketplaceIntegrationsByProduct)({protocolType:t,teamIdOrSlug:r}):[]);return{...n,isResellerTeam:o,isReady:(n.data||o)&&s}};var y=e.i(4325351),x=e.i(1915818),j=e.i(5330315),R=e.i(7247839);function C(e){let{onClickProduct:s,selectedProduct:l,showCreateButton:u=!1,protocolType:d}=e,{data:p}=(0,R.useIntegrationCategories)(),{permissions:h,isLoading:g}=(0,x.useResourcePermissions)(),{data:C}=(0,j.useResourceList)({protocolType:d}),{data:v,isResellerTeam:b,isReady:w}=m({protocolType:d}),T=p?.find(e=>e.protocol===d);return v&&w?b?null:(0,t.jsx)(f,{canCreate:h.create,disabled:g,integrations:v.map(e=>({...e,isSelected:l?.type==="integration"&&l.product.id===e.products[0].id,selectedProductId:l?.type==="integration"&&l.integration.id===e.id?l.product.id:void 0,comingSoon:(0,a.isIntegrationStoreDisabled)({integration:e,storesData:C})})),onClickProduct:s,protocolType:d,showCreateButton:u}):(0,t.jsxs)(r.Stack,{gap:4,children:[(0,t.jsxs)(r.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsx)(o.Text,{size:16,weight:600,children:(0,y.browseProductsTitle)(d)}),(0,t.jsx)(n.Link,{external:!0,href:`${i.MARKETPLACE_DOC_PAGE}/integrations/install-an-integration/product-integration`,target:"_blank",children:(0,t.jsx)(o.Text,{children:"Learn more"})})]}),(0,t.jsx)(r.Stack,{gap:2,children:Array.from({length:T?.marketplaceIntegrationsCount??3}).map((e,r)=>(0,t.jsx)(c.CreateResourceCardPlaceholder,{showCreateButton:u},r))})]})}function f(e){let{integrations:a,canCreate:l,disabled:u,showCreateButton:d,onClickProduct:p,protocolType:h}=e;if(0===a.length)return null;let g=y.resourceTitle[h],m={text:`You need additional permission to create a ${g}.`,isEnabled:!l};return(0,t.jsxs)(r.Stack,{gap:4,children:[(0,t.jsxs)(r.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsx)(o.Text,{size:16,weight:600,children:(0,y.browseProductsTitle)(h)}),(0,t.jsx)(n.Link,{external:!0,href:`${i.MARKETPLACE_DOC_PAGE}/integrations/install-an-integration/product-integration`,target:"_blank",children:(0,t.jsx)(o.Text,{children:"Learn more"})})]}),(0,t.jsx)(r.Stack,{gap:2,children:a.map(e=>{let r=!!e.comingSoon,o=u||!l||!!e.comingSoon;if(0===e.products.length)return null;if(1===e.products.length){let n=e.products[0];return(0,t.jsx)(c.CreateResourceCard,{Badge:r?(0,t.jsx)(s.Badge,{className:"important:bg-transparent",size:"sm",variant:"gray-subtle",children:"Coming soon"}):null,description:n.shortDescription,icon:{url:n.iconUrl},isDisabled:o,isSelected:e.isSelected,name:n.name,onClick:()=>{p({product:n,integration:e,type:"integration"})},showCreateButton:d,tooltip:m},n.id)}return(0,t.jsx)(c.CreateResourceCollapsibleCard,{integration:e,isDisabled:u||!l,onClick:t=>{p({product:t,integration:e,type:"integration"})},selectedProductId:e.selectedProductId,showCreateButton:d,tooltip:m},e.id)})})]})}e.s({useCreateResourceDeeplink:()=>T},2487694);var v=e.i(6530772),b=e.i(5535439),w=e.i(1227837);function T(e,t){let r=(0,b.useRouter)(),{openCreateResource:o}=(0,w.useResourceModals)({onSuccess:e=>{r.push(t(e))}}),s=(0,b.useSearchParams)(),n=s?.get("productId")??null,{data:i}=m({protocolType:e}),c=(0,v.useMemo)(()=>{if(!i)return null;for(let e of i)for(let t of e.products)if(t.id===n)return{integration:e,product:t};return null},[i,n]);(0,v.useEffect)(()=>{if(c){let{integration:e,product:t}=c;o({type:"integration",integration:e,product:t})}},[o,c])}function S(e){let{title:s,subtitle:n,children:i,Icon:c}=e;return(0,t.jsxs)(r.Stack,{align:"center",className:"rounded border border-solid border-gray-200 bg-background-200 px-4 py-8",gap:6,justify:"center",children:[(0,t.jsxs)(r.Stack,{align:"center",gap:3,children:[c,(0,t.jsxs)(r.Stack,{align:"center",gap:2,children:[s?(0,t.jsx)(o.Text,{size:20,weight:600,children:s}):null,n?(0,t.jsx)(o.Text,{align:"center",color:"gray-900",children:n}):null]})]}),i]})}e.s({EmptyResourcesState:()=>S},2481122)},[3334373,2487694,2481122]],1873097:e=>{"use strict";e.s({ResourceListPlaceholder:()=>l});var t=e.i(6645307),r=e.i(5674541),o=e.i(5163670),s=e.i(889716),n=e.i(6530772),i=e.i(8103655),c=e.i(3649433),a=e.i(7978003);function l(e){let{protocolType:l}=e;return(0,t.jsxs)(s.Stack,{gap:6,children:[(0,t.jsx)(s.Stack,{direction:"row",gap:4,justify:"space-between",children:(0,t.jsx)(n.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(s.Stack,{direction:{sm:"column",md:"row"},gap:4,style:{width:"100%"},children:[(0,t.jsx)(o.Skeleton,{height:40,width:"100%"}),(0,t.jsx)(o.Skeleton,{className:"geist-hide-on-mobile",height:40,width:190}),(0,t.jsx)(o.Skeleton,{className:"geist-show-on-mobile",height:40,width:"100%"})]}),(0,t.jsx)(r.Button,{disabled:!0,type:"secondary",typeName:"button",children:i.createConnectStoreButtonLabel.connect})]}),children:(0,t.jsx)(a.ResourceFiltersPlaceholder,{createConnectAction:"connect",protocolType:l})})}),(0,t.jsx)(s.Stack,{gap:6,children:Array.from({length:3}).map((e,r)=>(0,t.jsx)(c.ResourceItemPlaceholder,{},r))})]})}},2007222:[e=>{"use strict";e.s({ResourceList:()=>v,ResourceListWithListItem:()=>f},2007222);var t=e.i(6645307),r=e.i(889716),o=e.i(5674541),s=e.i(1917237),n=e.i(8935741),i=e.i(5535439),c=e.i(5330315),a=e.i(1310591),l=e.i(1227837),u=e.i(4041506),d=e.i(4862373),p=e.i(4325351),h=e.i(7139689),g=e.i(2487694),m=e.i(2481122),y=e.i(7978003),x=e.i(3649433),j=e.i(1873097),R=e.i(5602259),C=e.i(7376344);function f(e){let{ListItem:i,protocolType:l,resourceLinkFunc:u,Info:d,EmptyStateIcon:p,BrowserProductsEmptyState:x,includeMetadata:R,preloadedResources:f}=e,{hasProject:v,projectSlug:S}=(0,a.useProjectSlug)(),{data:P,error:k,hasResources:A}=(0,c.useResourceList)({projectSlug:S,protocolType:l,fallbackData:f?{stores:f}:void 0}),M=(0,c.useStoreListMetadataByType)({items:P?.stores??[],skip:!R}),{search:I,onSearchChanged:E,storeTagFilter:B,onStoreTagFilterChanged:L,storeTags:N,filteredResources:F}=(0,y.useResourceFilters)(P?M:null,!0);return(function(e){let{hasProject:t,projectSlug:r,teamSlug:o}=(0,a.useProjectAndTeamSlug)(),{data:s}=(0,c.useResourceList)({projectSlug:r??void 0,protocolType:e});(0,C.usePlaceholderCount)(`resourcePlaceholderCount:${e}:${o}${t?`:${r}`:""}`,s?.stores.length)}(l),(0,g.useCreateResourceDeeplink)(l,u),P&&F)?k&&(0,n.isAPIErrorForbidden)(k)?(0,t.jsx)(h.AdditionalResourcePermissionsRequired,{protocolType:l}):k?(0,t.jsxs)(m.EmptyResourcesState,{Icon:p,children:[(0,t.jsx)(s.Error,{children:"An error occurred while loading the list."}),(0,t.jsx)(o.Button,{onClick:()=>window.location.reload(),size:"small",type:"error",typeName:"button",children:"Try Again"})]}):A?0===P.stores.length&&v?(0,t.jsx)(w,{protocolType:l,resourceLinkFunc:u}):0===F.length?(0,t.jsxs)(r.Stack,{gap:6,children:[(0,t.jsx)(r.Stack,{direction:"row",gap:4,justify:"space-between",children:(0,t.jsx)(y.ResourceFilters,{ConnectResourceButton:(0,t.jsx)(T,{protocolType:l,resourceLinkFunc:u}),onSearchChanged:E,onStoreTagFilterChanged:L,protocolType:l,search:I,storeTagFilter:B,storeTags:N})}),(0,t.jsx)(m.EmptyResourcesState,{subtitle:`Your search for "${I}" did not return any results.`,title:"No Results Found"})]}):(0,t.jsxs)(r.Stack,{gap:6,children:[(0,t.jsx)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,justify:"space-between",children:(0,t.jsx)(y.ResourceFilters,{ConnectResourceButton:(0,t.jsx)(T,{protocolType:l,resourceLinkFunc:u}),onSearchChanged:E,onStoreTagFilterChanged:L,protocolType:l,search:I,storeTagFilter:B,storeTags:N})}),(0,t.jsx)(r.Stack,{gap:6,children:F.map(e=>(0,t.jsx)(i,{Info:d,item:e,resourceLinkFunc:u},e.id))})]}):x??(0,t.jsx)(b,{protocolType:l,resourceLinkFunc:u}):(0,t.jsx)(j.ResourceListPlaceholder,{protocolType:l})}function v(e){let{protocolType:r,resourceLinkFunc:o,Info:s}=e;return(0,t.jsx)(f,{Info:s,ListItem:x.ResourceItem,protocolType:r,resourceLinkFunc:o})}function b(e){let{protocolType:r,resourceLinkFunc:o}=e,s=(0,i.useRouter)(),{openCreateResource:n}=(0,l.useResourceModals)({onSuccess:e=>{s.push(o(e))}});return(0,t.jsx)(m.EmptyResourcesState,{subtitle:(0,p.emptyResourcesStateSubtitle)(r),title:(0,p.emptyResourcesStateTitle)(r),children:(0,t.jsx)(u.SelectResourceCardListContainer,{children:(0,t.jsx)(d.BrowseProducts,{onClickProduct:e=>{e&&n(e)},protocolType:r,selectedProduct:void 0,showCreateButton:!0})})})}function w(e){let{protocolType:r,resourceLinkFunc:s}=e,n=(0,i.useRouter)(),{openConnectProject:c,openBrowseProducts:a}=(0,l.useResourceModals)({onSuccess:e=>{n.push(s(e))}});return(0,t.jsx)(m.EmptyResourcesState,{subtitle:`You can connect to existing ${p.resourceTitlePlural[r]} from this team, or
            create a new one and connect it to this project.`,title:`Connect to a ${p.resourceTitle[r]}`,children:(0,t.jsx)(u.SelectResourceCardListContainer,{children:(0,t.jsx)(R.SelectResources,{ConnectResourceButton:(0,t.jsx)(o.Button,{onClick:()=>{a("browse-new")},type:"default",typeName:"button",children:(0,p.connectResourceButtonLabel)(r)}),hasCreateConnectButton:!0,isStoreTagFilterFromQuery:!0,onClickConnectStoreModal:e=>{c(e)},protocolType:r})})})}function T(e){let{resourceLinkFunc:r,protocolType:s}=e,n=(0,i.useRouter)(),{openBrowseProducts:c}=(0,l.useResourceModals)({onSuccess:e=>{n.push(r(e))}}),{hasProject:u}=(0,a.useProjectSlug)();return u?(0,t.jsx)(o.Button,{onClick:()=>{c("browse-existing")},type:"secondary",typeName:"button",children:`Connect ${p.resourceTitle[s]}`}):null}e.s({useResourceModalsContext:()=>M},1993163);var S=e.i(6530772),P=e.i(3331605),k=e.i(2535297),A=e.i(5037292);function M(){let e=(0,S.useContext)((0,k.getResourceModalsContext)());if(!e)throw Error("useCreateResourceModal must be used within a CreateResourceModalProvider");let{dispatch:t}=e,r=e.state.steps.some(e=>e===P.ResourceModalsActionTypes.CreateEnvs);return{...e,onBack:()=>t({type:"back"}),onClose:()=>t({type:"close"}),onAnimationDone:()=>t({type:"animation-done"}),onResourceUpdated:e=>{t({...e,type:"resource-updated"})},maybeGoToConnectProjectStep:e=>{(r||(0,A.showProjectConnectionAfterResourceCreation)(e))&&t({type:"go-to-step-create-envs",resource:e})},goToCreateResourceStep:e=>{t({type:"go-to-step-create-resource",resourceWithProduct:e})},switchTab(e){t({type:"browse-products-or-select-resources-switch-tabs",tab:e})}}}},[1993163]],1775063:e=>{"use strict";e.s({ResourceModalsProviderBase:()=>a});var t=e.i(6645307),r=e.i(6530772),o=e.i(1310591),s=e.i(3331605),n=e.i(2535297),i=e.i(5037292);let c={active:!1,modalKey:0,type:s.ResourceModalsActionTypes.ModalClosed,steps:[]};function a(e){let{children:a,Modal:l,protocolType:u}=e,{hasProject:d}=(0,o.useProjectSlug)(),p=(0,r.useCallback)((e,t)=>(function(e){let{hasProject:t}=e;return(e,r)=>{if(!r.type.startsWith("open-")&&"animation-done"!==r.type&&e.type===s.ResourceModalsActionTypes.ModalClosed)throw Error(`Cannot handle action "${r.type}" without opening the modal`);switch(r.type){case`open-${s.ResourceModalsActionTypes.BrowseProducts}`:return{modalKey:e.modalKey,type:s.ResourceModalsActionTypes.BrowseProducts,steps:[s.ResourceModalsActionTypes.BrowseProducts,s.ResourceModalsActionTypes.CreateResource],active:!0};case`open-${s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources}`:return{modalKey:e.modalKey,type:s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources,steps:[s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources,s.ResourceModalsActionTypes.CreateResource,s.ResourceModalsActionTypes.CreateEnvs],tab:r.tab,active:!0};case`go-to-step-${s.ResourceModalsActionTypes.CreateResource}`:case`open-${s.ResourceModalsActionTypes.CreateResource}`:{let o=e.steps,n="integration"===r.resourceWithProduct.type&&(0,i.showProjectConnectionAfterResourceCreation)(r.resourceWithProduct.product);if("open-create-resource"===r.type&&(o=t||n?[s.ResourceModalsActionTypes.CreateResource,s.ResourceModalsActionTypes.CreateEnvs]:[s.ResourceModalsActionTypes.CreateResource]),"go-to-step-create-resource"===r.type&&n&&!o.includes(s.ResourceModalsActionTypes.CreateEnvs)&&o.push(s.ResourceModalsActionTypes.CreateEnvs),0===o.length||o[0]===s.ResourceModalsActionTypes.CreateEnvs||o[0]===s.ResourceModalsActionTypes.DeleteEnvs)throw Error(`Invalid steps "${o.join(",")}" for action "${r.type}"`);let{resourceWithProduct:c}=r;return{modalKey:e.modalKey,type:s.ResourceModalsActionTypes.CreateResource,resourceWithProduct:c,backOrCancelLabel:o[0]===s.ResourceModalsActionTypes.CreateResource?"Cancel":"Go Back",steps:o,active:!0}}case`go-to-step-${s.ResourceModalsActionTypes.CreateEnvs}`:case`open-${s.ResourceModalsActionTypes.CreateEnvs}`:{let t=e.steps,o="Cancel";if("open-create-envs"===r.type?t=[s.ResourceModalsActionTypes.CreateEnvs]:e.type===s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources&&(o="Go Back"),0===t.length||t[0]===s.ResourceModalsActionTypes.CreateResource&&t[1]!==s.ResourceModalsActionTypes.CreateEnvs||t[0]===s.ResourceModalsActionTypes.BrowseProducts&&!(0,i.showProjectConnectionAfterResourceCreation)(e.resource)||t[0]===s.ResourceModalsActionTypes.DeleteEnvs)throw Error(`Invalid steps "${t.join(",")}" for action "${r.type}"`);return{backOrCancelLabel:o,modalKey:e.modalKey,type:s.ResourceModalsActionTypes.CreateEnvs,resource:r.resource,connection:"connection"in r?r.connection:void 0,steps:t,active:!0}}case"browse-products-or-select-resources-switch-tabs":if(e.type!==s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources)throw Error('Cannot switch tabs outside of the "browse-stores-or-select-existing" step');return{modalKey:e.modalKey,steps:e.steps,type:e.type,tab:r.tab,active:!0};case"back":if(e.type===s.ResourceModalsActionTypes.CreateEnvs&&"Go Back"===e.backOrCancelLabel&&e.steps[0]===s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources)return{modalKey:e.modalKey,steps:e.steps,type:s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources,tab:"browse-existing",active:!0};if("create-resource"===e.type)switch(e.steps[0]){case s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources:return{modalKey:e.modalKey,steps:e.steps,type:s.ResourceModalsActionTypes.BrowseProudctsOrSelectResources,tab:"browse-new",active:!0};case s.ResourceModalsActionTypes.BrowseProducts:return{modalKey:e.modalKey,steps:e.steps,type:s.ResourceModalsActionTypes.BrowseProducts,active:!0}}return{...e,active:!1};case"close":return{...e,active:!1};case"animation-done":return{...c,modalKey:e.modalKey+1};case"resource-updated":return{...e,resource:r.resource,isConnected:r.isConnected};case"open-delete-envs":return{...e,active:!0,resourceId:r.resourceId,connections:r.connections,type:s.ResourceModalsActionTypes.DeleteEnvs,steps:[s.ResourceModalsActionTypes.DeleteEnvs]}}}})({hasProject:d})(e,t),[d]),[h,g]=(0,r.useReducer)(p,c),m=(0,r.useMemo)(()=>({state:h,dispatch:g,protocolType:u}),[h,u]),y=(0,n.getResourceModalsContext)();return(0,t.jsxs)(y.Provider,{value:m,children:[l,a]})}},2815117:[e=>{"use strict";e.s({},2815117),e.i(2007222),e.i(2481122),e.i(5602259),e.i(1993163),e.i(1775063),e.s({ResourceConnectionsErrorCodes:()=>a,useResourceConnection:()=>l},5710779);var t=e.i(1183506),r=e.i(4418725);e.i(9562801);var o=e.i(438427),s=e.i(8955572),n=e.i(5006659),i=e.i(6580759),c=e.i(5535439);let a={ProjectEnvVarNotUnique:"project_env_var_not_unique",StoreProjectConnectionNotUnique:"store_project_connection_not_unique"};function l(){let e=(0,r.useTeamSlug)()??null,{mutateLogDrains:a}=(0,n.useLogDrainsOperations)({teamSlug:e}),l=function(){let e=(0,c.useParams)();return e?.project}(),{mutateResource:u}=(0,i.useMutateResourceCache)(),{mutate:d}=(0,s.default)(l,{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnMount:!1,revalidateOnReconnect:!1});return{removeConnections:async r=>{let{connectionIds:s,resourceId:n}=r;if(!n)throw Error("storeId is not defined");for(let r of s)await (0,t.fetchAPI)((0,o.getResourceItemApiUrl)({storeId:n,teamSlug:e,path:`/connections/${r}`}),{method:"DELETE",throwOnHTTPError:!0});await u(n),await a(),d(void 0,{revalidate:!0,populateCache:!0})},createConnection:async r=>{let{resourceId:s,...n}=r;if(!s)throw Error("storeId is not defined");await (0,t.fetchAPI)((0,o.getResourceItemApiUrl)({storeId:s,teamSlug:e,path:"/connections"}),{method:"POST",throwOnHTTPError:!0,body:n}),await u(s),d(void 0,{revalidate:!0,populateCache:!0})},updateConnection:async r=>{let{resourceId:s,connectionId:n,...i}=r;await (0,t.fetchAPI)((0,o.getResourceItemApiUrl)({storeId:s,teamSlug:e,path:`/connections/${n}`}),{method:"PATCH",throwOnHTTPError:!0,body:i}),await u(s),await a(),d(void 0,{revalidate:!0,populateCache:!0})}}}},[5710779]]}]);

//# sourceMappingURL=ddda18d3ab4a1867.js.map
//# debugId=42c541aa-de93-56ce-ae8b-ac9602641128
