
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b050f93b-7b38-5e5f-8145-d048f77ab11c")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{1512795:e=>{e.v({container:"empty-state-module__Ue6tJW__container",logIcon:"empty-state-module__Ue6tJW__logIcon"})},4659369:e=>{e.v({age:"log-drains-item-module__e3hD9G__age",deleteLogDrian:"log-drains-item-module__e3hD9G__deleteLogDrian",iconWrapper:"log-drains-item-module__e3hD9G__iconWrapper",logDrainItem:"log-drains-item-module__e3hD9G__logDrainItem",logDrainItemContainer:"log-drains-item-module__e3hD9G__logDrainItemContainer",main:"log-drains-item-module__e3hD9G__main",manage:"log-drains-item-module__e3hD9G__manage",note:"log-drains-item-module__e3hD9G__note",projectsBar:"log-drains-item-module__e3hD9G__projectsBar",remove:"log-drains-item-module__e3hD9G__remove",reveal:"log-drains-item-module__e3hD9G__reveal",url:"log-drains-item-module__e3hD9G__url"})},6169371:e=>{e.v({errorMessage:"remove-log-drain-modal-module__0kjnXa__errorMessage",modalTitle:"remove-log-drain-modal-module__0kjnXa__modalTitle"})},6895507:e=>{e.v({logDrainList:"log-drains-list-module__qAZf6W__logDrainList",logDrainListContainer:"log-drains-list-module__qAZf6W__logDrainListContainer"})},9384787:e=>{"use strict";e.s({LogDrainsPage:()=>eb},9384787);var i=e.i(6645307),t=e.i(889716),a=e.i(8084653),s=e.i(8158100),r=e.i(6621512),n=e.i(6041174),o=e.i(6530772),l=e.i(3514588),d=e.i(2362802);e.i(5941325);var c=e.i(2405013),g=e.i(6895406),u=e.i(5674541),h=e.i(555528),m=e.i(584439),p=e.i(3585235),x=e.i(5785123);e.i(7901367);var j=e.i(540570),f=e.i(1512795);function v(){let e=(0,m.useToasts)(),{can:s}=(0,p.default)(),r=s(x.Action.Update,x.Resource.LogDrains),n=(0,j.useOpenUpgradeModal)(),l=(0,o.useMemo)(()=>r?(0,i.jsx)(u.Button,{onClick:()=>{n({source:"log-drains-settings",forceExpandedReceipt:!0,onConversionError:()=>e.error("Upgrade failed"),onConversionSuccess:()=>{e.success("Upgraded to pro successfully.")}})},type:"secondary",children:"Upgrade to Pro"}):(0,i.jsx)(h.Tooltip,{desktopOnly:!0,text:"You need additional permissions to enable Log Drains for your team",children:(0,i.jsx)(u.Button,{disabled:!0,children:"Upgrade to Pro"})}),[r,n,e]);return(0,i.jsx)(t.Stack,{align:"center",className:f.default.container,justify:"center",children:(0,i.jsxs)(t.Stack,{align:"center",gap:6,children:[(0,i.jsx)("div",{className:f.default.logIcon,children:(0,i.jsx)(y,{})}),(0,i.jsxs)(t.Stack,{align:"center",gap:4,children:[(0,i.jsxs)(t.Stack,{align:"center",gap:2,children:[(0,i.jsx)(a.Text,{as:"h3",size:16,weight:500,children:"Get started with Log Drains"}),(0,i.jsx)(a.Text,{color:"gray-900",children:"Enable Log Drains to create your first Log Drain."})]}),l,(0,i.jsx)(d.Link,{external:!0,href:"/docs/log-drains",tab:!0,variant:"secondary",children:"Learn More"})]})]})})}let y=(0,g.withNewIcon)(`<svg
      fill="none"
      height="32"
      viewBox="0 0 32 32"
      width="32"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        clip-rule="evenodd"
        d="M2.75 4.75H2V6.25H2.75H4.25H5V4.75H4.25H2.75ZM12.75 4.75H12V6.25H12.75H29.25H30V4.75H29.25H12.75ZM7 4.75H7.75H9.25H10V6.25H9.25H7.75H7V4.75ZM12.75 11.75H12V13.25H12.75H29.25H30V11.75H29.25H12.75ZM2 11.75H2.75H4.25H5V13.25H4.25H2.75H2V11.75ZM7.75 11.75H7V13.25H7.75H9.25H10V11.75H9.25H7.75ZM12 18.75H12.75H29.25H30V20.25H29.25H12.75H12V18.75ZM2.75 18.75H2V20.25H2.75H4.25H5V18.75H4.25H2.75ZM7 18.75H7.75H9.25H10V20.25H9.25H7.75H7V18.75ZM12.75 25.75H12V27.25H12.75H29.25H30V25.75H29.25H12.75ZM2 25.75H2.75H4.25H5V27.25H4.25H2.75H2V25.75ZM7.75 25.75H7V27.25H7.75H9.25H10V25.75H9.25H7.75Z"
        fill="#666666"
        fill-rule="evenodd"
      />
    </svg>`,{width:32,height:32,viewBox:"0 0 32 32"});var D=e.i(8811733),S=e.i(5163670),L=e.i(1164214),b=e.i(9326250),H=e.i(8935741),_=e.i(5006659),T=e.i(6382421),k=e.i(7376344),C=e.i(1227837),w=e.i(5140160),M=e.i(476315),N=e.i(3921802),R=e.i(653558),U=e.i(2733203),I=e.i(1190215),A=e.i(4105925),V=e.i(5175803),F=e.i(2226734),E=e.i(7207682),O=e.i(1460036),P=e.i(2013047),B=e.i(9466),G=e.i(3472761),z=e.i(8934201),W=e.i(4418725),Z=e.i(2240289),Y=e.i(8242533),J=e.i(631755),$=e.i(5019368),q=e.i(8741377),K=e.i(1837786);function X(e){let{title:a="Endpoint",placeholder:s,description:r,endpoint:n,onUrlChanged:o}=e;return(0,i.jsxs)(t.Stack,{gap:3,children:[(0,i.jsx)("div",{children:(0,i.jsx)($.FormTitleDescription,{as:"label",description:r,htmlFor:"endpoint-url",title:a})}),(0,i.jsx)("div",{className:q.default.inputWrapper,children:(0,i.jsx)(J.Input,{id:"endpoint-url",maxLength:300,onChange:e=>o({...n,url:e.target.value,isVerified:!0}),placeholder:s,value:n.url,width:"100%"})}),(0,i.jsx)(K.FormCustomHeaders,{hasInitialCustomHeaders:n.hasCustomHeaders,headers:n.headers,onHeadersUpdated:e=>o({...n,headers:e,isVerified:!0,hasCustomHeaders:!0})})]})}var Q=e.i(4719941),ee=e.i(8690072),ei=e.i(2031422),et=e.i(9974803),ea=e.i(4798346),es=e.i(584477);function er(e){let{logDrain:s,onClose:r}=e,n=(0,m.useToasts)(),l=(0,W.useTeamSlug)(),{updateLogDrain:d,permissions:c}=(0,_.useLogDrainsOperations)({teamSlug:l??null}),[g,u]=(0,o.useState)({url:s.url,isVerified:!0,hasCustomHeaders:!!s.headers,headers:s.headers}),[h,p]=(0,o.useState)(s.sources||[]),[x,j]=(0,o.useState)(s.projectIds?Y.ProjectTypes.SOME:Y.ProjectTypes.ALL),{data:f,isLoading:v}=(0,Z.useProjects)(s.projectIds||[]),[y,D]=(0,o.useState)(f||[]);(0,o.useEffect)(()=>{D(f||[])},[f]);let[S,L]=(0,o.useState)(!1),[H,T]=(0,o.useState)(s.environments),[k,C]=(0,o.useState)(s.name),[w,M]=(0,o.useState)([100*(s.samplingRate||1)]),N=(0,o.useCallback)(async()=>{let e={id:s.id,sources:h,deliveryFormat:s.deliveryFormat,url:g.url,projectIds:x===Y.ProjectTypes.ALL?void 0:y.map(e=>e.id),headers:g.headers,environments:H,name:k,samplingRate:100===w[0]?void 0:w[0]/100},i=(0,Q.validateLogDrainForm)(e,g);if(i)return void n.error({key:"log_drain_api_error",text:i});let t=(0,Q.validateUpdateLogDrain)(e,s);if(t)return void n.error({key:"log_drain_api_error",text:t});L(!0);try{if(!function(e,i){if(e.url!==i.url||e.name!==i.name)return!0;if(i.headers){let t=Object.fromEntries(Object.entries(i.headers).sort((e,i)=>{let[t]=e,[a]=i;return t.localeCompare(a)})),a=Object.fromEntries(Object.entries(e.headers??{}).sort((e,i)=>{let[t]=e,[a]=i;return t.localeCompare(a)}));if(JSON.stringify(t)!==JSON.stringify(a))return!0}return e.samplingRate!==i.samplingRate||JSON.stringify(e.projectIds?.sort())!==JSON.stringify(i.projectIds?.sort())||!e.sources||JSON.stringify(e.sources.sort())!==JSON.stringify(i.sources.sort())||JSON.stringify(e.environments.sort())!==JSON.stringify(i.environments.sort())}(s,e))return;await d(e),n.success("Log Drain updated successfully; it might take a few minutes for your change to propagate."),p([]),u({url:"",isVerified:!1,hasCustomHeaders:!1}),j(Y.ProjectTypes.ALL),D([]),T(O.DEFAULT_LOG_ENVIRONMENTS),M([100])}catch(e){n.error(e?.message??"An error occurred while updating the Log Drain")}finally{L(!1),r()}},[r,d,h,g,x,y,H,w,n,k,s]),R=c.isLoading||!c.create||v;return(0,i.jsxs)(z.Modal,{active:!!s,onClickOutside:r,children:[(0,i.jsxs)(z.Modal.Body,{children:[(0,i.jsx)(z.Modal.Title,{center:!0,children:"Edit Log Drain"}),(0,i.jsxs)(t.Stack,{gap:6,style:{marginTop:"12px"},children:[(0,i.jsx)(Y.ProjectSelector,{description:"Choose which projects should send logs to the specified endpoint.",disabled:R,onProjectTypeUpdated:j,onProjectsUpdated:D,projectType:x,projects:y,title:"Projects"}),(0,i.jsx)(ei.FormLogSources,{disabled:R,onSourcesChanged:p,selectedSourceValues:h,sources:O.LogSourcesWithDescription}),(0,i.jsx)(ee.FormDeliveryFormat,{deliveryFormat:s.deliveryFormat,disabled:!0}),(0,i.jsx)(et.FormEnvironment,{disabled:R,environments:H,onEnvironmentsChanged:T}),(0,i.jsx)(es.CustomNameForm,{description:"Set custom name (Optional).",name:k,onCustomNameUpdated:C,title:"Custom Name"}),(0,i.jsx)("form",{children:(0,i.jsx)(ea.FormSamplingRate,{disabled:R,onSamplingRateChanged:M,samplingRate:w})}),(0,i.jsx)(X,{description:(0,i.jsx)(a.Text,{as:"span",children:"You can only edit the path & query parameters of this endpoint. Please create a new log drain if you need to change the domain."}),endpoint:g,onUrlChanged:u,placeholder:"https://my-app.com/log-drain",title:"Endpoint"})]})]}),(0,i.jsxs)(z.Modal.Actions,{children:[(0,i.jsx)(z.Modal.Action,{onClick:r,type:"secondary",children:"Cancel"}),(0,i.jsx)(z.Modal.Action,{disabled:R,loading:S,onClick:(0,b.promiseToCallback)(N),children:"Save"})]})]})}var en=e.i(609559),eo=e.i(4659369);e.i(6591346);var el=e.i(3941020);function ed(e){let{logDrain:r,onRemoveTriggered:n,onTestLogDrain:l,teamSlug:c,onUpdateLogDrain:g,onUpdateLogDrainStatus:m,resource:p}=e,[x,j]=(0,o.useState)(!1),f=(0,o.useMemo)(()=>(e=>{if(!e)return"";let i=e.sources??O.DEFAULT_LOG_SOURCES;return i.length===O.LogSourcesWithDescription.length?"All Sources":i.map(e=>O.LogSourcesWithDescription.find(i=>i.value===e)?.label||"").join(", ")})(r),[r]),v=r.updatedAt!==r.createdAt?r.updatedAt:r.createdAt,y=r.integrationIcon?{hash:r.integrationIcon}:{placeholder:!0},D=function(e){let{teamSlug:i,resource:t,logDrain:a}=e;return i&&a?t?(0,B.getResourceDetailsPath)(t,i,void 0,"projects"):`/${i}/~/integrations/${a.configurationId}`:""}({logDrain:r,teamSlug:c,resource:p}),S="self-served"===r.createdFrom?r.url:r.name,b=p?.projectsMetadata.find(e=>(0,el.getLogDrainProtocolSettings)(e)?.logDrainId===r.id),{checkLogDrainPermissions:H}=(0,_.useLogDrainsOperations)({teamSlug:c??null}),T=H(r,p),k="integration"===r.createdFrom&&!p,C="disabled-by-admin"===r.disabledReason||"account-plan-downgrade"===r.disabledReason;return(0,i.jsx)(i.Fragment,{children:x?(0,i.jsx)(er,{logDrain:r,onClose:()=>j(!1)}):(0,i.jsxs)(t.Stack,{className:eo.default.logDrainItemContainer,direction:"column",children:[(0,i.jsxs)("div",{className:eo.default.logDrainItem,"data-testid":(0,L.tid)("log-drains","item"),children:["integration"===r.createdFrom?(0,i.jsx)(V.Avatar,{...y,size:40}):(0,i.jsx)("div",{className:eo.default.iconWrapper,children:(0,i.jsx)(w.Globe,{color:"gray-700"})}),(0,i.jsxs)(t.Stack,{align:"center",className:eo.default.url,direction:"row",gap:2,children:[(0,i.jsx)(a.Text,{monospace:!0,size:14,weight:600,children:S}),"errored"===r.status&&(0,i.jsx)(N.Badge,{variant:"amber-subtle",children:"Warning"}),"disabled"===r.status?(0,i.jsx)(N.Badge,{variant:"red-subtle",children:"Stopped"}):null]}),(0,i.jsx)(a.Text,{className:eo.default.age,color:"gray-900",children:`${r.updatedAt!==r.createdAt?"Updated":"Added"} ${(0,F.ago)(Date.now()-v,{justNowLabel:"now",suffix:" ago"})}`}),(0,i.jsx)(t.Stack,{align:"center",className:eo.default.remove,direction:"row",gap:1,children:(0,i.jsxs)(I.MenuContainer,{children:[(0,i.jsx)(U.MenuButton,{"aria-label":"Menu",size:"small",svgOnly:!0,type:"tertiary",children:(0,i.jsx)(M.MoreVertical,{})}),(0,i.jsxs)(R.Menu,{children:["integration"===r.createdFrom?(0,i.jsx)(h.Tooltip,{disableTriggers:T.canUpdate,position:"bottom",text:"You need additional permissions to manage integrations.",children:(0,i.jsx)(A.MenuItem,{disabled:T.isLoading||!T.canUpdate,href:D,isLink:!0,children:"Manage"})}):null,k?(0,i.jsx)(h.Tooltip,{disableTriggers:T.canUpdate,position:"bottom",text:"You need additional permissions to configure integrations.",children:(0,i.jsx)(A.MenuItem,{disabled:T.isLoading||!T.canUpdate,external:!0,href:(0,E.getConfigureUrl)({website:r.integrationWebsite??"",configurationUri:r.integrationConfigurationUri},r.configurationId),isLink:!0,children:"Configure"})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Tooltip,{className:"block",disableTriggers:T.canRemove,text:"You do not have permission to delete this log drain",children:(0,i.jsx)(A.MenuItem,{"data-testid":(0,L.tid)("log-drains","delete"),disabled:T.isLoading||!T.canRemove,onClick:()=>n(r,b&&p?{resource:p,connection:b}:void 0),children:(0,i.jsx)("span",{className:eo.default.deleteLogDrian,children:"Delete"})})}),C?null:(0,i.jsx)(h.Tooltip,{className:"block",disableTriggers:T.canUpdate,text:"You do not have permission to update this log drain",children:(0,i.jsx)(A.MenuItem,{disabled:T.isLoading||!T.canUpdate,onClick:()=>{b&&p?g(p,b):j(!0)},children:"Edit"})})]}),C?null:(0,i.jsx)(h.Tooltip,{disableTriggers:T.canUpdate,text:"You do not have permission to update this log drain",children:(0,i.jsx)(A.MenuItem,{"data-testid":(0,L.tid)("log-drains","update"),disabled:T.isLoading||!T.canUpdate,onClick:()=>m(r),children:"disabled"===r.status?"Enable":"Disable"})}),"self-served"===r.createdFrom&&l?(0,i.jsx)(h.Tooltip,{disableTriggers:T.canRead,text:"You do not have permission to test this log drain",children:(0,i.jsx)(A.MenuItem,{disabled:T.isLoading||!T.canRead,onClick:()=>l(r),children:"Test Log Drain"})}):null]})]})}),(0,i.jsx)(t.Stack,{className:eo.default.main,direction:"row",children:(0,i.jsxs)(t.Stack,{gap:1,children:[(0,i.jsx)(eg,{list:r.name,title:"Name"}),(0,i.jsx)(eg,{list:f,title:"Sources"}),(0,i.jsx)(eg,{list:r.deliveryFormat.toUpperCase(),title:"Delivery Format"}),(0,i.jsx)(eg,{list:r.environments.map(P.default).join(", "),title:"Environments"}),(0,i.jsx)(eg,{list:r.samplingRate?`${100*r.samplingRate}%`:"100%",title:"Sampling Rate"})]})}),r.disabledReason?(0,i.jsx)(s.Note,{action:k?(0,i.jsx)(h.Tooltip,{disableTriggers:T.canRemove,text:"You do not have permission to delete this log drain",children:(0,i.jsx)(d.ButtonLink,{disabled:T.isLoading||!T.canRemove,href:D,size:"small",type:"error",children:"Reinstall Integration"})}):(0,i.jsx)(h.Tooltip,{disableTriggers:T.canRemove,text:"You do not have permission to delete this log drain",children:(0,i.jsx)(u.Button,{disabled:T.isLoading||!T.canRemove,onClick:()=>n(r,b&&p?{resource:p,connection:b}:void 0),size:"small",type:"error",children:"Remove Log Drain"})}),className:eo.default.note,fill:!0,label:!1,size:"mediumSmall",style:{height:"56px"},type:"error",children:(0,en.getLogDrainDisabledMessage)(r)}):null]}),"errored"===r.status&&(0,i.jsx)(t.Stack,{className:eo.default.main,children:(0,i.jsxs)(s.Note,{action:"integration"===r.createdFrom?(0,i.jsx)(d.ButtonLink,{href:D,size:"small",type:"warning",children:"Reinstall Integration"}):(0,i.jsx)(h.Tooltip,{disableTriggers:T.canUpdate,text:"You do not have permission to update this log drain",children:(0,i.jsx)(u.Button,{disabled:T.isLoading||!T.canUpdate,onClick:()=>m(r),size:"small",type:"warning",children:"Disable Log Drain"})}),fill:!0,label:!1,size:"mediumSmall",style:{margin:"0 16px 16px 16px",height:"56px"},type:"warning",children:["This"," ","integration"===r.createdFrom?"integration":"Log Drain"," ","is experiencing an 80+ percent error rate."]})}),(0,i.jsx)(t.Stack,{className:eo.default.projectsBar,children:(0,i.jsx)(G.ProjectsLabels,{projectsMetadata:r.projectsMetadata,teamSlug:c})})]})})}function ec(){return(0,i.jsxs)(t.Stack,{className:eo.default.logDrainItemContainer,direction:"column",children:[(0,i.jsxs)("div",{className:eo.default.logDrainItem,children:[(0,i.jsx)("div",{className:eo.default.iconWrapper,children:(0,i.jsx)(w.Globe,{color:"gray-700"})}),(0,i.jsx)(t.Stack,{align:"center",className:eo.default.url,direction:"row",gap:2,children:(0,i.jsx)(S.Skeleton,{boxHeight:40,height:16,vcenter:!0,width:200})}),(0,i.jsx)(S.Skeleton,{boxHeight:40,height:16,vcenter:!0,width:100}),(0,i.jsx)(t.Stack,{className:eo.default.main,direction:"row",children:(0,i.jsx)(t.Stack,{gap:1,children:(0,i.jsxs)(t.Stack,{gap:2,children:[(0,i.jsx)(S.Skeleton,{boxHeight:20,height:16,vcenter:!0,width:200}),(0,i.jsx)(S.Skeleton,{boxHeight:20,height:16,vcenter:!0,width:200})]})})})]}),(0,i.jsx)(t.Stack,{className:eo.default.projectsBar,children:(0,i.jsx)(G.ProjectsLabels,{teamSlug:null})})]})}function eg(e){let{title:t,list:s}=e;return(0,i.jsxs)("span",{children:[(0,i.jsxs)(a.Text,{color:"gray-900",style:{display:"inline"},weight:500,children:[t,": "]}),(0,i.jsx)(a.Text,{color:"gray-900",style:{display:"inline"},children:s})]})}var eu=e.i(7315479),eh=e.i(1917237),em=e.i(6169371);function ep(e){let{removeError:t,logDrainBeingRemoved:s,onRemove:r,isRemovingLogDrain:n,onClose:o}=e;return(0,i.jsxs)(z.Modal.Modal,{active:!!s,onClickOutside:o,children:[(0,i.jsxs)(z.Modal.Body,{children:[(0,i.jsx)("header",{children:(0,i.jsx)(a.Text,{align:"center",as:"h1",className:em.default.modalTitle,size:24,children:"Remove Log Drain"})}),(0,i.jsx)("main",{children:(0,i.jsx)(a.Text,{align:"center",children:`The Log Drain ${s?.url??""} will be permanently deleted.
              Are you sure you want to continue?`})}),t?(0,i.jsx)(eh.Error,{className:em.default.errorMessage,error:t}):null]}),(0,i.jsxs)(z.Modal.Actions,{children:[(0,i.jsx)(z.Modal.Action,{onClick:o,type:"secondary",children:"Cancel"}),(0,i.jsx)(z.Modal.Action,{loading:n,onClick:r,children:"Remove"})]})]})}var ex=e.i(6895507),ej=e.i(663357),ef=e.i(5847686);function ev(e){let{projectSlug:t,teamSlug:s}=e;return(0,i.jsx)(ej.EmptyState.Root,{icon:(0,i.jsx)(ej.EmptyState.Icon,{icon:(0,i.jsx)(ef.Logs,{size:16}),size:32}),secondary:!0,title:t?"No log drains are associated with this project":"No log drains are associated with this team",children:t?(0,i.jsxs)(a.Text,{color:"gray-900",children:["View additional Log Drains in the"," ",(0,i.jsx)(d.Link,{href:`/${s}/~/settings/log-drains`,target:"_self",variant:"highlight",children:"Team Settings"})]}):null})}var ey=e.i(2955320);function eD(e){let{teamSlug:s,projectSlug:r}=e,{data:n,logDrainsGroups:d,error:c}=(0,_.useLogDrains)({projectSlug:r,teamSlug:s}),{team:g}=(0,l.useTeam)(),{testLogDrain:u,updateLogDrainStatus:h,permissions:p}=(0,_.useLogDrainsOperations)({teamSlug:s}),x=(0,ey.useLogDrainsResources)(),{removeError:j,isRemovingLogDrain:f,logDrainBeingRemoved:v,handleClose:y,handleRemoveLogDrain:w,setLogDrainBeingRemoved:M}=(()=>{let[e,i]=(0,o.useState)(!1),[t,a]=(0,o.useState)(null),[s,r]=(0,o.useState)(null),n=(0,m.useToasts)(),l=(0,W.useTeamSlug)(),{deleteLogDrain:d}=(0,_.useLogDrainsOperations)({teamSlug:l??null}),c=(0,o.useCallback)(async()=>{if(t){i(!0);try{if(((await d({id:t.id})).status??404)>=400)throw Error("Log Drain not found");a(null),n.success({text:"Removed Log Drain successfully.",key:"remove-log-drain"})}catch(e){r((0,eu.normalizeError)(e))}finally{i(!1)}}},[t,n,d]);return{isRemovingLogDrain:e,logDrainBeingRemoved:t,removeError:s,handleClose:(0,o.useCallback)(()=>{i(!1),r(null)},[]),handleRemoveLogDrain:c,setLogDrainBeingRemoved:a}})(),{mutateLogDrains:N}=(0,_.useLogDrainsOperations)({teamSlug:s}),{openConnectProject:R,openDisconnectProject:U}=(0,C.useResourceModals)({onSuccess:async()=>{await N()}}),I=(0,m.useToasts)(),A=(e,i)=>{i?U(i.resource.id,[i.connection]):M(e)},V=async e=>{try{let{id:i}=e;await u({id:i}),I.success("Test log drain sent successfully")}catch(e){I.error("Test log drain failed")}},F=async e=>{let i="disabled"===e.status?"enabled":"disabled";try{await h({id:e.id,status:i}),I.success("enabled"===i?"Log drain is enabled successfully":"Log drain is disabled successfully")}catch(e){I.error("Failed to update log drain status")}},E=(0,k.usePlaceholderCount)(`log-drains:${s}-${r??""}`,n?.length);return n||c?!p.isLoading&&!p.list||c&&(0,H.isAPIErrorForbidden)(c)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.Spacer,{}),(0,i.jsx)(T.AdditionalPermissionsRequired,{resource:"Log Drains",team:g})]}):(0,i.jsxs)(t.Stack,{className:ex.default.logDrainListContainer,gap:4,children:[0===d.active.length?(0,i.jsx)(ev,{projectSlug:r,teamSlug:s}):(0,i.jsxs)(t.Stack,{gap:4,children:[(0,i.jsx)(t.Stack,{children:(0,i.jsx)(a.Text,{as:"h3",size:20,weight:600,children:"Active Log Drains"})}),(0,i.jsx)("div",{className:ex.default.logDrainList,"data-testid":(0,L.tid)("log-drains","active-list"),children:d.active.map(e=>(0,i.jsx)(ed,{logDrain:e,onRemoveTriggered:A,onTestLogDrain:(0,b.promiseToCallback)(V),onUpdateLogDrain:(e,i)=>R(e,i),onUpdateLogDrainStatus:(0,b.promiseToCallback)(F),resource:eS(x,e.id),teamSlug:s},e.id))})]}),d.stopped.length>0&&(0,i.jsxs)(t.Stack,{gap:4,children:[(0,i.jsx)(a.Text,{as:"h3",size:20,weight:600,children:"Stopped Log Drains"}),(0,i.jsx)("div",{className:ex.default.logDrainList,"data-testid":(0,L.tid)("log-drains","stopped-list"),children:d.stopped.map(e=>(0,i.jsx)(ed,{logDrain:e,onRemoveTriggered:A,onUpdateLogDrain:(e,i)=>R(e,i),onUpdateLogDrainStatus:(0,b.promiseToCallback)(F),resource:eS(x,e.id),teamSlug:s},e.id))})]}),(0,i.jsx)(ep,{isRemovingLogDrain:f,logDrainBeingRemoved:v,onClose:()=>{y(),M(null)},onRemove:w,removeError:j})]}):(0,i.jsx)(t.Stack,{className:ex.default.logDrainListContainer,gap:4,children:(0,i.jsxs)(t.Stack,{gap:4,children:[(0,i.jsx)(t.Stack,{children:(0,i.jsx)(S.Skeleton,{boxHeight:24,height:22,width:160})}),(0,i.jsx)("div",{className:ex.default.logDrainList,children:Array.from({length:E??1}).map((e,t)=>(0,i.jsx)(ec,{},`ld_${t}`))})]})})}function eS(e,i){return e?.find(e=>e.projectsMetadata.some(e=>(0,el.getLogDrainProtocolSettings)(e)?.logDrainId===i))}var eL=e.i(9367986);function eb(e){let{params:s}=e,{teamSlug:r,project:n}=(0,o.use)(s),{team:d}=(0,l.useTeam)(),g=d?.billing?.plan==="hobby",u=d?.billing?.plan==="pro"&&"trialing"===d.billing.status,h=g||u;return(0,i.jsxs)(t.Stack,{gap:6,children:[(0,i.jsxs)(t.Stack,{direction:"row",justify:"space-between",children:[(0,i.jsx)(a.Text,{as:"h3",size:20,weight:600,children:"Log Drains"}),h?null:(0,i.jsx)(eL.AddLogDrainButton,{projectSlug:n,teamSlug:r})]}),(0,i.jsx)(a.Text,{color:"gray-900",children:"Collect and forward your logs to third-party logging providers."}),(0,i.jsxs)(t.Stack,{gap:12,children:[h?(0,i.jsx)(v,{}):(0,i.jsx)(i.Fragment,{children:d?.logs?.logDrainsGracePeriodEndDate&&d.logs.logDrainsGracePeriodEndDate>=Date.now()?(0,i.jsx)(eH,{endDate:d.logs.logDrainsGracePeriodEndDate}):null}),(0,i.jsx)(c.ResourceModalsProvider,{protocolType:"logDrain",children:(0,i.jsx)(eD,{projectSlug:n??null,teamSlug:r})})]})]})}function eH(e){let{endDate:t}=e,o=(0,n.format)(new Date(t),"MMMM do, yyyy");return(0,i.jsxs)(s.Note,{action:(0,i.jsx)(d.ButtonLink,{href:"/docs/log-drains#usage-and-pricing",children:"Learn More"}),fill:!0,icon:(0,i.jsx)(r.Information,{}),type:"success",children:[(0,i.jsx)(a.Text,{color:"blue-900",weight:500,children:"Log Drains Now Generally Available"}),(0,i.jsxs)(a.Text,{color:"blue-900",children:["Billing starts on ",o,". Use Log Drains at no cost until"," ",o,"."]})]})}}}]);

//# sourceMappingURL=5a029bd076942e47.js.map
//# debugId=b050f93b-7b38-5e5f-8145-d048f77ab11c
