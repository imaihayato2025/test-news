
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="7c437f31-d34f-56f3-a507-1945c29efff3")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{2256334:e=>{e.v({accessGroupIcon:"invite-member-modal-module__LbAwRa__accessGroupIcon",fullWidth:"invite-member-modal-module__LbAwRa__fullWidth",scroller:"invite-member-modal-module__LbAwRa__scroller"})},2252319:e=>{e.v({menuFooter:"role-selector-module__uiXxdq__menuFooter",roleSelectorOpenMenu:"role-selector-module__uiXxdq__roleSelectorOpenMenu"})},2721265:e=>{e.v({empty:"no-results-module__KTugTq__empty"})},1078258:e=>{e.v({hideOnMobile:"members-module__FrWKEW__hideOnMobile",kwvgch:"members-module__FrWKEW__kwvgch"})},367778:e=>{"use strict";e.s({Members:()=>tO},367778);var t=e.i(6645307),i=e.i(6530772),s=e.i(5729015),n=e.i(7315479),l=e.i(2615772),r=e.i(1209519),a=e.i(9240532),o=e.i(5674541),c=e.i(6531164),d=e.i(8448595),m=e.i(611347),u=e.i(7238633),h=e.i(631755),x=e.i(4789498),j=e.i(8934201),p=e.i(8811733),g=e.i(889716),b=e.i(8350390),v=e.i(8084653),f=e.i(555528),y=e.i(584439),M=e.i(2362802),T=e.i(1164214),S=e.i(1183506),A=e.i(9336536),E=e.i(3514588),C=e.i(3904906),w=e.i(3585235),k=e.i(5785123),I=e.i(9959972),R=e.i(2069577),P=e.i(5617834),$=e.i(8158100),B=e.i(6621512),D=e.i(8418504),F=e.i(7573892),N=e.i(9802771),O=e.i(7337588),L=e.i(2145411),_=e.i(8935741),z=e.i(6325202),G=e.i(5520481),q=e.i(2240289),U=e.i(7057043),H=e.i(8981169),V=e.i(896448),W=e.i(2256334);let Y=["BILLING","VIEWER"];function J(e){let{active:s,setActive:l,invitees:r,isReinvite:a=!1,onInvited:o,revalidateSearch:c}=e,{team:d}=(0,E.useTeam)(),m=(0,y.useToasts)(),[u,h]=(0,i.useState)(!1),{freeInvites:x,paidInvites:p,inviteCount:b,v0Invites:v}=(0,i.useMemo)(()=>r.reduce((e,t)=>(t.email&&(Y.includes(t.role)?e.freeInvites.push(t):e.paidInvites.push(t),t.entitlements?.includes("v0")&&(e.v0Invites+=1),e.inviteCount+=1),e),{freeInvites:[],paidInvites:[],v0Invites:0,inviteCount:0}),[r]),M=(0,i.useMemo)(()=>{let e=`By confirming, you will be inviting ${b} new Team Member${1===b?"":"s"}.`;if(d?.billing?.plan==="enterprise"&&d.billing.invoiceItems?.teamSeats?.price===0||x.length>0&&0===p.length)return{vercel:e};let t=d?.billing?.invoiceItems?.teamSeats?.price??2e3,i=(0,z.formatCurrency)(t*p.length,d?.billing?.currency);if(p.length===r.length)return{vercel:`${e} Your bill will increase by ${i}.`};let s=1===p.length?"is a":"are",n=1===p.length?"seat":"seats";return{vercel:`${e} ${p.length} of your new Team Members ${s} paid Vercel Pro ${n}, and your Vercel bill will increase by ${i}.`,v0:`${v} of your new Team Members will have v0 Access. v0 Team seats cost ${(0,z.formatCurrency)(3e3,d?.billing?.currency)}, but you will only be charged a pro-rated amount for the remainder of the billing period.`}},[b,d?.billing?.plan,d?.billing?.invoiceItems?.teamSeats?.price,d?.billing?.currency,x.length,p.length,r.length,v]),C=(0,i.useCallback)(e=>e.email?(0,t.jsxs)(O.Entity,{className:W.default.fullWidth,footer:e.projects?.length||e.accessGroups?.length?(0,t.jsxs)(g.Stack,{direction:"column",gap:2,children:[e.projects?.length?(0,t.jsx)(Q,{projects:e.projects}):null,e.accessGroups?.length?(0,t.jsx)(K,{accessGroupsIds:e.accessGroups}):null]}):null,children:[(0,t.jsx)(L.EntityField,{title:e.email}),(0,t.jsx)(L.EntityField,{description:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:1,children:[P.rolesMeta[e.role].label,(0,t.jsx)(f.Tooltip,{text:P.rolesMeta[e.role].description,children:(0,t.jsx)(B.Information,{size:14})}),e.entitlements?.includes("v0")?(0,t.jsx)("div",{children:"v0 Access"}):null]}),right:!0,width:"auto"})]},e.email):null,[]);async function w(){if(!d)return;h(!0);let e=[];r.forEach(t=>{t.email&&e.push((0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${d.id}/members`,{body:JSON.stringify({email:t.email,role:t.role,projects:t.projects?.map(e=>({projectId:e.project.id,role:e.role})),accessGroups:t.accessGroups,entitlements:t.entitlements}),method:"POST"}))});let t=await Promise.all(e),i=[];t.forEach((e,t)=>{"error"in e&&i.push({email:r[t]?.email,error:e.error})}),await c(e=>a?e?.map(e=>{let t=r.filter(t=>e.emailInviteCodes?.some(e=>e.email===t.email)??!1);return{...e,emailInviteCodes:e.emailInviteCodes?.map(e=>r.find(t=>"id"in t&&t.id===e.id)?{...e,expired:!1}:e),members:e.members.map(e=>{let i=t.find(t=>t.email===e.email);return!i||e.confirmed?e:{...e,createdAt:Date.now(),role:i.role,projects:i.projects}})}}):e?e.map(e=>{let t=r.filter(t=>e.emailInviteCodes?.some(e=>e.email===t.email)??!1),i=r.filter(t=>!!t.email&&!!e.emailInviteCodes&&e.emailInviteCodes.every(e=>e.email!==t.email));return{...e,emailInviteCodes:[...i.map(e=>({id:e.email,email:e.email,role:e.role,projects:X(e.projects)})),...e.emailInviteCodes?.map(e=>{let i=t.find(t=>t.email===e.email);return i?{...e,role:i.role,projects:X(i.projects),expired:!1}:e})||[]],members:e.members.map(e=>{let i=t.find(t=>t.email===e.email);return!i||e.confirmed?e:{...e,role:i.role,projects:i.projects}})}}):e,{revalidate:!1});let s=i.every(e=>(0,_.isAPIError)(e.error)&&"member_exists"===e.error.code);i.length?1===t.length?m.error({text:s?`${i[0].email} is already a member of this team.`:`Failed to invite ${i[0].email}.`,preserve:!0}):s?(o?.(),m.success("All member have been successfully invited or are already members of this team.")):i.forEach(e=>{let{error:t}=e;return m.error({text:(0,n.errorToString)(t),preserve:!0})}):(o?.(),m.success("Team members invited successfully.")),t.length>i.length&&F.analytics.track(N.AnalyticsEvent.TEAM_MEMBER_ADDED),l(!1),h(!1)}return(0,t.jsxs)(j.Modal.Modal,{active:s,"data-testid":(0,T.tid)("team-settings","members","invite-members-modal"),onAnimationDone:()=>h(!1),onClickOutside:()=>l(!1),children:[(0,t.jsx)(j.Modal.Body,{children:(0,t.jsxs)(g.Stack,{direction:"column",gap:6,children:[(0,t.jsxs)(g.Stack,{direction:"column",gap:3,children:[(0,t.jsx)(j.Modal.Title,{children:"Invite Team Members"}),(0,t.jsxs)(j.Modal.Subtitle,{children:["Your team is expanding! ",M.vercel]}),M.v0?(0,t.jsx)(j.Modal.Subtitle,{children:M.v0}):null]}),(0,t.jsx)(g.Stack,{direction:"column",gap:3,children:(0,t.jsxs)(g.Stack,{direction:"column",gap:4,children:[(0,t.jsxs)(g.Stack,{className:W.default.scroller,direction:"column",children:[x.map(C),p.map(C)]}),(0,t.jsx)($.Note,{type:"warning",children:"Team invites expire after 72 hours."})]})})]})}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>l(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{"data-testid":(0,T.tid)("team-settings","members","invite-members-modal","confirm-button"),loading:u,onClick:w,children:"Confirm"})]})]})}function K(e){let{accessGroupsIds:i}=e,{accessGroups:s}=(0,U.useAccessGroups)();if(!i)return null;let n=s?.filter(e=>i.includes(e.accessGroupId))||[];return(0,t.jsx)(g.Stack,{gap:2,children:n.map(e=>(0,t.jsxs)(g.Stack,{align:"center",direction:{sm:"column",md:"row",lg:"row"},justify:"space-between",children:[(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("div",{className:W.default.accessGroupIcon,children:(0,t.jsx)(D.Users,{size:12})}),(0,t.jsx)(v.Text,{color:"gray-700",children:e.name})]}),(0,t.jsxs)(v.Text,{color:"gray-700",children:[e.projectsCount," projects"]}),(0,t.jsxs)("div",{className:"geist-show-on-mobile",children:[(0,t.jsx)(p.Spacer,{y:.5}),(0,t.jsx)("hr",{className:"geist-hr-reset"}),(0,t.jsx)(p.Spacer,{y:.5})]})]},e.accessGroupId))})}function Q(e){let{projects:i}=e,s=(i||[]).map(e=>{let{project:t}=e;return t.id}).filter(V.isTruthy),{data:n}=(0,q.useProjects)(s);return i&&n?(0,t.jsx)(g.Stack,{gap:2,children:i.map(e=>{let{project:i,role:s}=e,l=n.find(e=>e.id===i.id),r=H.projectRoles.find(e=>e.role===s);return l?(0,t.jsxs)(g.Stack,{direction:{sm:"column",md:"row",lg:"row"},justify:"space-between",children:[(0,t.jsxs)(g.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(G.FaviconOrFramework,{project:l,size:20},l.id),l.name]}),(0,t.jsxs)("div",{className:"geist-show-on-mobile",children:[(0,t.jsx)(p.Spacer,{y:.5}),(0,t.jsx)("hr",{className:"geist-hr-reset"}),(0,t.jsx)(p.Spacer,{y:.5})]}),(0,t.jsxs)(g.Stack,{direction:"row",gap:1,children:[r?.label,(0,t.jsx)(f.Tooltip,{text:r?.description,children:(0,t.jsx)(B.Information,{size:14})})]}),(0,t.jsx)(p.Spacer,{className:"geist-show-on-mobile"})]}):null})}):null}function X(e){return e?e.reduce((e,t)=>({...e,...t.project.id?{[t.project.id]:t.role}:null}),{}):{}}var Z=e.i(9948746),ee=e.i(4237550),et=e.i(653558),ei=e.i(2733203),es=e.i(1190215),en=e.i(6192985),el=e.i(4105925),er=e.i(5163670),ea=e.i(9495609),eo=e.i(2252319);function ec(e){let{value:i,onChange:s,disabled:n,width:l,testId:r,buttonStyle:a,size:o,v0EntitlementDisable:c,v0EntitlementValue:d,v0EntitlementChange:m,disableRoles:u}=e,{teamRoles:h,isReady:x}=(0,P.useAvailableRolesInfo)(),{value:j}=(0,I.useEntitlement)("v0-team-seats");if(!x)return(0,t.jsx)(er.Skeleton,{height:40,width:"100%"});let p=h.find(e=>e.role===i)?.label,b=p?`${p}${d?", v0 access":""}`:"Select Role";return(0,t.jsxs)(es.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(ei.MenuButton,{align:"start","aria-label":"Select role for the new member",className:eo.default.roleSelectorOpenMenu,"data-testid":r,disabled:n,shape:"square",size:o,style:{width:l,padding:"0 var(--geist-space-gap-half)",...a},suffix:(0,t.jsx)(ee.ChevronDown,{}),svgOnly:!0,type:"secondary",typeName:"button",children:b}),(0,t.jsxs)(et.Menu,{"data-testid":(0,T.tid)("members","invitee-role-container"),width:l||300,children:[h.map(e=>{let{role:l,label:r,description:a}=e,o=u?.some(e=>e.role===l);return(0,t.jsx)(el.MenuItem,{"data-testid":(0,T.tid)("members","invitee-role-option",String(l)),onClick:()=>{l!==i&&s(l)},disabled:n||o,style:{height:"auto",padding:"var(--geist-space-gap-quarter)",opacity:o?.7:1},suffix:i===l?(0,t.jsx)(Z.Check,{}):null,children:(0,t.jsxs)(g.Stack,{children:[(0,t.jsx)(v.Text,{children:r}),(0,t.jsx)(v.Text,{color:"gray-900",children:a}),u?.some(e=>e.role===l)?(0,t.jsx)(v.Text,{color:"gray-900",children:u.find(e=>e.role===l)?.reason}):null]})},l)}),j?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(en.MenuDivider,{}),(0,t.jsxs)("div",{className:"flex gap-4 p-2",children:[(0,t.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,t.jsx)(v.Text,{children:"v0 Access"}),(0,t.jsx)(v.Text,{color:"gray-900",children:"Must be enabled to select the Viewer role."})]}),(0,t.jsx)(ea.Toggle,{checked:!!d,disabled:c,onChange:m,size:"medium"})]})]}):null,(0,t.jsx)(g.Stack,{className:eo.default.menuFooter,children:(0,t.jsxs)(v.Text,{color:"gray-900",children:["Compare all"," ",(0,t.jsx)(M.Link,{external:!0,href:"/docs/rbac/access-roles/team-level-roles",variant:"highlight",children:"Team Roles"})]})})]})]})}var ed=e.i(8247297),em=e.i(9185154),eu=e.i(1098821),eh=e.i(5973311),ex=e.i(5454140),ej=e.i(4162978),ep=e.i(6216539),eg=e.i(4663960),eb=e.i(6382421),ev=e.i(3921802),ef=e.i(6465700),ey=e.i(1093245),eM=e.i(5343945),eT=e.i(604868),eS=e.i(5610210),eA=e.i(3604170),eE=e.i(3326412),eC=e.i(5972177),ew=e.i(1917237),ek=e.i(4640326);function eI(e){let{origin:t,path:i,sha:s}=e;switch(t){case"github":return`https://github.com/${i}/commit/${s}`;case"gitlab":return`https://gitlab.com/${i}/-/commit/${s}`;case"bitbucket":return`https://bitbucket.org/${i}/commits/${s}`}}var eR=e.i(4774832);e.i(7901367);var eP=e.i(540570);function e$(e){return e?(0,t.jsx)("b",{children:e}):"someone"}let eB=function(e){let{member:s,setActive:n,revalidateSearch:l}=e,[r,a]=(0,i.useState)(!1),{team:c}=(0,E.useTeam)(),d=(0,y.useToasts)(),[m,u]=(0,i.useState)(!1),[h,x]=(0,i.useState)(null),p=s.username,b=(0,eP.useOpenUpgradeModal)(),f=(0,eP.useUpgradeModalIsOpen)();(0,i.useEffect)(()=>{a(!0)},[]);let T=(0,eR.isHobby)(c);async function C(){if(c&&!T){try{u(!0),x(null),await (0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${c.id}/members/${s.uid}`,{body:JSON.stringify({confirmed:!0}),throwOnHTTPError:!0,method:"PATCH"}),await l(e=>e?.map(e=>({...e,members:e.members.map(e=>e.uid===s.uid?{...e,confirmed:!0}:e)})),{revalidate:!1}),d.success("Accepted membership request successfully."),a(!1)}catch(e){x(e)}u(!1)}}let w=s.accessRequestedAt?Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}).format(s.accessRequestedAt):null,k=(0,i.useCallback)(()=>{b({source:"accept-member-modal",forceImmediateUpgrade:!0}),F.analytics.track(N.AnalyticsEvent.HOBBY_TEAM_MEMBERS_UPGRADE)},[b]);return(0,t.jsxs)(j.Modal.Modal,{active:r,onAnimationDone:()=>{u(!1),x(null),n(!1)},onClickOutside:()=>{f||a(!1)},children:[(0,t.jsx)(j.Modal.Body,{children:(0,t.jsxs)(g.Stack,{gap:4,children:[(0,t.jsx)(v.Text,{align:"center",as:"h2",size:24,children:"Membership Request"}),T?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(v.Text,{children:"Team members are not permitted on the Hobby Plan."}),(0,t.jsxs)(v.Text,{children:["To collaborate with ",e$(p),", please upgrade to a Pro Team."]}),(0,t.jsx)(o.Button,{onClick:k,size:"small",width:"100%",children:"Upgrade to Pro"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(v.Text,{children:["You are about to accept ",e$(p),"'s request to join your Team",w?(0,t.jsxs)(t.Fragment,{children:[" (received on ",w,")"]}):"","."]}),(0,ek.isGitOrigin)(s?.joinedFrom?.origin)?(0,t.jsxs)(v.Text,{children:["It originated from commit"," ",(0,t.jsx)(M.Link,{external:!0,href:eI({origin:s.joinedFrom.origin,path:s.joinedFrom.repoPath,sha:s.joinedFrom.commitId}),type:"highlight",children:s.joinedFrom.commitId.slice(0,7)})," ","on ",ek.ORIGINS[s.joinedFrom.origin],"."]}):null,c?.billing?.plan==="pro"?(0,t.jsxs)(v.Text,{children:["Adding a member to your Team will add ",(0,t.jsx)("b",{children:"$20"})," to your Team's monthly bill."]}):null,(0,t.jsx)(v.Text,{children:"Are you sure you want to proceed?"}),h?(0,t.jsx)(ew.Error,{error:h}):null]})]})}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>a(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{disabled:T,loading:m,onClick:C,children:"Accept Request"})]})]})};var eD=e.i(2448773);let eF=function(e){let{active:s,setActive:n,member:l,revalidateSearch:r}=e,{team:a}=(0,E.useTeam)(),[o,c]=(0,i.useState)(!1),[d,m]=(0,i.useState)(null),u=l.username,h=(0,y.useToasts)(),x=l.accessRequestedAt?Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"2-digit"}).format(l.accessRequestedAt):null;async function p(){try{c(!0),m(null),await (0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${a.id}/members/${l.uid}`,{throwOnHTTPError:!0,method:"DELETE"}),await r(e=>e?.map(e=>({...e,members:e.members.filter(e=>e.uid!==l.uid)})),{revalidate:!1}),h.success("Declined membership request successfully."),n(!1)}catch(e){m(e)}c(!1)}return(0,t.jsxs)(j.Modal.Modal,{active:s,onClickOutside:()=>n(!1),children:[(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(eD.default,{Component:"h2",center:!0,h3:!0,noMargin:!0,children:"Membership Request"}),(0,t.jsxs)(eD.default,{preset:"body-2",children:["You are about to decline ",u?(0,t.jsx)("b",{children:u}):"someone","'s request to join your Team",x?(0,t.jsxs)(t.Fragment,{children:[" (received on ",x,")"]}):"","."]}),(0,ek.isGitOrigin)(l.joinedFrom?.origin)?(0,t.jsxs)(eD.default,{preset:"body-2",children:["It originated from commit"," ",(0,t.jsx)(M.Link,{external:!0,href:eI({origin:l.joinedFrom.origin,path:l.joinedFrom.repoPath,sha:l.joinedFrom.commitId}),type:"highlight",children:l.joinedFrom.commitId.slice(0,7)})," ","on ",ek.ORIGINS[l.joinedFrom.origin],"."]}):null,(0,t.jsx)(eD.default,{preset:"body-2",children:"Are you sure you want to proceed?"}),d?(0,t.jsx)(ew.Error,{error:d}):null]}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>n(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{loading:o,onClick:p,children:"Decline Request"})]})]})};var eN=e.i(7981702),eO=e.i(6787183),eL=e.i(5175803),e_=e.i(7078371);function ez(e){let{member:i}=e,{team:s}=(0,E.useTeam)(),n=(0,P.isAccessRequested)(i),l=(0,P.getMemberUsername)(i),r=(0,eh.isDSyncManagedMember)(s,i);return n?(0,t.jsx)(eL.GenericAvatar,{letter:(i.email||l||"")?.[0]?.toUpperCase(),placeholder:!0,size:30}):r&&s?.saml?.directory?.type?(0,t.jsx)(eO.AvatarWithIcon,{icon:(0,t.jsx)(eL.Avatar,{size:14,src:(0,eh.getDirectorySyncLogo)(s.saml.directory.type),title:`Managed by ${e_.DirectorySyncType[s.saml.directory.type]}`}),right:-3,size:32,username:i.username}):(0,t.jsx)(eL.Avatar,{size:32,username:i.username})}var eG=e.i(5165976),eq=e.i(2567082),eU=e.i(878537),eH=e.i(3521787);function eV(e,t){let{data:i,mutate:s}=(0,eH.default)(["v0-access-request",e?.uid],async()=>{if(!e||!t||(0,eh.isDSyncManagedMember)(t,e))return!1;let i=await (0,S.fetchAPI)(`${A.API_V0_ACCESS_REQUEST}?teamId=${t.id}&memberUid=${e.uid}`,{method:"GET",headers:{"Content-Type":"application/json"},throwOnHTTPError:!0});return"string"!=typeof i&&i.hasRequestedAccess},{refreshInterval:3e5});return{requested:i,mutate:s}}var eW=e.i(6083766);function eY(e){let{member:i}=e,s=i.createdAt+(0,eq.default)("3d")<Date.now();return(0,t.jsxs)(ev.Badge,{size:"sm",variant:s?"amber-subtle":void 0,children:["Invitation ",s?"Expired":"Sent"]})}let eJ=(0,t.jsx)(ev.Badge,{size:"sm",variant:"amber-subtle",children:"Requested Access"}),eK=(0,t.jsx)(ev.Badge,{size:"sm",variant:"amber-subtle",children:"Requested v0 Access"}),eQ=(0,t.jsx)(eU.default,{children:(0,t.jsx)(f.Tooltip,{text:eW.directorySyncPermissionsMessage,children:(0,t.jsx)(eG.LockClosed,{color:"gray-700"})})});function eX(e){let{member:i,team:s}=e,{requested:n}=eV(i,s);return(0,P.isAccessRequested)(i)?eJ:(0,P.isUnconfirmed)(i)?(0,t.jsx)(eY,{member:i}):(0,eh.isDSyncManagedMember)(s,i)?eQ:n?eK:null}var eZ=e.i(3920197);function e0(e){let{teamSlug:i,isMfaEnforced:s}=e;return(0,t.jsx)(f.Tooltip,{cursor:"default",text:(0,t.jsxs)(t.Fragment,{children:["This member does not have 2FA configured."," ",s?null:(0,t.jsxs)(t.Fragment,{children:["Go to"," ",(0,t.jsx)(M.Link,{href:`/${i}/~/settings/security#two-factor-enforcement`,variant:"highlight",children:"Security & Privacy"})," ","settings to enforce 2FA, restricting access until members enable it."]})]}),children:(0,t.jsxs)(v.Text,{align:"center",className:"flex gap-1",color:"gray-900",lineHeight:16,children:[(0,t.jsx)(eZ.CrossCircle,{})," 2FA"]})})}var e1=e.i(5535439),e2=e.i(909856),e3=e.i(571504);function e5(e){let{active:s,setActive:l}=e,r=(0,e1.useRouter)(),{user:a}=(0,ex.useUser)(),{team:o}=(0,E.useTeam)(),[c,d]=(0,i.useState)(!1),[m,u]=(0,i.useState)(null);return(0,t.jsx)(e3.LeaveTeamModal,{active:s,error:m,isLeaving:c,onAnimationDone:()=>{u(null)},onCancel:()=>{l(!1)},onLeave:async()=>{if(o&&a){d(!0);try{await (0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${o.id}/members/${a.uid}`,{throwOnHTTPError:!0,method:"DELETE"}),await (0,e2.jwtKVStoreInvalidateFetch)(),d(!1),l(!1),r.push("/dashboard")}catch(e){u((0,n.normalizeError)(e)),d(!1)}}},team:o?.name??""})}var e4=e.i(5599793);function e7(e){let{active:s,setActive:l,member:r,currentRole:a,changeRole:o,revalidateSearch:c}=e,{team:d}=(0,E.useTeam)(),[m,u]=(0,i.useState)(null),[h,x]=(0,i.useState)(!1),g=(0,y.useToasts)(),b=d?.billing?.plan==="pro",M=d?.billing?.status==="trialing",C=(0,e4.useMembersForTeam)(b?d:void 0,{role:eN.RBACRole.BILLING}),w=(0,e4.useMembersForTeam)(b?d:void 0,{role:eN.RBACRole.OWNER});async function k(){if(d){try{x(!0),u(null),await (0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${d.id}/members/${r.uid}`,{body:JSON.stringify({role:o}),method:"PATCH",throwOnHTTPError:!0}),await c(e=>e?.map(e=>({...e,members:e.members.map(e=>e.uid===r.uid?{...e,role:o}:e)})),{revalidate:!1}),b&&await C.mutate(),g.success("Changed Team Member role successfully."),l(!1)}catch(e){u((0,n.normalizeError)(e))}x(!1)}}let I=!!(b&&C.data&&C.data.members.length>0),R=!!(b&&M&&w.data&&w.data.members.length>0),$=I&&o===eN.RBACRole.BILLING||R&&o===eN.RBACRole.OWNER,B=(0,i.useMemo)(()=>{let e;if($)return e=o===eN.RBACRole.BILLING?"Billing":"Owner",`This team has already assigned a ${e} role to a user.`},[$,o]);return(0,t.jsxs)(j.Modal.Modal,{active:s,"data-testid":(0,T.tid)("team-settings","members","change-role-members-modal"),onAnimationDone:()=>{x(!1),u(null)},onClickOutside:()=>l(!1),children:[(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(j.Modal.Title,{children:"Change Team Member Role"}),(0,t.jsx)(p.Spacer,{y:.5}),(0,t.jsxs)(j.Modal.Subtitle,{children:["Change the"," ",(0,t.jsx)(v.Text,{as:"span",color:"gray-900",transform:"capitalize",children:(0,t.jsx)("b",{children:a.toLowerCase()})})," ","role of ",(0,t.jsx)("b",{children:r.name||r.username||r.email})," to"," ",(0,t.jsx)(v.Text,{as:"span",color:"gray-900",transform:"capitalize",children:(0,t.jsx)("b",{children:o.toLowerCase()})}),"? ",(0,t.jsx)(v.Text,{color:"gray-900",children:(0,P.roleWarningText)(o)})]}),m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Spacer,{}),(0,t.jsx)(ew.Error,{error:m})]}):null]}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>l(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(f.Tooltip,{disableTriggers:!$||h,text:B,children:(0,t.jsx)(j.Modal.Action,{"data-testid":(0,T.tid)("team-settings","members","change-role-members-modal","confirm-button"),disabled:$,loading:h,onClick:k,children:"Confirm"})})]})]})}var e9=e.i(2165676);function e6(e){let{member:i,isDSync:s,disabled:n,onChange:l}=e,r=(0,P.isUnconfirmed)(i);return(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:!n&&!s&&!r,position:"bottom",text:s?eW.directorySyncPermissionsMessage:r?"The team role can only be changed after the user accepts the invite.":(0,t.jsx)(eW.AdditionalPermissionsMessage,{}),children:(0,t.jsx)(ec,{disabled:n||r,onChange:l,size:"small",testId:(0,T.tid)("members-table","entity","actions","select-role"),value:i.role,width:"auto"})})}function e8(e){let{active:s,setActive:n,member:l}=e,{team:r}=(0,E.useTeam)(),[a,o]=(0,i.useTransition)(),[c,d]=(0,i.useState)(null),m=l.username,u=(0,y.useToasts)();return(0,t.jsxs)(j.Modal.Modal,{active:s,onClickOutside:()=>n(!1),children:[(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(eD.default,{Component:"h2",center:!0,h3:!0,noMargin:!0,children:"v0 Access Request"}),(0,t.jsxs)(eD.default,{preset:"body-2",children:["You are about to decline"," ",m?(0,t.jsx)("b",{className:"font-medium",children:m}):"someone","'s request for v0 access."]}),c?(0,t.jsx)(ew.Error,{error:c}):null]}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>n(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{loading:a,onClick:function(){!a&&r&&o(async()=>{try{d(null),await (0,S.fetchAPI)(`${A.API_V0_ACCESS_REQUEST}?teamId=${r.id}`,{throwOnHTTPError:!0,method:"DELETE",body:JSON.stringify({memberUid:l.uid})}),u.success("Declined v0 access request successfully."),n(!1)}catch(e){d(e)}})},children:"Decline Request"})]})]})}function te(e){let{active:s,setActive:n,member:l}=e,{team:r}=(0,E.useTeam)(),{value:a}=(0,I.useEntitlement)("v0-team-seats"),[o,c]=(0,i.useTransition)(),{mutate:d}=eV(l,r),[m,u]=(0,i.useState)(null),h=l.username,x=(0,y.useToasts)();return(0,t.jsxs)(j.Modal.Modal,{active:s,onClickOutside:()=>n(!1),children:[(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(eD.default,{Component:"h2",center:!0,h3:!0,noMargin:!0,children:"v0 Access Request"}),(0,t.jsxs)(eD.default,{preset:"body-2",children:["You are enabling access to v0 for"," ",h?(0,t.jsx)("b",{className:"font-medium",children:h}):"someone",". Your card will be charged a prorated amount today for the remainder of your billing period. An amount of ",(0,t.jsx)("b",{className:"font-medium",children:"$30"})," ","will be added to your monthly invoice for future billing cycles."]}),m?(0,t.jsx)(ew.Error,{error:m}):null]}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>n(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{loading:o,onClick:function(){!o&&r&&c(async()=>{try{u(null),a&&await (0,V.changeEntitlements)({userId:l.uid,teamId:r.id,existingEntitlements:(0,V.getDirectEntitlementArray)(l),newEntitlements:["v0"]}),(0,S.fetchAPI)(`${A.API_V0_ACCESS_REQUEST}?teamId=${r.id}`,{throwOnHTTPError:!0,method:"DELETE",body:JSON.stringify({memberUid:l.uid})}).then(()=>d()),x.success("Granted v0 access successfully."),n(!1)}catch(e){u(e)}})},children:"Accept Request"})]})]})}function tt(e){let{acceptRequest:i,areRolesReady:s,declineRequest:n,canChange:l,canViewMembersMfaState:r,handleRoleChange:a,isCurrentUser:c,isDSync:d,member:m,openManageRoleModal:u,openV0AccessModal:h,team:x}=e,j=(0,ej.usePlaceholder)(),{value:p}=(0,eE.useHasNewRBAC)(),b=!l||d||!s,{canHaveProjectRole:y}=(0,P.useRoleUtils)(),{requested:M}=eV(m,x),S=(0,eT.useIsMobile)(),A=y(m.role),E=!l||!s||d&&!A,C=l&&(!d||A);if(j)return(0,t.jsx)(er.Skeleton,{height:32,width:"40%"});if((0,P.isAccessRequested)(m)&&l)return(0,t.jsxs)(g.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(o.Button,{onClick:i,size:"small",children:"Accept"}),(0,t.jsx)(o.Button,{onClick:n,size:"small",type:"secondary",children:"Decline"})]});if(M&&l)return(0,t.jsxs)(g.Stack,{direction:"row",gap:4,children:[(0,t.jsx)(o.Button,{onClick:()=>h("accept"),size:"small",children:"Accept"}),(0,t.jsx)(o.Button,{onClick:()=>h("decline"),size:"small",type:"secondary",children:"Decline"})]});let w=m.entitlements?.find(e=>"v0"===e.entitlement),k=w?["This user has access to v0.dev",!w.hasDirectAssignation&&" because it is part of access groups with v0 access",w.canceledAt&&" and its access will not be renewed","."].filter(Boolean).join(""):null,I=p?(0,P.getRolesInfo)({teamRoles:[m.role,...m.teamRoles||[]],teamPermissions:m.teamPermissions||[]}):void 0;return c?(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:4,children:[w?(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(f.Tooltip,{delayTime:300,text:k,children:(0,t.jsx)(ta,{canceled:!!w.canceledAt})})}):null,(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.Text,{color:"gray-900","data-testid":(0,T.tid)("members-table","entity","actions","current-role"),transform:"capitalize",children:p?I?.teamRoles[0]?.label:m.role.toLowerCase()}),p?(0,t.jsx)(to,{memberRolesInfo:I}):null]}),r&&!m.mfaEnabled?(0,t.jsx)(e0,{teamSlug:x?.slug??"",isMfaEnforced:x?.mfa?.enforced??!1}):null]})}):m.confirmed?(0,t.jsx)(er.Skeleton,{show:!s,children:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:4,children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(v.Text,{color:"gray-900","data-testid":(0,T.tid)("members-table","entity","actions","current-role"),transform:"capitalize",children:p?I?.teamRoles[0]?.label:m.role.toLowerCase()}),p?(0,t.jsx)(to,{memberRolesInfo:I}):null]}),w?(0,t.jsx)(f.Tooltip,{delayTime:300,text:k,children:(0,t.jsx)(ta,{canceled:!!w.canceledAt})}):null,(0,t.jsx)(e9.ProjectAccessBadges,{config:{expanded:!S},projectAccess:{projects:m.projects?.map(e=>e.id&&e.role?{id:e.id,role:e.role}:null).filter(tc),accessGroups:m.accessGroups}})]}),r&&!m.mfaEnabled?(0,t.jsx)(e0,{teamSlug:x?.slug??"",isMfaEnforced:x?.mfa?.enforced??!1}):null,(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:C,text:l?eW.directorySyncPermissionsMessage:(0,t.jsx)(eW.AdditionalPermissionsMessage,{}),children:(0,t.jsx)(o.Button,{"data-testid":(0,T.tid)("members-table","entity","actions","manage-role"),disabled:E,onClick:()=>{u()},size:"small",type:"secondary",children:"Manage Access"})})]})}):(0,t.jsx)(er.Skeleton,{show:!s,children:(0,t.jsx)(g.Stack,{direction:"row",gap:4,children:(0,t.jsx)(e6,{disabled:b,isDSync:d,member:m,onChange:a})})})}function ti(e){let{member:s,isSelected:n,onSelectionChange:l,onRemove:r,revalidateSearch:a,onManageAccess:o,canViewMembersMfaState:c}=e,{user:d}=(0,ex.useUser)(),{team:m}=(0,E.useTeam)(),{can:u}=(0,w.default)(),h=u(k.Action.Delete,k.Resource.TeamFellowMembership),x=u(k.Action.Update,k.Resource.TeamFellowMembership),{isReady:j}=(0,eN.useIsRoleEnabled)(eN.RBACRole.VIEWER),{isReady:g}=(0,eN.useIsRoleEnabled)(eN.RBACRole.DEVELOPER),{isReady:b}=(0,eN.useIsRoleEnabled)(eN.RBACRole.BILLING),v=(0,ej.usePlaceholder)(),y=s.uid===d?.uid,M=s.name||s.username,S=(0,eh.isDSyncManagedMember)(m,s),A=j&&g&&b,C=!h||S||!A,[R,P]=(0,i.useState)("MEMBER"),[$,B]=(0,i.useState)("MEMBER"),[D,F]=(0,i.useState)(!1),[N,_]=(0,i.useState)(!1),[z,G]=(0,i.useState)(!1),[q,U]=(0,i.useState)(!1),[H,V]=(0,i.useState)(null),{value:W}=(0,I.useEntitlement)("v0-team-seats"),[Y,J]=(0,i.useState)(null),K=S?(0,t.jsx)(t.Fragment,{children:eW.directorySyncPermissionsMessage}):(0,t.jsx)(eW.AdditionalPermissionsMessage,{});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(O.Entity,{checkbox:y?(0,t.jsx)(p.Spacer,{inline:!0,x:2/3}):(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:h&&!S,position:"bottom",text:K,children:(0,t.jsx)(ed.Checkbox,{checked:n,disabled:!h||S,onChange:l})}),"data-testid":(0,T.tid)("members-table","entity",M),disabledDotMenuTooltip:K,isDotMenuDisabled:!y&&!W&&(!h||S),menuItems:y?(0,t.jsxs)(t.Fragment,{children:[m&&W&&x?(0,t.jsx)(ts,{member:s,onPromptCancel:()=>{J("cancel")},onPromptConfirm:()=>{J("grant")},onPromptRestore:()=>{J("restore")},revalidateSearch:a,team:m}):null,(0,t.jsx)(el.MenuItem,{"data-testid":(0,T.tid)("members-table","entity",M,"leave-team"),onClick:()=>_(!0),type:"error",children:"Leave Team"})]}):(0,t.jsxs)(t.Fragment,{children:[m&&W&&x?(0,t.jsx)(ts,{member:s,onPromptCancel:()=>{J("cancel")},onPromptConfirm:()=>{J("grant")},onPromptRestore:()=>{J("restore")},revalidateSearch:a,team:m}):null,(0,t.jsx)(f.Tooltip,{disableTriggers:!C,text:K,children:(0,t.jsx)(el.MenuItem,{"data-testid":(0,T.tid)("members-table","entity",M,"remove-from-team"),disabled:C,onClick:r,type:"error",children:"Remove from Team"})})]}),placeholder:v,thumbnail:(0,t.jsx)(eA.EntityThumbnail,{size:32,children:(0,t.jsx)(ez,{member:s})}),children:[(0,t.jsx)(L.EntityField,{"data-testid":(0,T.tid)("members-table","entity",M,"details"),description:s.email||"",title:(0,t.jsxs)("span",{className:"geist-inline-center flex max-w-[410px] gap-0.5",children:[(0,t.jsx)("span",{className:"geist-ellipsis",children:M}),(0,t.jsx)("span",{className:"hidden md:inline ",children:(0,t.jsx)(eX,{member:s,team:m})})]})}),(0,t.jsx)(L.EntityField,{className:"flex-none","data-testid":(0,T.tid)("members-table","entity",M,"actions"),right:!0,children:(0,t.jsx)(tt,{acceptRequest:()=>G(!0),areRolesReady:A,canChange:x,declineRequest:()=>U(!0),handleRoleChange:e=>{B(s.role),P(e),F(!0)},isCurrentUser:y,isDSync:S,member:s,canViewMembersMfaState:c,openManageRoleModal:()=>o(),openV0AccessModal:e=>V(e),team:m})})]}),(0,t.jsx)(e5,{active:N,setActive:_}),(0,t.jsx)(e7,{active:D,changeRole:R,currentRole:$,member:s,revalidateSearch:a,setActive:F}),z?(0,t.jsx)(eB,{member:s,revalidateSearch:a,setActive:G}):null,(0,t.jsx)(eF,{active:q,member:s,revalidateSearch:a,setActive:U}),m&&"cancel"===Y?(0,t.jsx)(tl,{member:s,onClose:()=>J(null),revalidateSearch:a,team:m}):null,m&&("grant"===Y||"restore"===Y)?(0,t.jsx)(tr,{member:s,onClose:()=>J(null),revalidateSearch:a,team:m,type:Y}):null,"decline"===H&&(0,t.jsx)(e8,{active:!0,member:s,setActive:e=>e?V("decline"):V(null)}),"accept"===H&&(0,t.jsx)(te,{active:!0,member:s,setActive:e=>e?V("accept"):V(null)})]})}function ts(e){let{member:i,team:s,onPromptCancel:n,onPromptConfirm:l,onPromptRestore:r,revalidateSearch:a}=e,o=(0,y.useToasts)(),c=s.billing?.plan==="enterprise",d=i.entitlements&&i.entitlements.some(e=>"v0"===e.entitlement&&e.hasDirectAssignation&&!e.canceledAt),m=i.entitlements&&i.entitlements.some(e=>"v0"===e.entitlement&&e.hasDirectAssignation&&e.canceledAt),u=i.name||i.username;async function h(){await tn(s,i,"v0"),o.success(`Added v0 access for ${u}`),await a()}async function x(){var e,t;await (e=s,t=i,(0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${e.id}/members/${t.uid}/entitlement?teamId=${e.id}`,{body:JSON.stringify({entitlement:"v0"}),method:"DELETE",throwOnHTTPError:!0})),o.success(`Removed v0 access for ${u}`),await a()}return(0,t.jsxs)(t.Fragment,{children:[c&&d?(0,t.jsx)(el.MenuItem,{onClick:()=>{x()},children:"Remove v0 access"}):null,c&&!d?(0,t.jsx)(el.MenuItem,{onClick:()=>{h()},children:"Enable v0 access"}):null,!c&&d?(0,t.jsx)(el.MenuItem,{onClick:n,children:"Cancel v0 access"}):null,c||d?null:(0,t.jsx)(el.MenuItem,{onClick:m?r:l,children:m?"Re-enable v0 access":"Grant v0 access"})]})}function tn(e,t,i){return(0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${e.id}/members/${t.uid}/entitlement?teamId=${e.id}`,{body:JSON.stringify({entitlement:i}),method:"POST",throwOnHTTPError:!0})}function tl(e){let{member:i,team:s,onClose:n,revalidateSearch:l}=e,r=(0,y.useToasts)();async function a(){try{await (0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${s.id}/members/${i.uid}/entitlement/cancel?teamId=${s.id}`,{body:JSON.stringify({entitlement:"v0"}),method:"POST",throwOnHTTPError:!0}),r.success("v0 access to the user will not be renewed."),await l(),n()}catch(e){if((0,eC.isCustomFetchError)(e)&&"Active v0 Team subscriptions must have at least one owner with the v0 entitlement."===e.message)return void r.error({text:"You cannot remove v0 access for this user, because they are the only owner on the team with access. To cancel your v0 Team subscription and remove access for this user, please visit the Billing settings page on v0.",action:"Cancel v0 subscription",onAction:()=>{window.open(`https://v0.dev/chat/settings/billing?scope=${s.slug}`,"_blank","noopener,noreferrer")}});r.error("Failed to cancel v0 access.")}}return(0,t.jsxs)(j.Modal.Modal,{active:!0,onClickOutside:()=>{n()},width:"480px",children:[(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(j.Modal.Header,{children:(0,t.jsx)(j.Modal.Title,{children:"Cancel v0 Access"})}),"Are you sure you want to remove v0 access for this user? They will keep v0 until the end of the billing cycle, and you will no longer be billed for their seat."]}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:n,type:"secondary",children:"Close"}),(0,t.jsx)(j.Modal.Action,{onClick:()=>{a()},children:"Remove Access"})]})]})}function tr(e){let{member:i,team:s,onClose:n,revalidateSearch:l,type:r}=e,a=(0,y.useToasts)();async function o(){await tn(s,i,"v0"),a.success("v0 access to the user has been granted."),await l(),n()}return(0,t.jsxs)(j.Modal.Modal,{active:!0,onClickOutside:()=>{n()},width:"480px",children:["grant"===r?(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(j.Modal.Header,{children:(0,t.jsx)(j.Modal.Title,{children:"Grant v0 Access"})}),"You are enabling access to v0 for ",i.email,". An amount of $30 will be added to your invoice and your card will be charged immediately."]}):(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(j.Modal.Header,{children:(0,t.jsx)(j.Modal.Title,{children:"Restore v0 Access"})}),"You are restoring access to v0 for ",i.email,". This subscription will continue."]}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:n,type:"secondary",children:"Close"}),(0,t.jsx)(j.Modal.Action,{onClick:()=>{o()},children:"Enable Access"})]})]})}function ta(e){let{canceled:i}=e;return(0,t.jsxs)("div",{className:(0,eS.clsx)("flex items-center gap-1",i?"text-amber-900":"text-gray-900"),children:[(0,t.jsx)(eM.V0Mark,{color:i?"var(--ds-amber-900)":"var(--ds-gray-900)",size:22}),(0,t.jsx)("span",{children:"access"}),i?(0,t.jsx)(ey.WarningFill,{size:14}):(0,t.jsx)(ef.InformationFillSmall,{size:14})]})}function to(e){let{memberRolesInfo:i}=e,s=i?.teamRoles||[],n=i?.teamPermissions||[],l=s.length+n.length;if(l<=1)return null;let r=(0,t.jsxs)("div",{className:"flex flex-col items-start gap-2 text-left",children:[s.length?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-bold",children:"Team Roles"}),s.map(e=>(0,t.jsx)("div",{children:e.label},e.key))]}):null,n.length?(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-bold",children:"Additional Permissions"}),n.map(e=>(0,t.jsx)("div",{children:e.label},e.key))]}):null]});return(0,t.jsx)(f.Tooltip,{delayTime:300,text:r,children:(0,t.jsx)(ev.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsxs)(v.Text,{size:12,children:["+",l-1]})})})}function tc(e){return null!=e}var td=e.i(2013047),tm=e.i(2721265);function tu(e){let{search:i,tab:s,roleFilter:n,isHobby:l}=e;if(l)return(0,t.jsx)(th,{});let r="Use the form above to invite a Team Member.";return""!==i?r=`Your search for "${i}" did not return any results.`:"ALL"!==n&&(r=`Your filter "${(0,td.default)(n.toLowerCase())}" did not return any results.`),(0,t.jsxs)(g.Stack,{align:"center",className:tm.default.empty,gap:2,justify:"center",children:[(0,t.jsx)(v.Text,{weight:500,children:"pending"===s?"No Pending Invitations Found":"No Results Found"}),(0,t.jsx)(v.Text,{align:"center",color:"gray-900",children:r}),(0,t.jsx)(p.Spacer,{})]})}function th(){let e=(0,eP.useOpenUpgradeModal)();return(0,t.jsxs)(g.Stack,{align:"center",className:tm.default.empty,gap:2,justify:"center",children:[(0,t.jsx)(v.Text,{weight:500,children:"Invite Team Members"}),(0,t.jsxs)(v.Text,{align:"center",color:"gray-900",children:["This feature is available on the ",(0,t.jsx)(M.Link,{external:!0,href:"/pricing",variant:"highlight",children:"Pro plan"}),"."]}),(0,t.jsx)(o.Button,{"data-testid":(0,T.tid)("members","pending-invites-upgrade-to-pro"),onClick:()=>e({source:"settings/members"}),size:"small",style:{marginTop:"var(--geist-gap-quarter)"},width:150,children:"Upgrade"})]})}var tx=e.i(6937468);function tj(e){let{member:i}=e,{team:s}=(0,E.useTeam)(),{data:n,error:l}=(0,eH.default)(()=>s?`${A.API_TEAMS_V2}/${s.id}/members/${i.uid}/projects`:null,e=>(0,S.fetchAPI)(e,{throwOnHTTPError:!0}));if(l)return(0,t.jsx)(ew.Error,{error:l});if(!n)return(0,t.jsx)(er.Skeleton,{autoSize:!0,block:!1,height:14,children:"(Admin on 2 projects)"});if(!n?.pagination?.count)return null;let r=`${n.projects.map(e=>e.name).join(", ")}${n.pagination.hasNext?" and more...":""}`;return(0,t.jsxs)(f.Tooltip,{disableTriggers:0===n.projects.length,position:"right",text:r,children:["(Admin on ",n.pagination.count," ",n.pagination.hasNext?"+":""," ",(0,tx.pluralize)("project",n.pagination.count),")"]})}function tp(e){let{active:s,setActive:l,members:r,onRemoved:a,revalidateSearch:o}=e,{team:c}=(0,E.useTeam)(),d=(0,y.useToasts)(),[m,u]=(0,i.useState)(!1),[h,x]=(0,i.useState)(null);async function p(){if(c){u(!0);try{let e=r.map(e=>{var t,i,s,n;return"uid"in e?(t=c.id,i=e.uid,(0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${t}/members/${i}`,{method:"DELETE",throwOnHTTPError:!0})).then(()=>e):(s=c.id,n=e.id,(0,S.fetchAPI)(`${A.API_TEAMS_MEMBERS}/${s}/invites/${n}`,{method:"DELETE",throwOnHTTPError:!0})).then(()=>e)}),t=(await Promise.allSettled(e)).filter(e=>"fulfilled"===e.status).map(e=>e.value);if(await o(e=>e?.map(e=>({...e,emailInviteCodes:e.emailInviteCodes?.filter(e=>!t.some(t=>"id"in t?t.id===e.id:t.email===e.email)),members:e.members.filter(e=>!t.some(t=>"uid"in t?t.uid===e.uid:!e.confirmed&&t.email===e.email))})),{revalidate:!1}),a?.(t.map(e=>"id"in e?e.id:e.uid)),t.length!==e.length)throw Error(`${e.length-t.length}/${e.length} ${(0,tx.pluralize)("user",t.length)} could not be removed from the Team.`);l(!1),d.success({text:`Removed ${(0,tx.pluralize)("user",t.length)} from the Team successfully.`,key:"remove-member-modal-success"})}catch(e){x((0,n.normalizeError)(e))}u(!1)}}return(0,t.jsxs)(j.Modal.Modal,{active:s,"data-testid":(0,T.tid)("team-settings","members","remove-member-modal"),onAnimationDone:()=>{u(!1),x(null)},onClickOutside:()=>l(!1),children:[(0,t.jsx)(j.Modal.Body,{children:(0,t.jsxs)(g.Stack,{direction:"column",gap:6,children:[(0,t.jsxs)(g.Stack,{direction:"column",gap:3,children:[(0,t.jsx)(j.Modal.Title,{children:"Remove Team Members"}),(0,t.jsx)(j.Modal.Subtitle,{children:"You are about to remove the following Team Members, are you sure you want to continue?"})]}),(0,t.jsx)(g.Stack,{direction:"column",gap:3,children:(0,t.jsx)(g.Stack,{className:W.default.scroller,direction:"column",children:r.map(e=>"uid"in e?(0,t.jsxs)(O.Entity,{thumbnail:(0,t.jsx)(eA.EntityThumbnail,{size:32,children:(0,t.jsx)(eL.Avatar,{size:32,username:e.username})}),children:[(0,t.jsx)(L.EntityField,{description:e.email||"",title:e.name||e.username}),(0,t.jsx)(L.EntityField,{right:!0,width:"auto",children:(0,t.jsxs)(g.Stack,{children:[(0,t.jsx)(v.Text,{transform:"capitalize",weight:600,children:e.role.toLowerCase()}),e.role?.toLowerCase()==="developer"&&(0,t.jsx)(v.Text,{color:"gray-900",children:(0,t.jsx)(tj,{member:e})})]})})]},e.uid):(0,t.jsxs)(O.Entity,{thumbnail:(0,t.jsx)(eA.EntityThumbnail,{size:32,children:(0,t.jsx)(eL.Avatar,{letter:e.email&&e.email.slice(0,1).toUpperCase(),placeholder:!0,size:32})}),children:[(0,t.jsx)(L.EntityField,{title:e?.email||"Email Invitation"}),e.role?(0,t.jsx)(L.EntityField,{right:!0,width:"auto",children:(0,t.jsx)(v.Text,{color:"gray-900",transform:"capitalize",children:e.role.toLowerCase()})}):null]},e.id))})}),h?(0,t.jsx)(ew.Error,{error:h}):null]})}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>l(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{"data-testid":(0,T.tid)("team-settings","members","remove-member-modal","confirm-button"),loading:m,onClick:p,children:"Confirm"})]})]})}var tg=e.i(9568418);let tb="This invite is managed by Directory Sync.";function tv(e){let{invite:i,isSelected:s,isDSyncUser:n,onSelectionChange:l,canDeleteInvites:r,canCreateInvites:a,onRemove:c,onReinvite:d}=e,{accessGroups:m}=(0,U.useAccessGroups)(),u=i.expired,h=!r||n,x=r?(0,t.jsx)(t.Fragment,{children:tb}):(0,t.jsx)(eW.AdditionalPermissionsMessage,{}),j={projects:(i.projects?Object.keys(i.projects):[]).map(e=>i.projects?.[e]?{id:e,role:i.projects[e]}:null).filter(tf),accessGroups:i.accessGroups?.map(e=>{let t=m?.find(t=>t.accessGroupId===e);return t?{id:t.accessGroupId,name:t.name}:null}).filter(tf)};return(0,t.jsxs)(O.Entity,{checkbox:(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:r,position:"bottom",text:x,children:(0,t.jsx)(ed.Checkbox,{checked:s,disabled:!r,onChange:l})}),"data-testid":(0,T.tid)("members-table","invite-entity",i.email||i.id),disabledDotMenuTooltip:x,isDotMenuDisabled:h,menuItems:(0,t.jsx)(el.MenuItem,{"data-testid":(0,T.tid)("members-table","remove-invite",i.email||i.id),disabled:h,onClick:c,type:"error",children:(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:!h,position:"bottom",text:x,children:"Remove"})}),thumbnail:(0,t.jsx)(eA.EntityThumbnail,{size:32,children:(0,t.jsx)(eL.Avatar,{letter:i.email?.slice(0,1).toUpperCase(),placeholder:!0,size:32})}),children:[(0,t.jsx)(L.EntityField,{description:i.email,title:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(v.Text,{color:u?"amber-900":void 0,weight:600,children:u?"Expired Invitation":"Pending Invitation"}),(0,t.jsx)(tg.Envelope,{color:"gray-700"}),r&&n?(0,t.jsx)(f.Tooltip,{text:tb,children:(0,t.jsx)(eG.LockClosed,{className:"mt-[-2px]",color:"gray-700"})}):null]})}),i.role?(0,t.jsx)(L.EntityField,{"data-testid":(0,T.tid)("members-table","invite-entity",i.email||i.id,"actions"),right:!0,width:"auto",children:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:4,children:[a&&u&&i.email&&d?(0,t.jsx)(o.Button,{onClick:()=>{i.email&&i.role&&d({id:i.id,email:i.email,role:i.role})},type:"secondary",children:"Send new invitation"}):null,(0,t.jsx)(v.Text,{color:"gray-900",transform:"capitalize",children:i.role.toLowerCase()}),(0,t.jsx)(e9.ProjectAccessBadges,{projectAccess:j})]})}):null]})}function tf(e){return null!=e}var ty=e.i(3713927),tM=e.i(6284911);let tT={hobby:["OWNER","MEMBER"],pro:["OWNER","MEMBER","BILLING"],enterprise:["OWNER","MEMBER","DEVELOPER","VIEWER","BILLING","CONTRIBUTOR"]},tS={all:"Everyone",enabled:"2FA Enabled",disabled:"2FA Disabled"},tA={"date-desc":"Date","name-asc":"Name (A-Z)","name-desc":"Name (Z-A)"};function tE(e){let{canViewMembersMfaState:i,isMfaFilterDisabled:s,membersSearch:n,team:l}=e,{applyMfaFilter:r,filterByMfaState:a,applySort:o,roleFilter:c,setRoleFilter:d,initialDataLoaded:m,isLagging:u,performSearch:h,search:x,searchEnabled:j,sort:p}=n;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(er.Skeleton,{show:!m,children:(0,t.jsx)(tM.SearchInput,{"data-testid":(0,T.tid)("members","filter-input"),disabled:!j,loading:!!u&&x.length>0,onChange:e=>h(e.target.value),placeholder:"Filterâ€¦",width:"auto"})})}),(0,t.jsx)(er.Skeleton,{show:!m,children:(0,t.jsxs)(es.MenuContainer,{children:[(0,t.jsx)(ei.MenuButton,{className:"min-w-full !justify-between capitalize md:min-w-40",suffix:(0,t.jsx)(ee.ChevronDown,{}),type:"secondary",children:"ALL"===c?"All Team Roles":c.toLowerCase()}),(0,t.jsxs)(et.Menu,{width:180,children:[(0,t.jsx)(el.MenuItem,{suffix:"ALL"===c?(0,t.jsx)(Z.Check,{}):null,onClick:()=>d("ALL"),children:"All Team Roles"},"all"),tT[l?.billing?.plan??"pro"].map(e=>(0,t.jsx)(el.MenuItem,{suffix:c===e?(0,t.jsx)(Z.Check,{}):null,onClick:()=>d(e),children:(0,t.jsx)("span",{className:"capitalize",children:e.toLowerCase()})},e))]})]})}),i?(0,t.jsx)(er.Skeleton,{show:!m,children:(0,t.jsxs)(es.MenuContainer,{children:[(0,t.jsx)(ei.MenuButton,{className:"min-w-full !justify-between md:min-w-40",disabled:s,suffix:(0,t.jsx)(ee.ChevronDown,{}),type:"secondary",children:!a||s?"2FA Status":tS[a]}),(0,t.jsxs)(et.Menu,{children:[(0,t.jsx)(el.MenuItem,{suffix:a&&"all"!==a?null:(0,t.jsx)(Z.Check,{}),onClick:()=>r("all"),children:tS.all}),(0,t.jsx)(el.MenuItem,{suffix:"enabled"===a?(0,t.jsx)(Z.Check,{}):null,onClick:()=>r("enabled"),children:tS.enabled}),(0,t.jsx)(el.MenuItem,{suffix:"disabled"===a?(0,t.jsx)(Z.Check,{}):null,onClick:()=>r("disabled"),children:tS.disabled})]})]})}):null,(0,t.jsx)(er.Skeleton,{show:!m,children:(0,t.jsxs)(es.MenuContainer,{children:[(0,t.jsx)(ei.MenuButton,{className:"min-w-full !justify-between md:min-w-40",suffix:(0,t.jsx)(ee.ChevronDown,{}),type:"secondary",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(ty.SortDescending,{})," ",tA[p]]})}),(0,t.jsxs)(et.Menu,{children:[(0,t.jsx)(el.MenuItem,{suffix:a&&"all"!==a?null:(0,t.jsx)(Z.Check,{}),onClick:()=>o("date-desc"),children:tA["date-desc"]}),(0,t.jsx)(el.MenuItem,{suffix:"enabled"===a?(0,t.jsx)(Z.Check,{}):null,onClick:()=>o("name-asc"),children:tA["name-asc"]}),(0,t.jsx)(el.MenuItem,{suffix:"disabled"===a?(0,t.jsx)(Z.Check,{}):null,onClick:()=>o("name-desc"),children:tA["name-desc"]})]})]})})]})}let tC=Array.from({length:5},()=>null),tw=e=>(0,P.isMember)(e)?e.uid:e.id;function tk(e){let{onReinvite:s,membersSearch:n,selectedTab:l,setSelectedTab:r}=e,{team:a}=(0,E.useTeam)(),{accessGroups:o,mutate:c}=(0,U.useAccessGroups)({membersLimit:100}),d=a?.billing?.plan==="hobby",{can:m,isLoading:u}=(0,w.default)(),{value:h}=(0,eE.useTeamMemberMfaStatusFlag)(),[x,j]=(0,i.useState)(!1),[b,v]=(0,i.useState)(null),{roleFilter:y,initialDataLoaded:M,isLoadingMore:S,isReachingEnd:A,loadMore:C,mutate:I,results:R,resultTotalCount:$,search:B}=n,{amountSelected:D,areAllSelected:F,selectable:N,selected:O,setSelected:L,toggle:_,toggleAll:z}=function(e){let{user:t}=(0,ex.useUser)(),{team:s}=(0,E.useTeam)(),[n,l]=(0,i.useState)({}),r=Object.keys(n).length,a=(0,i.useCallback)(e=>{let t=tw(e);n[t]?l(e=>{let i={...e};return delete i[t],i}):l(i=>({...i,[t]:e}))},[n]),o=e.filter(e=>!("joinedFrom"in e&&(0,eh.isDSyncManagedMember)(s,e))&&((0,P.isMember)(e)?e.uid!==t?.uid:!!e.email)),c=(0,i.useCallback)(()=>{0===r?l(Object.fromEntries(o.map(e=>[tw(e),e]))):l({})},[r,o]);return{amountSelected:r,areAllSelected:r>0&&r===o.length,selectable:o,selected:n,setSelected:l,toggle:a,toggleAll:c}}(n.results);(0,i.useEffect)(()=>L({}),[l,L]);let G=!!(h&&m(k.Action.Read,k.Resource.TeamMemberMfaStatus)),q=(0,i.useCallback)(e=>{e&&L(Object.fromEntries(e.map(e=>[tw(e),e]))),j(!0)},[L,j]),H=(0,i.useCallback)(e=>{L(t=>{let i={...t};return e.forEach(e=>{delete i[e]}),i})},[L]),W=!M||u,Y=m(k.Action.Create,k.Resource.TeamFellowMembership),J=m(k.Action.Delete,k.Resource.TeamFellowMembership),K=m(k.Action.List,k.Resource.TeamFellowMembership),Q=!J;return u||K?(0,t.jsxs)("div",{style:{maxWidth:"100%"},children:[(0,t.jsx)(eu.Tabs,{disabled:W,selected:l,setSelected:r,tabs:[{title:"Team Members",value:"members","data-testid":(0,T.tid)("tab","members")},{title:"Pending Invitations",value:"pending","data-testid":(0,T.tid)("tab","pending-invites")}]}),(0,t.jsx)(g.Stack,{direction:{sm:"column",md:"row"},gap:{sm:3,md:2},style:{marginTop:"0.75rem",marginBottom:"0.75rem"},children:(0,t.jsx)(tE,{canViewMembersMfaState:G,membersSearch:n,team:a,isMfaFilterDisabled:"pending"===l})}),!(M&&0===R.length)&&(0,t.jsx)(ep.EntityHeader,{children:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",flex:"1",justify:"space-between",children:[(0,t.jsx)(er.Skeleton,{show:!M,children:(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:!Q,position:"bottom",text:(0,t.jsx)(eW.AdditionalPermissionsMessage,{}),children:(0,t.jsxs)(ed.Checkbox,{"aria-label":"Select all",checked:F,className:Q?"":"text-gray-700","data-testid":(0,T.tid)("members","selected-items"),disabled:Q||!W&&0===N.length,onChange:z,children:[(0,t.jsx)(p.Spacer,{inline:!0,x:1/3}),(0,t.jsx)("span",{children:0===D?"Select all":`${D} selected`}),"members"===l&&$?(0,t.jsx)("span",{children:D?` of ${$}`:` (${$})`}):null]})})}),(0,t.jsx)(er.Skeleton,{show:!M,children:(0,t.jsx)(eg.EntityMenu,{disabledDotMenuTooltip:(0,t.jsx)(eW.AdditionalPermissionsMessage,{}),isDotMenuDisabled:Q,menuButtonProps:{"data-testid":(0,T.tid)("members","members-table","menu")},children:(0,t.jsxs)(el.MenuItem,{"data-testid":(0,T.tid)("members","remove-selected"),disabled:0===D,onClick:()=>q(),type:"error",children:["Remove from Team (",D,")"]})})})]})}),(0,t.jsxs)(ej.PlaceholderContext.Provider,{value:W,children:[(W?tC:R).map((e,i)=>null===e||(0,P.isMember)(e)?(0,t.jsx)(ti,{canViewMembersMfaState:G,isSelected:!!e&&!!O[e.uid],member:e??{},onManageAccess:()=>{v(e)},onRemove:e?.uid?()=>q([e]):void 0,onSelectionChange:()=>e?_(e):void 0,revalidateSearch:n.mutate},e?.uid??`entity-${i}`):(0,t.jsx)(tv,{canCreateInvites:Y,canDeleteInvites:J,invite:e,isDSyncUser:(0,eh.isDSyncManagedInvite)(a,e),isSelected:!!O[e.id],onReinvite:s,onRemove:()=>q([e]),onSelectionChange:()=>_(e)},`invite-${e.id}`)),W||0!==R.length?null:(0,t.jsx)(tu,{isHobby:d,roleFilter:y,search:B,tab:l}),!W&&!A&&"members"===l&&(0,t.jsx)(em.LoadMoreButton,{loading:S,onClick:C})]}),b?(0,t.jsx)(V.ManageRoleModal,{accessGroupsData:o,member:b,onClose:()=>{v(null)},revalidateAccessGroups:async()=>{await c()},revalidateSearch:n.mutate}):null,(0,t.jsx)(tp,{active:x,members:Object.values(O),onRemoved:H,revalidateSearch:I,setActive:j})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eu.Tabs,{selected:l,setSelected:r,tabs:[{title:"Team Members",value:"members"},{title:"Pending Invitations",value:"pending"}]}),(0,t.jsx)(eb.AdditionalPermissionsRequired,{resource:"members"===l?"Team Members":"Pending Invitations",team:a})]})}var tI=e.i(4470337),tR=e.i(8012856),tP=e.i(213266);function t$(e){let{initialValue:s,setActive:n,onSave:l,teamRole:r,accessGroupsData:a}=e,[o,c]=(0,i.useState)(!0),[d,m]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1),[x,b]=(0,i.useState)(!1),[f,y]=(0,i.useState)(null),[T,S]=(0,i.useState)(s?.projects||[]),[A,E]=(0,i.useState)(s?.accessGroups);return(0,t.jsxs)(j.Modal.Modal,{active:o,disableFocusTrap:!0,onAnimationDone:()=>{m(!1),n(!1)},onClickOutside:e=>{!u&&!x&&(e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||c(!1))},children:[(0,t.jsx)(j.Modal.Body,{padding:0,children:(0,t.jsxs)(g.Stack,{gap:4,padding:6,children:[(0,t.jsxs)(g.Stack,{gap:1,children:[(0,t.jsx)(j.Modal.Title,{children:"Manage Project Roles"}),(0,t.jsx)(j.Modal.Subtitle,{children:(0,t.jsxs)(v.Text,{color:"gray-900",children:["Assign project level roles to this"," ",(0,t.jsx)(v.Text,{as:"span",color:"gray-900",weight:600,children:P.rolesMeta[r].label}),". ",(0,t.jsx)(M.Link,{external:!0,href:"/docs/rbac/access-roles#project-level-roles",variant:"highlight",children:"Learn more"})]})})]}),(0,t.jsx)(tR.ProjectMultiselect,{isOpen:x,onSetProjectRoles:S,projectRoles:T,setIsOpen:b}),(0,t.jsx)(tP.AccessGroupsManageSticky,{accessGroupsData:a||[],isOpen:u,onChange:e=>{E(e)},setIsOpen:h,value:A}),f?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.Spacer,{}),(0,t.jsx)(ew.Error,{label:!1,children:f.message})]}):null]})}),(0,t.jsxs)(j.Modal.Actions,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>c(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(j.Modal.Action,{loading:d,onClick:()=>{for(let e of(y(null),T))if(void 0===e.project)return void y({name:"project-not-selected",message:"Please select a project."});c(!1),l({projects:T,accessGroups:A||[]})},children:"Save"})]})]})}function tB(e){var s;let{value:n,onChange:l,disabled:r,teamRole:a}=e,[c,d]=(0,i.useState)(!1),{accessGroups:m}=(0,U.useAccessGroups)(),u={projects:(s=n||{}).projects?s.projects.map(e=>e.role?{id:e.project.id,role:e.role}:null).filter(tD):void 0,accessGroups:s.accessGroups&&m?s.accessGroups.map(e=>{let t=m.find(t=>t.accessGroupId===e)?.name;return t?{id:e,name:t}:null}).filter(tD):void 0};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Button,{disabled:r,onClick:()=>{d(!0)},type:"secondary",typeName:"button",children:(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(v.Text,{color:"inherit",children:"Manage Access"}),n?(0,t.jsx)(e9.ProjectAccessBadges,{projectAccess:u}):null]})}),c?(0,t.jsx)(t$,{accessGroupsData:m,initialValue:n,onSave:e=>{l(e)},setActive:d,teamRole:a}):null]})}function tD(e){return null!=e}var tF=e.i(654868),tN=e.i(1078258);function tO(e){let{canBypassProTrialSingleOwnerRequirement:s}=e,n=(0,y.useToasts)(),[l,r]=(0,i.useState)("members"),a=(0,P.useSearch)(l),[o,c]=(0,i.useState)(void 0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(g.Stack,{gap:6,children:[(0,t.jsx)(tz,{}),(0,t.jsx)(t_,{canBypassProTrialSingleOwnerRequirement:s,revalidateSearch:a.mutate}),(0,t.jsx)(tk,{membersSearch:a,onReinvite:c,selectedTab:l,setSelectedTab:r})]}),o?(0,t.jsx)(J,{active:!!o,invitees:[o],isReinvite:!0,onInvited:()=>{n.success("Successfully re-invited Team Member.")},revalidateSearch:a.mutate,setActive:()=>{c(void 0)}}):null]})}function tL(e){let{arePermissionsLoading:i,hasSufficientPermissions:s,canTeamInvite:n,error:l}=e;return l?(0,t.jsx)(d.ErrorText,{children:l}):n?i||s?(0,t.jsxs)(v.Text,{as:"span",color:"gray-900",children:["Learn more about"," ",(0,t.jsx)(M.Link,{external:!0,href:"/docs/rbac",variant:"highlight",children:"Team Members"})]}):(0,t.jsxs)(v.Text,{as:"span",color:"gray-900","data-testid":(0,T.tid)("members","not-enough-permissions"),children:["Additional permissions are required to manage ",(0,t.jsx)(M.Link,{external:!0,href:"/docs/rbac",variant:"highlight",children:"Team Members"})]}):(0,t.jsxs)(v.Text,{as:"span",color:"gray-900","data-testid":(0,T.tid)("members","is-hobby"),children:["This feature is available on the ",(0,t.jsx)(M.Link,{external:!0,href:"/pricing",variant:"highlight",children:"Pro plan"}),"."]})}function t_(e){let{revalidateSearch:a,canBypassProTrialSingleOwnerRequirement:d}=e,{team:v,mutate:M}=(0,E.useTeam)(),$=v?.billing?.plan==="hobby",{isReady:B,isRoleEnabled:D}=(0,eN.useIsRoleEnabled)(eN.RBACRole.VIEWER),{isReady:F,isRoleEnabled:N}=(0,eN.useIsRoleEnabled)(eN.RBACRole.DEVELOPER),{isReady:O}=(0,eN.useIsRoleEnabled)(eN.RBACRole.BILLING),L=(0,y.useToasts)(),[_,G]=(0,i.useState)(!1),{can:q,isLoading:U}=(0,w.default)(),H=q(k.Action.Create,k.Resource.TeamInvite),V=(0,eP.useOpenUpgradeModal)(),{canHaveProjectRole:W,isValidRoleCombination:Y}=(0,P.useRoleUtils)(),{value:K}=(0,I.useEntitlement)("v0-team-seats"),{value:Q}=(0,I.useEntitlement)("project-rbac-access-groups"),X=K&&v?.billing?.plan!=="enterprise",Z=!v||!B||!F||U||!O,ee=D?"VIEWER":N?"DEVELOPER":"MEMBER",[et,ei]=(0,i.useState)([{email:"",role:ee}]);(0,i.useEffect)(()=>{ei([{email:"",role:ee,entitlements:K?["v0"]:void 0}])},[ee,K]);let es=v?.inviteCode?`https://${C.PRODUCT_DOMAIN}/teams/invite/${v.inviteCode}`:null,[en,el]=(0,i.useState)(null),[er,ea]=(0,i.useState)(!1),eo=(0,i.useRef)(null),ed=!!(!$||K);function em(){if(!v||!eo.current||!eo.current.checkValidity())return;el(null);let e=!1;for(let t of et){if(!t.email)continue;let i=(0,P.parseEmailInput)(t.email);if(!s.default.isEmail(i))return void el(`Please enter a valid email address instead of "${t.email}".`);if(et.filter(e=>e.email===t.email).length>1)return void el(`Please remove duplicate email entries for "${t.email}".`);if("CONTRIBUTOR"===t.role&&!t.projects?.length&&!t.accessGroups?.length)return void el(`Please select at least one Project for the Contributor "${t.email}".`);if(t.projects?.some(e=>e.role&&!Y(t.role,e.role)))return void el(`Some project roles are unavailable for invitee ${t.email}`);e=!0}if(!e)return void el("Please complete the fields above.");ea(!0)}let[eu,eh]=(0,i.useState)(!1);async function ex(){if(v&&v.billing?.plan!=="hobby"){try{eh(!0);let{inviteCode:e}=await (0,S.fetchAPI)(`${A.API_TEAMS}/${v.id}`,{method:"PATCH",body:JSON.stringify({regenerateInviteCode:!0})});if(!e)throw Error();L.message({text:"Reset Invite Link successfully."}),await M()}catch(e){L.error((0,n.errorToString)(e,"Failed to reset Invite Link."))}eh(!1)}}let{contentDisabled:ej,inviteActionDisabled:ep,footerDisabled:eg}=function(e){let{loading:t,error:i,hasSufficientPermissions:s,canTeamInvite:n}=e;return t?{contentDisabled:!0,inviteActionDisabled:!0,footerDisabled:!0}:s&&n?i?{contentDisabled:!1,inviteActionDisabled:!0,footerDisabled:!1}:{contentDisabled:!1,inviteActionDisabled:!1,footerDisabled:!1}:{contentDisabled:!0,inviteActionDisabled:!0,footerDisabled:!1}}({loading:Z,error:en,hasSufficientPermissions:H,canTeamInvite:ed}),eb=(0,tI.useTriggerOnboardingEvent)();return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),em()},ref:eo,children:[(0,t.jsxs)(m.Fieldset,{children:[(0,t.jsxs)(c.FieldsetContent,{disabled:ej,children:[(0,t.jsxs)(g.Stack,{align:"center",direction:"row",justify:"space-between",children:[(0,t.jsx)(b.FieldsetSubtitle,{children:"Invite new members by email address"}),(0,t.jsx)(o.Button,{"data-testid":(0,T.tid)("members","invite-link"),disabled:ep,onClick:()=>G(!0),prefix:(0,t.jsx)(l.Link,{}),size:"small",type:"secondary",typeName:"button",children:"Invite Link"})]}),(0,t.jsx)(p.Spacer,{}),(0,t.jsx)(tF.default,{margin:0}),(0,t.jsx)("div",{className:tN.default.kwvgch,children:(0,t.jsx)(g.Stack,{"data-testid":(0,T.tid)("members","invite-form","fields"),direction:"column",gap:4,children:et.map((e,i)=>(0,t.jsxs)(g.Stack,{direction:{sm:"column",md:"row",lg:"row"},flex:"1",gap:{sm:4,md:2,lg:2},children:[(0,t.jsxs)(g.Stack,{flex:"1",children:[(0,t.jsx)(x.Label,{className:0===i?void 0:tN.default.hideOnMobile,id:`invitee-input-${i}`,value:"Email Address"}),(0,t.jsx)(h.Input,{"data-testid":(0,T.tid)("members","invitee-email",String(i)),id:`invitee-input-${i}`,maxLength:320,onChange:e=>{en&&el(null);let t=e.target.value;ei(e=>{let s=[...e];return s[i]={...s[i],email:t},s})},onBlur:e=>{let t=e.target.value;if(t.trim()){let e=(0,P.parseEmailInput)(t);e!==t&&ei(t=>{let s=[...t];return s[i]={...s[i],email:e},s})}},onPaste:t=>{if(e.email)return;let n=t.clipboardData.getData("text").split(/[\s,;]+/).filter(Boolean).map(P.parseEmailInput);n.every(e=>s.default.isEmail(e))&&(t.preventDefault(),ei(e=>{let t=[...e],s=t[i];return t.splice(i,1,...n.map(e=>({email:e,role:s.role,entitlements:s.entitlements}))),t}))},placeholder:"jane@example.com",typeName:"email",value:e.email})]}),(0,t.jsxs)(g.Stack,{flex:"1",children:[(0,t.jsx)(x.Label,{className:0===i?void 0:tN.default.hideOnMobile,value:"Role"}),(0,t.jsxs)(g.Stack,{direction:{sm:"column",md:"row",lg:"row"},gap:2,children:[(0,t.jsx)(ec,{disableRoles:v?.billing?.plan!=="pro"||"trialing"!==v.billing.status||d?[]:[{role:"OWNER",reason:"Pro Trials can not have more than one Owner"}],buttonStyle:{width:"100%"},disabled:$,onChange:e=>{ei(t=>{let s=[...t],n=X&&"VIEWER"===e?["v0"]:s[i].entitlements;return s[i]={...s[i],role:e,projects:W(e)?s[i].projects:void 0,entitlements:n},s})},testId:(0,T.tid)("members","invitee-role",String(i)),v0EntitlementChange:e=>{ei(t=>{let s=[...t];return s[i]={...s[i],entitlements:e?["v0"]:void 0},s})},v0EntitlementDisable:!!(X&&"VIEWER"===e.role),v0EntitlementValue:e.entitlements?.includes("v0")??!1,value:e.role,width:"auto"}),Q?(0,t.jsx)(f.Tooltip,{delayTime:300,disableTriggers:W(e.role),position:"top",text:`Project Roles are not available for the ${e.role} Role`,children:(0,t.jsx)(tB,{disabled:!W(e.role),onChange:e=>{el(null),ei(t=>{let s=[...t];return s[i]={...s[i],projects:e.projects,accessGroups:e.accessGroups},s})},teamRole:e.role,value:{projects:e.projects||[],accessGroups:e.accessGroups||[]}})}):null]})]}),(0,t.jsx)("hr",{className:"geist-hr-reset geist-show-on-mobile"})]},`invitee-${i}`))})}),(0,t.jsx)(o.Button,{onClick:()=>{let e=et.length;ei([...et,{email:"",role:ee,entitlements:X&&"VIEWER"===ee?["v0"]:void 0}]),setTimeout(()=>{let t=document.getElementById(`invitee-input-${e}`);t&&t.focus()},100)},prefix:(0,t.jsx)(r.PlusCircle,{}),size:"small",type:"secondary",typeName:"button",children:"Add more"})]}),(0,t.jsxs)(u.FieldsetFooter,{disabled:eg,highlight:$,children:[(0,t.jsx)(u.FieldsetFooter.Status,{children:(0,t.jsx)(tL,{arePermissionsLoading:U,canTeamInvite:ed,error:en,hasSufficientPermissions:H})}),(0,t.jsx)(u.FieldsetFooter.Actions,{children:ed?(0,t.jsx)(o.Button,{"data-testid":(0,T.tid)("members","invite-form","submit"),disabled:ep,onClick:em,size:"small",typeName:"submit",children:"Invite"}):(0,t.jsx)(o.Button,{"data-testid":(0,T.tid)("members","fieldset-upgrade-to-pro"),onClick:()=>V({source:"settings/members"}),size:"small",typeName:"button",children:"Upgrade"})})]})]}),(0,t.jsxs)(j.Modal.Modal,{active:_,"data-testid":(0,T.tid)("team-settings","members","invite-link-modal"),onClickOutside:()=>G(!1),width:450,children:[(0,t.jsxs)(j.Modal.Body,{children:[(0,t.jsx)(j.Modal.Title,{children:"Invite Link"}),(0,t.jsxs)(g.Stack,{align:"flex-start",gap:6,style:{paddingTop:"0.75rem"},children:[(0,t.jsxs)(j.Modal.Subtitle,{children:["Allow other people to join your Team through the linkÂ below.Â ",(0,z.formatCurrency)(v?.billing?.invoiceItems?.teamSeats?.price??2e3,v?.billing?.currency)," ","per user/month"]}),(0,t.jsx)(R.default,{inviteLink:es||void 0}),(0,t.jsx)(o.Button,{loading:eu,onClick:()=>void ex(),size:"small",type:"secondary",width:"100%",children:"Reset Invite Link"})]})]}),(0,t.jsx)(j.Modal.Actions,{children:(0,t.jsx)(j.Modal.Action,{fullWidth:!0,onClick:()=>G(!1),children:"Dismiss"})})]}),(0,t.jsx)(J,{active:er,invitees:et,onInvited:()=>{ei([{email:"",role:ee}]),eb("collaborators")},revalidateSearch:a,setActive:ea})]})}function tz(){return(0,t.jsxs)(g.Stack,{gap:4,children:[(0,t.jsx)(g.Stack,{align:"center",direction:"row",gap:2,children:(0,t.jsx)(v.Text,{as:"h1",size:24,children:(0,t.jsx)(a.SearchContextHighlighter,{children:"Members"})})}),(0,t.jsx)(v.Text,{color:"gray-900",children:"Manage team members and invitations"})]})}}}]);

//# sourceMappingURL=f3a6954f9cad8be8.js.map
//# debugId=7c437f31-d34f-56f3-a507-1945c29efff3
