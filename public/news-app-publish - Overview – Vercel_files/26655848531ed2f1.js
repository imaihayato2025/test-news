
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="8b3ad355-8a26-5a35-a44b-829f10b0d1a8")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{154848:e=>{e.v({fieldset:"use-domain-configured-module__o271Ma__fieldset"})},5077002:[e=>{"use strict";e.s({FieldsetTabs:()=>s},5077002);var t=e.i(6645307),n=e.i(6530772),r=e.i(5610210),i=e.i(1098821),a=e.i(4534698);function s(e){let{children:s,tabs:o,disabled:l,selected:d,defaultSelected:c=0,onChange:u,borderless:m}=e,[h,x]=(0,n.useState)(c),p=void 0!==d?d:h;return(0,t.jsxs)("div",{className:(0,r.clsx)({[String(a.default.disabled)]:l,[String(a.default.borderless)]:m}),"data-geist-fieldset-tabs":"",children:[(0,t.jsx)("div",{className:a.default.tabsRow,children:(0,t.jsx)(i.Tabs,{selected:d?o[d]:o[h],setSelected:e=>{if(l)return;let t=o.findIndex(t=>t===e);void 0===d&&x(t),u?.(t)},style:{boxShadow:"none"},tabs:o.map(e=>({title:e,value:e}))})}),n.Children.map(s,(e,t)=>t===p?e:null)]})}e.s({useHasCloudflareInFront:()=>g,useIsDomainOnCloudflare:()=>p},663004);var o=e.i(3521787),l=e.i(226017);e.i(501494);var d=e.i(6339279),c=e.i(6780185),u=e.i(3466887);let m=d.z.object({providers:d.z.array(d.z.object({role:d.z.string(),id:d.z.string()})),nameserverProviders:d.z.array(d.z.string())}),h=d.z.object({error:d.z.object({code:d.z.enum(["not_found","invalid_name","internal_server_error"]),message:d.z.string(),name:d.z.string()})});function x(e){let t=(0,l.useServerFlag)("enable-check-proxy-status",!1);return(0,o.default)(t&&e&&!(0,u.isPublicAlias)(e)?`/api/front-domains/check-proxy-status?domain=${e}`:null,async e=>{let t=await (0,c.safeFetch)(e,{successSchema:m,failureSchema:h});return t.isOk()?{isDomainOnCloudflare:t.value.nameserverProviders.includes("Cloudflare"),hasCloudflareInFront:t.value.providers.find(e=>"front-proxy"===e.role)?.id==="Cloudflare"}:{isDomainOnCloudflare:!1,hasCloudflareInFront:!1}})}function p(e){let{data:t}=x(e);return t?.isDomainOnCloudflare??!1}function g(e){let{data:t}=x(e);return t?.hasCloudflareInFront??!1}e.s({RemoveDomainModal:()=>I},5363829);var f=e.i(674684),j=e.i(8934201),v=e.i(8811733),y=e.i(8084653),b=e.i(555528),w=e.i(8158100),S=e.i(1164214),N=e.i(3585235),C=e.i(5785123),k=e.i(9505396);function I(e){let{setRemoveModal:r,removeModal:i,domain:a,onRemoveDomain:s,removing:o,error:l}=e,d=(0,f.useRouter)(),c=(0,n.useCallback)(()=>r(!1),[r]),{can:u}=(0,N.default)(),m=u(C.Action.Update,C.Resource.Project),{data:h}=(0,k.useProjectDomains)(d.query.project,{redirect:a}),x=(h?.length??0)>0,p=(0,n.useCallback)(async()=>{await s({removeRedirects:x})},[x,s]),g=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Modal.Header,{children:(0,t.jsx)(j.Modal.Title,{children:"Remove Domain from Project"})}),(0,t.jsx)(v.Spacer,{}),(0,t.jsxs)(y.Text,{children:["Removing ",(0,t.jsx)("strong",{children:a})," will disconnect it from your project. This project will no longer be accessible from this domain, including in production."]}),(0,t.jsx)(v.Spacer,{}),x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(w.Note,{type:"warning",children:["This domain has ",h?.length," redirect",h?.length===1?"":"s"," pointing to it:"," ",h?.map(e=>`"${e.name}"`).join(", "),". Removing this domain will also remove the domains that redirect to it."]}),(0,t.jsx)(v.Spacer,{})]}):null,l?(0,t.jsx)(w.Note,{type:"error",children:l}):null]}),I=(h?.length??0)+1,D=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.Modal.Action,{onClick:()=>r(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(b.Tooltip,{disableTriggers:m,text:"You don't have permission to manage domains in this project. Ask your team admin to manage domains or grant you the member role or higher.",children:(0,t.jsx)(j.Modal.Action,{"data-testid":(0,S.tid)("project","settings","domains","remove-domain-modal","confirm-button"),disabled:o||!m,loading:o,onClick:p,type:"error",children:x?`Remove ${2===I?"Both":`All ${I}`} Domains`:"Remove"})})]});return(0,t.jsxs)(j.Modal,{active:i,"data-testid":(0,S.tid)("project","settings","domains","remove-domain-modal"),onClickOutside:c,width:"520px",children:[(0,t.jsx)(j.Modal.Body,{children:g}),(0,t.jsx)(j.Modal.Actions,{children:D})]})}},[663004,5363829]],1196758:e=>{"use strict";e.s({default:()=>tu},1196758);var t=e.i(6645307),n=e.i(6530772),r=e.i(9240532),i=e.i(674684),a=e.i(9185154),s=e.i(5163670),o=e.i(8811733),l=e.i(889716),d=e.i(8084653),c=e.i(2362802),u=e.i(3514588),m=e.i(7414586),h=e.i(878537),x=e.i(5535439),p=e.i(226017),g=e.i(557317),f=e.i(3521787),j=e.i(5674541),v=e.i(1917237),y=e.i(631755),b=e.i(653558),w=e.i(2733203),S=e.i(1190215),N=e.i(4105925),C=e.i(4646240),k=e.i(555528),I=e.i(584439),D=e.i(7315479),E=e.i(6465700),T=e.i(5124754),R=e.i(1164214),A=e.i(3509620),P=e.i(5333425),z=e.i(3585235),_=e.i(5785123),O=e.i(2530419),B=e.i(2229718),F=e.i(6606445),M=e.i(4760712),$=e.i(2504184),L=e.i(9505396),W=e.i(9132105),V=e.i(3466887),G=e.i(4131991),U=e.i(452057),Y=e.i(8943741),H=e.i(3546860),q=e.i(3156464),J=e.i(3420088),K=e.i(3563812),Q=e.i(9975426),X=e.i(6649026),Z=e.i(1183506),ee=e.i(9336536);let et=new Set(["incorrect_txt_record","txt_on_another_project","existing_project_domain","txt_on_wrong_domain"]),en={info:null,type:"success"},er={info:null,type:"loading"};var ei=e.i(2567082),ea=e.i(6531164),es=e.i(611347),eo=e.i(5077002),el=e.i(209032),ed=e.i(8158100),ec=e.i(604868),eu=e.i(3904906),em=e.i(2448773),eh=e.i(8975439),ex=e.i(663004),ep=e.i(154848),eg=e.i(6621512),ef=e.i(3920197);function ej(e){let{text:n,isValue:r}=e;return(0,t.jsx)(el.Snippet,{icon:!1,prompt:!1,style:{border:"none",padding:"0px 0px",background:"transparent"},text:n,type:"lite",width:r?"100%":void 0})}let ev=(0,n.memo)(function(e){let{records:n,domain:r}=e,i=(0,ex.useIsDomainOnCloudflare)(r)?(0,t.jsx)(h.default,{flex:1,children:(0,t.jsxs)(l.Stack,{align:"flex-start",gap:1.5,children:[(0,t.jsxs)(l.Stack,{direction:"row",gap:1,children:[(0,t.jsx)(d.Text,{color:"gray-900",size:13,children:"Proxy"}),(0,t.jsx)(k.Tooltip,{text:"We've detected your DNS provider is Cloudflare. When configuring your DNS records, make sure to disable the Cloudflare proxy for the best performance & security.",children:(0,t.jsx)(eg.Information,{color:"gray-900",size:12})})]}),(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsx)(ef.CrossCircle,{color:"gray-900"}),"Disabled"]})]})}):null;return(0,t.jsxs)(h.default,{className:"geist-overflow-scroll-x",row:!0,style:{borderRadius:"6px",padding:"10px 12px",border:"1px solid var(--ds-gray-400)"},children:[(0,t.jsx)(h.default,{flex:"0 0 auto",children:(0,t.jsxs)(l.Stack,{align:"flex-start",gap:1.5,children:[(0,t.jsx)(d.Text,{color:"gray-900",size:13,children:"Type"}),n.map(e=>(0,t.jsx)(ej,{text:e.type},e.type))]})}),(0,t.jsx)(h.default,{flex:"0 0 auto",children:(0,t.jsxs)(l.Stack,{align:"flex-start",gap:1.5,children:[(0,t.jsx)(d.Text,{color:"gray-900",size:13,children:"Name"}),n.map(e=>(0,t.jsx)(ej,{text:e.name},e.name))]})}),(0,t.jsx)(h.default,{flex:i?"0 0 auto":"1",children:(0,t.jsxs)(l.Stack,{align:"flex-start",gap:1.5,children:[(0,t.jsx)(d.Text,{color:"gray-900",size:13,children:"Value"}),n.map(e=>(0,t.jsx)(ej,{isValue:!0,text:e.value},e.value))]})}),i]})});function ey(e){let{href:n="/guides/why-is-my-vercel-domain-unverified",children:r}=e;return(0,t.jsx)(ed.Note,{label:!1,size:"small",children:(0,t.jsxs)("span",{children:[r||"Depending on your provider, it might take some time for the DNS records to apply."," ",(0,t.jsx)(c.Link,{external:!0,href:n,variant:"highlight",children:"Learn More"})]})})}var eb=e.i(1940235);let ew={status:"Valid Configuration",info:null,type:"success"},eS={status:"Waiting for DNS propagation",info:(0,t.jsxs)(em.default,{children:["We're"," monitoring for Cloudflare to propagate your changes. This process can take up to 48 hours to complete."," ",(0,t.jsx)(c.Link,{external:!0,href:"https://vercel.com/guides/why-is-my-vercel-domain-unverified#domain-is-verified-but-can't-access-the-website",variant:"highlight",children:"Learn more."})]}),type:"loading"},eN={status:"Valid Configuration",info:(0,t.jsxs)(ed.Note,{type:"warning",children:["Your domain is behind a reverse proxy. This can limit Vercel's traffic visibility for security measures, introduce latency that degrades performance, and create cache management issues that may affect reliability."," ",(0,t.jsx)(c.Link,{external:!0,href:"https://vercel.com/guides/can-i-use-a-proxy-on-top-of-my-vercel-deployment",children:"Learn more."})]}),type:"success"},eC={status:"Checking Domain Status",info:null,type:"loading"},ek={status:"Domain Expired",info:(0,t.jsxs)("span",{children:["Your Domain has expired and cannot be used anymore."," ",(0,t.jsx)(c.Link,{external:!0,href:"https://vercel.link/expired-domain",variant:"highlight",children:"Learn More"})]}),type:"warning"},eI={status:"DNSSEC must be disabled",info:(0,t.jsxs)(v.Error,{children:["Your domain's nameservers are pointing to ",eu.PRODUCT,", but you must disable DNSSEC with your domain registrar in order for your nameservers to resolve globally."]}),type:"error"},eD={pending_domain_verification:{status:"Domain is pending verification",messageBuilder:(e,n,r,i)=>(0,t.jsxs)(em.default,{noMargin:!0,preset:"body-2",children:["Another Vercel account is using this domain. Set the following"," ",r," record on"," ",(0,t.jsx)(eh.default,{children:n})," to use"," ",(0,t.jsx)(eh.default,{children:e})," in this project."," ",i?(0,t.jsxs)(t.Fragment,{children:["If you wish to"," ",(0,t.jsx)(c.Link,{href:"/guides/how-can-i-move-a-domain-to-a-team#move-button",tab:!0,variant:"highlight",children:"transfer"})," ","the entire domain, this will need to be done by the current domain owner."]}):null," ","Once the verification is completed and the domain is successfully configured, the TXT record can be removed."]})}};function eE(e,t){return t===e?"@":e.slice(0,e.length-t.length-1)}function eT(e){return null!=e}let eR=function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.name,l=(0,V.isPublicAlias)(a),{data:m,mutate:x,isValidating:p}=(0,Y.default)(l?"":a,i),g=(0,ex.useHasCloudflareInFront)(a),{zoneRegistryDomain:y,domainBoughtAt:b,domainExpiresAt:w,intendedNameservers:S,nameservers:N,ownsVercelZone:C,zone:k}=(0,n.useMemo)(()=>{let e=m?.domain.name||null,t=m?.domain.boughtAt||null,n=m?.domain.expiresAt||null,r=m?.domain.intendedNameservers||[];return{zoneRegistryDomain:e,domainBoughtAt:t,domainExpiresAt:n,intendedNameservers:r,nameservers:m?.domain.nameservers||[],ownsVercelZone:!!e,zone:!!m?.domain.zone}},[m]),D=(0,I.useToasts)(),E=e.apexName===a,T=a.startsWith("*.");(0,f.default)(`refresh-domain-config-internal-${a}`,()=>x(),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!1,refreshInterval:m&&0===S.length?1e4:void 0});let{team:R}=(0,u.useTeam)(),[A,P]=(0,n.useState)(!1),{data:z,error:_,mutate:O,isValidating:B}=(0,K.default)(l||!A?"":a,{strict:!1},{shouldRetryOnError:!1,...i}),[F,M]=(0,n.useState)(!1),$=(0,n.useMemo)(()=>async e=>{if(!F)try{M(!0);let t=R?`?teamId=${encodeURIComponent(R.id)}`:"";await (0,Z.fetchAPI)(`${ee.API_DOMAINS}/${encodeURIComponent(a)}${t}`,{method:"PATCH",body:JSON.stringify({zone:!!e}),throwOnHTTPError:!0}),await x()}catch(t){let e=t instanceof Error?t.message:"Failed to update zone.";D.error(e)}finally{M(!1)}},[R,a,x,D,F,M]),L=(0,n.useCallback)(async()=>await Promise.all([x(),O()]),[x,O]),W=(0,ec.useIsMobile)(),U=(0,G.useHasDomainBeenConfiguredWithDomainConnect)(a);return[(0,n.useMemo)(()=>{if((0,V.isPublicAlias)(a))return ew;if(!1===e.verified&&e.verification?.[0]){let n=e.verification[0],i=eD[n.reason];return{status:i?.status||"Domain in use",info:(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(eo.FieldsetTabs,{borderless:!0,tabs:["Domain verification"],children:[(0,t.jsxs)(es.Fieldset,{borderlessTabs:!0,children:[(0,t.jsxs)(ea.FieldsetContent,{noPadding:!0,children:[i?.messageBuilder?i.messageBuilder(a,n.domain,n.type,e.apexName===a):null,(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0},children:(0,t.jsx)(ev,{domain:a,records:[{type:n.type,name:eE(n.domain,e.apexName),value:`${n.value}`}]})})]}),r.info?(0,t.jsx)("div",{style:{paddingTop:8},children:r.info}):null]}),(0,t.jsx)(t.Fragment,{})]})}),type:"error"}}if((0,G.isDomainExpired)({expiresAt:w}))return ek;let n=(0,t.jsxs)(ea.FieldsetContent,{noPadding:!0,children:[(0,t.jsxs)(d.Text,{style:{marginBottom:13},children:["To use Vercel Nameservers, enable Vercel DNS. This can be disabled later from"," ",(0,t.jsx)(c.Link,{external:!0,href:R?`/${R.slug}/~/domains/${encodeURIComponent(y||e.apexName)}`:`/dashboard/domains/${encodeURIComponent(y||e.apexName)}`,variant:"highlight",children:"Domain Settings"}),"."]}),(0,t.jsx)(h.default,{row:!W,children:(0,t.jsx)(j.Button,{disabled:F,loading:F,onClick:()=>{$(!0)},size:"small",type:"secondary",typeName:"button",children:"Enable Vercel DNS"})})]}),i=(0,t.jsxs)(ea.FieldsetContent,{noPadding:!0,children:[(0,t.jsxs)(d.Text,{style:{marginBottom:13},children:["Set the nameservers of"," ",(0,t.jsx)(d.Text,{as:"span",weight:500,children:y||e.apexName})," ","(apex domain) to:"]}),(0,t.jsx)(h.default,{row:!W,children:(0,t.jsx)(h.default,{children:0===S.length&&k?(0,t.jsx)(s.Skeleton,{height:60,width:"100%"}):(0,t.jsx)(el.Snippet,{icon:!1,prompt:!1,style:{height:"100%",color:k?void 0:"var(--ds-gray-900)"},text:S.length&&k?S:["Vercel DNS is not enabled"],width:"100%"})})}),(0,t.jsx)(o.Spacer,{y:.75}),(0,t.jsxs)(h.default,{children:[(0,t.jsx)(d.Text,{style:{marginBottom:13,marginTop:2},children:"Current nameservers:"}),(0,t.jsx)(el.Snippet,{icon:!1,prompt:!1,style:{height:"100%",color:k?"var(--ds-red-900)":"var(--ds-gray-900)"},text:0!==N.length?N:"No Nameservers Found",type:"lite",width:"100%"})]}),(0,t.jsx)(o.Spacer,{}),(0,t.jsx)(ey,{})]}),l=k?i:n,u=(0,t.jsx)(ev,{domain:a,records:[{type:E?"A":"CNAME",name:E?"@":eE(a,e.apexName),value:E?"76.76.21.21":"cname.vercel-dns.com."}]});if(A||P(!0),!z&&!_)return eC;if(_)return{status:"Failed to Load Domain",info:(0,t.jsx)(v.Error,{children:_.message}),type:"error"};if(!z)return eC;if("zeit.world"===z.serviceType&&z.dnssecEnabled)return eI;if(!z.misconfigured)return g?eN:ew;if(U)return eS;if(b&&b>Date.now()-(0,ei.default)("30m")&&!z.configuredBy)return{status:"Waiting for Propagation",info:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(em.default,{noMargin:!0,preset:"body-2",children:eb.DNS_PROPAGATION_WARNING}),(0,t.jsx)(o.Spacer,{}),(0,t.jsx)(em.default,{noMargin:!0,preset:"body-2",children:"Once this process is completed, your domain will automatically be assigned to your latest production deployment."})]}),type:"spinner"};let[m]="zeit.world"===z.serviceType&&z.actions||[];if(Array.isArray(m)&&m.length>0){let e=m.filter(e=>"delete"===e.action),n=m.filter(e=>"add"===e.action);return{status:"Invalid Configuration",info:(0,t.jsxs)(t.Fragment,{children:[e.length>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(em.default,{noMargin:!0,preset:"body-2",children:["Please"," ",y?(0,t.jsx)(c.Link,{as:`/dashboard/${R?`${R.slug}/`:""}domains/${encodeURIComponent(y)}`,href:`/dashboard/${R?"[teamSlug]/":""}domains/[domain]`,variant:"highlight",children:"remove"}):"remove"," ","the following conflicting DNS record",1===e.length?"":"s",":"]}),(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0},children:(0,t.jsx)(ev,{domain:a,records:e.map(e=>e.record)})})]}),n.length>0&&(0,t.jsxs)(t.Fragment,{children:[e.length>0&&(0,t.jsx)(o.Spacer,{}),(0,t.jsxs)(em.default,{noMargin:!0,preset:"body-2",children:[e.length>0?"Afterwards, please":"Please"," ",y?(0,t.jsx)(c.Link,{as:`/dashboard/${R?`${R.slug}/`:""}domains/${encodeURIComponent(y)}`,href:`/dashboard/${R?"[teamSlug]/":""}domains/[domain]`,variant:"highlight",children:"add"}):"add"," ","the following DNS record",1===n.length?"":"s",":"]}),(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0},children:(0,t.jsx)(ev,{domain:a,records:n.map(e=>e.record)})})]})]}),type:"error"}}if(z.conflicts&&z.conflicts.length>0&&z.conflicts.every(e=>"CAA"===e.type)){let n=z.conflicts.some(e=>e.value.includes(" issuewild ")),r=z.conflicts[0].name===e.apexName,i=T?a.split(".").slice(1).join("."):a;return{status:"Invalid Configuration",info:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eo.FieldsetTabs,{borderless:!0,tabs:["CAA"],children:(0,t.jsx)(es.Fieldset,{borderlessTabs:!0,children:(0,t.jsxs)(ea.FieldsetContent,{noPadding:!0,children:[(0,t.jsxs)(em.default,{noMargin:!0,preset:"body-2",children:["Set the following"," ",(0,t.jsx)(c.Link,{href:"/docs/domains/troubleshooting#missing-caa-records",tab:!0,variant:"highlight",children:"CAA record"})," ","on your DNS provider to continue:"]}),(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0},children:(0,t.jsx)(ev,{domain:a,records:[{type:"CAA",name:r?"@":eE(i,e.apexName),value:n&&i===z.conflicts[0].name?'0 issuewild "letsencrypt.org"':'0 issue "letsencrypt.org"'}]})}),(0,t.jsx)(o.Spacer,{}),(0,t.jsx)(ey,{})]})})})}),type:"error"}}if(T)return{status:"Invalid Configuration",info:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(eo.FieldsetTabs,{borderless:!0,tabs:["Nameservers"],children:(0,t.jsx)(es.Fieldset,{borderlessTabs:!0,className:ep.default.fieldset,children:l})})}),type:"error"};if(z.conflicts&&z.conflicts.length>0){let{conflicts:n}=z,r=1===Array.from(new Set(n.map(e=>e.type))).length;return{status:"Invalid Configuration",info:(0,t.jsxs)(eo.FieldsetTabs,{borderless:!0,tabs:[E?"A Record (Recommended)":"CNAME",C?"Nameservers":null].filter(eT),children:[(0,t.jsx)(es.Fieldset,{borderlessTabs:!0,children:(0,t.jsxs)(ea.FieldsetContent,{noPadding:!0,children:[(0,t.jsxs)(em.default,{noMargin:!0,preset:"body-2",children:["Remove the following conflicting DNS"," ",r?"record":"records"," from your DNS provider:"]}),(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0},children:(0,t.jsx)(ev,{domain:a,records:n.sort((e,t)=>e.type.localeCompare(t.type)).map(t=>({...t,name:eE(t.name,e.apexName)}))})}),(0,t.jsx)(o.Spacer,{}),(0,t.jsx)(em.default,{noMargin:!0,preset:"body-2",children:"Afterwards, set the following record on your DNS provider to continue:"}),(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0},children:u})]})}),C?(0,t.jsx)(es.Fieldset,{borderlessTabs:!0,className:ep.default.fieldset,children:l}):null]}),type:"error"}}return{status:"Invalid Configuration",info:(0,t.jsxs)(eo.FieldsetTabs,{borderless:!0,onChange:e=>{1===e&&0===S.length&&x()},tabs:[E?"A Record (Recommended)":"CNAME (Recommended)",C?"Nameservers":null].filter(eT),children:[(0,t.jsx)(es.Fieldset,{borderlessTabs:!0,children:(0,t.jsxs)(ea.FieldsetContent,{noPadding:!0,children:[(0,t.jsx)(d.Text,{children:"Set the following record on your DNS provider to continue:"}),(0,t.jsx)(em.default,{preset:"body-2",style:{marginBottom:0,marginTop:13},children:u}),(0,t.jsx)(o.Spacer,{}),(0,t.jsx)(ey,{})]})}),C?(0,t.jsx)(es.Fieldset,{borderlessTabs:!0,className:ep.default.fieldset,children:l}):null]}),type:"error"}},[a,e.verified,e.verification,e.apexName,w,R,y,W,F,S,k,N,E,A,z,_,U,b,T,C,r.info,$,g,x]),L,B||p]};var eA=e.i(5226544);let eP={status:null,info:null,type:"success"},ez={status:"Checking Domain Status",info:null,type:"loading"},e_={status:"Generating SSL Certificate",info:null,type:"spinner"},eO=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,i.useRouter)().query.teamSlug,{can:s}=(0,z.default)(),o=s(_.Action.List,_.Resource.DomainCertificate),{data:l,error:d,mutate:u,isValidating:m}=(0,eA.default)((0,V.isPublicAlias)(e)||!o?null:{cn:e},{shouldRetryOnError:!1,...r});return[(0,n.useMemo)(()=>{if((0,V.isPublicAlias)(e)||!o)return eP;if(!d&&!l)return ez;if(d?.status===404||!l?.certs)return e_;if(d)return{status:"Failed to Load Cert",info:(0,t.jsx)(v.Error,{children:d.message}),type:"error"};let n=l.certs.filter(t=>t.cns.some(t=>(function(e,t){if((e=e.toLowerCase())===(t=t.toLowerCase()))return!0;if(e.startsWith("*.")){let n=e.slice(1);return RegExp(`^[^\\.]+${n.replace(/\./g,"\\.")}$`).test(t)}return!1})(t,e))),r=n.length;if((n=n.filter(e=>e.expiresAt>Date.now())).length)return eP;if(r)return{status:"SSL Cert Expired",info:(0,t.jsxs)(v.Error,{children:["Your SSL cert has expired, please update your"," ",(0,t.jsx)(c.Link,{as:`/${a}/~/domains/${encodeURIComponent(e)}`,href:"/dashboard/[teamSlug]/domains/[domain]",tab:!0,variant:"highlight",children:"cert settings"}),"."]}),type:"error"};return e_},[l,e,d,a,o]),u,m]};var eB=e.i(3138389),eF=e.i(8252206),eM=e.i(5938635),e$=e.i(8761340),eL=e.i(3447305);let eW={status:"Checking Domain Status",info:null,type:"loading"};function eV(e){let{children:n}=e;return(0,t.jsx)(d.Text,{lineHeight:24,children:n})}let eG=function(e,r,i,a){let s=r?.targets?.production,o=!!r?.link,u=r?.link?.productionBranch||"Default Branch",{data:{environments:m}}=(0,q.useAllEnvironments)(r?.id),{data:h,error:x,mutate:p,isValidating:g}=(0,eM.default)(e,{shouldRetryOnError:!1,...a,refreshInterval:void 0}),{data:f,mutate:j}=(0,e$.default)({domain:e,filterDeleted:!1},a);return[(0,n.useMemo)(()=>{if(!x&&!h||!i)return eW;if(x?.status===404){if(i.gitBranch){let e;return e=i.gitBranch,{status:"No Deployment",info:(0,t.jsxs)(eV,{children:["Your domain was not yet assigned to the latest commit on your Git Branch. To assign it, please push a new commit to the"," ",(0,t.jsx)(eh.default,{children:e})," Git Branch."]}),type:"warning"}}return s?f&&i.createdAt&&f.deletedAt&&f.deploymentId===s.id&&!(i.createdAt-f.deletedAt>0)?{status:"Missing Alias",info:(0,t.jsxs)(d.Text,{children:["Your Domain isn't assigned to a Deployment anymore, as the underlying Alias was manually removed by running"," ",(0,t.jsx)(eh.default,{children:"vercel alias rm"})," with our"," ",(0,t.jsx)(c.Link,{href:"/cli",variant:"highlight",children:"command-line interface"})," ","or using our"," ",(0,t.jsx)(c.Link,{href:"/docs/api",tab:!0,variant:"highlight",children:"API"}),"."]}),type:"warning"}:"ERROR"===s.readyState?{status:"Failed to Assign",info:(0,t.jsxs)(d.Text,{children:["Your most recent Production Deployment has failed and your Domain"," ","couldn't be assigned. Your domain will be assigned on your next successful Production Deployment."]}),type:"error"}:"CANCELED"===s.readyState?{status:"Deployment Cancelled",info:(0,t.jsx)(d.Text,{children:"Your most recent Production Deployment was canceled and your Domain couldn't be assigned. Your domain will be assigned on your next successful Production Deployment."}),type:"warning"}:{status:"Deploying",info:null,type:"spinner"}:{status:"No Deployment",info:(0,t.jsxs)(d.Text,{children:["Your domain is properly configured, but you don't have a production deployment.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"To deploy to production,"," ",(0,t.jsxs)(c.Link,{href:"/docs/git",tab:!0,variant:"highlight",children:["push to ",u]}),", or run ",(0,t.jsx)(eh.default,{noWrap:!0,children:"vercel --prod"})," with our"," ",(0,t.jsx)(c.Link,{href:"/cli",tab:!0,variant:"highlight",children:"command-line interface"}),"."]}),type:"warning"}}if(x)return{status:"Failed to Load Deployment",info:(0,t.jsx)(v.Error,{children:x.message}),type:"error"};if(h?.projectId!==i.projectId)return{status:"Domain Being Used",info:(0,t.jsxs)(l.Stack,{gap:8,children:[(0,t.jsxs)(d.Text,{children:[(0,t.jsx)("b",{children:e})," is currently being used in another project:"," ",(0,t.jsx)(c.Link,{href:`https://${h?.host}`,tab:!0,variant:"highlight",children:h?.host}),"."]}),(0,t.jsx)(d.Text,{children:"One domain can only point to one deployment. This might break the existing alias."})]}),type:"warning"};if(i.redirect)return{status:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{whiteSpace:"nowrap",marginRight:".25rem"},children:"Redirects to"})," ",(0,t.jsx)(eh.default,{className:"geist-ellipsis",style:{whiteSpace:"nowrap"},title:i.redirect,children:i.redirect})]}),info:null,type:"success"};if(o){if(i.customEnvironmentId){let e=m.find(e=>e.id===i.customEnvironmentId);if(e)return e.id===A.EnvTarget.Preview?{status:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Assigned to:"}),(0,t.jsxs)("span",{className:"inline-flex items-center",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(eL.EnvironmentIcon,{id:e.id}),(0,P.envName)(e)]}),(0,t.jsx)(eF.SlashForward,{color:"gray-600"}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(eB.GitBranch,{}),(0,t.jsx)(d.Text,{monospace:!0,children:i.gitBranch})]})]})]}),info:null,type:"success"}:{status:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Assigned to:"}),(0,t.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,t.jsx)(eL.EnvironmentIcon,{id:e.id}),(0,P.envName)(e)]})]}),info:null,type:"success"}}return i.gitBranch?{status:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{whiteSpace:"nowrap"},children:"Assigned to"})," ",(0,t.jsx)(eh.default,{className:"geist-ellipsis",style:{whiteSpace:"nowrap",margin:"0 .25rem"},title:i.gitBranch,children:i.gitBranch}),"branch"]}),info:null,type:"success"}:{status:`Assigned to ${u}`,info:null,type:"success"}}return{status:"Assigned",info:null,type:"success"}},[x,h,o,e,i,s,u,f,m]),(0,n.useCallback)(async()=>{await Promise.all([p(),j()])},[p,j]),g]};var eU=e.i(2101895),eY=e.i(6055110),eH=e.i(3375633),eq=e.i(4968913),eJ=e.i(1093245),eK=e.i(5528554),eQ=e.i(3821772);let eX=function(e){let{type:n,children:r}=e;switch(n){case"running checks":return(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,className:"font-medium text-amber-800 ",children:[(0,t.jsx)(eQ.Spinner,{}),r]});case"failed checks":return(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,className:"font-medium text-amber-800",children:[(0,t.jsx)(eq.Stop,{}),r]});case"warning":return(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,style:{color:"var(--ds-amber-800)",fontWeight:500},children:[(0,t.jsx)(eq.Stop,{}),r]});case"error":return(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,style:{color:"var(--ds-red-700)",fontWeight:500},children:[(0,t.jsx)(eJ.WarningFill,{color:"red-700"}),r]});case"success":return(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,style:{color:"var(--accents-6)"},children:[(0,t.jsx)(eK.CheckCircleFill,{className:"min-w-[24px]",color:"blue-700"}),r]});case"spinner":case"loading":return(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:1,style:{color:"var(--ds-gray-900)"},children:[(0,t.jsx)(eQ.Spinner,{size:24}),r]});default:return null}};var eZ=e.i(5363829),e0=e.i(8567675),e1=e.i(741445),e2=e.i(3462320),e3=e.i(185283);function e5(e){let{status:n,info:r,type:i}=e,a={type:i,status:n?(0,t.jsx)(eX,{type:i,children:n}):null,info:r?(0,t.jsx)(l.Stack,{style:{marginTop:0},children:r}):null,statuses:[],priority:(e=>{switch(e){case"loading":return 3;case"error":return 2;case"warning":return 1;default:return 0}})(i)};return("spinner"===i||"success"===i)&&(a.status=null,a.statuses=n?[(0,t.jsx)(eX,{type:i,children:n})]:[]),a}let e4=e=>{let{project:n,projectDomain:r=null,gitBranch:a,setGitBranch:s,branchError:o,disabled:u,disabledReason:m,domainDispatch:h,saving:x}=e,{query:{teamSlug:p,project:g}}=(0,i.useRouter)();return(0,t.jsxs)(l.Stack,{direction:{sm:"column",md:"row"},gap:.5,children:[(0,t.jsxs)(l.Stack,{align:"center",className:"mr-3 w-[125px]",direction:"row",gap:1,justify:"space-between",style:{minWidth:"125px"},children:[(0,t.jsx)(d.Text,{children:"Git Branch"}),(0,t.jsx)(k.Tooltip,{text:m||(0,t.jsxs)(t.Fragment,{children:["If a Git Branch is selected, all merges into that branch will be made available under the specified Domain.",(0,t.jsx)("br",{}),(0,t.jsx)("br",{}),"If a Redirect is enabled, it takes priority."]}),children:(0,t.jsx)(E.InformationFillSmall,{})})]}),(0,t.jsxs)(l.Stack,{align:"center",style:{width:"100%"},children:[r?n?.link?(0,t.jsx)(e1.GitBranchSelectorWithProject,{disabled:x||u,onChange:e=>s(e??null),onFocus:()=>h({type:"RESET_BRANCH_ERROR"}),value:a}):(0,t.jsxs)("span",{children:[(0,t.jsx)(c.Link,{as:`/${p}/${g}/settings/git`,href:"/[teamSlug]/[project]/settings/git",variant:"highlight",children:"Link a Git Repository"})," ","to connect your domain to a Git Branch"]}):(0,t.jsx)(y.Input,{"aria-label":"Loading",disabled:!0,placeholder:"Loading...",value:"",width:572}),o?(0,t.jsx)(v.Error,{"data-testid":(0,R.tid)("project","alias-domain","entity","git-branch-error"),error:o}):null]})]})};function e6(e){let{domain:n}=e,{data:r}=(0,Y.default)((0,V.isPublicAlias)(n)?"":n,{refreshWhenHidden:!1,refreshWhenOffline:!1,ignoreForbiddenError:!0,ignoreNotFound:!0}),i=(0,G.getSuggestedApex)(n),{isTeam:a,teamSlug:s}=(0,u.useTeam)();return r?(0,t.jsx)(l.Stack,{style:{marginTop:20,paddingTop:16,borderTop:"1px solid var(--accents-2)"},children:(0,t.jsx)(d.Text,{children:(0,t.jsxs)(c.Link,{href:a&&s?`/${s}/~/domains/${n}`:`/dashboard/domains/${n}`,variant:"highlight",children:["View DNS Records & More for ",i," →"]})})}):null}function e8(e){let{projectDomain:n,currentUI:r}=e,{data:i}=(0,J.useDomainConnectStatus)(n.name),{team:a}=(0,u.useTeam)(),s=(0,G.getDomainConnectApplyUrl)(n,a?.id),o=(0,x.useRouter)(),l=(0,G.useHasDomainBeenConfiguredWithDomainConnect)(n.name),{isLoading:d}=(0,K.default)(l?"":n.name,{strict:!1},{shouldRetryOnError:!1});return l&&"loading"===r.type&&!d?(0,t.jsx)(j.Button,{onClick:()=>{o.replace(window.location.pathname)},size:"small",type:"secondary",children:"Manual Configuration"}):"error"===r.type&&i?.providerId==="cloudflare.com"?(0,t.jsx)(c.ButtonLink,{href:s,onClick:()=>{(0,F.track)("click_automatic_configuration")},size:"small",type:"secondary",children:"Configure Automatically"}):null}let e7=n.default.memo(function(e){let{domain:r,project:i,projectIdOrName:a,refreshRate:s,revalidateDomains:o,teamId:c,selfRedirect:h=!1,onEditVercelAppDomain:x=()=>{}}=e,p={refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:"number"==typeof s,revalidateOnFocus:"number"==typeof s},[g,y]=(0,B.useMachine)(e3.DomainMachine,{input:void 0}),{data:E,mutate:F}=(0,L.useProjectDomain)({projectId:r.projectId,name:r.name},{fallbackData:r,...p}),[G,Y]=(0,n.useState)("view"),[H,J]=(0,n.useState)(!1),[K,ei]=(0,n.useState)(!1),{data:ea}=(0,q.useCustomEnvironments)(a);y({type:"setup",initial:{domain:E?.name||r.name,customEnvironments:ea?.customEnvironments??[],project:i,environmentId:E?.customEnvironmentId||null,gitBranch:E?.gitBranch||null,redirect:E?.redirect||null,redirectStatusCode:E?.redirectStatusCode||null}});let{can:es,isLoading:eo}=(0,z.default)({projectIdOrName:i?.name}),{team:el,isReady:ed}=(0,u.useTeam)(),ec=(0,I.useToasts)(),eu=es(_.Action.Update,_.Resource.Project),em=!eo&&!eu,eh=(0,n.useCallback)(()=>{y({type:"DOMAIN_RESET_STATE",initial:{domain:E?.name||r.name,customEnvironments:ea?.customEnvironments??[],project:i,environmentId:E?.customEnvironmentId||null,gitBranch:E?.gitBranch||null,redirect:E?.redirect||null,redirectStatusCode:E?.redirectStatusCode||null}}),Y("edit")},[y,E,r,i,ea]),[ex,ep,eg]=eG(g.context.initial?.domain??"",i,E,{...p,refreshInterval:s?Math.min(3e4,s):void 0}),[ef,ej,ev]=eO(g.context.initial?.domain??"",p),[eb,ew,eS]=function(e,r,i){let{isReady:a,team:s}=(0,u.useTeam)(),{data:o,error:l,mutate:d,isValidating:c}=(0,f.default)(a?[`${(0,ee.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e.projectId}/domains/${e.name}/verify${(0,X.encode)({teamId:s?.id||null})}`,e.verified]:null,async e=>{let[t,n]=e;if(!1!==n)return{result:"success"};let i=await (0,Z.fetchAPI)(t,{method:"POST"});return i&&i.error?{result:"error",message:i.error.message,code:i.error.code}:(i&&!i.error&&await r(i),{result:"success"})},i);return[(0,n.useMemo)(()=>{if(e?.verified!==!1)return en;if(!l&&!o)return er;if(o?.result==="error"&&o.code&&et.has(o.code)){let e;return e={message:o.message},{info:(0,t.jsx)(v.Error,{children:e.message}),type:"error"}}return en},[o,e,l]),d,c]}(E||r,(0,n.useCallback)(async e=>{try{eP(!0),await Promise.all([F(e),ej(),ep()])}finally{eP(!1)}},[ej,F,ep]),p),[eN,eC,ek]=eR(E||r,eb,p),eI="success"!==ex.type||"success"!==ef.type,{mutate:eD}=(0,$.default)(!eI||(0,V.isPublicAlias)(g.context.initial?.domain??"")?"":g.context.initial?.domain??"",p),[eE,eT]=(0,n.useState)(null),[eA,eP]=(0,n.useState)(!1),ez=(0,n.useRef)({type:"loading",status:null,info:null,statuses:[],priority:3}),e_=eA?ez.current:ez.current=function(e){let t=e.map(e5);t.sort((e,t)=>t.priority-e.priority);let n=t.reduce((e,t)=>[...e,...t.statuses],[]);return{...t[0],statuses:n}}([eN,ex,ef]),eB=(0,n.useCallback)(async e=>{let{removeRedirects:t=!1}=e;try{y({type:"remove"}),await (0,W.removeProjectDomain)(a,c,g.context.initial?.domain??"",t),await o(),y({type:"remove"}),J(!1),ec.success({text:"Removed Domain successfully.",key:"removed-domain"})}catch(e){y({type:"remove"}),ec.message({type:"error",text:(0,D.errorToString)(e)})}},[a,c,g,o,ec,y]),eF=(0,n.useCallback)(async()=>{eP(!0),await Promise.all([eI?eD():null,ew(),ep(),eC(),ej()]),eP(!1)},[eI,eD,ew,ep,eC,ej]);(0,f.default)(`refresh-domain-${g.context.initial?.domain??""}`,eF,{...p,refreshInterval:s??void 0});let eM=(0,n.useCallback)(async()=>{if(!E||!ed||!i)return;let e=g.context.update?.domain??"",t=(0,P.isCustomEnvId)(g.context.update?.environmentId??"")?g.context.update?.environmentId:void 0,n=g.context.update?.redirect,r=g.context.update?.redirectStatusCode,a=g.context.update?.gitBranch&&g.context.update.gitBranch!==i.link?.productionBranch?g.context.update.gitBranch:null;if(ei(!0),y({type:"DOMAIN_SET_ERROR",value:null}),e!==g.context.initial?.domain)try{eT(e);let s=await (0,W.addProjectDomain)({domain:e,project:i,team:el,redirect:n,redirectStatusCode:r,customEnvironmentId:t,gitBranch:a});(g.context.initial?.domain??""==`${i.name}.vercel.app`)&&x(s),await (0,W.removeProjectDomain)(i.id,el?.id??null,g.context.initial?.domain??""),await o()}catch(t){let e=(0,U.isProjectsError)(t)&&t.code;y({type:"git_branch_not_found"===e||"cannot_set_production_branch_as_preview"===e?"BRANCH_SET_ERROR":"DOMAIN_SET_ERROR",value:t}),ei(!1);return}else{let e=!n&&!g.context.initial.redirect||n===g.context.initial.redirect,s=!r&&!g.context.initial.redirectStatusCode||r===g.context.initial.redirectStatusCode,l=!a&&!g.context.initial.gitBranch||a===g.context.initial.gitBranch,d=t===g.context.initial.environmentId;if(!(e&&s&&l&&d))try{let e={redirect:n||null,redirectStatusCode:r||null,gitBranch:a};if(e.customEnvironmentId=t||void 0,e.customEnvironmentId===String(A.EnvTarget.Preview)&&!e.gitBranch&&!e.redirect){y({type:"DOMAIN_SET_ERROR",value:Error("A preview domain should be assigned to a git branch or a redirect.")}),ei(!1);return}e.customEnvironmentId&&[String(A.EnvTarget.Preview),String(A.EnvTarget.Production)].includes(e.customEnvironmentId)&&(e.customEnvironmentId=void 0),await (0,Q.default)({project:i,isReady:ed,team:el,projectDomain:E,...e}),await Promise.all([o(),ep(),F()]),ec.success(l?"Domain saved successfully!":"Domain saved. To deploy, push to the selected branch.")}catch(t){let e=(0,U.isProjectsError)(t)&&t.code;y({type:"git_branch_not_found"===e||"cannot_set_production_branch_as_preview"===e?"BRANCH_SET_ERROR":"DOMAIN_SET_ERROR",value:t}),ei(!1);return}}Y("view"),ei(!1)},[F,x,i,E,ep,o,ed,el,ec,g,y]),e$=eE&&"loading"===e_.type;if("edit"===G||e$)return(0,t.jsxs)(m.default,{border:!1,"data-testid":(0,R.tid)("project","alias-domain","entity",E?.name||""),gap:0,padding:!1,shadow:!0,children:[(0,t.jsx)(O.default,{onSubmit:()=>{eM().then(()=>{y({type:"save"})}).catch(e=>{ec.message({type:"error",text:(0,D.errorToString)(e)})})},children:(0,t.jsxs)(l.Stack,{children:[(0,t.jsxs)(l.Stack,{style:{padding:"var(--geist-gap)",borderTopLeftRadius:"var(--geist-radius)",borderTopRightRadius:"var(--geist-radius)"},children:[(0,t.jsxs)(l.Stack,{gap:4,children:[(0,t.jsx)(eU.default,{currentDomain:g.context.initial?.domain??"","data-testid":(0,R.tid)("project","alias-domain","entity","domain-field"),disabled:!!(K||g.context.removing||e$),domainDispatch:y,domainError:g.context.domainError,domainValue:g.context.update?.domain??""}),(0,t.jsx)(e2.EditDomainEnvironmentField,{disabled:!!(K||g.context.removing||e$||g.context.update?.redirect),disabledReason:g.context.update?.redirect?"Remove the redirect to set an environment.":void 0,onChange:e=>{y({type:"update",update:{domain:g.context.update?.domain??"",customEnvironments:ea?.customEnvironments??[],project:i,environmentId:e}})},selectedEnvironmentId:g.context.update?.environmentId?[String(A.EnvTarget.Production),String(A.EnvTarget.Preview)].includes(g.context.update.environmentId??"")?g.context.update.environmentId:(0,P.brandCustomEnvId)(g.context.update.environmentId??""):null}),(0,t.jsx)(eH.default,{domain:g.context.update?.domain??"",project:i,redirect:g.context.update?.redirect||null,savingRedirect:!!(K||e$),selfRedirect:h,setRedirect:e=>{y({type:"update",update:{domain:g.context.update?.domain??"",customEnvironments:ea?.customEnvironments??[],project:i,redirect:e||null,redirectStatusCode:e?307:null}})}}),!!g.context.update?.redirect&&(0,t.jsx)(eY.default,{redirectStatusCode:g.context.update?.redirectStatusCode||null,saving:K,setRedirectStatusCode:e=>{y({type:"update",update:{domain:g.context.update?.domain??"",customEnvironments:ea?.customEnvironments??[],project:i,redirect:g.context.update?.redirect||null,redirectStatusCode:e||null}})}}),(0,t.jsx)(e4,{branchError:g.context.branchError,disabled:!!g.context.update?.redirect||g.context.update?.environmentId!==A.EnvTarget.Preview,disabledReason:g.context.update?.redirect?"To select a specific Git branch for this domain you need to remove the redirect.":g.context.update?.environmentId?g.context.update.environmentId===A.EnvTarget.Preview?null:g.context.update.environmentId===A.EnvTarget.Production?"Adjust the production git branch in the Production Environment's settings.":"Adjust the git branch matcher for the environment in the environment's settings.":null,domainDispatch:y,gitBranch:g.context.update?.gitBranch||null,project:i,projectDomain:E,saving:K,setGitBranch:e=>{y({type:"update",update:{domain:g.context.update?.domain??"",customEnvironments:ea?.customEnvironments??[],project:i,environmentId:g.context.update?.environmentId,gitBranch:e||null}})}})]}),(0,V.isPublicAlias)(g.context.update?.domain??"")||"error"===e_.type?null:(0,t.jsx)(e6,{domain:g.context.update?.domain??""})]}),(0,t.jsxs)(l.Stack,{direction:"row",flex:"0 0 auto",gap:4,justify:"space-between",style:{backgroundColor:"var(--accents-1)",padding:"var(--geist-gap)",borderTop:"1px solid var(--accents-2)",borderBottomLeftRadius:"var(--geist-radius)",borderBottomRightRadius:"var(--geist-radius)"},children:[(0,t.jsx)(l.Stack,{direction:"row",flex:"0 0 auto",children:(0,t.jsx)(j.Button,{"data-testid":(0,R.tid)("project","alias-domain","entity","remove-button"),disabled:!!(H||g.context.removing||K||e$),loading:g.context.removing,onClick:()=>{y({type:"DOMAIN_RESET_STATE",value:g.context.initial?.domain??""}),J(!0)},size:"small",type:"error",typeName:"button",children:"Remove"})}),(0,t.jsxs)(l.Stack,{direction:"row",gap:5,children:[(0,t.jsx)(j.Button,{"data-testid":(0,R.tid)("project","alias-domain","entity","cancel-button"),disabled:!!(K||g.context.removing||e$),onClick:()=>{y({type:"DOMAIN_RESET_STATE",value:g.context.initial?.domain??""}),Y("view")},size:"small",type:"secondary",typeName:"button",children:"Cancel"}),(0,t.jsx)(j.Button,{"data-testid":(0,R.tid)("project","alias-domain","entity","save-button"),disabled:!g.context.canSave,loading:!!(K||e$),size:"small",typeName:"submit",children:"Save"})]})]})]})}),(0,t.jsx)(eZ.RemoveDomainModal,{domain:g.context.update?.domain??"",onRemoveDomain:eB,removeModal:H,removing:g.context.removing,setRemoveModal:J})]});let eL=null;return E&&(eL=Math.round((Date.now()-E.createdAt)/1e3)),(0,t.jsxs)(m.default,{border:!1,"data-testid":(0,R.tid)("project","alias-domain","entity",E?.name||""),halfGap:!0,shadow:!0,children:[(0,t.jsxs)(l.Stack,{className:e0.default.aliasDomain,children:[(0,t.jsxs)(l.Stack,{className:e0.default.domainInfo,direction:"row",gap:.5,children:[(0,t.jsx)(l.Stack,{children:(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsxs)(d.Text,{as:"h4",size:16,style:{overflowWrap:"anywhere",position:"relative"},weight:500,children:[(0,t.jsx)("div",{style:{visibility:"success"!==ex.type?"hidden":"visible"},children:(0,t.jsx)(M.default,{className:e0.default.aliasLink,"data-testid":(0,R.tid)("project","alias-domain","entity","alias-link"),icon:!1,url:g.context.update?.domain??""})}),(0,t.jsx)("div",{style:{position:"absolute",top:0,left:0,visibility:"success"===ex.type?"hidden":"visible"},children:g.context.update?.domain??""})]}),(0,t.jsx)("div",{children:(0,t.jsx)(te,{"data-testid":(0,R.tid)("project","alias-domain","entity","domain-badge"),projectDomain:E})})]})}),(0,t.jsxs)(l.Stack,{className:"geist-hide-on-mobile",direction:"row",flex:"1 0 auto",gap:3,justify:"flex-end",style:{minHeight:40},children:[E?(0,t.jsx)(e8,{currentUI:e_,projectDomain:E}):null,(0,t.jsx)(k.Tooltip,{disableTriggers:!em,text:`Additional permissions for ${el?.name} are required to refresh Domains.`,children:(0,t.jsx)(e9,{disabled:em,loading:ek||eS||ev||eg||eA,onClick:()=>{eF(),o()}})}),(0,t.jsx)(k.Tooltip,{disableTriggers:!em,text:`Additional permissions for ${el?.name} are required to edit Domains.`,children:(0,t.jsx)(j.Button,{"data-testid":(0,R.tid)("project","alias-domain","entity","edit-button"),disabled:em,onClick:eh,size:"small",type:"secondary",width:"80px",children:"Edit"})})]}),(0,t.jsx)(l.Stack,{align:"flex-end",className:"geist-show-on-mobile",direction:"row",flex:"1 0 auto",children:(0,t.jsxs)(S.MenuContainer,{children:[(0,t.jsx)(w.MenuButton,{"aria-label":"Domain Actions",shape:"square",size:"small",svgOnly:!0,type:"secondary",children:(0,t.jsx)(T.MoreHorizontal,{})}),(0,t.jsx)(b.Menu,{children:eu?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.MenuItem,{onClick:eF,children:"Refresh"}),(0,t.jsx)(N.MenuItem,{onClick:eh,children:"Edit"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.MenuItemLocked,{children:"Refresh"}),(0,t.jsx)(C.MenuItemLocked,{children:"Edit"})]})})]})})]}),e_.status?(0,t.jsx)(l.Stack,{children:e_.status}):null,!e_.status&&e_.statuses.length>0&&(0,t.jsxs)("div",{className:e0.default.statuses,children:[e_.statuses.map((e,n)=>(0,t.jsx)(l.Stack,{flex:"0 0 auto",children:e},`${n}`)),eL&&eL<86400&&E&&"vercel.app"!==E.apexName?(0,t.jsx)(l.Stack,{flex:"3 0 auto",style:{marginTop:0,maxWidth:"100%"},children:(0,t.jsx)(ey,{href:"https://vercel.com/guides/why-is-my-vercel-domain-unverified#domain-is-verified-but-can't-access-the-website",children:"Good news! Your DNS records are set up correctly, but it can take some time for them to propagate globally."})}):""]}),e_.info?(0,t.jsx)("hr",{className:e0.default.domainCardSeparator}):null]}),e_.info]})});function e9(e){let{disabled:r,loading:i,onClick:a}=e,[s,o]=(0,n.useState)(i),l=(0,n.useRef)(void 0);return(0,n.useEffect)(()=>{i?(o(!0),l.current=new Promise(e=>{setTimeout(e,200)})):l.current?.then(()=>{o(!1)})},[i]),(0,t.jsx)(j.Button,{"data-testid":(0,R.tid)("project","alias-domain","entity","refresh-button"),disabled:r,loading:s,onClick:a,size:"small",type:"secondary",children:"Refresh"})}function te(e){let{projectDomain:n}=e;if(!n||n.redirectStatusCode)return null;let r=null;return"production"===n.customEnvironmentId?r="production":(n.gitBranch||n.customEnvironmentId)&&(r="preproduction"),r?(0,t.jsx)(H.EnvironmentBadge,{"data-testid":(0,R.tid)("project","alias-domain","entity","environment-badge"),size:"sm",type:r}):null}var tt=e.i(4490730),tn=e.i(2240289),tr=e.i(2915293),ti=e.i(6284911);function ta(e){let n=(0,x.useRouter)(),r=(0,x.usePathname)(),i=(0,x.useSearchParams)();return(0,t.jsx)("form",{action:`${r}`,children:(0,t.jsx)(ti.SearchInput,{clearable:!1,defaultValue:i?.get("search")??"",error:e.noSearchResultsFound?"Domain not found. Please enter the complete domain name with exact spelling.":void 0,name:"search",onChange:e=>{if(!e.target.value&&i?.get("search")){let e=new URLSearchParams(i.toString());e.delete("search");let t=`${r}?${e.toString()}`;n.push(t)}},placeholder:"Search...",width:"100%"})})}let ts=(0,t.jsx)("div",{children:(0,t.jsxs)(d.Text,{className:"geist-text",children:["Domains are linked to your deployments. You can assign them to specific environments or set up a"," ",(0,t.jsx)(c.Link,{href:"/docs/domains/deploying-and-redirecting#redirecting-domains",variant:"highlight",children:"redirect"})," ","to another domain. Additionally, you can associate a domain with a particular"," ",(0,t.jsx)(c.Link,{href:"/docs/domains/working-with-domains/assign-domain-to-a-git-branch",variant:"highlight",children:"Git branch"})," ","by selecting the Preview environment."]})});function to(e){let{projectIdOrName:r,setUpdatedVercelAppDomain:i,domains:s,initialDataLoaded:o,isLoadingMore:l,isReachingEnd:d,loadMore:c,revalidateDomains:u,project:m,team:x}=e,p=(0,n.useRef)(null);s.length>=75?p.current=null:s.length>=60?p.current=6e4:s.length>=40?p.current=45e3:s.length>25?p.current=3e4:p.current=15e3;let g=(0,n.useMemo)(()=>new Set(s.map(e=>e.redirect).filter(tc)),[s]);return(0,t.jsxs)(h.default,{style:{flexGrow:0},children:[!o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(td,{}),(0,t.jsx)(td,{})]}),o?s.map(e=>(0,t.jsx)(e7,{domain:e,onEditVercelAppDomain:t=>{e.name===`${m?.name}.vercel.app`&&t.name!==`${m?.name}.vercel.app`&&i(t)},project:m,projectIdOrName:r,refreshRate:p.current,revalidateDomains:u,selfRedirect:g.has(e.name),teamId:x?x.id:null},e.name)):null,!d&&o?(0,t.jsx)("div",{style:{marginTop:"var(--geist-gap)"},children:(0,t.jsx)(a.LoadMoreButton,{loading:l,noGap:!0,onClick:c})}):null]})}let tl=n.default.memo(()=>{let e=(0,i.useRouter)(),a=(0,x.useSearchParams)(),s=a?.get("search"),c=e.query.project,[m,g]=(0,n.useState)(),{isReady:f,team:j}=(0,u.useTeam)(),v=(0,L.useProjectDomain)(s?{projectId:c,name:s}:null),[{mutate:y},{domains:b,isLoadingMore:w,loadMore:S,isReachingEnd:N,initialDataLoaded:C}]=(0,L.useProjectDomainsInfinite)(s?null:c,{limit:20}),{data:k}=(0,tn.useProjectWithLatestDeployment)(c,{refreshInterval:15e3}),I=!!s&&(!f||v.isLoading),D=!!(s&&!I&&!v.data&&s.length>0),E=(0,p.useServerFlag)("enable-search-project-domains",!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(h.default,{children:[(0,t.jsxs)(l.Stack,{direction:"row",justify:"space-between",children:[(0,t.jsxs)(l.Stack,{children:[(0,t.jsx)(d.Text,{as:"h2",size:24,children:(0,t.jsx)(r.SearchContextHighlighter,{children:"Domains"})}),(0,t.jsx)(o.Spacer,{}),ts,(0,t.jsx)(o.Spacer,{})]}),(0,t.jsx)(tt.default,{projectIdOrName:c,revalidateDomains:y})]}),E?(0,t.jsx)(ta,{noSearchResultsFound:D}):null,(0,t.jsx)(o.Spacer,{}),s&&I?(0,t.jsx)(td,{}):null,s&&v.data?(0,t.jsx)(e7,{domain:v.data,onEditVercelAppDomain:e=>{v.data&&v.data.name===`${k?.name}.vercel.app`&&e.name!==`${k?.name}.vercel.app`&&g(e)},project:k,projectIdOrName:c,refreshRate:15e3,revalidateDomains:y,selfRedirect:!1,teamId:j?j.id:null},v.data.name):null,!s&&(0,t.jsx)(to,{domains:b,initialDataLoaded:C,isLoadingMore:w,isReachingEnd:N,loadMore:S,project:k,projectIdOrName:c,revalidateDomains:y,setUpdatedVercelAppDomain:g,team:j})]}),(0,t.jsx)(tr.WWWModal,{active:!!m,dispatch:()=>{g(void 0)},domain:m?.name??"",revalidateDomains:y},m?.name)]})});function td(){return(0,t.jsx)(m.default,{halfGap:!0,shadow:!0,children:(0,t.jsxs)(h.default,{halfGap:!0,children:[(0,t.jsxs)(h.default,{halfGap:!0,noWrap:!0,row:!0,children:[(0,t.jsx)(s.Skeleton,{height:32,width:"80%"}),(0,t.jsx)(o.Spacer,{inline:!0,x:8}),(0,t.jsxs)(h.default,{className:"geist-hide-on-mobile",flex:"1 0 auto",noWrap:!0,right:!0,row:!0,children:[(0,t.jsx)(o.Spacer,{inline:!0,x:1}),(0,t.jsx)(s.Skeleton,{height:32,width:80}),(0,t.jsx)(o.Spacer,{inline:!0,x:.5}),(0,t.jsx)(s.Skeleton,{height:32,width:80})]})]}),(0,t.jsx)(h.default,{row:!0,children:[0,1].map((e,n)=>(0,t.jsx)(h.default,{flex:"0 0 auto",children:(0,t.jsx)(s.Skeleton,{height:30,width:180})},`${n}`))})]})})}function tc(e){return"string"==typeof e}let tu=function(){let{project:e}=(0,i.useRouter)().query;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.HeadTitle,{title:`${e||""} – Domains`,titlePostfix:!0}),(0,t.jsx)(tl,{})]})}},2360064:e=>{e.v({content:"add-domain-in-use-modal-module__lcUOSG__content",favicon:"add-domain-in-use-modal-module__lcUOSG__favicon",inset:"add-domain-in-use-modal-module__lcUOSG__inset",loadingItem:"add-domain-in-use-modal-module__lcUOSG__loadingItem",noteCenterText:"add-domain-in-use-modal-module__lcUOSG__noteCenterText",outset:"add-domain-in-use-modal-module__lcUOSG__outset",subitem:"add-domain-in-use-modal-module__lcUOSG__subitem"})},5645183:e=>{"use strict";e.s({NewProjectDomainsPage:()=>tD},5645183);var t=e.i(6645307),n=e.i(3921802),r=e.i(5674541),i=e.i(8084653),a=e.i(5163670),s=e.i(555528),o=e.i(663357),l=e.i(631755),d=e.i(8158100),c=e.i(2362802),u=e.i(9240532),m=e.i(6530772),h=e.i(3138389),x=e.i(2605482),p=e.i(4965453),g=e.i(5610210),f=e.i(5535439),j=e.i(9443759),v=e.i(3585235),y=e.i(5785123),b=e.i(3509620);e.i(8778985);var w=e.i(4373817),S=e.i(4383486),N=e.i(5363829),C=e.i(9132105),k=e.i(3156464),I=e.i(1922196),D=e.i(3799021),E=e.i(3447305),T=e.i(6284911);function R(e){let n=(0,m.useRef)(null);return(0,m.useEffect)(()=>{let e=e=>{if((e.metaKey||e.ctrlKey)&&"f"===e.key){let t=n.current;document.activeElement!==t&&(e.preventDefault(),t?.focus())}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),(0,t.jsx)(T.SearchInput,{ref:n,clearable:!1,value:e.value,name:"search",error:e.noResultsFound?"We couldn't find any domains matching your search.":void 0,onChange:t=>e.setSearch(t.target.value),placeholder:"Search...",width:"100%"})}var A=e.i(604868),P=e.i(3345839),z=e.i(6649026),_=e.i(9336536),O=e.i(4418725),B=e.i(707673);e.i(501494);var F=e.i(6339279),M=e.i(6780185),$=e.i(3466887);let L=F.z.object({cns:F.z.array(F.z.string()),expiresAt:F.z.number()}),W=F.z.union([F.z.object({certs:F.z.array(L)}),F.z.undefined()]),V=F.z.object({error:F.z.object({status:F.z.number().optional(),message:F.z.string(),code:F.z.enum(["public-alias","no-permissions-certs"]).optional()})});var G=e.i(106479),U=e.i(226017);let Y=F.z.object({providers:F.z.array(F.z.object({role:F.z.string(),id:F.z.string()})),nameserverProviders:F.z.array(F.z.string())}),H=F.z.object({error:F.z.object({code:F.z.enum(["not_found","invalid_name","internal_server_error"]),message:F.z.string(),name:F.z.string()})});async function q(e,t,n){if(await new Promise(e=>{setTimeout(e,1)}),!t||(0,$.isPublicAlias)(n))return{isDomainOnCloudflare:!1,hasCloudflareInFront:!1};let r=await (0,M.safeFetch)(e,{successSchema:Y,failureSchema:H});if(r.isErr())return{isDomainOnCloudflare:!1,hasCloudflareInFront:!1};let i=r.value.nameserverProviders.includes("Cloudflare"),a=r.value.providers.find(e=>"front-proxy"===e.role);return{isDomainOnCloudflare:i,hasCloudflareInFront:a?.id==="Cloudflare"}}let J=F.z.null(),K=F.z.object({error:F.z.object({code:F.z.enum(["invalid_name"]),message:F.z.string()})});function Q(e,t){let n=(0,O.useTeamSlug)();return(0,P.useIsomorphicSWR)(e.length>0?`${_.API_DOMAINS}/${encodeURIComponent(e)}/verify${(0,z.encode)({teamId:n})}`:null,async t=>(0,$.isPublicAlias)(e)?(0,B.okAsync)(null):(0,M.safeFetch)(t,{method:"POST",successSchema:J,failureSchema:K}),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!0,refreshInterval:15e3,dedupingInterval:15e3,...t})}let X=F.z.discriminatedUnion("result",[F.z.object({result:F.z.literal("success")}),F.z.object({result:F.z.literal("error"),message:F.z.string(),code:F.z.string()})]),Z=F.z.object({error:F.z.object({code:F.z.enum(["incorrect_txt_record","txt_on_another_project","existing_project_domain","txt_on_wrong_domain"]),message:F.z.string(),name:F.z.string().optional()})});var ee=e.i(1917237),et=e.i(8700049),en=e.i(8811733),er=e.i(2240289),ei=e.i(3521787);let ea=F.z.object({boughtAt:F.z.number().nullable(),verified:F.z.boolean().optional(),createdAt:F.z.number(),cdnEnabled:F.z.boolean(),configVerifiedAt:F.z.number().nullable().optional(),expiresAt:F.z.number().nullable(),id:F.z.string(),intendedNameservers:F.z.array(F.z.string()),movedAt:F.z.number().optional(),movedFromOwnerId:F.z.string().optional(),name:F.z.string(),nameservers:F.z.array(F.z.string()),nsVerifiedAt:F.z.number().nullable(),orderedAt:F.z.number().optional(),renew:F.z.boolean().optional(),serviceType:F.z.enum(["zeit.world","external","na"]),teamId:F.z.string().nullable(),transferredAt:F.z.number().nullable().optional(),txtVerifiedAt:F.z.number().nullable(),verificationRecord:F.z.string(),creator:F.z.object({id:F.z.string(),customerId:F.z.string().nullable().optional(),email:F.z.string(),username:F.z.string(),name:F.z.string().optional()}).optional(),zone:F.z.boolean().optional(),userId:F.z.string().nullable().optional()}),es=F.z.object({domain:ea}),eo=F.z.object({error:F.z.object({code:F.z.string(),message:F.z.string(),name:F.z.string().optional()})});function el(e,t){var n;let r=(0,O.useTeamSlug)();return(0,ei.default)(e&&r?(n={domainName:e,teamId:r},`${_.API_DOMAINS}/${encodeURIComponent(n.domainName)}${(0,z.encode)({teamId:n.teamId})}`):null,async t=>e&&(0,$.isPublicAlias)(e)?(0,B.errAsync)(new M.ApiError({error:{error:{code:"forbidden",message:`You don't have access to "${e}"`,name:e}}})):(0,M.safeFetch)(t,{successSchema:es,failureSchema:eo}),{dedupingInterval:3e4,...t})}var ed=e.i(5077002),ec=e.i(611347),eu=e.i(6531164),em=e.i(8740796),eh=e.i(1183506),ex=e.i(503726),ep=e.i(1940235);function eg(e){let{teamDomain:n,projectDomain:r,refresh:i}=e,a=!!n?.zone,s=(0,O.useTeamSlug)(),{team:o}=(0,ex.useAccount)(),l=(0,m.useCallback)(async()=>{let e=`?teamId=${encodeURIComponent(s??"")}`;await (0,eh.fetchAPI)(`${_.API_DOMAINS}/${encodeURIComponent(r.name)}${e}`,{method:"PATCH",body:JSON.stringify({zone:!0}),throwOnHTTPError:!0}),i()},[r.name,s,i]);(0,m.useEffect)(()=>{let e=setTimeout(()=>{a||l()},2500);return()=>clearTimeout(e)},[a,l]);let u=o?.billing?.plan==="hobby";return n?(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsx)("span",{children:"Update your domain's nameservers to enable Vercel DNS."}),(0,t.jsx)(em.NSConfiguration,{nameservers:n.intendedNameservers.length>0?n.intendedNameservers:ep.VERCEL_NAMESERVERS})]}):(0,t.jsx)(d.Note,{children:u?"Please move this domain to this team in order to use Vercel nameservers.":(0,t.jsxs)(t.Fragment,{children:["Please"," ",(0,t.jsx)(c.Link,{href:"https://vercel.com/docs/domains/working-with-domains/transfer-your-domain",className:"text-blue-900 underline",children:"move this domain"})," ","to this team in order to use Vercel nameservers. If no one on your team has access to this domain, contact support to prove ownership of it"]})})}function ef(e){let{dnsRecords:n,teamDomain:r,domainConfig:i,projectDomain:a,configMethod:s,domainConnectUrl:o,setConfigMethod:l,verifyTxtError:d}=e;if((0,I.default)(a.name))return(0,t.jsx)(eg,{teamDomain:r,projectDomain:a,refresh:e.refresh});if(!i?.misconfigured)return(0,t.jsx)("div",{className:"flex flex-col gap-2 border-0",children:(0,t.jsx)(em.DNSConfiguration,{records:n,domainConnectUrl:o,verifyTxtError:d})});let{conflicts:c}=i,u=c.sort((e,t)=>e.type.localeCompare(t.type)).map(e=>{var t,n;return{...e,name:(t=e.name,(n=a.apexName)===t?"@":t.slice(0,t.length-n.length-1))}}),m=u.length>0,h=1===u.length;return(0,t.jsxs)(ed.FieldsetTabs,{borderless:!0,selected:+("DNS Records"!==s),onChange:e=>{l(0===e?"DNS Records":"Nameservers")},tabs:["DNS Records","Vercel DNS"],children:[(0,t.jsx)(ec.Fieldset,{borderlessTabs:!0,children:(0,t.jsx)(eu.FieldsetContent,{className:"px-1 pb-0 pt-2",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 border-0",children:[(0,t.jsx)("span",{children:"The DNS records at your provider must match the following records to verify and connect your domain to Vercel."}),m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("p",{children:["Remove the following conflicting DNS"," ",h?"record":"records"," from your DNS provider:"]}),(0,t.jsx)(em.DNSConfiguration,{records:u}),(0,t.jsx)("p",{children:"Afterwards, set the following record on your DNS provider to continue:"})]}):null,(0,t.jsx)(em.DNSConfiguration,{records:n,domainConnectUrl:o,verifyTxtError:d})]})})}),(0,t.jsx)(ec.Fieldset,{borderlessTabs:!0,children:(0,t.jsx)(eu.FieldsetContent,{className:"px-1 pt-2",children:(0,t.jsx)(eg,{teamDomain:r,projectDomain:a,refresh:e.refresh})})})]})}var ej=e.i(7415104),ev=e.i(9505396),ey=e.i(663004);function eb(e){let t=(0,ej.parse)(e);return!t.error&&("www"===t.subdomain||t.domain===e)&&t.listed}function ew(e,t){return t===e?"@":e.slice(0,e.length-t.length-1)}var eS=e.i(2524591),eN=e.i(3420088),eC=e.i(4131991),ek=e.i(2567082);function eI(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e4,r={refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!1,revalidateOnFocus:!1,refreshInterval:n,dedupingInterval:3e4},[a,s]=(0,m.useTransition)(),o=(0,O.useTeamSlug)(),l=(0,G.useDomainConfig)(e.name,{strict:!1,projectIdOrName:e.projectId},r),d=function(e,t){let n=(0,U.useServerFlag)("enable-check-proxy-status",!1);return(0,P.useIsomorphicSWR)((0,$.isPublicAlias)(e)?null:`/api/front-domains/check-proxy-status?domain=${e}`,async t=>q(t,n,e),{dedupingInterval:3e4,...t})}(e.name,r),u=function(e,t){let{domain:n,filterDeleted:r=!0}=e,i=(0,O.useTeamSlug)();return(0,P.useIsomorphicSWR)(`${_.API_ALIASES}/${encodeURIComponent(n)}${(0,z.encode)({filterDeleted:r,teamId:i})}`,async e=>{try{let t=await fetch(e);if(204===t.status)return(0,B.ok)(null);return(0,B.ok)(await t.json())}catch(e){return(0,B.err)(e)}},{dedupingInterval:3e4,...t})}({domain:e.name,filterDeleted:!1},r),h=Q(e.name,r),x=function(e,t){let n=(0,O.useTeamSlug)();return(0,P.useIsomorphicSWR)(`${(0,_.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e.projectId}/domains/${e.name}/verify${(0,z.encode)({teamId:n})}`,async t=>(0,$.isPublicAlias)(e.name)||!1!==e.verified?(0,B.ok)({result:"success"}):(0,M.safeFetch)(t,{successSchema:X,failureSchema:Z,method:"POST"}),{refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnReconnect:!0,revalidateOnFocus:!0,refreshInterval:15e3,dedupingInterval:15e3,...t})}(e,r),p=function(e,t){let n=(0,O.useTeamSlug)(),{can:r}=(0,v.default)(),i=r(y.Action.List,y.Resource.DomainCertificate);return(0,P.useIsomorphicSWR)(`${_.API_CERTS}${(0,z.encode)({teamId:n,cn:e})}`,async t=>(0,$.isPublicAlias)(e)?(0,B.errAsync)(new M.ApiError({error:{error:{message:"You are not authorized to list certificates",status:403,code:"public-alias"}}})):i?(0,M.safeFetch)(t,{successSchema:W,failureSchema:V}):(0,B.errAsync)(new M.ApiError({error:{error:{message:"You are not authorized to list certificates",status:403,code:"no-permissions-certs"}}})),{shouldRetryOnError:!1,dedupingInterval:3e4,...t})}(e.name,r),g=(0,eS.useCertErrors)(e.name,"dnsName",r),f=(0,er.useProject)(e.projectId,{config:r}),j=(0,eN.useDomainConnectStatus)(e.name,{shouldRetryOnError:!1,...r}),b=el(e.name,r),[w,S]=(0,m.useState)("DNS Records"),N=l.isLoading||d.isLoading||u.isLoading||h.isLoading||x.isLoading||p.isLoading||g.isLoading||b.isLoading,C=l.isValidating||d.isValidating||u.isValidating||h.isValidating||x.isValidating||p.isValidating||g.isValidating||b.isValidating,k=a||C,I=(0,m.useCallback)(()=>{s(async()=>{await Promise.all([l.mutate(),d.mutate(),u.mutate(),h.mutate(),x.mutate(),p.mutate(),g.mutate(),b.mutate(),j.mutate()])})},[g,p,l,u,d,h,x,b,j]),D=function(e,t){Q(e??"");let n=function(e,t){let n=(0,G.useDomainConfig)(e,{strict:!1,projectIdOrName:t}),r={ipv4:"76.76.21.21",cname:"cname.vercel-dns.com."};if(!n.data?.isOk())return r;let i=n.data.value.recommendedIPv4?.[0].value;i&&i.length>0&&(r.ipv4=i[0]);let a=n.data.value.recommendedCNAME?.[0].value;return a&&(r.cname=a),r}(e,t),{data:r}=(0,ev.useProjectDomain)(e?{projectId:t,name:e}:null),i=(0,ey.useIsDomainOnCloudflare)(e),a=el(e),s=(0,G.useDomainConfig)(e,{strict:!1,projectIdOrName:t});if(!e||!r)return[];let o=r.verification?.at(0),l=r.apexName===e,d=a.data?.isOk()?a.data.value.domain:void 0,c=s.data?.isOk()?s.data.value:void 0,u=d?.intendedNameservers.length?d.intendedNameservers:ep.VERCEL_NAMESERVERS,m=c?.nameservers??[];d?.serviceType==="na"&&d.boughtAt,u.every(e=>m.includes(e));let h=[],x=s.data?.isOk()&&!s.data.value.misconfigured,p=s.data?.isOk()&&["required-change","optional-change"].includes(s.data.value.ipStatus??"");return(!x||p)&&h.push({type:l?"A":"CNAME",name:l?"@":ew(e,r.apexName),value:l?n.ipv4:n.cname,disableProxy:i}),o&&h.push({type:o.type,name:ew(o.domain,r.apexName),value:`${o.value}`,verifyDomain:o.domain}),h}(e.name,e.projectId),E=j.data?.providerId==="cloudflare.com"?(0,eC.getDomainConnectApplyUrl)(e,o??void 0):void 0,T=x.data?.isErr()?x.data.error:void 0,R=(0,t.jsx)(ef,{dnsRecords:D,domainConfig:l.data?.isOk()?l.data.value:void 0,teamDomain:b.data?.isOk()?b.data.value.domain:void 0,projectDomain:e,domainConnectUrl:E,refresh:I,configMethod:w,setConfigMethod:S,verifyTxtError:T?._tag==="ApiError"&&"txt_on_another_project"===T.error.error.code?T.error.error.message:void 0});(0,m.useEffect)(()=>{let e=setInterval(()=>{I()},n);return()=>clearInterval(e)},[n,I]);let A=(0,U.useServerFlag)("enable-ip-diff-alerts",!1);if(N)return{status:"loading"};if(!e.verified)return{status:"verification-needed",refresh:I,isRefreshing:k,ui:R,level:"error"};let F=l.data?.isOk()?l.data.value:null;if(F?.misconfigured){let e=b.data?.isOk()?b.data.value.domain.boughtAt:null;return e&&e>Date.now()-(0,ek.default)("30m")&&!F.configuredBy?{status:"pending-nameserver-propagation",refresh:I,isRefreshing:k,ui:(0,t.jsxs)("div",{className:"pt-2",children:[(0,t.jsx)(i.Text,{children:ep.DNS_PROPAGATION_WARNING}),(0,t.jsx)(en.Spacer,{}),(0,t.jsx)(i.Text,{children:"Once this process is completed, your domain will automatically be assigned to your latest production deployment."})]}),level:"spinner"}:{status:"invalid-configuration",refresh:I,isRefreshing:k,ui:R,level:"error"}}let L=l.data?.isOk()?l.data.value.ipStatus:null,Y=l.data?.isOk()&&!!(l.data.value.recommendedIPv4||l.data.value.recommendedCNAME),H=e.name.endsWith(".vercel.app");if("required-change"===L&&Y&&!H&&A)return{status:"ip-downgrade",refresh:I,isRefreshing:k,level:"error",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"To avoid downtime, you must change your DNS records to match the following:"}),(0,t.jsx)(en.Spacer,{y:.5}),R]})};if(d.data?.hasCloudflareInFront)return{status:"proxy-detected",refresh:I,isRefreshing:k,ui:(0,t.jsxs)(i.Text,{children:["Using a proxy in front of Vercel prevents our automated DDOS and bot-mitigation tools from working correctly. It can also degrade performance.",(0,t.jsx)("br",{}),"To disable the proxy, update your DNS provider."," ",(0,t.jsx)(c.Link,{className:"text-blue-700",href:"https://vercel.com/guides/can-i-use-a-proxy-on-top-of-my-vercel-deployment",children:"Learn more."})]}),level:"warning"};let J=f.data?.targets?.production,K=f.data?.link?.productionBranch||"the default branch",ei=u.data?.isOk()&&!u.data.value;if(!f.isLoading&&(!J||ei))return{status:"no-deployment",refresh:I,isRefreshing:k,ui:(0,t.jsxs)(i.Text,{children:["Your domain is properly configured, but you don't have a production deployment.",(0,t.jsx)("br",{}),"To deploy to production,"," ",(0,t.jsxs)(c.Link,{href:"/docs/git",tab:!0,variant:"highlight",children:["push to ",K]}),", or run ",(0,t.jsx)(et.InlineCode,{noWrap:!0,children:"vercel --prod"})," with our"," ",(0,t.jsx)(c.Link,{href:"/cli",tab:!0,variant:"highlight",children:"command-line interface"}),"."]}),level:"warning"};if(l.data?.isOk()&&"zeit.world"===l.data.value.serviceType&&l.data.value.dnssecEnabled)return{status:"dnssec-needs-to-be-disabled",refresh:I,isRefreshing:k,ui:(0,t.jsx)(ee.Error,{children:"Your domain's nameservers are pointing to Vercel, but you must disable DNSSEC with your domain registrar in order for your nameservers to resolve globally."}),level:"error"};let ea=p.data?.isErr()&&"ApiError"===p.data.error._tag&&("public-alias"===p.data.error.error.error.code||"no-permissions-certs"===p.data.error.error.error.code);if(p.data?.isErr()&&!ea)return{status:"certs-load-failed",refresh:I,isRefreshing:k,ui:(0,t.jsx)(ee.Error,{children:"Failed to load certs"}),level:"error"};if(ea)return{status:"configured-correctly",refresh:I,isRefreshing:k,ui:null,level:null};let es=p.data?.isOk()?p.data.value?.certs:void 0,eo=g.data?.isOk()?g.data.value?.errors:void 0;if(!es?.length){let e=(0,eS.getMostRecentCertErrorInfo)(eo??[]);if(e){let{message:n,isRenewal:r}=e;return{status:r?"certs-renewal-errored":"certs-issue-errored",refresh:I,isRefreshing:k,level:"error",ui:(0,t.jsx)(ee.Error,{children:n})}}return{status:"certs-issuing",refresh:I,isRefreshing:k,ui:(0,t.jsx)("div",{className:"pt-2",children:"We are issuing the certificate for your domain, this should only take a few minutes."}),level:null}}let ed=es.filter(t=>t.cns.some(t=>(function(e,t){let n=e.toLowerCase(),r=t.toLowerCase();if(n===r)return!0;if(n.startsWith("*.")){let e=n.slice(1);return RegExp(`^[^\\.]+${e.replace(/\./g,"\\.")}$`).test(r)}return!1})(t,e.name))),ec=ed.length;return(ed=ed.filter(e=>e.expiresAt>Date.now())).length?{status:"configured-correctly",refresh:I,isRefreshing:k,ui:null,level:null}:ec?{status:"certs-expired",refresh:I,isRefreshing:k,ui:(0,t.jsxs)(ee.Error,{children:["Your SSL cert has expired, please update your"," ",(0,t.jsx)(c.Link,{as:`/${o}/~/domains/${encodeURIComponent(e.name)}`,href:"/dashboard/[teamSlug]/domains/[domain]",tab:!0,variant:"highlight",children:"cert settings"}),"."]}),level:"error"}:"optional-change"===L&&Y&&!H&&A?{status:"ip-upgrade",refresh:I,isRefreshing:k,level:"warning",ui:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pt-2",children:"Vercel recommends updating your DNS records to match the following:"}),(0,t.jsx)(en.Spacer,{y:.5}),R]})}:{status:"configured-correctly",refresh:I,isRefreshing:k,ui:null,level:null}}var eD=e.i(3821772),eE=e.i(889716),eT=e.i(5528554),eR=e.i(1093245);function eA(e){let{domain:n}=e,r=eI(n);if("loading"===r.status)return(0,t.jsx)(a.Skeleton,{className:"block rounded-full",height:"16px",width:"16px"});if(null===r.level)return(0,t.jsx)(eT.CheckCircleFill,{size:16,color:"blue-700"});switch(r.level){case"warning":return(0,t.jsx)(eT.CheckCircleFill,{size:16,color:"blue-700"});case"error":return(0,t.jsx)(eR.WarningFill,{size:16,color:"red-700"});case"spinner":return(0,t.jsx)(eE.Stack,{align:"center",direction:"row",gap:1,style:{color:"var(--ds-gray-900)"},children:(0,t.jsx)(eD.Spinner,{size:16})})}}function eP(e){let{domain:r}=e,{status:i}=eI(r);switch(i){case"proxy-detected":return(0,t.jsx)(n.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"Proxy Detected"})});case"no-deployment":return(0,t.jsx)(n.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"No Deployment"})});case"certs-issuing":return(0,t.jsx)(n.Badge,{icon:(0,t.jsx)(eD.Spinner,{size:"12px"}),size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Generating SSL Certificate"})});case"certs-load-failed":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Load Cert"})});case"certs-issue-errored":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Generate Cert"})});case"certs-renewal-errored":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Failed to Renew Cert"})});case"configured-correctly":return(0,t.jsx)("span",{className:"text-gray-900",children:"Valid Configuration"});case"dnssec-needs-to-be-disabled":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"DNSSEC Needs to be Disabled"})});case"certs-expired":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"SSL Cert Expired"})});case"invalid-configuration":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Invalid Configuration"})});case"verification-needed":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"Verification Needed"})});case"ip-downgrade":return(0,t.jsx)(n.Badge,{size:"sm",variant:"red-subtle",children:(0,t.jsx)("span",{children:"DNS Change Required"})});case"ip-upgrade":return(0,t.jsx)(n.Badge,{size:"sm",variant:"amber-subtle",children:(0,t.jsx)("span",{children:"DNS Change Recommended"})});case"pending-nameserver-propagation":return(0,t.jsx)(n.Badge,{size:"sm",variant:"gray-subtle",children:(0,t.jsx)("span",{children:"Pending Nameserver Propagation"})});case"loading":return(0,t.jsx)(a.Skeleton,{height:"20px",width:"116px"});default:return null}}var ez=e.i(7117133),e_=e.i(4113687),eO=e.i(2198583),eB=e.i(36632),eF=e.i(9536255),eM=e.i(5140160),e$=e.i(8247297),eL=e.i(8934201),eW=e.i(584439),eV=e.i(9439174),eG=e.i(1318155),eU=e.i(5249128),eY=e.i(1498235),eH=e.i(741445),eq=e.i(1164214),eJ=e.i(3621043);function eK(e){let{selfRedirect:n,setRedirect:r,savingRedirect:i,redirect:a,project:o,domain:l,disabled:d,className:c}=e,u=(0,f.useParams)(),h=u?.project,[x,p]=(0,eO.useDebounceState)("",100),{data:g=[]}=function(e){let{limit:t=10,gitBranch:n,production:r,target:i,redirect:a,redirects:s,verified:o,order:l,search:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=(0,O.useTeamSlug)();return(0,P.useIsomorphicSWR)(e?`${(0,_.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e}/domains${(0,z.encode)({limit:t,gitBranch:n,production:r,target:i,redirects:s,redirect:a,verified:o,order:l,search:d,teamId:c})}`:null,async e=>(await (0,eh.fetchAPI)(e,{throwOnHTTPError:!0})).domains)}(o?.id??h,{limit:100,search:x.length>0?x:void 0,redirects:"false"});return(0,t.jsx)(eE.Stack,{className:c,direction:{sm:"column",md:"row",lg:"row"},children:(0,t.jsx)(eE.Stack,{flex:1,children:n?(0,t.jsx)("div",{className:"w-full",style:{flex:1},children:(0,t.jsx)(s.Tooltip,{style:{minWidth:"100%"},text:"You have redirected another domain to this domain. In turn, you cannot redirect this one.",children:(0,t.jsxs)(eJ.Combobox,{className:"w-full",children:[(0,t.jsx)(eJ.Combobox.Input,{"data-testid":(0,eq.tid)("redirect-to-field","tooltip","domain-redirect"),defaultValue:"no-redirect-possible",disabled:d,style:{minWidth:"100%"},trimValue:!0}),(0,t.jsx)(eJ.Combobox.List,{hideOnEmpty:!0,children:(0,t.jsx)(eJ.Combobox.Option,{value:"no-redirect-possible",children:"No Redirect Possible"})})]})})}):(0,t.jsxs)(eJ.Combobox,{disabled:i||d,onChange:e=>{if("No Redirect"===e)return void r(null);r(e)},showMenuButton:g.length>0,value:a??"No Redirect",children:[(0,t.jsx)(eJ.Combobox.Input,{"data-testid":(0,eq.tid)("redirect-to-field","tooltip","domain-redirect"),onChange:e=>{p(e.target.value)},onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();let t=e.currentTarget.value;if("No Redirect"===t)return void r(null);r(t)}},trimValue:!0}),(0,t.jsx)(eJ.Combobox.List,{hideOnEmpty:!0,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eJ.Combobox.Option,{value:"No Redirect",children:"No Redirect"}),g.map(e=>{let{name:n}=e;return(0,t.jsx)(m.default.Fragment,{children:n===l||n.startsWith("*")?null:(0,t.jsx)(eJ.Combobox.Option,{value:n,children:n})},n)})]})})]})})})}var eQ=e.i(6921100);function eX(e){let{saving:n,setRedirectStatusCode:r,redirectStatusCode:i,disabled:a}=e;return(0,t.jsxs)(eQ.Select,{"data-testid":(0,eq.tid)("project","domain-status-code"),disabled:n||a,onChange:e=>r(Number(e.target.value)),value:i||307,width:"100%",children:[(0,t.jsxs)("optgroup",{label:"Temporary",children:[(0,t.jsx)("option",{value:"307",children:"307 Temporary Redirect"}),(0,t.jsx)("option",{value:"302",children:"302 Found"})]}),(0,t.jsxs)("optgroup",{label:"Permanent",children:[(0,t.jsx)("option",{value:"308",children:"308 Permanent Redirect"}),(0,t.jsx)("option",{value:"301",children:"301 Moved Permanently"})]})]})}function eZ(e){let{domain:n,projectDomainTarget:r,saving:i}=e,[a,s]=(0,m.useState)(r?.redirect?"redirect":"connect-to-environment"),[o,l]=(0,m.useState)(r?.gitBranch?b.EnvTarget.Preview:r?.customEnvironmentId??b.EnvTarget.Production),[d,c]=(0,m.useState)(r?.gitBranch??null),[u,h]=(0,m.useState)(r?.redirect??"No Redirect"),[x,p]=(0,m.useState)(r?.redirectStatusCode??307),g=(0,m.useCallback)(()=>{switch(a){case"connect-to-environment":if(o===b.EnvTarget.Preview&&!d)return(0,B.err)("You must select a git branch for preview environments");return(0,B.ok)({customEnvironmentId:o!==b.EnvTarget.Production&&o!==b.EnvTarget.Preview?o:void 0,gitBranch:o===b.EnvTarget.Preview?d:void 0});case"redirect":if(null===u||"No Redirect"===u)return(0,B.err)("You must select a redirect URL");return(0,B.ok)({redirect:u,redirectStatusCode:x})}},[o,d,a,x,u]),f=(0,t.jsx)("div",{className:"flex w-full flex-col",children:(0,t.jsxs)(eU.RadioGroup,{onChange:e=>{("connect-to-environment"===e||"redirect"===e)&&s(e)},disabled:i,value:a,children:[(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 rounded-t-md border border-solid border-gray-400 p-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(eU.RadioGroup.Item,{className:(0,j.cn)("text-sm  leading-5","connect-to-environment"===a?"text-gray-1000":"text-gray-900"),value:"connect-to-environment",children:"Connect to an environment"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-6 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(eY.EnvironmentsSelect,{activeEnvironmentId:o,hideDevelopment:!0,disabled:"connect-to-environment"!==a||i,onChange:e=>{l(e||null)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:o===b.EnvTarget.Preview&&(0,t.jsx)(eH.GitBranchSelectorWithProject,{disabled:"connect-to-environment"!==a||i,environmentId:o,onChange:e=>{c(e??null)},onFocus:void 0,value:d||""})})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-col items-start justify-start gap-2 rounded-b-md border border-t-0 border-solid border-gray-400 p-4",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-2",children:(0,t.jsx)(eU.RadioGroup.Item,{className:(0,j.cn)("text-sm  leading-5","redirect"===a?"text-gray-1000":"text-gray-900"),value:"redirect",children:"Redirect to Another Domain"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 pl-6 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(eX,{disabled:"redirect"!==a,redirectStatusCode:x,saving:i,setRedirectStatusCode:e=>{let t=Number(e.toString());(301===t||302===t||307===t||308===t)&&p(t)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(eK,{className:"w-full",disabled:"redirect"!==a,domain:n||"",redirect:u,savingRedirect:i,selfRedirect:!1,setRedirect:e=>{h(e)}})})]})]})]})}),v=(0,t.jsx)("div",{className:"flex w-full flex-col",children:(0,t.jsxs)(eU.RadioGroup,{onChange:e=>{("connect-to-environment"===e||"redirect"===e)&&s(e)},disabled:i,value:a,children:[(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-2 rounded-b-md p-2",children:[(0,t.jsx)("div",{className:"flex min-w-[220px] flex-row items-center gap-2",children:(0,t.jsx)(eU.RadioGroup.Item,{className:(0,j.cn)("text-sm  leading-5","connect-to-environment"===a?"text-gray-1000":"text-gray-900"),value:"connect-to-environment",children:"Connect to an environment"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(eY.EnvironmentsSelect,{activeEnvironmentId:o,hideDevelopment:!0,disabled:"connect-to-environment"!==a||i,onChange:e=>{l(e||null)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:o===b.EnvTarget.Preview&&(0,t.jsx)(eH.GitBranchSelectorWithProject,{disabled:"connect-to-environment"!==a||i,environmentId:o,onChange:e=>{c(e??null)},onFocus:void 0,value:d||""})})]})]}),(0,t.jsxs)("div",{className:"flex w-full flex-row items-center justify-start gap-2 rounded-b-md p-2",children:[(0,t.jsx)("div",{className:"flex min-w-[220px] flex-row items-center gap-2",children:(0,t.jsx)(eU.RadioGroup.Item,{className:(0,j.cn)("text-sm  leading-5","redirect"===a?"text-gray-1000":"text-gray-900"),value:"redirect",children:"Redirect to Another Domain"})}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-2 md:flex-row",children:[(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(eX,{disabled:"redirect"!==a,redirectStatusCode:x,saving:i,setRedirectStatusCode:e=>{let t=Number(e.toString());(301===t||302===t||307===t||308===t)&&p(t)}})}),(0,t.jsx)("div",{className:"w-full md:w-1/2",children:(0,t.jsx)(eK,{className:"w-full",disabled:"redirect"!==a,domain:n||"",redirect:u,savingRedirect:i,selfRedirect:!1,setRedirect:e=>{h(e)}})})]})]})]})});return{ui:"inline"===e.style?v:f,getProjectDomainTarget:g}}var e0=e.i(6451042);function e1(e){let{domain:n,setDomain:r,redirectApexToWWW:i,setRedirectApexToWWW:a}=e,[o,l]=(0,eO.useDebounceState)(i,250),d=n.endsWith(".ve")?o:eb(n);return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("div",{children:(0,t.jsx)(eV.AutocompleteDomainInput,{onChange:e=>{r(e?e.toLowerCase():""),l(!!e&&eb(e))},onSubmit:()=>{e.onSubmit()},value:n,disabled:e.disabled})}),(0,t.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,t.jsx)("div",{className:(0,j.cn)("flex flex-col gap-2",d?"visible":"invisible h-[21px]"),children:(0,t.jsx)("div",{className:"flex select-none flex-row gap-2 ",children:(0,t.jsx)(e$.Checkbox,{checked:i,onChange:e=>{a(e.target.checked)},height:8,width:8,children:(0,t.jsxs)("span",{className:"select-none break-all text-sm text-gray-900",children:["Redirect ",(0,ej.get)(n)," to www.",(0,ej.get)(n)," ",(0,t.jsx)(s.Tooltip,{text:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2",children:["Using a www subdomain allows for faster DNS resolution, improved website performance and more flexible routing.",(0,t.jsxs)(c.Link,{className:"ml-2 flex flex-row items-center text-xs text-blue-900",target:"_blank",rel:"noopener noreferrer",href:"https://vercel.com/docs/domains/working-with-domains#apex-domain",children:[(0,t.jsx)("span",{className:"text-blue-900",children:"Learn more"}),(0,t.jsx)(eG.External,{size:12,className:"ml-1"})]})]}),children:"(Recommended)"})]})})})})})]})}function e2(e){let{onClose:n,project:r,teamSlug:i,onSave:a,initialAddDomainInput:o}=e,[l,c]=(0,m.useState)(o??""),[u,h]=(0,m.useState)(!0),x=!!eb(l)&&u,[p,g]=(0,m.useState)(null),[f,j]=(0,m.useTransition)(),{getProjectDomainTarget:v,ui:y}=eZ({saving:f,domain:l}),b=(0,eW.useToasts)(),{data:w}=(0,er.useProject)(r),S=v(),N=null;0===l.length?N="Please enter a domain":S.isErr()&&(N=S.error);let k=async()=>{if((0,eN.preloadDomainConnectStatus)(l).catch(()=>null),S.isErr())return g(S.error),!1;if((0,I.default)(l)&&(0,$.isPublicAlias)(l))return g("Wildcard subdomains are not supported for .vercel.app domains."),!1;try{let e=(0,I.default)(l)?{domain:l,error:null}:(0,ej.parse)(l);if(e.error||!e.domain)return g("The domain you are trying to add is invalid, please enter a valid domain name and try again"),!1;let t=await (0,C.addProjectDomain)({domain:x?`www.${e.domain}`:l,project:{id:r},team:{id:i},customEnvironmentId:S.value.customEnvironmentId,gitBranch:S.value.gitBranch,redirect:S.value.redirect,redirectStatusCode:S.value.redirectStatusCode});if(x&&await (0,C.addProjectDomain)({domain:e.domain,project:{id:r},team:{id:i},redirect:S.value.redirect??t.name}),b.success("Domain added to project"),(0,I.default)(l)){let e=`?teamId=${encodeURIComponent(i)}`;try{await (0,eh.fetchAPI)(`${_.API_DOMAINS}/${encodeURIComponent(l)}${e}`,{method:"PATCH",body:JSON.stringify({zone:!0}),throwOnHTTPError:!0})}catch(t){let e=(0,eB.isError)(t)?t.message:"Failed to update zone";return g(e),!1}}return!0}catch(t){if((0,e0.isDomainConflictError)(t)){if(t.projectId===w?.id||t.projectName===w?.name)return g("You are already using this domain on this project."),!1;return e.onDomainTransferRequest({domain:l,projectIdOrNameInUse:t.projectId||t.projectName||""}),!1}if((0,e0.isDomainOwnedOnOtherTeamError)(t))return g("Another team is already using this domain."),!1;return g((0,eB.isError)(t)?t.message:"string"==typeof t?t:"An error occurred"),!1}};return(0,t.jsxs)(eL.Modal,{active:!0,onClickOutside:n,children:[(0,t.jsxs)(eL.Modal.Body,{children:[(0,t.jsx)(eL.Modal.Title,{children:"Add Domain"}),(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsx)("div",{className:"pt-6",children:"Add a domain to connect it to a project. After being connected, the domain will be aliased to the most recent deployment in that environment."}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 pb-2",children:[(0,t.jsx)(e1,{disabled:f,domain:l,setDomain:c,onSubmit:()=>{j(async()=>{await k()&&(await a?.(),n())})},redirectApexToWWW:x,setRedirectApexToWWW:h}),y]}),p?(0,t.jsx)(d.Note,{type:"error",fill:!0,children:p}):null]})]}),(0,t.jsxs)(eL.Modal.Actions,{children:[(0,t.jsx)(eL.Modal.Action,{onClick:n,type:"secondary",children:"Cancel"}),(0,t.jsx)(s.Tooltip,{text:N,disableTriggers:!N,children:(0,t.jsx)(eL.Modal.Action,{loading:f,disabled:!!N,onClick:()=>{j(async()=>{await k()&&(await a?.(),n())})},children:"Save"})})]})]})}var e3=e.i(2531953),e5=e.i(674684),e4=e.i(5175803),e6=e.i(1268665),e8=e.i(9185154),e7=e.i(3514588),e9=e.i(969352),te=e.i(1389821),tt=e.i(5261442),tn=e.i(2087248),tr=e.i(2360064);function ti(e){let{project:n,hideSkeleton:r=!1,size:i=32,style:s}=e,o=(0,te.getProductionDeployment)(n),{data:l}=(0,tt.default)({project:n}),d=(0,te.useFramework)(n);return(d||o&&l)&&r?(0,t.jsx)(e4.Avatar,{className:(0,g.clsx)({[tr.default.favicon]:!l?.isSquare,"bg-white/75 rounded-full shadow-border shadow-background-100 dark:bg-foreground dark:shadow-foreground":!!(!l&&d)}),size:i,src:l?.src||d?.logo,style:s,title:n?n.name:void 0}):(0,t.jsx)(a.Skeleton,{height:i,rounded:!0,style:{flexShrink:0},width:i})}function ta(e){let{active:n,domain:r,projectIdOrNameInUse:s,onCancel:o,onComplete:l}=e,[u,h]=(0,m.useState)(!1),x=(0,te.useProjectIdOrName)(),{data:p}=(0,er.useProject)(x),{team:g,isReady:f}=(0,e7.useTeam)(),{data:j}=(0,er.useProject)(r&&s?s:null),{data:v}=(0,ev.useProjectDomain)(j?{projectId:j.id,name:r}:null),y=v?v.redirect??v.name:null,b=n&&!!y&&!!p&&!!j,[w,{domains:S,isLoadingMore:N,loadMore:C,isReachingEnd:k,initialDataLoaded:I}]=(0,ev.useProjectDomainsInfinite)(v&&j?j.id:null,y?{redirect:y,limit:20}:{}),D=(0,e5.useRouter)(),E=`/${D.query.teamSlug}/${j?.name}/settings/domains`,T=`/${D.query.teamSlug}/${p?.name}/settings/domains`,R=(0,m.useCallback)(()=>{o(),h(!1)},[o]),A=async()=>{p&&r&&s&&v&&j&&y&&(h(!0),await (0,tn.moveProjectDomain)({project:j,isReady:f,name:y,team:g,newProjectId:p.id}),l(),h(!1))};return(0,t.jsxs)(eL.Modal.Modal,{active:b,onClickOutside:R,children:[(0,t.jsx)(eL.Modal.Body,{children:(0,t.jsxs)(eE.Stack,{direction:"column",gap:8,children:[(0,t.jsxs)("header",{className:"jsx-aedf4df6a7382869",children:[(0,t.jsx)(eL.Modal.Title,{children:"Move Domain"}),(0,t.jsxs)(i.Text,{children:["This domain is already associated with another project."," ",y&&y===r?(0,t.jsx)(t.Fragment,{children:"Please confirm you'd like to move the following domain and its redirects:"}):(0,t.jsx)(t.Fragment,{children:"Please confirm you'd like to transfer the following domain and the domain it redirects to:"})]})]}),(0,t.jsxs)(eE.Stack,{direction:"column",gap:8,children:[y?(0,t.jsx)(d.Note,{className:tr.default.noteCenterText,fill:!0,label:!1,size:"small",type:"lite",variant:"contrast",children:(0,t.jsx)(i.Text,{align:"center",children:(0,t.jsx)(c.Link,{external:!0,href:`https://${y}`,tab:!0,type:"highlight",children:y})})}):(0,t.jsx)(a.Skeleton,{height:32,width:"100%"}),(0,t.jsxs)(eE.Stack,{direction:"row",justify:"space-evenly",children:[(0,t.jsxs)(eE.Stack,{align:"center",direction:"column",flex:"0 0 36%",gap:2,children:[(0,t.jsx)(c.Link,{href:E,target:"_blank",children:(0,t.jsx)(ti,{hideSkeleton:!!(p&&j),project:j})}),(0,t.jsx)(i.Text,{align:"center",className:"geist-hide-on-mobile",style:{maxWidth:"100px"},truncate:3,weight:500,wrap:!0,children:j&&p?(0,t.jsx)(c.Link,{href:E,target:"_blank",title:j.name,variant:"primary",children:j.name}):(0,t.jsx)(a.Skeleton,{height:20,width:100})})]}),(0,t.jsxs)(eE.Stack,{align:"center",direction:"column",flex:"0 0 36%",gap:2,children:[(0,t.jsx)(c.Link,{href:T,target:"_blank",children:(0,t.jsx)(ti,{hideSkeleton:!!(p&&j),project:p})}),(0,t.jsx)(i.Text,{align:"center",className:"geist-hide-on-mobile",style:{maxWidth:"100px"},truncate:3,weight:500,wrap:!0,children:j&&p?(0,t.jsx)(c.Link,{href:T,target:"_blank",title:p.name,variant:"primary",children:p.name}):(0,t.jsx)(a.Skeleton,{height:20,width:100})})]})]})]}),(0,t.jsxs)(eL.Modal.Outset,{children:[(0,t.jsx)(ts,{count:S.length+1,loading:!I,title:(0,t.jsxs)("span",{className:"jsx-aedf4df6a7382869",children:[S.length+1," ",0===S.length?"domain":"domains"," will be moved."]}),children:(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869",children:[(0,t.jsx)(to,{children:(0,t.jsx)(c.Link,{external:!0,href:`https://${y}`,style:{flexGrow:"1"},tab:!0,children:y})},y),S.map(e=>(0,t.jsx)(to,{children:(0,t.jsx)(c.Link,{external:!0,href:`https://${e.name}`,style:{flexGrow:"1"},tab:!0,children:e.name})},e.name)),!k&&(0,t.jsxs)("div",{className:"jsx-aedf4df6a7382869 "+(tr.default.inset||""),children:[(0,t.jsx)(e8.LoadMoreButton,{loading:N,onClick:C}),(0,t.jsx)(en.Spacer,{})]})]})}),(0,t.jsx)(en.Spacer,{y:-1})]})]})}),(0,t.jsxs)(eL.Modal.Actions,{children:[(0,t.jsx)(eL.Modal.Action,{onClick:R,type:"secondary",children:"Cancel"}),(0,t.jsx)(eL.Modal.Action,{loading:u,onClick:A,children:u?(0,t.jsx)(e6.LoadingDots,{children:"Moving"}):`Move ${S.length+1}${k?"":"+"} ${S.length+1>1?"domains":"domain"}`})]}),(0,t.jsx)(e3.default,{id:"aedf4df6a7382869",children:"header.jsx-aedf4df6a7382869{max-width:440px;margin:0 auto}header.jsx-aedf4df6a7382869>h2{text-align:center;margin:0}header.jsx-aedf4df6a7382869>p{color:var(--accents-5);margin:10px auto 0}.added.jsx-aedf4df6a7382869{color:#999;flex:none}"})]})}function ts(e){let{title:n,children:r,loading:i,count:a,open:s}=e;return i?(0,t.jsx)("div",{className:tr.default.loadingItem,children:(0,t.jsx)(eD.Spinner,{size:14})}):0===a?(0,t.jsx)(e9.Details,{title:n}):(0,t.jsx)(e9.Details,{open:s,title:n,children:(0,t.jsx)("div",{className:tr.default.content,children:r})})}function to(e){let{children:n}=e;return(0,t.jsx)(e9.Item,{className:tr.default.subitem,children:n})}var tl=e.i(9975426),td=e.i(1131645),tc=e.i(1379429);function tu(e){let{newDomain:n,oldDomain:r,onCancel:a,onSave:s,teamSlug:o,project:l}=e,[c,u]=(0,m.useTransition)(),[h,x]=(0,m.useState)("redirect-old-to-new"),[p,g]=(0,m.useState)(null),f=(0,m.useCallback)(()=>{a()},[a]),v=(0,m.useCallback)(async()=>{try{await (0,C.addProjectDomain)({domain:n.domainName,project:{id:l},team:{id:o},customEnvironmentId:n.customEnvironmentId,gitBranch:n.gitBranch,redirect:n.redirect,redirectStatusCode:n.redirectStatusCode})}catch(e){g((0,eB.isError)(e)?e.message:"An unknown error occurred");return}try{switch(h){case"redirect-old-to-new":await (0,tl.default)({isReady:!0,project:{id:l},team:{id:o},projectDomain:r,redirect:n.domainName,redirectStatusCode:307});break;case"delete-old":await (0,C.removeProjectDomain)(l,o,r.name,!1)}}catch(e){await (0,C.removeProjectDomain)(l,o,n.domainName,!1).catch(()=>null),g((0,eB.isError)(e)?e.message:"An unknown error occurred");return}s(n)},[h,n,l,o,r,s]);return(0,t.jsxs)(eL.Modal,{active:!0,onClickOutside:f,children:[(0,t.jsxs)(eL.Modal.Body,{children:[(0,t.jsx)(eL.Modal.Title,{children:"Edit domain"}),(0,t.jsx)(en.Spacer,{}),(0,t.jsx)("div",{className:"flex flex-col gap-2 pb-2",children:(0,t.jsxs)("span",{children:["You've edited the domain name from ",(0,t.jsx)("b",{children:r.name})," to"," ",(0,t.jsx)("b",{children:n.domainName}),"."]})}),(0,t.jsxs)(eE.Stack,{direction:"column",gap:2,children:[(0,t.jsx)(eU.RadioGroup,{onChange:e=>x(e),value:h,children:(0,t.jsxs)(eE.Stack,{gap:2,children:[(0,t.jsx)(tc.Card,{className:(0,j.cn)("border border-solid border-gray-400 p-0 pl-4","redirect-old-to-new"===h&&"border-blue-700"),gap:2,padding:4,secondary:"redirect-old-to-new"===h,children:(0,t.jsx)(eU.RadioGroup.Item,{fullWidth:!0,value:"redirect-old-to-new",children:(0,t.jsxs)(eE.Stack,{className:"p-4 pl-2",direction:"column",justify:"space-between",children:[(0,t.jsx)(i.Text,{weight:500,children:"Redirect old domain to new"}),(0,t.jsxs)(i.Text,{color:"gray-900",children:["Automatically send visitors from ",r.name," to"," ",n.domainName]})]})})}),(0,t.jsx)(tc.Card,{className:(0,j.cn)("border border-solid p-0 pl-4","delete-old"===h?"border-blue-700":"border-gray-400"),gap:2,padding:4,secondary:"delete-old"===h,children:(0,t.jsx)(eU.RadioGroup.Item,{className:"items-center",fullWidth:!0,value:"delete-old",children:(0,t.jsxs)(eE.Stack,{className:"p-4 pl-2",direction:"column",justify:"space-between",children:[(0,t.jsx)(i.Text,{weight:500,children:"Remove old domain"}),(0,t.jsxs)(i.Text,{color:"gray-900",children:["Permanently delete ",r.name," and replace it with"," ",n.domainName]})]})})})]})}),p?(0,t.jsx)(d.Note,{type:"error",fill:!0,children:p}):null]})]}),(0,t.jsxs)(eL.Modal.Actions,{children:[(0,t.jsx)(eL.Modal.Action,{onClick:f,type:"secondary",disabled:c,children:"Cancel"}),(0,t.jsx)(eL.Modal.Action,{onClick:()=>{u(v)},loading:c,children:"Save"})]})]})}var tm=e.i(4237550);function th(){let[e,t]=(0,w.useQueryState)("show-add-domain-modal",{...S.parseAsBoolean,shallow:!0});return{showAddDomainModal:e??!1,setShowAddDomainModal:t}}function tx(e){let{setShowAddDomainModal:n}=th(),{can:i,isLoading:a}=(0,v.default)({projectIdOrName:e.projectId}),o=i(y.Action.Update,y.Resource.Project),l=!a&&!o;return(0,t.jsx)(s.Tooltip,{disableTriggers:!l,text:"You don't have permission to add domains to this project. Ask your team admin to add a domain or grant you the member role or higher.",children:(0,t.jsx)(r.Button,{disabled:l,onClick:()=>void n(!0),children:"Add Domain"})})}function tp(){let[e,t]=(0,w.useQueryState)("search",{...S.parseAsString,shallow:!0});return{search:e??void 0,setSearch:e=>t(e??null)}}function tg(e){let{search:t}=tp(),[{mutate:n},{domains:r,loadMore:i,isLoadingMore:a,isReachingEnd:s,isLoading:o}]=function(e){let{limit:t=20,gitBranch:n,production:r,redirect:i,redirects:a,search:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,l=(0,O.useTeamSlug)(),d=(0,ez.useIsomorphicSWRInfinite)((o,d)=>{let c=`${(0,_.API_PROJECTS_DOMAINS_VERSION)("v9")}/${e}/domains`;if(!o)return`${c}${(0,z.encode)({limit:t+1,gitBranch:n,production:r,redirect:i,redirects:a,teamId:l,search:s})}`;let u=(d?.domains.length||0)>t?d?.domains[t-1].createdAt:null;return u?`${c}${(0,z.encode)({limit:t+1,gitBranch:n,production:r,redirects:a,teamId:l,until:u})}`:""},async e=>""===e?{domains:[],pagination:{count:0,next:null,prev:null}}:(0,eh.fetchAPI)(e,{throwOnHTTPError:!0}),o),c=d.data?.flatMap(e=>e.domains.slice(0,t))??[],u=d.size>(d.data?.length??0),m=d.data?.[d.data.length-1];return[d,{domains:c,loadMore:()=>d.setSize(e=>e+1),isLoadingMore:u,isReachingEnd:m?m.domains.length<=t:void 0,isLoading:d.isLoading}]}(e,{limit:tS,search:t});return{domains:r,revalidateDomains:n,loadMore:i,isLoadingMore:a,isReachingEnd:s,isLoading:o}}function tf(e){let{domain:r,project:i}=e,{data:a}=(0,k.useCustomEnvironments)(i,{revalidateIfStale:!1});if(r.redirect)return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.CornerDownRight,{size:16}),(0,t.jsx)(n.Badge,{size:"sm",variant:"gray-subtle",children:r.redirectStatusCode??307}),(0,t.jsx)("span",{className:"truncate",children:r.redirect})]});if(r.customEnvironmentId){let e=a?.customEnvironments.find(e=>e.id===r.customEnvironmentId);return(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(E.EnvironmentIcon,{id:r.customEnvironmentId}),e?.slug]})}return r.gitBranch?(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(h.GitBranch,{}),(0,t.jsx)("span",{className:"truncate",children:r.gitBranch})]}):(0,t.jsxs)("div",{className:"flex flex-[1_0_0] items-center gap-2 overflow-hidden font-mono text-sm font-normal leading-5 text-gray-900",children:[(0,t.jsx)(E.EnvironmentIcon,{id:b.EnvTarget.Production}),"Production"]})}function tj(e){let{domain:n,project:i,editingDomain:a,setEditingDomain:o,onOpenAccordion:l}=e,{can:d}=(0,v.default)({projectIdOrName:i}),c=eI(n);if(a)return null;let u=!d(y.Action.Update,y.Resource.Project);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Button,{loading:"loading"===c.status||c.isRefreshing,type:"secondary",size:"small",className:"hidden lg:flex",onClick:()=>{"loading"!==c.status&&c.refresh()},children:"Refresh"}),(0,t.jsx)(s.Tooltip,{disableTriggers:!u,text:"You don't have permission to edit domains from this project. Ask your team admin to edit a domain or grant you the member role or higher.",children:(0,t.jsx)(r.Button,{disabled:u,onClick:()=>{o(!0),l(n.name)},size:"small",type:"secondary",children:"Edit"})})]})}function tv(e){let{domain:n,search:r,textOnly:i}=e,{status:a}=eI(n),[s,o]=(0,m.useState)(!1),l=e=>{if(!r)return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:e});let n=function(e,t){let n=e.toLowerCase(),r=t.toLowerCase();if(!n)return null;let i=r.indexOf(n);if(-1!==i)return[i,i+n.length];let a=null,s=0,o=0;for(let e=0;e<r.length;e++)for(let t=Math.min(n.length,r.length-e);t>=2;t--){let i=r.substring(e,e+t);if(n.includes(i)||i.includes(n)){let r=1/(e+1)*t*(t/n.length);r>o&&(a=[e,e+t],s=t,o=r)}}if(a&&s>=2)return a;let l=-1,d=0,c=null,u=0;for(let e=0;e<r.length;e++){let t=r[e];n.includes(t)?(-1===l&&(l=e),d++):(d>u&&(c=[l,l+d],u=d),l=-1,d=0)}return(d>u&&(c=[l,l+d]),c&&c[1]-c[0]>=2)?c:null}(r,e);if(!n)return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:e});let[i,a]=n,s=e.substring(i,a);return(0,t.jsx)("span",{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",children:(0,t.jsx)(eF.HighlightText,{as:"span",search:s,text:e})})};return"loading"===a||i?l(n.name):(0,I.default)(n.name)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Link,{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",onClick:()=>o(!0),children:l(n.name)}),s?(0,t.jsx)(D.default,{active:s,onCancel:()=>o(!1),url:n.name.replace("*.","")}):null]}):(0,t.jsx)(c.Link,{className:"truncate text-sm font-medium leading-5 text-gray-alpha-1000 no-underline",href:`https://${n.name}`,rel:"noreferrer noopener",target:"_blank",children:l(n.name)})}function ty(e){let{domain:n,ui:i,onSave:a,onRemove:s,onCancel:o,projectDomainTarget:c,teamSlug:u,project:h}=e,[x,p]=(0,m.useState)(n.name),[g,f]=(0,m.useState)(null),j=null;0===x.length?j="Domain name is required":c.isErr()&&(j=c.error);let[v,y]=(0,m.useState)(null),b=(0,m.useCallback)(async e=>{e.domainName=e.domainName.toLowerCase();try{e.domainName!==n.name?y({newDomain:e,oldDomain:n}):(await (0,tl.default)({project:{id:h},team:{id:u},projectDomain:n,isReady:!0,customEnvironmentId:e.customEnvironmentId,gitBranch:e.gitBranch,redirect:e.redirect,redirectStatusCode:e.redirectStatusCode}),a(e))}catch(e){f((0,eB.isError)(e)?e.message:"We encountered an error while saving this domain. If the problem persists, please contact support.")}},[n,a,h,u]);return(0,t.jsxs)("div",{className:"pb-6 pt-2",children:[v?(0,t.jsx)(tu,{newDomain:v.newDomain,oldDomain:v.oldDomain,onCancel:o,onSave:e=>{a(e)},teamSlug:u,project:h}):null,(0,t.jsx)(l.Input,{"aria-labelledby":"domain-label",value:x,label:"Domain",onChange:e=>{p(e.target.value)}}),(0,t.jsx)("div",{className:"pt-4",children:i}),g?(0,t.jsx)(d.Note,{type:"error",children:g}):null,(0,t.jsxs)("div",{className:"flex flex-row justify-between gap-2 pt-4",children:[(0,t.jsx)(r.Button,{onClick:s,type:"error",children:"Remove"}),(0,t.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,t.jsx)(r.Button,{type:"secondary",onClick:o,children:"Cancel"}),(0,t.jsx)(r.Button,{disabled:null!==j,onClick:()=>{c.isErr()||b({domainName:x,redirect:c.value.redirect??null,redirectStatusCode:c.value.redirectStatusCode??null,gitBranch:c.value.gitBranch??null,customEnvironmentId:c.value.customEnvironmentId||void 0})},children:"Save"})]})]})]})}function tb(e){let{status:n,editingDomain:r,domain:i,project:a,revalidateDomains:s,setEditingDomain:o,getProjectDomainTarget:l,ui:d,teamSlug:c,setRemoveModal:u,onCloseAccordion:m}=e;if(r)return(0,t.jsx)("div",{className:"p-2 md:px-7",children:(0,t.jsx)(ty,{domain:i,project:a,onSave:async()=>{await s(),o(!1),m(i.name)},projectDomainTarget:l(),onCancel:()=>{m(i.name),o(!1)},ui:d,teamSlug:c,onRemove:()=>{u(!0)}})});if("loading"===n.status)return null;if(null===n.level){let e=new Date(Date.now()-864e5),n=new Date(i.createdAt),r=(0,$.isPublicAlias)(i.name);return n>e&&!r?(0,t.jsx)("div",{className:"p-2 px-7",children:(0,t.jsx)(td.DnsPropagationNote,{children:"Depending on your provider, it might take some time for the DNS records to propagate globally."})}):null}return(0,t.jsxs)("div",{className:"px-7 pb-4 pt-0",children:[" ",n.ui," "]})}function tw(e){let{domain:n,project:r,teamSlug:a,search:s,onOpenAccordion:o,onCloseAccordion:l}=e,[d,u]=(0,m.useState)(!1),{revalidateDomains:h}=tg(r),[x,f]=(0,m.useState)(!1),[v,y]=(0,m.useState)(void 0),[b,w]=(0,m.useTransition)(),S=(0,A.useIsMobile)(),k=el(n.name),I=k.data?.isOk()?k.data.value.domain.teamId:null,{getProjectDomainTarget:D,ui:E}=eZ({domain:n.name,projectDomainTarget:n,saving:!1,style:S?"cards":"inline"}),T=(0,m.useCallback)(async e=>{let{removeRedirects:t=!1}=e;try{await (0,C.removeProjectDomain)(r,a,n.name,t),await h(),u(!1),f(!1)}catch(e){y((0,eB.isError)(e)?e.message:"We encountered an error while removing this domain. If the problem persists, please contact support.")}},[r,a,n.name,h]),R=eI(n),P="loading"===R.status||null===R.level||x;return(0,t.jsxs)("div",{className:(0,j.cn)("border-b-400 border-b border-solid",e.className),children:[(0,t.jsxs)(p.Item,{value:n.name,children:[(0,t.jsx)("div",{className:"flex w-full flex-col px-4 ",children:(0,t.jsxs)("div",{className:"flex h-[70px] w-full flex-row items-center justify-between",children:[(0,t.jsxs)(p.Trigger,{className:(0,g.clsx)("flex select-text items-center gap-3 self-stretch overflow-hidden bg-transparent p-0 [font-family:Geist]",{"cursor-pointer":!P,"cursor-default":P}),disabled:P,children:[(0,t.jsx)(eA,{domain:n}),(0,t.jsx)("div",{className:"flex w-[220px] min-w-0 items-center gap-2 md:w-[359px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-end gap-2",children:[(0,t.jsx)(tv,{domain:n,search:s,textOnly:!P}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(eP,{domain:n}),x||P?null:(0,t.jsxs)("div",{className:"flex items-center gap-0 text-xs text-gray-alpha-1000",children:["Learn more",(0,t.jsx)(tm.ChevronDown,{className:(0,g.clsx)("ease-[ease] transition-transform duration-200","[[data-state=open]_&]:rotate-180"),size:12,color:"gray-900"})]})]})]})}),(0,t.jsx)("div",{className:"hidden shrink items-center gap-2 overflow-hidden truncate font-mono text-sm font-normal leading-5 text-gray-900 md:flex",children:(0,t.jsx)(tf,{domain:n,project:r})})]}),(0,t.jsx)("div",{className:"flex shrink-0 items-center gap-3",children:(0,t.jsx)(tj,{domain:n,project:r,editingDomain:x,setEditingDomain:f,onOpenAccordion:o})})]})}),k.data?.isOk()&&k.data.value.domain.zone?(0,t.jsx)("div",{className:"px-11 pb-2",children:(0,t.jsx)(i.Text,{children:(0,t.jsxs)(c.Link,{href:I?`/${a}/~/domains/${n.apexName}`:`/dashboard/domains/${n.apexName}`,variant:"highlight",className:"text-xs",children:["View DNS Records & More for ",n.apexName," →"]})})}):null,(0,t.jsx)(p.Content,{className:"overflow-hidden will-change-[height] md:px-4 [[data-state=open]_&]:animate-content-open",children:(0,t.jsx)(tb,{status:R,editingDomain:x,domain:n,project:r,revalidateDomains:h,setEditingDomain:f,getProjectDomainTarget:D,ui:E,teamSlug:a,setRemoveModal:u,onCloseAccordion:l},n.name)})]}),d?(0,t.jsx)(N.RemoveDomainModal,{domain:n.name,onRemoveDomain:e=>{w(async()=>{await T(e)})},removeModal:d,removing:b,setRemoveModal:u,error:v}):null]})}let tS=90;function tN(e){let{isLoadingMore:n,isReachingEnd:i,loadMore:a}=tg(e.project);return(0,t.jsx)("div",{className:"flex w-full items-center justify-center",children:void 0!==i&&!i&&(0,t.jsx)(r.Button,{type:"tertiary",className:"w-full",loading:n,onClick:()=>void a(),children:"Load more"})})}function tC(e){let{domains:n,loadMore:r,isLoadingMore:i,isReachingEnd:a,isLoading:s}=tg(e.project),{search:l}=tp(),[d,c]=(0,m.useState)([]),u=(0,m.useCallback)(e=>{c(e)},[]),h=(0,m.useCallback)(e=>{c(t=>t.includes(e)?t:[...t,e])},[]),x=(0,m.useCallback)(e=>{c(t=>t.filter(t=>t!==e))},[]);return s?(0,t.jsx)(tI,{}):n.length?(0,t.jsx)(p.Root,{type:"multiple",value:d,onValueChange:u,children:(0,t.jsx)("div",{className:"flex flex-col  items-start justify-center self-stretch rounded-md border border-solid border-gray-400 bg-background-100",children:(0,t.jsx)(e_.Virtuoso,{style:{width:"100%"},data:n,endReached:()=>{i||a||r()},useWindowScroll:!0,components:{Footer:()=>i?(0,t.jsx)(tN,{project:e.project}):null},itemContent:(r,i)=>(0,t.jsx)(tw,{domain:i,className:r===n.length-1?"border-b-0":"",project:e.project,teamSlug:e.teamSlug,search:l,onOpenAccordion:h,onCloseAccordion:x},i.name)})})}):(0,t.jsx)(o.EmptyState.Root,{paddingY:96,descriptionClassName:"max-w-none",titleClassName:"max-w-none",title:"No Results Found",description:"Your search did not return any results.",children:(0,t.jsx)(tx,{projectId:e.project})})}let tk=[1,2,3];function tI(){return(0,t.jsx)("div",{className:"flex flex-col items-start justify-center self-stretch rounded-md border border-solid border-gray-400 bg-background-100",children:tk.map(e=>(0,t.jsx)("div",{className:(0,j.cn)("border-b-400 border-b border-solid w-full"),children:(0,t.jsx)("div",{className:"flex w-full flex-col px-4 ",children:(0,t.jsxs)("div",{className:"flex h-[70px] w-full flex-row items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 self-stretch overflow-hidden bg-transparent p-0 [font-family:Geist]",children:[(0,t.jsx)(a.Skeleton,{className:"block rounded-full",height:"16px",width:"16px"}),(0,t.jsx)("div",{className:"flex w-[220px] min-w-0 items-center gap-2 md:w-[359px]",children:(0,t.jsxs)("div",{className:"flex flex-col items-start justify-end gap-2",children:[(0,t.jsx)(a.Skeleton,{className:"h-[20px]",width:"142px"}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(a.Skeleton,{className:"h-[20px]",width:"116px"})})]})}),(0,t.jsx)("div",{className:"hidden shrink items-center gap-2 overflow-hidden truncate font-mono text-sm font-normal leading-5 text-gray-900 md:flex",children:(0,t.jsx)(a.Skeleton,{className:"h-[20px]",width:"108px"})})]}),(0,t.jsx)("div",{className:"flex shrink-0 items-center gap-3",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.Button,{loading:!0,type:"secondary",size:"small",className:"hidden lg:flex",children:"Refresh"}),(0,t.jsx)(r.Button,{disabled:!0,size:"small",type:"secondary",children:"Edit"})]})})]})})},e))})}function tD(){let e=(0,f.useParams)(),n=e?.teamSlug,r=e?.project,{search:a,setSearch:s}=tp(),{domains:l,isLoading:d,revalidateDomains:h}=tg(r),x=(0,eO.useDebouncedCallback)(e=>{s(e)},200),{domain:p,setDomain:g}=function(){let[e,t]=(0,w.useQueryState)("domain",{...S.parseAsString,shallow:!0});return{domain:e,setDomain:t}}(),{showAddDomainModal:j,setShowAddDomainModal:v}=th(),[y,b]=(0,m.useState)(null),N=!a&&!d&&0===l.length,C=a??p??null,[k,I]=(0,m.useState)(a??"");return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Text,{as:"h2",size:24,children:(0,t.jsx)(u.SearchContextHighlighter,{children:"Domains"})}),(0,t.jsx)("span",{className:"hidden md:block",children:(0,t.jsx)(i.Text,{className:"text-gray-900",children:"Domains can be assigned to git branches, custom environments, and production."})})]}),N?null:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.ButtonLink,{className:"hidden md:flex",href:`/domains?q=${a?.length?a:""}&teamSlug=${n}`,type:"secondary",children:"Buy Domain"}),(0,t.jsx)(tx,{projectId:r})]})]}),(0,t.jsx)("span",{className:"block md:hidden",children:"These are your domains assigned to branches & production deployments."}),N?(0,t.jsx)(o.EmptyState.Root,{paddingY:28,icon:(0,t.jsx)(o.EmptyState.Icon,{icon:(0,t.jsx)(eM.Globe,{size:32})}),descriptionClassName:"max-w-none",titleClassName:"max-w-none",title:"No domains have been added yet",description:"Add or purchase a domain to get started",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-2 sm:flex-row",children:[(0,t.jsx)(c.ButtonLink,{href:`/domains?q=${a?.length?a:""}&teamSlug=${n}`,type:"secondary",children:"Buy Domain"}),(0,t.jsx)(tx,{projectId:r})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(R,{value:k,setSearch:e=>{x(e),I(e??"")}}),(0,t.jsx)(tC,{project:r,teamSlug:n})]}),j?(0,t.jsx)(e2,{onClose:()=>{v(null),g(null)},onSave:async()=>{await Promise.all([s(void 0),g(null)]),I(""),await h(),await v(null)},initialAddDomainInput:C,project:r,onDomainTransferRequest:e=>{v(null),b(e)},teamSlug:n}):null,y?(0,t.jsx)(ta,{domain:y.domain,onCancel:()=>b(null),active:!0,onComplete:()=>{b(null),h()},projectIdOrNameInUse:y.projectIdOrNameInUse}):null]})}}}]);

//# sourceMappingURL=af0707d8b3a3ff90.js.map
//# debugId=8b3ad355-8a26-5a35-a44b-829f10b0d1a8
