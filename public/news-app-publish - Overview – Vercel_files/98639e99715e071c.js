
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="d037fee3-ec19-582b-bc45-858dca86339d")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{7731689:e=>{e.v({projectAvatar:"project-avatar-module__-Kyy1W__projectAvatar"})},6253446:e=>{"use strict";e.s({DeploymentOrFrameworkAvatar:()=>d,ProjectWithDeploymentAvatar:()=>c});var t=e.i(6645307),l=e.i(5610210),r=e.i(4355604),i=e.i(5175803),a=e.i(6649026),n=e.i(3514588),s=e.i(5751047),o=e.i(7731689);function c(e){let{project:r,size:i=20,className:a,title:n,isLoading:s}=e,c=r?.latestDeployments?.[0];return(0,t.jsx)(d,{className:(0,l.clsx)(o.default.projectAvatar,a),deploymentId:c?.id,framework:r?.framework,isLoading:s,size:i,title:n})}function d(e){let{deploymentId:l,framework:r,size:a=20,className:n,title:o,isLoading:c}=e,{data:d,isLoading:m}=u(l),{data:p}=(0,s.useFrameworks)(),h=p?p.find(e=>e.slug===(r||null)):null,g=d?.src||h?.logo;return c||m||!g?(0,t.jsx)(i.Avatar,{className:n,placeholder:!0,size:a,title:o}):(0,t.jsx)(i.Avatar,{className:n,size:a,src:g,title:o})}let u=e=>{let{isReady:t,team:l}=(0,n.useTeam)();return(0,r.default)(e&&t?[e,"favicon"]:null,async e=>{let[t]=e;if(!t)return null;let r=await fetch(`/api/favicon${(0,a.encode)({deploymentId:t,teamId:l?.id})}`);if(!r.ok||204===r.status)return null;let i=await r.blob(),n=URL.createObjectURL(i);try{return{src:n,isSquare:await m(n)}}catch{return null}})},m=async e=>new Promise((t,l)=>{let r=document.createElement("canvas"),i=new Image;i.onload=()=>{let{width:e,height:l}=i;r.width=e,r.height=l;let a=r.getContext("2d");a?.drawImage(i,0,0,e,l);let n=(e,t)=>(a?.getImageData(e,t,1,1).data[3]??0)<255;for(let r=0;r<e;r++)if(n(r,0)||n(r,l-1))return t(!1);for(let r=0;r<l;r++)if(n(0,r)||n(e-1,r))return t(!1);t(!0)},i.onerror=()=>{l(Error("failed to load image"))},i.src=e})},3266492:e=>{e.v({placeholder:"project-avatar-group-module__grezCa__placeholder",placeholderIcon:"project-avatar-group-module__grezCa__placeholderIcon",projectAvatar:"project-avatar-group-module__grezCa__projectAvatar"})},6140702:e=>{"use strict";e.s({ProjectAvatarGroup:()=>c});var t=e.i(6645307),l=e.i(889716),r=e.i(8084653),i=e.i(555528),a=e.i(6530772),n=e.i(2240289),s=e.i(6253446),o=e.i(3266492);function c(e){let{projectIds:c,totalProjectsCount:d}=e,u=c?.length??0,m=u>3?3:u,p=u?c?.slice(0,m)??[]:[],{data:h,isLoading:g}=(0,n.useProjects)(m?p:null);if(!m)return null;let f=(d??u)-m;return!h||g?(0,t.jsx)(i.Tooltip,{text:(0,t.jsx)(l.Stack,{style:{maxHeight:195,overflow:"auto"},children:"...Loading"}),children:(0,t.jsxs)(l.Stack,{align:"center",direction:"row",justify:"center",children:[p.map(e=>(0,t.jsx)(s.ProjectWithDeploymentAvatar,{className:o.default.projectAvatar,isLoading:!0,size:20},e)),f?(0,t.jsxs)("div",{className:o.default.placeholder,children:["+",f]}):null]})}):(0,t.jsx)(i.Tooltip,{text:(0,t.jsxs)(l.Stack,{style:{maxHeight:195,overflow:"auto"},children:[h.map(e=>(0,t.jsx)(a.Fragment,{children:(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(s.ProjectWithDeploymentAvatar,{className:o.default.projectAvatar,project:e,size:20}),(0,t.jsx)(r.Text,{className:"geist-ellipsis",title:e.name,children:e.name})]})},e.id)),f>0?(0,t.jsx)(a.Fragment,{children:(0,t.jsx)(l.Stack,{align:"center",direction:"row",gap:2,children:(0,t.jsxs)(r.Text,{className:"geist-ellipsis",children:["+",f," projects"]})})},`last-${f}`):null]}),children:(0,t.jsxs)(l.Stack,{align:"center",direction:"row",justify:"center",children:[h.map(e=>(0,t.jsx)(s.ProjectWithDeploymentAvatar,{className:o.default.projectAvatar,project:e,size:20,title:e.name},e.id)),f?(0,t.jsxs)("div",{className:o.default.placeholder,children:["+",f]}):null]})})}},9213717:e=>{e.v({button:"command-module__eP91eq__button",disabled:"command-module__eP91eq__disabled",hidebutton:"command-module__eP91eq__hidebutton",listWrapper:"command-module__eP91eq__listWrapper"})},8893248:[e=>{"use strict";e.s({},8893248);var t=e.i(6645307),l=e.i(6530772),r=e.i(9136433);let i=l.createContext({listId:"",inputId:"",inputValue:"",selectedIndex:0,inputRef:{current:null},filterList:null,listRef:{current:null},list:{current:[]},map:{current:{}},setInputValue:()=>void 0,setSelectedIndex:()=>void 0,force:()=>void 0});i.displayName="CommandContext";let a=()=>l.useContext(i),n=(0,r.createDescendants)();var s=e.i(9443759),o=e.i(2362802),c=e.i(567017),d=e.i(502922),u=e.i(3920197),m=e.i(889716),p=e.i(9213717),h=e.i(9773896);function g(){let{selected:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,i]=l.useState(e),[a,n]=l.useState(""),s=l.useRef(null),o=l.useRef(null),{ref:c,...d}=(0,r.useDescendants)(),u=function(e,t){let l=Object.values(e.current);return l.length?""===t?l:(0,h.matchSorter)(l,t,{keys:[e=>e.value]}):null}(d.map,a);return{inputValue:a,setInputValue:function(e){"string"==typeof e?n(e):n(e.target.value),i(0)},selectedIndex:t,setSelectedIndex:i,filterList:u,listRef:c,contentRef:s,inputRef:o,...d}}function f(e){let{children:l,inputValue:r,setInputValue:a,selectedIndex:n,setSelectedIndex:s,contentRef:o,inputRef:d,...u}=e,m=(0,c.useId)(),p=(0,c.useId)();return(0,t.jsx)(i.Provider,{value:{listId:m,inputId:p,inputValue:r,setInputValue:a,selectedIndex:n,setSelectedIndex:s,inputRef:d,filterList:[],listRef:{current:null},list:{current:[]},map:{current:{}},force:()=>void 0,...u},children:l})}e.s({Command:()=>f},7936324),f.Item=function(e){let{className:i,children:c,callback:d,hideOnFilter:u,isStatic:m=!1,value:p,href:h,...g}=e,[f,j]=(0,l.useState)(""),_=!!g.isDocs;(0,l.useEffect)(()=>{let e=R.current;e&&j((e.textContent??"").trim())},[c]);let{selectedIndex:v,setSelectedIndex:x,filterList:b,list:y,map:E}=a(),{index:I,ref:R,id:w}=(0,r.useDescendant)(n,{value:u?null:p||f,callback:d,...g}),S=!!E.current[w],A=y.current[v]?._internalId===w,C=Array.isArray(b)&&S?b.findIndex(e=>{let{_internalId:t}=e;return t===w}):void 0;return((0,l.useEffect)(()=>{if(A&&R.current){let e=R.current,t=e.parentElement;if(t?.hasAttribute("data-command-group")&&t.firstChild===e){let l=e.closest("[data-command-list-wrapper]");t.parentElement&&l?.scrollTop&&l.scrollTop>t.parentElement.offsetTop&&(l.scrollTop=t.parentElement.offsetTop)}e.scrollIntoView({block:"nearest"})}},[A]),_||-1!==C||m)?(0,t.jsx)("li",{...g,"aria-selected":A||void 0,"data-command-item":"","data-order":C,onClick:e=>{d?.(e)},onPointerMove:()=>{x(I)},ref:R,role:"option",className:(0,s.cn)("relative",i),children:h?(0,t.jsx)(o.Link,{href:h,className:"flex size-full items-center",children:c}):(0,t.jsx)(t.Fragment,{children:c})}):null},f.Group=function(e){let{children:r,heading:i,customHeading:a,className:n}=e,s=(0,c.useId)(),o=(0,l.useRef)(null),[u,m]=(0,l.useState)(!0);return(0,d.default)(()=>{o.current&&m(0!==o.current.children.length)}),(0,t.jsxs)("li",{role:"presentation",style:u?void 0:{display:"none"},children:[a?(0,t.jsx)("div",{id:s,children:a}):(0,t.jsx)("div",{className:n,"data-command-group-heading":"",id:s,children:i}),(0,t.jsx)("ul",{"aria-labelledby":s,"data-command-group":"",ref:o,role:"group",children:r})]})},f.Input=function(e){let{onKeyDown:l,disabled:r,...i}=e,{listId:n,inputId:s,inputValue:o,setInputValue:c,inputRef:d}=a(),h=function(){let{setSelectedIndex:e,selectedIndex:t,list:l}=a();function r(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=Math.max(t-r,0);l.current[i]?e(i):e(0)}function i(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=Math.min(t+r,l.current.length-1);l.current[i]?e(i):e(l.current.length||0)}return a=>{switch(a.key){case"Home":a.preventDefault(),e(0);break;case"End":a.preventDefault(),e(l.current.length||0);break;case"ArrowDown":a.preventDefault(),a.shiftKey?i(5):i();break;case"ArrowUp":a.preventDefault(),a.shiftKey?r(5):r();break;case"Enter":a.preventDefault(),(l.current[t]?.callback)(a)}}}(),g=!!i.showClear;return(0,t.jsxs)(m.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)("input",{onChange:c,onKeyDown:e=>{h(e),l?.(e)},ref:d,value:o,...i,"aria-autocomplete":"list","aria-controls":n,"aria-expanded":!0,"aria-haspopup":"listbox","aria-owns":n,autoComplete:"off",autoFocus:i.autoFocus??!0,"data-command-input":"",disabled:r,id:s,role:"combobox",spellCheck:!1,type:"text"}),!!g&&(0,t.jsx)("button",{className:""===o?p.default.hidebutton:p.default.button,onClick:()=>{c(""),d.current?.focus()},type:"button",children:(0,t.jsx)("span",{children:(0,t.jsx)(u.CrossCircle,{size:20})})})]})},f.List=function(e){let{children:r,maxHeight:i=300,emptyMessage:s,disableDynamicHeight:o,...c}=e,u=(0,l.useRef)(null),{listId:m,listRef:h,map:g,list:f,force:j,inputValue:_}=a();(0,d.default)(()=>{if(!h.current)return;let e=new Map,t=Array.from(h.current.querySelectorAll("[data-descendant], [data-command-separator]"));c.applySort&&t.sort((e,t)=>Number(e.getAttribute("data-order"))-Number(t.getAttribute("data-order"))),t.forEach(t=>{if(t.parentElement){t.parentElement.appendChild(t);let l=t.closest("[data-command-list] > *");l&&l!==t&&l!==h.current&&(e.has(l)||(h.current?.appendChild(l),e.set(l,!0)))}})},[_]),(0,d.default)(()=>{if(!h.current||!u.current||o)return;let e=Math.min(h.current.offsetHeight+1,i);u.current.style.height=`${1===e?0:e}px`});let v=(0,l.useMemo)(()=>({list:f,map:g,force:j}),[f,g,j]),{applySort:x,...b}=c;return(0,t.jsx)("div",{className:p.default.listWrapper,"data-command-list-wrapper":"",ref:u,children:(0,t.jsxs)("ul",{id:m,ref:h,role:"listbox",...b,"data-command-list":"",children:[0===f.current.length&&_.length>0&&(0,t.jsx)("div",{"data-command-empty":"",children:s}),(0,t.jsx)(n.Provider,{value:v,children:r})]})})},f.Separator=function(e){let{className:r}=e,{inputValue:i}=a(),n=(0,l.useRef)(null);return((0,d.default)(()=>{let e=n.current;if(!e)return;let t=e.nextElementSibling;t&&t.hasAttribute("data-order")&&e.setAttribute("data-order",t.getAttribute("data-order"))}),i)?null:(0,t.jsx)("li",{className:r,"data-command-separator":"",ref:n,role:"separator"})},e.s({useCommand:()=>g},628938)},[7936324,628938]],9766694:e=>{e.v({avatar:"multi-switcher-module__eIAjoG__avatar",close:"multi-switcher-module__eIAjoG__close",command:"multi-switcher-module__eIAjoG__command","command-overlay":"multi-switcher-module__eIAjoG__command-overlay",content:"multi-switcher-module__eIAjoG__content",crumb:"multi-switcher-module__eIAjoG__crumb","delayed-pointer-events":"multi-switcher-module__eIAjoG__delayed-pointer-events",disabled:"multi-switcher-module__eIAjoG__disabled",empty:"multi-switcher-module__eIAjoG__empty","fav-button":"multi-switcher-module__eIAjoG__fav-button",focused:"multi-switcher-module__eIAjoG__focused",hideOnMobile:"multi-switcher-module__eIAjoG__hideOnMobile",hideOutline:"multi-switcher-module__eIAjoG__hideOutline",hover:"multi-switcher-module__eIAjoG__hover","hover-content":"multi-switcher-module__eIAjoG__hover-content",infoCard:"multi-switcher-module__eIAjoG__infoCard",input:"multi-switcher-module__eIAjoG__input",itemWrapper:"multi-switcher-module__eIAjoG__itemWrapper",kbd:"multi-switcher-module__eIAjoG__kbd",list:"multi-switcher-module__eIAjoG__list",name:"multi-switcher-module__eIAjoG__name",open:"multi-switcher-module__eIAjoG__open",primary:"multi-switcher-module__eIAjoG__primary",protectedProject:"multi-switcher-module__eIAjoG__protectedProject",scopeLink:"multi-switcher-module__eIAjoG__scopeLink",scopeName:"multi-switcher-module__eIAjoG__scopeName",showAllBadges:"multi-switcher-module__eIAjoG__showAllBadges",showOnMobile:"multi-switcher-module__eIAjoG__showOnMobile",teamItem:"multi-switcher-module__eIAjoG__teamItem",trigger:"multi-switcher-module__eIAjoG__trigger"})},242897:e=>{e.v({command:"project-multiselect-module__5R6Odq__command",content:"project-multiselect-module__5R6Odq__content",item:"project-multiselect-module__5R6Odq__item",list:"project-multiselect-module__5R6Odq__list",removeShadow:"project-multiselect-module__5R6Odq__removeShadow"})},7556736:e=>{"use strict";e.s({SelectProjectCommand:()=>v});var t=e.i(6645307),l=e.i(6530772),r=e.i(2385909),i=e.i(5674541),a=e.i(889716),n=e.i(8084653),s=e.i(8382218),o=e.i(3821772),c=e.i(1550899),d=e.i(2824080),u=e.i(5610210),m=e.i(604868),p=e.i(3431702);e.i(8893248);var h=e.i(7936324),g=e.i(628938),f=e.i(9766694),j=e.i(6253446),_=e.i(242897);function v(e){let{alreadySelected:i=[],onSelect:a,children:n,isOpen:s,setIsOpen:o}=e,d=(0,m.useIsMobile)(),u=(0,g.useCommand)({selected:0}),[h,f]=(0,p.useProjectListInfinite)({limit:20,latestDeployments:1,search:u.inputValue});return((0,l.useEffect)(()=>{!f.initialDataLoaded||f.isReachingEnd||f.isLoadingMore||f.loadMore(),s||u.setInputValue("")},[s]),d)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Drawer,{onDismiss:()=>o(!1),show:s,children:(0,t.jsx)(x,{alreadySelected:i,commandProps:u,isSwrLoading:h.isLoading,onSelect:a,projectData:f,setIsOpen:o})}),n]}):(0,t.jsxs)(r.Root,{onOpenChange:e=>o(e),open:s,children:[(0,t.jsx)(r.Trigger,{asChild:!0,children:n}),(0,t.jsx)(r.Portal,{children:(0,t.jsx)(r.Content,{align:"start",className:_.default.content,side:"bottom",children:(0,t.jsx)(x,{alreadySelected:i,commandProps:u,isSwrLoading:h.isLoading,onSelect:a,projectData:f,setIsOpen:o})})})]})}function x(e){let{alreadySelected:l,commandProps:r,isSwrLoading:i,onSelect:c,projectData:m,setIsOpen:p}=e,g=m.projects.filter(e=>!l.includes(e.id)),v=i||m.isLoadingMore;return(0,t.jsx)("div",{className:(0,u.clsx)(f.default.command,f.default.primary,_.default.command,"tailwind"),children:(0,t.jsxs)(h.Command,{...r,children:[(0,t.jsxs)(a.Stack,{align:"center",className:f.default.input,direction:"row",children:[(0,t.jsx)(a.Stack,{className:"w-6",children:v?(0,t.jsx)(o.Spinner,{color:"var(--accents-3)"}):(0,t.jsx)(d.MagnifyingGlass,{color:"gray-500",size:20})}),(0,t.jsx)(a.Stack,{className:"grow",children:(0,t.jsx)(h.Command.Input,{placeholder:"Find a project"})}),(0,t.jsx)(s.Kbd,{className:f.default.kbd,children:"Esc"})]}),(0,t.jsxs)(h.Command.List,{className:_.default.list,children:[0===g.length&&r.inputValue.length&&!i?(0,t.jsx)(y,{onClear:()=>{r.setInputValue("")},prompt:r.inputValue}):null,v||0!==g.length||r.inputValue.length?null:(0,t.jsx)(b,{}),g.map(e=>(0,t.jsx)(h.Command.Item,{callback:()=>{let t={id:e.id,name:e.name,latestDeploymentId:e.latestDeployments?.[0]?.id||void 0,framework:e.framework||void 0};c&&c(t),p(!1),r.setInputValue("")},className:(0,u.clsx)(_.default.item),value:e.name,children:(0,t.jsxs)(a.Stack,{align:"center",className:"w-full max-w-full",direction:"row",flex:1,gap:2,title:e.name,children:[(0,t.jsx)(j.ProjectWithDeploymentAvatar,{project:e,size:22}),(0,t.jsx)(n.Text,{className:"flex-1",truncate:!0,children:e.name})]})},e.id)),m.isReachingEnd?null:(0,t.jsx)(h.Command.Item,{callback:()=>{m.loadMore()},className:(0,u.clsx)(_.default.item),children:(0,t.jsx)(a.Stack,{align:"center",className:"w-full",children:(0,t.jsx)(n.Text,{children:m.isLoadingMore?"Loading...":"Load more"})})})]})]})})}function b(){return(0,t.jsx)(a.Stack,{align:"center",direction:"column",gap:3,justify:"center",padding:4,children:(0,t.jsx)(n.Text,{className:"flex-1",children:"Every project that can be added has been added."})})}function y(e){let{onClear:l,prompt:r}=e;return(0,t.jsxs)(a.Stack,{align:"center",direction:"column",gap:3,justify:"center",padding:4,children:[(0,t.jsxs)(n.Text,{className:"flex-1",children:['No results for "',r,'"']}),(0,t.jsx)(i.Button,{onClick:l,size:"small",type:"secondary",children:"Clear search"})]})}},5599793:[e=>{"use strict";e.s({MEMBERS_LIMIT:()=>m,default:()=>h,useMembersForTeam:()=>g,useMembersInfinite:()=>p},5599793);var t=e.i(6530772),l=e.i(3521787),r=e.i(7095283),i=e.i(6649026),a=e.i(1183506),n=e.i(9336536),s=e.i(4418725),o=e.i(3514588),c=e.i(3585235),d=e.i(5785123);e.s({default:()=>u},425867);let u=e=>(l,r,i)=>{let a=(0,t.useRef)(void 0),n=e(l,r,i);(0,t.useEffect)(()=>{void 0!==n.data&&(a.current=n.data)},[n.data]);let s=(0,t.useCallback)(()=>{a.current=void 0},[]);return{...n,data:void 0===n.data?a.current:n.data,isLagging:void 0===n.data&&void 0!==a.current,resetLaggy:s}},m=20;function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{search:p,limit:h,role:g,eligibleMembersForProjectId:f,sort:j="date_desc",filterByUserIds:_,includeEntitlements:v,mfaStateFilter:x}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},b=arguments.length>2&&void 0!==arguments[2]&&arguments[2],y=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{isReady:E,team:I}=(0,o.useTeam)(),{isLoading:R,can:w}=(0,c.default)(),S=!R&&w(d.Action.List,d.Resource.TeamFellowMembership),A=(0,s.useTeamSlug)(),C=h||m,T=(0,r.default)((e,t)=>{if(!E||!I||!S)return null;if(0===e)return`${n.API_TEAMS_MEMBERS_V3}/${I.id}/members${(0,i.encode)({sort:j,limit:C,search:p,role:g,eligibleMembersForProjectId:f,filterByUserIds:_,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==x?x:void 0})}`;let l=t?.pagination.nextPageCursor;return l?`${n.API_TEAMS_MEMBERS_V3}/${I.id}/members${(0,i.encode)({sort:j,limit:C,nextPageCursor:l,search:p,role:g,eligibleMembersForProjectId:f,includeEntitlements:!!v||void 0,filterByMfaState:"all"!==x?x:void 0})}`:null},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),{...e,use:b?[u]:[]});(0,t.useEffect)(()=>{b&&T.resetLaggy()},[A,b]);let P=(0,t.useMemo)(()=>T.data?.flatMap(e=>e.members.slice(0,C))||[],[T.data,C]),M=!!T.data,N=M&&0===P.length,L=!!(M&&T.data&&T.size>T.data.length),O=!!(M&&T.data&&!T.data[T.data.length-1]?.pagination?.nextPageCursor);return(0,l.default)(()=>{if(!y||!T.data||O||!E||!I)return null;let e=T.data[T.data.length-1].pagination.nextPageCursor;return`${n.API_TEAMS_MEMBERS_V3}/${I.id}/members${(0,i.encode)({sort:j,limit:C,nextPageCursor:e,search:p,role:g,eligibleMembersForProjectId:f,includeEntitlements:v,filterByMfaState:"all"!==x?x:void 0})}`},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[T,{members:P,initialDataLoaded:M,isEmpty:N,loadMore:()=>T.setSize(T.size+1),isLoadingMore:L,isReachingEnd:O,isLagging:T.isLagging}]}function h(){let{sort:e="date_desc",limit:t=20,filterByUserIds:r,until:s,role:u,includeEntitlements:m}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{isReady:h,team:g}=(0,o.useTeam)(),{isLoading:f,can:j}=(0,c.default)(),_=!f&&j(d.Action.List,d.Resource.TeamFellowMembership);return(0,l.default)(()=>h&&g&&_?`${n.API_TEAMS_MEMBERS_V3}/${g.id}/members${(0,i.encode)({sort:e,until:s,limit:t,role:u,filterByUserIds:r,includeEntitlements:m})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),p)}function g(e){let{limit:t=20,until:r,role:s,sort:o="date_desc"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,l.default)(()=>e?`${n.API_TEAMS_MEMBERS_V3}/${e.id}/members${(0,i.encode)({until:r,limit:t,role:s,sort:o})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0}),c)}},[425867]],7210350:e=>{"use strict";e.s({useBillingSubscription:()=>n});var t=e.i(1183506),l=e.i(9336536),r=e.i(3521787),i=e.i(6649026);async function a(e){return(await (0,t.fetchAPI)(e,{method:"GET",throwOnHTTPError:!0,returnStatus:!0})).body}function n(e){let t=(0,i.encode)({teamId:e,business:"vercel"});return(0,r.default)(e?`${l.API_BILLING}/subscription${t}`:null,a)}},9959972:e=>{"use strict";e.s({useEntitlement:()=>i});var t=e.i(3514588),l=e.i(3326412),r=e.i(7210350);function i(e){return a[e]()}let a={"project-rbac-access-groups":function(){let{team:e,isReady:r}=(0,t.useTeam)(),{isReady:i,value:a}=(0,l.useAccessGroupsOnProFlag)();return e?.billing?.plan==="pro"?{isReady:i&&r,value:!!a}:e?.billing?.plan==="enterprise"?{isReady:!0,value:!0}:{isReady:!0,value:!1}},"v0-team-seats":function(){let{team:e}=(0,t.useTeam)(),{data:l,isLoading:i}=(0,r.useBillingSubscription)(e?.slug);return e?.slug==="vercel"?{isReady:!0,value:!0}:{isReady:!i,value:!!l?.products.some(e=>"v0-team-seats"===e.slug||"v0-enterprise"===e.slug||"v0-enterprise-seats"===e.slug)}}}},6003957:e=>{"use strict";e.s({orderedTeamRoles:()=>t});let t=["OWNER","MEMBER","DEVELOPER","SECURITY","VIEWER","BILLING","CONTRIBUTOR"]},8035702:e=>{"use strict";e.s({useTeamAvailableRoles:()=>i});var t=e.i(3521787),l=e.i(1183506),r=e.i(3514588);function i(e){let{team:i}=(0,r.useTeam)(),a=(0,t.default)(()=>i?`/v1/teams/${i.id}/available-roles`:null,e=>(0,l.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,...e}),{data:n}=a;if(!n)return{data:void 0,isLoading:!0};let s=n.teamRoles.map(e=>({role:e.role,includedTeamRoles:e.includedTeamRoles||[],includedExtendedPermissions:e.includedExtendedPermissions||[]})),o=[];for(let e of n.teamRoles){let t=e.compatiblePermissions;if(t)for(let l of t){let t=o.find(e=>e.role===l);t?t.compatibleRoles.push(e.role):o.push({role:l,compatibleRoles:[e.role]})}}return{data:{teamRoles:s,teamPermissions:o.map(e=>{let t=n.teamRoles.filter(t=>t.includedExtendedPermissions?.includes(e.role)).map(e=>e.role);return{...e,includedIn:t}})},isLoading:!a.data}}},5617834:e=>{"use strict";e.s({getMemberUsername:()=>o,getRolesInfo:()=>g,isAccessRequested:()=>c,isMember:()=>_,isUnconfirmed:()=>d,parseEmailInput:()=>j,roleWarningText:()=>u,rolesMeta:()=>p,useAvailableRolesInfo:()=>f,useRoleUtils:()=>m,useSearch:()=>x});var t=e.i(6530772),l=e.i(4927821),r=e.i(2198583),i=e.i(6003957),a=e.i(9959972),n=e.i(5599793),s=e.i(8035702);function o(e){return e.uid?.startsWith("ghost_")?(e.github?.login||e.gitlab?.login||e.bitbucket?.login||e.username).replace("[bot]"," (bot)"):e.username}function c(e){return"number"==typeof e.accessRequestedAt&&!e.confirmed}function d(e){return!e.confirmed&&!!e.email}function u(e){return"OWNER"===e?"This user will have full access to the Team.":"This user will have limited access to your Team settings."}function m(){let e={DEVELOPER:{ADMIN:!0},CONTRIBUTOR:{PROJECT_VIEWER:!0,PROJECT_DEVELOPER:!0,ADMIN:!0}};return{validRoleCombinations:e,canHaveProjectRole:t=>void 0!==e[t],isValidRoleCombination:(t,l)=>e[t]?.[l]??!1,getDefaultProjectRole:t=>Object.keys(e[t]??{})[0]}}let p={OWNER:{label:"Owner",description:"Admin-level access to the entire team"},MEMBER:{label:"Member",description:"Create deployments, manage integrations and domains"},DEVELOPER:{label:"Developer",description:"Can create non-production deployments"},SECURITY:{label:"Security",description:"Manage security settings and secrets"},VIEWER:{label:"Viewer",description:"Read-only access to a team"},BILLING:{label:"Billing",description:"Manage billing settings and invoices"},CONTRIBUTOR:{label:"Contributor",description:"Has access to assigned projects only"}},h={CreateProject:{name:"Create Project",description:"Allows the user to create a new project."},FullProductionDeployment:{name:"Full Production Deployment",description:"Deploy to production from CLI, rollback and promote any deployment."},UsageViewer:{name:"Usage Viewer",description:"Read-only usage team-wide including prices and invoices."},EnvironmentManager:{name:"Environment Manager",description:"Create and manage project environments."},EnvVariableManager:{name:"Environment Variable Manager",description:"Create and manage environment variables."}};function g(e){let{teamRoles:t,teamPermissions:l}=e;return{teamRoles:i.orderedTeamRoles.filter(e=>t?.includes(e)).map(e=>({key:e,label:p[e].label,description:p[e].description})),teamPermissions:l?.map(e=>({key:e,label:h[e]?.name||e,description:h[e]?.description}))??[]}}function f(){let{data:e,isLoading:l}=(0,s.useTeamAvailableRoles)(),r=(0,t.useMemo)(()=>e?e.teamRoles.map(e=>({role:e.role,includedTeamRoles:e.includedTeamRoles,includedExtendedPermissions:e.includedExtendedPermissions,...p[e.role]})):[],[e]),i=(0,t.useMemo)(()=>e?e.teamPermissions.map(e=>({role:e.role,label:h[e.role]?.name||e.role,description:h[e.role]?.description,compatibleRoles:e.compatibleRoles,includedIn:e.includedIn})):[],[e]);return{teamRoles:r,teamPermissions:i,simplifyRoles:function(e,t){let l=e.filter(t=>r.filter(t=>e.includes(t.role)).every(e=>!e.includedTeamRoles.includes(t))),a=t.filter(e=>{let t=i.find(t=>t.role===e);return!!t&&t.compatibleRoles.some(e=>l.includes(e))&&!t.includedIn.some(e=>l.includes(e))});return{teamRoles:l,teamPermissions:a}},isReady:!l}}function j(e){let t=e.trim(),l=/^.*<(?<email>.+)>$/.exec(t);return l?.groups?.email?l.groups.email.trim():t}let _=e=>"uid"in e,v={"date-desc":"date_desc","name-asc":"name_asc","name-desc":"name_desc"};function x(e){let[i,s]=(0,t.useState)(""),[o,c]=(0,t.useState)("date-desc"),[d,u]=(0,t.useState)("ALL"),[m,p]=(0,t.useState)(),{value:h}=(0,a.useEntitlement)("v0-team-seats"),{data:g}=(0,n.default)({sort:v[o],limit:n.MEMBERS_LIMIT,role:"ALL"!==d?d:void 0,includeEntitlements:!!h}),[{data:f,mutate:j},{members:_,...x}]=(0,n.useMembersInfinite)({},{sort:v[o],search:"members"===e&&g?.pagination.nextPageCursor&&i||void 0,role:"ALL"!==d?d:void 0,mfaStateFilter:m,includeEntitlements:!!h},!0,!0),b=(0,t.useMemo)(()=>{if("pending"===e){var t,r;let e=f?.[0]?.emailInviteCodes??[];return t=i,r="ALL"!==d?e.filter(e=>e.role===d):e,t?new l.default(r,{shouldSort:!1,includeScore:!0,threshold:.25,location:0,distance:100,maxPatternLength:200,minMatchCharLength:1,keys:["email"]}).search(t).map(e=>{let{item:t}=e;return t}):r}return _},[_,f,e,d,i]),y=(0,t.useMemo)(()=>f?.[0]?.totalCount,[f]),E=(0,r.useDebouncedCallback)(e=>{s(e)},300);return{...x,applySort:c,roleFilter:d,setRoleFilter:u,mutate:j,performSearch:E,results:b,resultTotalCount:y,search:i,sort:o,searchEnabled:!!g?.pagination.nextPageCursor,filterByMfaState:m,applyMfaFilter:p}}},7057043:e=>{"use strict";e.s({useAccessGroups:()=>n});var t=e.i(7095283),l=e.i(1183506),r=e.i(9336536),i=e.i(3514588),a=e.i(9959972);function n(){let{membersLimit:e,projectsLimit:n,projectId:o,search:c,limit:d=100}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0,{team:m}=(0,i.useTeam)(),{value:p}=(0,a.useEntitlement)("project-rbac-access-groups"),h=(0,t.default)((t,l)=>{if(!m||null===o||!p)return null;let i=l?.pagination.next;if(0!==t&&!i)return null;let a=new URLSearchParams;return a.set("teamId",m.id),d&&a.set("limit",`${d}`),e&&a.set("membersLimit",`${e}`),n&&a.set("projectsLimit",`${n}`),o&&a.set("projectId",o),c&&a.set("search",c),i&&a.set("next",i),`${r.API_ACCESS_GROUPS}?${a.toString()}`},e=>(0,l.fetchAPI)(String(e),{throwOnHTTPError:!0}),u),g=h.data?.flatMap(e=>e.accessGroups),f=h.data?.[h.data.length-1]?.pagination.next;return{...h,accessGroups:g,accessGroupsWithRole:g?.filter(s),cursor:f}}function s(e){return"role"in e}},5310550:e=>{e.v({error:"project-role-selector-module__LJdD-W__error",menuFooter:"project-role-selector-module__LJdD-W__menuFooter",roleSelectorOpenMenu:"project-role-selector-module__LJdD-W__roleSelectorOpenMenu"})},8012856:[e=>{"use strict";e.s({ProjectMultiselect:()=>P},8012856);var t=e.i(6645307),l=e.i(6530772),r=e.i(8084653),i=e.i(889716),a=e.i(5674541),n=e.i(555528),s=e.i(2254575),o=e.i(6284911),c=e.i(5163670),d=e.i(663357),u=e.i(8559273),m=e.i(1209519),p=e.i(6960707),h=e.i(6253446);e.s({ProjectRoleSelector:()=>C,projectRoles:()=>R,projectRolesMap:()=>w},8981169);var g=e.i(9948746),f=e.i(4237550),j=e.i(653558),_=e.i(2733203),v=e.i(1190215),x=e.i(4105925),b=e.i(2362802),y=e.i(5610210),E=e.i(5617834),I=e.i(5310550);let R=[{role:"PROJECT_VIEWER",label:"Project Viewer",description:"Has read-only access to view"},{role:"PROJECT_DEVELOPER",label:"Project Developer",description:"Can create deployments and manage environment variables"},{role:"ADMIN",label:"Project Admin",description:"Can manage all aspects of a project including permissions"}],w={PROJECT_VIEWER:R[0],PROJECT_DEVELOPER:R[1],ADMIN:R[2]},S={role:"UNDEFINED",label:"Not Set",description:"This user will not have access to this project unless added via access group."},A={role:"UNDEFINED",label:"Not Set",description:"This user will only have developer access unless added via access group."};function C(e){let{value:l,className:a,onChange:s,disabled:o,menuWidth:c,menuButtonWidth:d,teamRole:u,buttonSize:m,allowSelectNoRole:p}=e,{isValidRoleCombination:h}=(0,E.useRoleUtils)(),w="CONTRIBUTOR"===u?S:A,C=p?[w,...R]:R;return(0,t.jsxs)(v.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(_.MenuButton,{align:"start","aria-label":"Select a project role",className:(0,y.clsx)(I.default.roleSelectorOpenMenu,a,l&&"UNDEFINED"!==l&&!h(u,l)&&I.default.error),disabled:o,shape:"square",size:m||"medium",style:{padding:"0 var(--geist-space-gap-half)",width:d},suffix:(0,t.jsx)(f.ChevronDown,{}),svgOnly:!0,type:"secondary",typeName:"button",children:C.find(e=>e.role===l)?.label}),(0,t.jsxs)(j.Menu,{style:{borderRadius:"4px"},width:c||300,children:[C.map(e=>{let{role:a,label:o,description:c}=e,d="UNDEFINED"!==a&&!h(u,a);return(0,t.jsx)("div",{children:(0,t.jsx)(n.Tooltip,{delayTime:300,disableTriggers:!d,position:"top",text:`This project role is not available to the ${E.rolesMeta[u].label}`,children:(0,t.jsx)(x.MenuItem,{disabled:d,onClick:()=>{if("UNDEFINED"===a){p&&s("UNDEFINED");return}a!==l&&s(a)},style:{height:"auto",padding:"var(--geist-space-gap-quarter)"},suffix:l===a?(0,t.jsx)(g.Check,{}):null,children:(0,t.jsxs)(i.Stack,{children:[(0,t.jsx)(r.Text,{color:d?"gray-600":void 0,children:o}),(0,t.jsx)(r.Text,{color:d?"gray-600":"gray-900",children:c})]})})})},a)}),(0,t.jsx)(i.Stack,{className:I.default.menuFooter,children:(0,t.jsxs)(r.Text,{color:"gray-900",children:["Compare all"," ",(0,t.jsx)(b.Link,{external:!0,href:"/docs/rbac/access-roles/project-level-roles",variant:"highlight",children:"Project Roles"})]})})]})]})}var T=e.i(7556736);function P(e){let{variant:d="compact",projectRoles:u,isLoading:g,loadingSkeletonProjectsCount:f=3,onAddProject:j,onRemoveProject:_,onSetProjectRoles:v,disabled:x,teamRole:b="CONTRIBUTOR",isOpen:y,setIsOpen:E}=e,[I,R]=(0,l.useState)(""),[w,S]=(0,l.useState)(),A=u.filter(e=>!I||e.project.name.toLowerCase().includes(I.toLowerCase())),P="CONTRIBUTOR"===b?"PROJECT_VIEWER":"ADMIN";return(0,t.jsxs)(i.Stack,{gap:"search"===d?4:2,children:["search"===d?(0,t.jsxs)(i.Stack,{className:"tailwind-preflight",direction:"row",gap:2,children:[(0,t.jsx)(o.SearchInput,{disabled:0===u.length,onChange:e=>{R(e.target.value),S(new Set)},placeholder:"Search...",value:I,width:"100%"}),(0,t.jsx)(T.SelectProjectCommand,{alreadySelected:u.map(e=>{let{project:t}=e;return t.id||""}),isOpen:y,onSelect:e=>{j&&j(e,P),v&&v([...u,{project:e,role:P}])},setIsOpen:E,children:(0,t.jsx)(a.Button,{"aria-label":"add row",disabled:x,onClick:()=>E(!0),type:"secondary",children:(0,t.jsxs)(i.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(m.PlusCircle,{size:16})," Add More"]})})})]}):(0,t.jsxs)(i.Stack,{align:"center",direction:"row",gap:1,children:[(0,t.jsx)(r.Text,{size:16,weight:500,children:"Project Roles"}),(0,t.jsx)(T.SelectProjectCommand,{alreadySelected:u.map(e=>{let{project:t}=e;return t.id||""}),isOpen:y,onSelect:e=>{j&&j(e,P),v&&v([...u,{project:e,role:P}])},setIsOpen:E,children:(0,t.jsx)(a.Button,{"aria-label":"Add project role",onClick:()=>E(!0),style:{padding:"0",width:"var(--geist-form-small-height)",height:"var(--geist-form-small-height)"},svgOnly:!0,type:"tertiary",children:(0,t.jsx)(m.PlusCircle,{size:16})})})]}),g?(0,t.jsx)(s.Entity.List,{className:"shadow-sm",children:Array.from({length:f}).map((e,l)=>(0,t.jsx)(s.Entity,{left:(0,t.jsx)(c.Skeleton,{height:24,rounded:!0,width:24}),paddingY:2,right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Skeleton,{children:(0,t.jsx)(C,{buttonSize:"small",disabled:!0,menuButtonWidth:"100%",onChange:e=>e,teamRole:b,value:"PROJECT_VIEWER"})}),(0,t.jsx)(c.Skeleton,{children:(0,t.jsx)(a.Button,{"aria-label":"Remove Project",disabled:!0,onClick:e=>e,shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(p.MinusCircle,{size:16})})})]}),children:(0,t.jsx)(s.Entity.Content,{fill:!0,title:(0,t.jsx)(c.Skeleton,{height:20,width:100})})},`skeleton-${l}`))}):null,!g&&A.length?(0,t.jsx)(s.Entity.List,{className:"shadow-sm",children:A.map(e=>{let{project:l,role:r}=e,i=w?.has(l.id);return(0,t.jsxs)(s.Entity,{left:(0,t.jsx)(h.DeploymentOrFrameworkAvatar,{deploymentId:l.latestDeploymentId,framework:l.framework,size:22}),paddingY:2,right:(0,t.jsx)(n.Tooltip,{delayTime:300,disableTriggers:!x,text:"You need additional permissions to remove projects.",children:(0,t.jsx)(a.Button,{"aria-label":"Remove Project",disabled:x,onClick:()=>{if(i){let e=new Set(w);e.delete(l.id),S(e)}_&&_(l.id),v&&v(u.filter(e=>e.project.id!==l.id))},shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(p.MinusCircle,{size:16})})}),children:[(0,t.jsx)(s.Entity.Content,{fill:!0,title:l.name}),(0,t.jsx)("div",{children:(0,t.jsx)(C,{buttonSize:"small",disabled:x,menuButtonWidth:"100%",onChange:e=>{j&&j(l,e),v&&v(u.map(t=>t.project.id===l.id?{project:l,role:e}:t))},teamRole:b,value:r})})]},l.id)})}):null,g||A.length?null:(0,t.jsx)(M,{compact:"compact"===d,disabled:x,search:I,setIsOpen:E})]})}function M(e){let{search:l,compact:i,disabled:n,setIsOpen:s}=e;return i?(0,t.jsx)(r.Text,{color:"gray-900",children:"No project roles selected."}):l?(0,t.jsx)(d.EmptyState.Root,{description:`No projects found for "${l}".`,gap:3,icon:(0,t.jsx)(d.EmptyState.Icon,{icon:(0,t.jsx)(u.GridSquare,{size:32})}),paddingY:24,title:"No projects found."}):(0,t.jsx)(d.EmptyState.Root,{description:"Add projects to this access group.",gap:3,icon:(0,t.jsx)(d.EmptyState.Icon,{icon:(0,t.jsx)(u.GridSquare,{size:32})}),paddingY:24,title:"No projects added yet",children:(0,t.jsx)(a.Button,{"aria-label":"Add Projects",disabled:n,onClick:()=>s(!0),size:"small",type:"secondary",children:"Add Projects"})})}},[8981169]],1763478:e=>{e.v({command:"access-groups-combobox-module__1ugm8G__command",content:"access-groups-combobox-module__1ugm8G__content",item:"access-groups-combobox-module__1ugm8G__item",itemWithRole:"access-groups-combobox-module__1ugm8G__itemWithRole",list:"access-groups-combobox-module__1ugm8G__list"})}}]);

//# sourceMappingURL=c2419fa374bd98e9.js.map
//# debugId=d037fee3-ec19-582b-bc45-858dca86339d
