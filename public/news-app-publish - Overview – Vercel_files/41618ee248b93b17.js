
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="407d601a-7eaa-5947-af51-025fb250826e")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{9227538:e=>{"use strict";e.s({InstalledIntegrations:()=>b,MarketplaceInstalledIntegrationsPlaceholder:()=>k});var t=e.i(6645307),i=e.i(6530772),n=e.i(6621512),a=e.i(889716),r=e.i(5674541),l=e.i(663357),s=e.i(7573892),o=e.i(9802771),c=e.i(3514588),d=e.i(2362802),u=e.i(4049272),h=e.i(7555208),g=e.i(3959726),p=e.i(1400815),m=e.i(4744859),x=e.i(9138923),f=e.i(9799370),j=e.i(7034336),y=e.i(8309230);function b(e){let{teamSlug:i,configurations:r}=e,{team:s}=(0,c.useTeam)(),{data:o}=(0,h.useConfigurations)({skipBillingData:!0}),g=(0,p.useInstalledIntegrationsFilters)({integrationInstallations:o??r});return 0===r.length?(0,t.jsx)(a.Stack,{flex:1,gap:5,style:{width:"100%"},children:(0,t.jsx)(l.EmptyState.Root,{className:x.default.emptyState,description:"You don't have any integration installed.",icon:(0,t.jsx)(l.EmptyState.Icon,{icon:(0,t.jsx)(n.Information,{size:32})}),secondary:!0,title:"No Integrations Installed",children:(0,t.jsx)(d.ButtonLink,{href:(0,u.getBrowseMarketplaceLink)({teamSlugOrPublic:{teamSlug:i}}),type:"secondary",children:"Browse Integration"})})}):(0,t.jsx)(T,{installationsWithFilters:g,team:s,teamSlug:i})}function k(e){let{externalCounter:i}=e;return(0,t.jsx)(a.Stack,{flex:1,gap:20,style:{width:"100%"},children:(0,t.jsxs)(a.Stack,{gap:5,children:[(0,t.jsx)(p.InstalledIntegrationsFiltersPlaceholder,{}),(0,t.jsx)("div",{className:x.default.integrationList,children:Array.from({length:i??3}).map((e,i)=>(0,t.jsx)(m.MarketplaceInstallationCardPlaceholder,{},`marketplace${i}`))})]})})}function T(e){let{teamSlug:c,team:d,installationsWithFilters:h}=e,{installationsByIntegration:b,legacyInstallations:k,search:T,onSearchChanged:I,onCategoryChanged:C,category:v,categories:S,onLoadNextPage:w,hasMorePages:A,installationType:N,onInstallationTypeChanged:M}=h,{isLoading:_,canCreateIntegrationConfiguration:E}=(0,g.useIntegrationPermissions)(),[R,L]=(0,i.useState)({active:!1,team:null}),P=e=>{let{id:t,slug:i}=e;s.analytics.track(o.AnalyticsEvent.INTEGRATION_OVERVIEW_MANAGE_CLICKED,{integration:{id:t,slug:i}})},D=(0,i.useCallback)(e=>L({active:!0,...e}),[]),O=(0,i.useCallback)(()=>L({...R,active:!1}),[R]);return(0,t.jsxs)(a.Stack,{flex:1,gap:20,style:{width:"100%"},children:[(0,t.jsxs)(a.Stack,{gap:5,children:[(0,t.jsx)(p.InstalledIntegrationsFilters,{categories:S,category:v,installationType:N,onCategoryChanged:C,onInstallationTypeChanged:M,onSearchChanged:I,search:T}),b.length>0?(0,t.jsxs)("div",{className:x.default.integrationList,children:[(0,t.jsx)(f.ReinstallationModal,{onCancel:O,state:R}),b.map((e,i)=>{let n=function(e,t,i,n){if(n&&!i&&1===e.installations.length){let i=e.installations[0].id;return"scopes-review"===e.requiredAction?(0,u.getPermissionsLink)({teamSlug:t,configurationId:i}):(0,u.getInstallationDetailsLink)({teamSlug:t,configurationId:i,integrationSlug:e.slug,isMarketplace:e.isMarketplace})}return(0,u.getIntegrationDetailsLink)({integrationSlug:e.slug,teamSlugOrPublic:{teamSlug:t},installationHash:!0})}(e,c,_,E);return(0,t.jsx)(y.TeamsIntegrationsCriticalContentConditionalMarker,{enabled:0===i,children:(0,t.jsx)(m.InstallationCard,{integrationWithInstallations:e,link:n,onClick:()=>{switch(e.requiredAction){case"reinstall-log-drain":case"reinstall-log-drain-admin":D({configuration:{integrationId:e.integrationId,name:e.name,slug:e.slug,id:e.installations[0].id},team:d});break;default:P({id:e.integrationId,slug:e.slug})}}})},e.integrationId)})]}):(0,t.jsx)(l.EmptyState.Root,{className:x.default.emptyState,description:T?`Your search for "${T}" did not return any results.`:void 0,icon:(0,t.jsx)(l.EmptyState.Icon,{icon:(0,t.jsx)(n.Information,{size:32})}),secondary:!0,title:"No Results Found"}),A?(0,t.jsx)(r.Button,{onClick:w,type:"secondary",children:"Show More"}):null]}),k.length>0?(0,t.jsx)(j.LegacyIntegrations,{legacyInstallations:k,onCardClicked:P,teamSlug:c}):null]})}},5870314:e=>{"use strict";e.s({IntegrationConsoleButton:()=>c});var t=e.i(6645307),i=e.i(555528),n=e.i(1164214),a=e.i(7573892),r=e.i(9802771),l=e.i(2362802),s=e.i(3585235),o=e.i(5785123);function c(e){let{teamSlug:c}=e,{can:d,isLoading:u}=(0,s.default)(),h=d(o.Action.Create,o.Resource.Integration);return(0,t.jsx)(i.Tooltip,{disableTriggers:h||u,position:"bottom",text:"You need additional permissions to add integrations.",children:(0,t.jsx)(l.ButtonLink,{"data-testid":(0,n.tid)("integrations","console"),disabled:!h,href:`/${c}/~/integrations/console`,onClick:()=>{a.analytics.track(r.AnalyticsEvent.INTEGRATION_OVERVIEW_CONSOLE_CLICKED)},type:"secondary",className:"w-full sm:w-auto",children:"Integrations Console"})})}},5748901:e=>{e.v({button:"integration-video-player-module__Gy_CcG__button",loading:"integration-video-player-module__Gy_CcG__loading",play:"integration-video-player-module__Gy_CcG__play","play-icon":"integration-video-player-module__Gy_CcG__play-icon",player:"integration-video-player-module__Gy_CcG__player"})},5430266:e=>{e.v({gallery:"details-gallery-module__uxYlVW__gallery",grayscale:"details-gallery-module__uxYlVW__grayscale",image:"details-gallery-module__uxYlVW__image","image-skeleton":"details-gallery-module__uxYlVW__image-skeleton","image-wrapper":"details-gallery-module__uxYlVW__image-wrapper",wrapper:"details-gallery-module__uxYlVW__wrapper"})},7947964:e=>{"use strict";e.s({DetailsGallery:()=>g},7947964);var t=e.i(6645307),i=e.i(5163670),n=e.i(2506827),a=e.i(889716),r=e.i(6530772),l=e.i(9995276),s=e.i(3821772),o=e.i(8934201),c=e.i(5748901);function d(e){let{videoId:i}=e,[n,a,d]=(()=>{let[e,t]=(0,r.useState)(!1);return[e,(0,r.useCallback)(()=>t(!0),[]),(0,r.useCallback)(()=>t(!1),[])]})(),[u,h]=(0,r.useState)(!0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("button",{className:c.default.button,onClick:a,type:"button",children:(0,t.jsx)("div",{className:c.default.play,children:(0,t.jsx)("div",{className:c.default["play-icon"],children:(0,t.jsx)(l.Play,{})})})}),(0,t.jsx)(o.Modal.Modal,{active:n,drawer:!1,onClickOutside:d,width:"80vw",children:(0,t.jsxs)("div",{className:c.default.player,children:[u?(0,t.jsx)("div",{className:c.default.loading,children:(0,t.jsx)(s.Spinner,{size:"5vw"})}):null,(0,t.jsx)("iframe",{allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,frameBorder:"0",height:"100%",onLoad:()=>h(!1),referrerPolicy:"no-referrer",src:`https://www.youtube.com/embed/${i}`,title:"Integration video player",width:"100%"})]})})]})}function u(e){let{src:i}=e,n=i.startsWith("https://img.youtube.com/vi/")?(i.split("https://img.youtube.com/vi/").pop()||"").split("/0.jpg").shift():null;return n?(0,t.jsx)(d,{videoId:n}):null}var h=e.i(5430266);function g(e){let{images:r,grayscale:l}=e;return(0,t.jsx)("div",{className:h.default.gallery,children:(0,t.jsx)(a.Stack,{className:h.default.wrapper,direction:"row",gap:4,style:{"--width":`${504*(r.length||1)}px`},children:0===r.length?(0,t.jsx)("div",{className:h.default["image-wrapper"],children:(0,t.jsx)("div",{className:h.default.image,children:(0,t.jsx)(i.Skeleton,{className:h.default["image-skeleton"],height:"var(--skeleton-height)",width:"var(--skeleton-width)"})})}):r.map((e,i)=>{let a="string"==typeof e?e:`https:${e.fields.file.url}`,r="string"==typeof e?"":e.fields.description,s={srcDark:a,srcLight:a,layout:"fill",objectFit:"cover",priority:i<=2};return(0,t.jsx)("div",{className:h.default["image-wrapper"],children:(0,t.jsx)("div",{className:h.default.image,children:"string"==typeof e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(u,{src:a}),(0,t.jsx)(n.Image,{...s,alt:r})]}):(0,t.jsx)(n.Image,{...s,alt:r,className:l?h.default.grayscale:void 0})})},a)})})})}},5831393:e=>{"use strict";e.s({RequestTransferToVercelNotification:()=>_},5831393);var t=e.i(6645307),i=e.i(5440190),n=e.i(1379429),a=e.i(8084653),r=e.i(5674541),l=e.i(8934201),s=e.i(584439),o=e.i(6530772),c=e.i(3514588);e.i(1681340);var d=e.i(7812637),u=e.i(630575),h=e.i(3965881),g=e.i(889716),p=e.i(1985432),m=e.i(4301209);function x(e){let{configuration:i,billingPlan:n,header:r,onNext:s,onBack:o,cancelLabel:c}=e;return(0,t.jsx)(m.ModalWrapper,{SuccessAction:(0,t.jsx)(l.Modal.Action,{onClick:s,children:"Confirm"}),cancelLabel:c,header:r,onBack:o,children:(0,t.jsxs)(g.Stack,{gap:4,children:[(0,t.jsx)(a.Text,{size:16,weight:500,children:"Billing Plan"}),(0,t.jsx)(p.ReadOnlyPanel,{title:"Selected Billing Plan",children:(0,t.jsx)(p.ReadOnlyBillingPlan,{billingPlan:n})})]})})}var f=e.i(5163670),j=e.i(9362924),y=e.i(5396709),b=e.i(4701001),k=e.i(6799491),T=e.i(2896284),I=e.i(974550),C=e.i(2362802);function v(e){let{integration:i,onAccept:n,onBack:r,cancelLabel:s}=e;return(0,t.jsx)(m.ModalWrapper,{SuccessAction:(0,t.jsx)(l.Modal.Action,{buttonType:"submit",onClick:()=>{let e=new Date().toISOString(),t={};i.eulaDocUri&&(t.eula=e),i.privacyDocUri&&(t.privacy=e),n(t)},children:"Accept and Continue"}),cancelLabel:s,header:(0,t.jsx)(m.ModalWrapperHeader,{title:"Accept Terms & Conditions",subtitle:"Please review the following policies."}),onBack:r,children:(0,t.jsx)(g.Stack,{gap:4,children:(0,t.jsxs)(g.Stack,{gap:1,children:[(0,t.jsx)("p",{children:'By clicking "Accept and Continue", you agree to:'}),(0,t.jsxs)(a.Text,{children:[(0,t.jsx)("span",{className:"pr-1",children:"• "}),(0,t.jsx)(C.Link,{external:!0,href:"/legal/integration-marketplace-end-users-addendum",type:"primary",children:"Vercel Integration Marketplace End User Addendum"})]}),i.eulaDocUri?(0,t.jsxs)(a.Text,{children:[(0,t.jsx)("span",{className:"pr-1",children:"• "}),(0,t.jsxs)(C.Link,{external:!0,href:i.eulaDocUri,type:"primary",children:[i.name," EULA"]})]}):null,i.privacyDocUri?(0,t.jsxs)(a.Text,{children:[(0,t.jsx)("span",{className:"pr-1",children:"• "}),(0,t.jsxs)(C.Link,{external:!0,href:i.privacyDocUri,type:"primary",children:[i.name," Privacy Policy"]})]}):null]})})})}function S(e){let{configuration:i,transferRequest:n,onCancel:a,onDone:r}=e,l=(0,c.useTeam)(),{data:s,isLoading:d}=(0,k.useIntegration)(i.integrationId),u=l.team,h=l.isLoading||d,[g,p]=(0,o.useTransition)(),m=u&&s;return(0,t.jsx)(j.DisabledContext.Provider,{value:h||g,children:m?(0,t.jsx)(A,{configuration:i,transferRequest:n,team:u,integration:s,onCancel:a,onDone:r,isTransitioning:g,startTransition:p}):(0,t.jsx)(w,{cancelLabel:"Cancel",onBack:a})})}function w(e){let{onBack:i,cancelLabel:n}=e;return(0,t.jsx)(m.ModalWrapper,{SuccessAction:(0,t.jsx)(l.Modal.Action,{buttonType:"submit",disabled:!0,loading:!0,children:"..."}),cancelLabel:n,header:(0,t.jsx)(m.ModalWrapperHeader,{subtitle:(0,t.jsx)(f.Skeleton,{height:"20px",width:80}),title:"Transfer Your Account to Vercel"}),onBack:i,children:(0,t.jsx)(f.Skeleton,{height:"40px",width:400})})}let A=(0,I.withStripe)(function(e){let{configuration:i,transferRequest:n,team:a,integration:r,onCancel:l,onDone:s,isTransitioning:c,startTransition:p}=e,[f,j]=(0,o.useState)("policies"),[k,I]=(0,o.useState)({}),C=n.billingPlan,S=i.id,{data:w}=(0,y.useInstallationPaymentMethodState)(S),{createAuthorization:A}=(0,b.useMarketplaceBillingAuthorizationApi)(),N=(0,b.useAwaitAuthorization)(),[M,_]=(0,o.useState)(null),[E,R]=(0,o.useState)(!1),[L,P]=(0,o.useState)(void 0),[D,O]=(0,o.useState)(!1),B=(0,t.jsx)(m.ModalWrapperHeader,{subtitle:(0,t.jsx)(g.Stack,{align:"center",as:"span",direction:"row",gap:1,children:i.name||i.slug}),title:"Transfer Your Account to Vercel"}),F=()=>{j("provisioning"),R(!1),P(void 0);let e=async()=>{try{let e=await A(a.id,{integrationIdOrSlug:i.integrationId,integrationConfigurationId:i.id,transferRequestId:n.requestId,billingPlanId:n.billingPlan.id,metadata:{}});if(_(e?.id??null),!e)throw Error("Authorization creation failed");let t=await N(a.id,e.id);if("succeeded"!==t.status)return;await (0,T.clientTypedFetchData)("/v1/integrations/installations/{integrationConfigurationId}/transfers/to-marketplace","post",{teamId:a.id,integrationConfigurationId:i.id},{requestId:n.requestId,authorizationId:e.id,acceptedPolicies:k}),R(!0)}catch(e){P("Failed to transfer account")}};p(()=>{e()})};switch(f){case"policies":return(0,t.jsx)(v,{integration:r,onAccept:e=>{I(e),j("confirm")},onBack:l,cancelLabel:"Cancel"});case"confirm":return(0,t.jsx)(x,{configuration:i,billingPlan:C,header:B,onNext:()=>{!w||(0,d.getIsPaymentMethodStepNeeded)(a,w,C)||D?j("payment-method"):F()},onBack:l,cancelLabel:"Cancel"});case"payment-method":return w?(0,t.jsx)(u.PaymentMethodStep,{header:B,installationId:S,onBack:()=>j("confirm"),onNext:()=>{O(!1),F()},paymentMethodState:w,requireNew:D,team:a}):null;case"provisioning":return(0,t.jsx)(h.ProvisioningStep,{authorizationId:M,complete:E,error:L,header:B,isTransitioning:!E||c,onBack:()=>j("payment-method"),onChangePaymentMethod:()=>{O(!0),j("payment-method")},onNext:()=>{p(()=>{s()})},successMessage:"Your account has been transferred successfully",teamId:a.id});default:return null}});var N=e.i(5535439),M=e.i(2068621);function _(e){let{integration:d,configurationId:u}=e,[h,g]=(0,o.useState)(!1),[p,m]=(0,o.useTransition)(),{data:x,mutate:f}=(0,i.default)(u),j=(0,s.useToasts)(),y=(0,N.useRouter)(),b=(0,c.useTeam)().team,k=x?.transferRequest;if(!x||k?.kind!=="transfer-to-marketplace")return null;let I=()=>{g(!1)},C=async()=>{try{await (0,T.clientTypedFetchData)("/v1/integrations/installations/{integrationConfigurationId}/transfers/discard","post",{teamId:b?.id,integrationConfigurationId:x.id},{requestId:k.requestId}),await f()}catch(e){(0,M.captureException)(e),j.error("Failed to discard transfer request. Please try again.")}};return(0,t.jsxs)("section",{className:"mx-auto my-0 max-w-[520px] rounded-lg p-4",children:[(0,t.jsxs)(n.Card,{border:!0,shadow:!0,className:"max-w-[600px] p-4",children:[(0,t.jsx)(a.Text,{size:24,children:"Transfer your account from ACME to Vercel"}),(0,t.jsx)(a.Text,{children:"All your resources will be transferred to Vercel. After the transfer is complete, your billing will be handled by Vercel and you’ll use their platform to manage your resources."}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)(r.Button,{onClick:()=>{C()},disabled:p,type:"secondary",children:"Discard"}),(0,t.jsx)(r.Button,{onClick:()=>{m(()=>{g(!0)})},loading:p,className:"ml-auto",children:"Proceed with transfer"})]})]}),(0,t.jsx)(l.Modal,{active:h,onClickOutside:I,children:(0,t.jsx)(S,{configuration:x,transferRequest:k,onDone:()=>{I(),y.replace(`/${b?.slug}/~/integrations/products/${d.slug}/${u}`)},onCancel:I})})]})}},9481229:e=>{"use strict";e.s({RequestTransferFromVercelNotification:()=>I},9481229);var t=e.i(6645307),i=e.i(5440190),n=e.i(1379429),a=e.i(8084653),r=e.i(5674541),l=e.i(8934201),s=e.i(584439),o=e.i(6530772),c=e.i(5535439),d=e.i(3514588),u=e.i(2896284),h=e.i(2068621),g=e.i(889716),p=e.i(4301209);function m(e){let{configuration:i,header:n,onNext:r,onBack:s,cancelLabel:o}=e;return(0,t.jsx)(p.ModalWrapper,{SuccessAction:(0,t.jsx)(l.Modal.Action,{onClick:r,children:"Confirm"}),cancelLabel:o,header:n,onBack:s,children:(0,t.jsx)(g.Stack,{gap:4,children:(0,t.jsx)(a.Text,{size:16,weight:500,children:"some information on the transfer"})})})}var x=e.i(5163670),f=e.i(9362924),j=e.i(3821772);function y(e){let{header:i,isTransitioning:n,onNext:r,onBack:s,complete:o,error:c}=e;return(0,t.jsx)(p.ModalWrapper,{SuccessAction:(0,t.jsx)(l.Modal.Action,{disabled:!o,loading:!o||n,onClick:r,children:o?"Done":"Processing"}),cancelLabel:"Back",disableCancel:!o,header:i,onBack:s,children:(0,t.jsxs)(g.Stack,{gap:4,children:[o?(0,t.jsx)(a.Text,{weight:500,children:"Provisioning complete."}):(0,t.jsxs)(g.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(j.Spinner,{size:16}),(0,t.jsx)(a.Text,{size:16,weight:500,children:"Processing"})]}),c?(0,t.jsx)(a.Text,{size:14,children:c}):null]})})}function b(e){let{configuration:i,transferRequest:n,onCancel:a,onDone:r}=e,l=(0,d.useTeam)(),s=l.team,c=l.isLoading,[u,h]=(0,o.useTransition)();return(0,t.jsx)(f.DisabledContext.Provider,{value:c||u,children:s?(0,t.jsx)(k,{configuration:i,transferRequest:n,team:s,onCancel:a,onDone:r,isTransitioning:u,startTransition:h}):(0,t.jsx)(T,{cancelLabel:"Cancel",onBack:a})})}function k(e){let{configuration:i,transferRequest:n,team:a,onCancel:r,onDone:l,isTransitioning:s,startTransition:c}=e,[d,h]=(0,o.useState)("confirm"),[x,f]=(0,o.useState)(!1),[j,b]=(0,o.useState)(void 0),k=(0,t.jsx)(p.ModalWrapperHeader,{subtitle:(0,t.jsx)(g.Stack,{align:"center",as:"span",direction:"row",gap:1,children:i.name||i.slug}),title:"Transfer Your Account from Vercel"});switch(d){case"confirm":return(0,t.jsx)(m,{configuration:i,header:k,onNext:()=>{h("processing"),f(!1),b(void 0);let e=async()=>{try{await (0,u.clientTypedFetchData)("/v1/integrations/installations/{integrationConfigurationId}/transfers/from-marketplace","post",{teamId:a.id,integrationConfigurationId:i.id},{requestId:n.requestId}),f(!0)}catch(e){b("Failed to transfer account")}};c(()=>{e()})},onBack:r,cancelLabel:"Cancel"});case"processing":return(0,t.jsx)(y,{header:k,isTransitioning:s,onNext:()=>{c(()=>{l()})},onBack:r,complete:x,error:j});default:return null}}function T(e){let{onBack:i,cancelLabel:n}=e;return(0,t.jsx)(p.ModalWrapper,{SuccessAction:(0,t.jsx)(l.Modal.Action,{buttonType:"submit",disabled:!0,loading:!0,children:"..."}),cancelLabel:n,header:(0,t.jsx)(p.ModalWrapperHeader,{subtitle:(0,t.jsx)(x.Skeleton,{height:"20px",width:80}),title:"Transfer Your Account from Vercel"}),onBack:i,children:(0,t.jsx)(x.Skeleton,{height:"40px",width:400})})}function I(e){let{integration:g,configurationId:p}=e,[m,x]=(0,o.useState)(!1),[f,j]=(0,o.useTransition)(),{data:y,mutate:k}=(0,i.default)(p),T=(0,s.useToasts)(),I=(0,c.useRouter)(),C=(0,d.useTeam)().team,v=y?.transferRequest;if(!y||v?.kind!=="transfer-from-marketplace")return null;let S=()=>{x(!1)},w=async()=>{try{await (0,u.clientTypedFetchData)("/v1/integrations/installations/{integrationConfigurationId}/transfers/discard","post",{teamId:C?.id,integrationConfigurationId:y.id},{requestId:v.requestId}),await k()}catch(e){(0,h.captureException)(e),T.error("Failed to discard transfer request. Please try again.")}};return(0,t.jsxs)("section",{className:"mx-auto my-0 max-w-[520px] rounded-lg p-4",children:[(0,t.jsxs)(n.Card,{border:!0,shadow:!0,className:"max-w-[600px] p-4",children:[(0,t.jsxs)(a.Text,{size:24,children:["Transfer your account from ",g.name," to Vercel"]}),(0,t.jsxs)(a.Text,{children:["All your resources will be transferred to ",g.name,". After the transfer is complete, your billing will be handled by"," ",g.name," and you’ll use their platform to manage your resources."]}),(0,t.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,t.jsx)(r.Button,{onClick:()=>{w()},disabled:f,type:"secondary",children:"Discard"}),(0,t.jsx)(r.Button,{onClick:()=>{j(()=>{x(!0)})},loading:f,className:"ml-auto",children:"Proceed with transfer"})]})]}),(0,t.jsx)(l.Modal,{active:m,onClickOutside:S,children:(0,t.jsx)(b,{configuration:y,transferRequest:v,onDone:()=>{S(),I.replace(`/${C?.slug}/~/integrations/${g.slug}/${p}`)},onCancel:S})})]})}},4681361:e=>{"use strict";e.s({IntegrationPublicUrlShareButton:()=>o});var t=e.i(6645307),i=e.i(6530772),n=e.i(5674541),a=e.i(9948746),r=e.i(2615772),l=e.i(2769324),s=e.i(2198335);function o(e){let{integrationSlug:o}=e,[c,d]=(0,i.useState)(!1);async function u(){let e=`https://vercel.com/marketplace/${o}`;try{await navigator.clipboard.writeText(e),d(!0),setTimeout(()=>{d(!1)},2e3)}catch(e){}}return o?(0,t.jsx)(l.AnimatePresence,{mode:"wait",children:c?(0,t.jsxs)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"top-px flex h-4 items-center gap-1 p-1",children:[(0,t.jsx)(a.Check,{color:"green-700",size:12}),(0,t.jsx)("span",{className:"text-xs leading-none text-green-700",children:"URL copied"})]},"success"):(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"flex h-4 items-center",children:(0,t.jsx)(n.Button,{variant:"unstyled",className:"top-px flex items-center rounded p-1 text-[var(--accents-3)] transition-all duration-300 hover:bg-gray-200 disabled:hover:cursor-default disabled:hover:bg-transparent [&>span]:inline-flex [&>span]:h-fit [&>span]:items-center [&>span]:justify-center [&>span]:p-0",size:"tiny",onClick:()=>{u()},children:(0,t.jsx)(r.Link,{size:12})})},"normal")}):null}},7249166:e=>{"use strict";e.s({InstallationStatus:()=>a});var t=e.i(6645307),i=e.i(5440190),n=e.i(2159256);function a(e){let{configurationId:a}=e,{data:r}=(0,i.default)(a);return(0,t.jsx)(n.NotificationCallout,{notification:r?.notification,ssoParams:{integrationConfigurationId:r?.id,teamIdOrSlug:r?.teamId}})}},1455674:e=>{e.v({detailsSection:"details-sidebar-module__IOjKpW__detailsSection",detailsWrapper:"details-sidebar-module__IOjKpW__detailsWrapper"})},4030318:e=>{"use strict";e.s({DetailSidebar:()=>u,MarketplaceSidebarBalance:()=>h,MarketplaceSidebarDetailSection:()=>p,MarketplaceSidebarDetailSectionPlaceholder:()=>m,MarketplaceSidebarResourceCount:()=>g});var t=e.i(6645307),i=e.i(889716),n=e.i(8084653),a=e.i(5163670),r=e.i(555528),l=e.i(4049272),s=e.i(2362802);e.i(7196151);var o=e.i(2159371),c=e.i(5330315),d=e.i(1455674);function u(e){let{integration:a,Support:r}=e;if(!a)return(0,t.jsxs)(i.Stack,{gap:2,children:[(0,t.jsx)(m,{}),(0,t.jsx)(m,{}),(0,t.jsx)(m,{}),(0,t.jsx)(m,{})]});let l="object"==typeof a&&"products"in a,o="single-product"===a.layout,c=[];if(l&&o){let e=a.products?.[0];c=e?.resourceLinks??[]}return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p,{title:"Developer",value:a.createdBy}),(0,t.jsx)(p,{title:"Website",truncate:!0,value:a.website?(0,t.jsx)(s.Link,{href:a.website,type:"highlight",children:a.website.replace(/https?:\/\//,"").replace(/\/$/,"")}):null}),(0,t.jsx)(p,{title:"Documentation",value:a.documentationUri?(0,t.jsx)(s.Link,{external:!0,href:a.documentationUri,type:"highlight",children:"Read"}):null}),(0,t.jsx)(p,{title:"EULA",value:a.eulaDocUri?(0,t.jsx)(s.Link,{external:!0,href:a.eulaDocUri,type:"highlight",children:"Read"}):null}),(0,t.jsx)(p,{title:"Privacy Policy",value:a.privacyDocUri?(0,t.jsx)(s.Link,{external:!0,href:a.privacyDocUri,type:"highlight",children:"Read"}):null}),r??(0,t.jsx)(p,{title:"Support",tooltip:"Need help? Reach out to your integration partner for support.",truncate:!0,value:a.supportUri?(0,t.jsxs)(s.Link,{external:!0,href:a.supportUri,prefetch:!1,type:"highlight",children:["Open in ",a.name]}):a.supportContactEmail?(0,t.jsx)(s.Link,{external:!0,href:`mailto:${a.supportContactEmail}`,type:"highlight",children:a.supportContactEmail}):null,wrapTitle:!0}),c.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(n.Text,{lineHeight:24,size:20,weight:600,className:"mt-6",children:"Resources"}),(0,t.jsx)("div",{children:c.map(e=>(0,t.jsx)(p,{title:e.title,value:(0,t.jsx)(s.Link,{href:e.href,type:"highlight",external:!0,children:"Read"})},e.title))})]})]})}function h(e){let{configuration:i}=e,{data:n}=(0,o.useMarketplaceBillingBalance)(i.id),a=n?.balance?.currencyValueInCents??i.billingData?.credit?.balanceTotalCent;return void 0===a?null:(0,t.jsx)(p,{title:"Prepaid Balance",value:(0,l.formatMarketplaceBillingTotal)(a/100)})}function g(e){let{integrationIdOrSlug:i,teamSlug:n}=e,{data:r}=(0,c.useResourceList)({teamSlug:n,integrationIdOrSlug:i});return(0,t.jsx)(p,{title:"Installed products",value:r?.stores.length??(0,t.jsx)(a.Skeleton,{height:20,width:10})})}function p(e){let{title:a,value:l,truncate:s,wrapTitle:o,tooltip:c}=e;return l?(0,t.jsx)("div",{className:d.default.detailsSection,children:(0,t.jsxs)(i.Stack,{direction:"row",gap:4,justify:"space-between",children:[(0,t.jsx)(r.Tooltip,{text:c,children:(0,t.jsx)(n.Text,{wrap:o,children:a})}),(0,t.jsx)(n.Text,{truncate:s,children:l})]})}):null}function m(){return(0,t.jsx)("div",{className:d.default.detailsSection,children:(0,t.jsxs)(i.Stack,{direction:"row",gap:4,justify:"space-between",children:[(0,t.jsx)(a.Skeleton,{height:18,width:"40%"}),(0,t.jsx)(a.Skeleton,{height:18,width:"40%"})]})})}},37080:e=>{"use strict";e.s({ContentfulIntegrationButton:()=>x});var t=e.i(6645307),i=e.i(6530772),n=e.i(7315479),a=e.i(5528554),r=e.i(5674541),l=e.i(584439),s=e.i(5454140),o=e.i(7753619),c=e.i(4038414),d=e.i(2362802),u=e.i(9326250),h=e.i(7207682);function g(e){let{integration:i}=e,{isLoggedOut:n}=(0,o.useIsLoggedIn)();return(0,h.isCodeRepository)(i)?(0,t.jsxs)(d.ButtonLink,{href:n?"/signup":"/new",children:["Continue with ",i.name]}):null}function p(e){let{integration:i}=e;return(0,h.hasCustomCta)(i)&&i.ctaUrl?(0,t.jsx)(d.ButtonLink,{href:i.ctaUrl,children:i.ctaText}):null}function m(e){let{integration:o}=e,{user:g}=(0,s.useUser)(),p=(0,l.useToasts)(),[m,x]=(0,i.useState)(!1),[f,j]=(0,i.useState)(!1),y=(0,c.useHeap)(),b=async()=>{if(g?.email&&g.uid){j(!0);try{await (0,h.requestIntegration)({userId:g.uid,email:g.email,slug:o.slug,heapUserId:y.userId,heapIdentity:y.identity}),p.success("Request submitted successfully."),x(!0)}catch(e){p.error((0,n.errorToString)(e))}finally{j(!1)}}};return g?(0,t.jsx)(r.Button,{disabled:f||m,loading:f,onClick:(0,u.promiseToCallback)(b),prefix:m?(0,t.jsx)(a.CheckCircleFill,{color:"green-700"}):void 0,children:m?"Requested":"Request Integration"}):(0,t.jsx)(d.ButtonLink,{href:"#request",children:"Request Integration"})}function x(e){let{integration:i}=e;return(0,h.isCodeRepository)(i)||(0,h.hasCustomCta)(i)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{integration:i}),(0,t.jsx)(p,{integration:i})]}):(0,t.jsx)(m,{integration:i})}},5710774:e=>{e.v({button:"request-form-module__8eWAma__button",label:"request-form-module__8eWAma__label",wrapper:"request-form-module__8eWAma__wrapper"})},4477218:e=>{e.v({content:"contentful-integration-details-module__10dLUa__content","mdx-container":"contentful-integration-details-module__10dLUa__mdx-container"})},2661470:e=>{"use strict";e.s({RequestContentfulIntegration:()=>y},2661470);var t=e.i(6645307),i=e.i(889716),n=e.i(8084653),a=e.i(7753619),r=e.i(1652373),l=e.i(7207682),s=e.i(6530772),o=e.i(7315479),c=e.i(5674541),d=e.i(631755),u=e.i(8811733),h=e.i(584439),g=e.i(4038414),p=e.i(5710774);function m(e){let{children:i}=e;return(0,t.jsx)("span",{className:p.default.label,children:i})}let x={background:"var(--input-background)"};function f(e){let{slug:n}=e,[a,r]=(0,s.useState)(""),[f,j]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[k,T]=(0,s.useState)(!1),I=(0,h.useToasts)(),C=(0,g.useHeap)(),v=async e=>{e.preventDefault(),T(!0);try{await (0,l.requestIntegration)({firstName:a,lastName:f,email:y,slug:n,heapUserId:C.userId,heapIdentity:C.identity}),r(""),j(""),b(""),I.success("Request submitted successfully.")}catch(e){I.error((0,o.errorToString)(e))}finally{T(!1)}};return(0,t.jsx)("div",{className:p.default.wrapper,children:(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)(i.Stack,{direction:"column",gap:6,children:[(0,t.jsxs)(i.Stack,{direction:{sm:"column",md:"row",lg:"row"},gap:6,children:[(0,t.jsx)(d.Input,{disabled:k,id:"integrations-first-name",label:(0,t.jsx)(m,{children:"First Name"}),maxLength:40,name:"firstName",onChange:e=>r(e.target.value),pattern:".*\\S+.*",placeholder:"Jane",required:!0,style:x,title:"This field cannot be blank.",value:a,width:"100%"}),(0,t.jsx)(d.Input,{disabled:k,id:"integrations-last-name",label:(0,t.jsx)(m,{children:"Last Name"}),maxLength:40,name:"lastName",onChange:e=>j(e.target.value),pattern:".*\\S+.*",placeholder:"Doe",required:!0,style:x,title:"This field cannot be blank.",value:f,width:"100%"})]}),(0,t.jsx)(i.Stack,{children:(0,t.jsx)(d.Input,{disabled:k,id:"integrations-email",label:(0,t.jsx)(m,{children:"Email"}),maxLength:40,name:"email",onChange:e=>b(e.target.value),placeholder:"janedoe@example.com",required:!0,style:x,title:"This field cannot be blank.",typeName:"email",value:y,width:"100%"})})]}),(0,t.jsx)(u.Spacer,{y:2}),(0,t.jsx)("div",{className:p.default.button,children:(0,t.jsx)(c.Button,{loading:k,size:"large",children:"Request Integration"})})]})})}var j=e.i(4477218);function y(e){let{integration:s}=e,{isLoading:o,isLoggedOut:c}=(0,a.useIsLoggedIn)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Stack,{direction:"column",gap:4,children:[(0,t.jsx)(n.Text,{lineHeight:24,size:20,weight:600,children:"Overview"}),(0,t.jsx)("div",{className:j.default["mdx-container"],children:(0,r.renderContentfulDocument)(s.overview)})]}),o||!c||(0,l.isCodeRepository)(s)?null:(0,t.jsxs)(i.Stack,{direction:"column",gap:4,children:[(0,t.jsx)("div",{id:"request",children:(0,t.jsx)(n.Text,{lineHeight:24,size:20,weight:600,children:"Request Integration"})}),(0,t.jsx)(f,{slug:s.slug})]})]})}},9024677:e=>{"use strict";e.s({MarketplaceBillingChart:()=>f,MarketplaceBillingChartPlaceholder:()=>j},9024677);var t=e.i(6645307),i=e.i(6530772),n=e.i(3514588),a=e.i(5819787),r=e.i(889716),l=e.i(8084653),s=e.i(3621043),o=e.i(663357);e.i(6757171);var c=e.i(9488959),d=e.i(4525531),u=e.i(2552654),h=e.i(6981661),g=e.i(3521787),p=e.i(1183506),m=e.i(9336536);e.i(3861519);var x=e.i(9990438);function f(e){var f;let{integration:y,stores:b,teamSlug:k,integrationConfigurationId:T,integrationSlug:I,resourceId:C}=e,[v,S]=(0,i.useState)("week"),{team:w}=(0,n.useTeam)(),A=(f=w?{integrationConfigurationId:T,teamId:w.id,period:v}:null,(0,g.default)(()=>{if(!f)return null;let{integrationConfigurationId:e,teamId:t,period:i}=f,n=new URLSearchParams;return n.append("teamId",t),n.append("period",i),`${m.API_INTEGRATION_CONTROLLER_V2}/installations/${e}/billing/data/series?${n.toString()}`},p.fetchAPI)),N=(0,i.useMemo)(()=>{let e,t,i;if(!A.data?.byResource||!A.data.installation)return null;if(A.data.installation.credit?.balanceTotalCent.length){let t=new Map;A.data.installation.credit.balanceTotalCent.forEach(e=>{let i=new Date(e.timestamp).getTime();t.has(i)||t.set(i,{date:i,records:{}});let n=t.get(i);n&&(n.records.Total=e.value/100)}),A.data.byResource.forEach(e=>{let i=e.externalResourceId;i&&e.credit?.balanceTotalCent.length&&e.credit.balanceTotalCent.forEach(e=>{let n=new Date(e.timestamp).getTime();t.has(n)||t.set(n,{date:n,records:{}});let a=t.get(n),r=b.find(e=>e.externalResourceId===i)?.name;a&&r&&(a.records[r]=e.value/100)})}),e=t.size>0?Array.from(t.values()):void 0}if(A.data.installation.spending?.totalCent.length){let e=new Map;A.data.installation.spending.totalCent.forEach(t=>{let i=new Date(t.timestamp).getTime();e.has(i)||e.set(i,{date:i,records:{}});let n=e.get(i);n&&(n.records.Total=t.value/100)}),A.data.byResource.forEach(t=>{let i=t.externalResourceId;i&&t.spending?.totalCent.length&&t.spending.totalCent.forEach(t=>{let n=new Date(t.timestamp).getTime();e.has(n)||e.set(n,{date:n,records:{}});let a=e.get(n),r=b.find(e=>e.externalResourceId===i)?.name;a&&r&&(a.records[r]=t.value/100)})}),t=e.size>0?Array.from(e.values()):void 0}if(A.data.installation.usage?.byMetrics.length){let e=new Map;A.data.installation.usage.byMetrics.forEach(t=>{t.usageItems.forEach(i=>{let n=e.get(t.name)?.map;n||(n=new Map,e.set(t.name,{type:t.type,units:t.units,map:n}));let a=new Date(i.timestamp).getTime();n.has(a)||n.set(a,{date:a,records:{}});let r=n.get(a);r&&(r.records.Total=i.value)})}),i=Array.from(e.entries()).map(e=>{let[t,{type:i,units:n,map:a}]=e;return{metric:{name:t,type:i,units:n},data:Array.from(a.values())}})}return{noData:!e&&!t&&!i,prepayment:e,subscription:t,usageByMetric:i}},[A.data,b]);return A.isLoading?(0,t.jsx)(j,{dimensions:b.length}):!N||N.noData?(0,t.jsx)(o.EmptyState.Root,{description:"edgedb"===I?"There are no data available yet for this period.":"Usage tracking is not yet available for this service.",icon:(0,t.jsx)(o.EmptyState.Icon,{icon:(0,t.jsx)(a.ChartBarPeak,{}),size:32}),paddingY:200,secondary:!0,title:"No data available",children:(0,t.jsx)(x.OpenInPartnerDashboardButton,{componentType:"button",buttonVariant:"secondary",integrationConfigurationId:T,label:`See usage in ${y.name}`,teamIdOrSlug:w?.id,path:"usage"})}):(0,t.jsxs)(r.Stack,{gap:5,children:[C?(0,t.jsx)(d.ResourceUsageCharts,{resourceId:C}):(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,justify:"space-between",children:[(0,t.jsx)(l.Text,{lineHeight:24,size:20,weight:600,children:"Usage Report"}),(0,t.jsxs)(s.Combobox,{clearable:!1,noInputPrefix:!0,onChange:e=>{e&&S(e)},value:v,width:140,children:[(0,t.jsx)(s.Combobox.Input,{}),(0,t.jsxs)(s.Combobox.List,{children:[(0,t.jsx)(s.Combobox.Option,{value:"week",children:"Last 7 days"}),(0,t.jsx)(s.Combobox.Option,{value:"month",children:"Last month"}),(0,t.jsx)(s.Combobox.Option,{value:"year",children:"Last year"})]})]})]}),N.prepayment?(0,t.jsx)(h.MarketplaceLineChart,{chartData:N.prepayment,description:"This chart shows the balance over time.",formatter:(0,u.formatUsageValueByUnit)("$"),legendSuffix:"Balance",linkMapper:e=>`/${k}/~/stores/integration/${b.find(t=>t.name===e)?.id}/usage`,title:"Balance"}):null,N.subscription?(0,t.jsx)(h.MarketplaceLineChart,{chartData:N.subscription,description:"This chart shows the cost per product over time.",formatter:(0,u.formatUsageValueByUnit)("$"),legendSuffix:"Total Cost",linkMapper:e=>`/${k}/~/stores/integration/${b.find(t=>t.name===e)?.id}/usage`,title:"Cost per Product"}):null,N.usageByMetric?.map(e=>"total"===e.metric.type?(0,t.jsx)(h.MarketplaceLineChart,{chartData:e.data,description:`This chart shows the ${e.metric.name} over time.`,formatter:(0,u.formatUsageValueByUnit)(e.metric.units),legendSuffix:`Total ${e.metric.name}`,title:e.metric.name},e.metric.name):(0,t.jsx)(c.MarketplaceBarChart,{chartData:e.data,description:`This chart shows the ${e.metric.name} over time.`,formatter:(0,u.formatUsageValueByUnit)(e.metric.units),legendSuffix:`Total ${e.metric.name}`,title:e.metric.name},e.metric.name))]})}function j(e){let{dimensions:i=4}=e;return(0,t.jsxs)(r.Stack,{gap:5,children:[(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,justify:"space-between",children:[(0,t.jsx)(l.Text,{lineHeight:24,size:20,weight:600,children:"Usage Report"}),(0,t.jsxs)(s.Combobox,{clearable:!1,noInputPrefix:!0,value:"week",width:140,children:[(0,t.jsx)(s.Combobox.Input,{}),(0,t.jsx)(s.Combobox.List,{children:(0,t.jsx)(s.Combobox.Option,{value:"week",children:"Last 7 days"})})]})]}),(0,t.jsx)(c.MarketplaceChartPlaceholder,{description:"This chart shows the cost per product over time.",dimensions:i,title:"Cost per Product"})]})}},9974769:e=>{"use strict";e.s({BrowseMarketplaceButton:()=>a});var t=e.i(6645307),i=e.i(2362802),n=e.i(4049272);function a(e){let{teamSlug:a}=e;return(0,t.jsx)(i.ButtonLink,{href:(0,n.getBrowseMarketplaceLink)({teamSlugOrPublic:{teamSlug:a}}),children:"Browse Marketplace"})}},1151206:e=>{"use strict";e.s({MarketplaceUninstallIntegration:()=>D,MarketplaceUninstallIntegrationPlaceholder:()=>B},1151206);var t=e.i(6645307),i=e.i(5674541),n=e.i(6531164),a=e.i(611347),r=e.i(7238633),l=e.i(631755),s=e.i(8934201),o=e.i(8158100),c=e.i(889716),d=e.i(8350390),u=e.i(8084653),h=e.i(1755874),g=e.i(555528),p=e.i(584439),m=e.i(6112807),x=e.i(6530772),f=e.i(5535439),j=e.i(7573892),y=e.i(9802771),b=e.i(6649026),k=e.i(1183506),T=e.i(9336536),I=e.i(9326250),C=e.i(1164214),v=e.i(4049272),S=e.i(2362802);e.i(7196151);var w=e.i(5330315);e.i(6591346);var A=e.i(5037292),N=e.i(3238382);e.i(1477245);var M=e.i(263946),_=e.i(3904906),E=e.i(4325351),R=e.i(1587761),L=e.i(3250594);function P(e){let[i,n]=(0,x.useState)(!1);return(0,t.jsxs)(s.Modal.Modal,{active:e.isActive,onClickOutside:e.onClose,style:{width:"fit-content"},allowOverflow:!0,children:[(0,t.jsxs)(s.Modal.Body,{children:[(0,t.jsxs)(s.Modal.Header,{children:[(0,t.jsx)(s.Modal.Title,{children:"Confirmation"}),(0,t.jsx)(s.Modal.Subtitle,{children:(0,t.jsxs)(u.Text,{children:[(0,t.jsx)("strong",{children:e.integration.name})," has been uninstalled from ",(0,t.jsx)("strong",{children:e.team.name}),"."]})})]}),(0,t.jsx)(L.Feedback,{copy:"Want to tell us more?",label:"front",siteType:"front",type:"inline",onFeedbackSubmit:e.onClose,onFeedbackFormOpen:()=>{n(!0)},onFeedbackFormClose:()=>{n(!1)},fullWidth:!0})]}),!i&&(0,t.jsx)(s.Modal.Actions,{className:"justify-end",children:(0,t.jsx)(s.Modal.Action,{onClick:e.onClose,children:"Done"})})]})}function D(e){let{integration:l,configuration:s,team:o,canDelete:c,usesSingleProductLayout:M,singleResource:_,showPostUninstallConfirmation:E}=e,{data:L,isLoading:D}=(0,w.useResourceList)({skip:"marketplace"!==s.installationType,integrationIdOrSlug:l.slug}),B=!!s.deleteRequestedAt,U="marketplace"===s.installationType,q=(L?.stores.length??0)>0,$=!B&&!D&&(!U||!!M||!q),V=!c||!$,z=(0,p.useToasts)(),W=(0,f.useRouter)(),[G,Y]=(0,x.useState)(!1),[H,K]=(0,x.useState)(!1),[J,Q]=(0,x.useState)(!1),X=(0,x.useCallback)(()=>Y(!0),[]),Z=(0,x.useCallback)(()=>Y(!1),[]),ee=(0,x.useCallback)(()=>{let e=(0,v.getMarketplaceInstallationsLink)({teamSlug:o.slug});W.push(e)},[W,o.slug]),et=(0,x.useCallback)(async()=>{K(!0);let e=(0,b.encode)({teamId:o.id});try{"marketplace"===s.installationType?await (0,k.fetchAPI)(`${T.API_INTEGRATION_CONTROLLER_V2}/installations/${s.id}/uninstall${e}`,{method:"POST",body:{},throwOnHTTPError:!0}):await (0,k.fetchAPI)(`${T.API_INTEGRATION_CONTROLLER}/configuration/${s.id}${e}`,{method:"DELETE"}),Z(),j.analytics.track(y.AnalyticsEvent.INTEGRATION_CONFIGURATION_REMOVE_SUCCEEDED),j.analytics.track(y.AnalyticsEvent.INTEGRATION_UNINSTALLED,{integration_id:l.id,integration_slug:l.slug,source:"installation view",target:"team"}),E?Q(!0):ee()}catch(e){z.error((0,A.showRenderIntegrationError)(e)?e.message:"Failed to uninstall integration"),z.error("Failed to uninstall integration")}finally{K(!1)}},[s,l.id,l.slug,o,z,Z,ee,E]);(0,x.useEffect)(()=>{G&&j.analytics.track(y.AnalyticsEvent.INTEGRATION_CONFIGURATION_REMOVE_MODAL_OPENED)},[G]);let ei="marketplace"===s.installationType?s.billingPlan?.type:void 0,en="marketplace"===s.installationType&&l.flags?.includes(R.LaunchDarklyIntegrationFlags.MarketplaceInstallationDeletePendingAt)&&s.billingData?.spending?.periodEnd?O(new Date(s.billingData.spending.periodEnd)):void 0,ea=s.deleteRequestedAt&&s.deleteRequestedAt>Date.now()?O((0,m.addDays)(s.deleteRequestedAt,1)):void 0,er="marketplace"===s.installationType&&(0,N.getIntegrationOps)({integration:l}).isSingleProductLayout(),el=(0,v.getInstallationDetailsLink)({teamSlug:o.slug,integrationSlug:l.slug,configurationId:s.id,isMarketplace:!0});return(0,t.jsxs)(a.Fieldset,{type:"error",children:[(0,t.jsxs)(n.FieldsetContent,{children:[(0,t.jsx)(h.FieldsetTitle,{children:"Uninstall Integration"}),!er&&q?(0,t.jsxs)(d.FieldsetSubtitle,{color:"gray-900",children:["To uninstall this integration please delete all the"," ",(0,t.jsx)(S.Link,{className:"text-[var(--geist-link-color)] underline-offset-4 hover:underline",href:el,children:"products"})," ","linked to this integration."]}):null,B?(0,t.jsxs)(u.Text,{children:["This integration is scheduled to be uninstalled",ea?` on ${ea}`:" within 24 hours","."]}):null]}),(0,t.jsx)(r.FieldsetFooter,{children:(0,t.jsx)(r.FieldsetFooter.Actions,{children:(0,t.jsxs)(g.Tooltip,{disableTriggers:!V,text:function(e){let{isDeleteRequested:t,canUninstallIntegration:i}=e;return t?"This integration is scheduled to be uninstalled.":i?"You need additional permissions to uninstall integration.":"Delete all the products before removing the integration"}({isDeleteRequested:B,canUninstallIntegration:$}),children:[(0,t.jsx)(i.Button,{"data-testid":(0,C.tid)("integration","uninstall"),disabled:V,onClick:X,type:"error",children:"Uninstall Integration"}),(0,t.jsx)(F,{active:G,billingType:ei,eulaLink:l.eulaDocUri,integrationSlug:l.slug,loading:H,onCancel:()=>{j.analytics.track(y.AnalyticsEvent.INTEGRATION_CONFIGURATION_REMOVE_CANCELED),Z()},onConfirm:(0,I.promiseToCallback)(et),singleResource:L?.stores.find(e=>e.id===_?.id)??_,subscriptionEndDate:en}),(0,t.jsx)(P,{integration:l,team:o,isActive:J,onClose:()=>{Q(!1),ee()}})]})})})]})}function O(e){return e.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})}function B(){return(0,t.jsxs)(a.Fieldset,{type:"error",children:[(0,t.jsxs)(n.FieldsetContent,{children:[(0,t.jsx)(h.FieldsetTitle,{children:"Uninstall Integration"}),(0,t.jsx)(d.FieldsetSubtitle,{color:"gray-900",children:"To uninstall this integration please delete all the products linked to this integration."})]}),(0,t.jsx)(r.FieldsetFooter,{children:(0,t.jsx)(r.FieldsetFooter.Actions,{children:(0,t.jsx)(i.Button,{disabled:!0,type:"error",children:"Uninstall Integration"})})})]})}function F(e){let{loading:i,integrationSlug:n,active:a,onCancel:r,onConfirm:d,billingType:h,eulaLink:g,singleResource:p,subscriptionEndDate:m}=e,f=(0,x.useRef)(null),j="uninstall my integration";(0,x.useEffect)(()=>{a&&requestAnimationFrame(()=>{let e=Array.from(f.current?.elements??[]);e.find(e=>"INPUT"===e.tagName)?.focus()})},[a]);let y=(0,x.useCallback)(e=>{e.preventDefault(),f.current?.checkValidity()&&d()},[d]);return(0,t.jsx)(s.Modal.Modal,{active:a,onClickOutside:r,width:500,children:(0,t.jsxs)("form",{onSubmit:y,ref:f,children:[(0,t.jsx)(s.Modal.Body,{children:(0,t.jsxs)(c.Stack,{gap:6,children:[(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Modal.Title,{children:"Uninstall Integration"}),(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsx)(u.Text,{children:"This integration will be uninstalled."}),(0,t.jsxs)(u.Text,{children:["By clicking to uninstall, I acknowledge that I have read the"," ",(0,t.jsx)(S.Link,{external:!0,href:g,prefetch:!1,type:"primary",children:"EULA"}),"and understand my rights upon termination.","prepayment"===h?" Unused or prepaid credits may not be refunded in accordance with this provider's terms and policies.":"",m?` Your active subscription ends on ${m}. The provider may terminate it at any time in accordance with their terms and policies. The remaining period may not be refunded.`:""]})]})]}),p?(0,t.jsxs)(c.Stack,{gap:6,children:[(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsxs)(u.Text,{children:[_.PRODUCT," will"," ",(0,t.jsxs)("b",{children:["delete your"," ",(0,E.getProductNameAndResourceTitle)(p.product)]}),", along with all of its items. Any projects connected to this"," ",(0,E.getResourceTitleByProductForDeletion)(p.product)," ","will no longer be able to read its contents."]}),(0,t.jsxs)(u.Text,{children:[_.PRODUCT," recommends that you ensure this"," ",(0,E.getResourceTitleByProductForDeletion)(p.product)," ","is no longer used by any projects before continuing."]})]}),p.projectsMetadata.length?(0,t.jsxs)(c.Stack,{gap:3,children:[(0,t.jsx)(u.Text,{color:"gray-900",children:"Deleting the database will cause the deletion of connections to the following projects"}),(0,t.jsx)(M.ProjectConnectionsListInModal,{connections:p.projectsMetadata})]}):null]}):null,(0,t.jsx)(o.Note,{center:!0,fill:!0,label:"Warning",type:"error",variant:"contrast",children:"This action is not reversible. Please be certain."}),(0,t.jsx)(s.Modal.Inset,{last:!0,children:(0,t.jsxs)(c.Stack,{gap:6,children:[(0,t.jsx)("label",{children:(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsxs)(u.Text,{color:"gray-900",size:14,weight:400,children:["Enter the integration name"," ",(0,t.jsx)("b",{style:{overflowWrap:"anywhere"},children:n})," ","to continue:"]}),(0,t.jsx)(l.Input,{"aria-label":"Resource Name",name:"resourceName",pattern:`\\s*${n}\\s*`,required:!0})]})}),(0,t.jsx)("label",{children:(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsxs)(u.Text,{color:"gray-900",size:14,weight:400,children:["To verify, type ",(0,t.jsx)("b",{children:j})," below:"]}),(0,t.jsx)(l.Input,{"aria-label":"Verification Code",name:"verificationText",pattern:`\\s*${j}\\s*`,required:!0})]})})]})})]})}),(0,t.jsxs)(s.Modal.Actions,{children:[(0,t.jsx)(s.Modal.Action,{disabled:i,onClick:r,type:"secondary",children:"Cancel"}),(0,t.jsx)(s.Modal.Action,{buttonType:"submit",disabled:i,loading:i,children:"Uninstall"})]})]})})}},3187876:e=>{"use strict";e.s({MarketplaceTransferIntegration:()=>F,MarketplaceTransferIntegrationPlaceholder:()=>R});var t=e.i(6645307),i=e.i(5674541),n=e.i(6531164),a=e.i(611347),r=e.i(7238633),l=e.i(631755),s=e.i(8934201),o=e.i(8158100),c=e.i(889716),d=e.i(8350390),u=e.i(8084653),h=e.i(1755874),g=e.i(555528),p=e.i(584439),m=e.i(6530772),x=e.i(5535439),f=e.i(7573892),j=e.i(9802771),y=e.i(6649026),b=e.i(1183506),k=e.i(9336536),T=e.i(9326250),I=e.i(1164214),C=e.i(4049272),v=e.i(3326412),S=e.i(8935741),w=e.i(5396709),A=e.i(8327270),N=e.i(4334929),M=e.i(7207682),_=e.i(4701001),E=e.i(3965881);function R(){return(0,t.jsxs)(a.Fieldset,{type:"error",children:[(0,t.jsxs)(n.FieldsetContent,{children:[(0,t.jsx)(h.FieldsetTitle,{children:"Transfer Integration"}),(0,t.jsx)(d.FieldsetSubtitle,{color:"gray-900",children:"To transfer this integration please disconnect all the projects linked to this this integration's resources."})]}),(0,t.jsx)(r.FieldsetFooter,{children:(0,t.jsx)(r.FieldsetFooter.Actions,{children:(0,t.jsx)(i.Button,{disabled:!0,type:"error",children:"Transfer Integration"})})})]})}function L(e){let{loading:i,originatingTeam:n,configuration:a,resources:r,active:l,complete:o,error:c,onCancel:d,transferInstallation:u,onCompleted:h}=e,[g,p]=(0,m.useState)(null),[x,f]=(0,m.useState)(),[j,y]=(0,m.useState)("Team"),[b,k]=(0,m.useState)(),{data:I}=(0,w.useInstallationPaymentMethodState)(a.id),{createAuthorization:C}=(0,_.useMarketplaceBillingAuthorizationApi)(),v=(0,_.useAwaitAuthorization)(),S=(0,m.useCallback)(async()=>{if(!x)throw Error("Invalid state, no team selected");y("Provision");let e=function(e,t){let i,n,a,r,l=e.billingPlan?.scope||"resource",s=e.billingPlan?.id??e.lastAuthorization?.billingPlanId,o=e.billingPlan?.type==="prepayment"?0:void 0;if("resource"===l){for(let e of t){if(!r){r=e,n=e.metadata;continue}e.billingPlan?.preauthorizationAmount&&e.billingPlan.preauthorizationAmount>(r.billingPlan?.preauthorizationAmount??0)&&(r=e,n=e.metadata)}r&&(r.billingPlan?.type==="prepayment"&&(o=0),s=r.billingPlan?.id,i=r.id,n=r.metadata,a=r.product.id)}return{billingPlanId:s??"",metadata:n??{},resourceId:i,productId:a,integrationIdOrSlug:e.integrationId,integrationConfigurationId:e.id,prepaymentAmountCents:o}}(a,r),t=await C(n.id,{...e,overrideTeamForInstallationTransfer:x.id,paymentMethodId:b});if(p(t?.id??null),t){if("succeeded"!==(await v(x.id,t.id)).status)return;await u(x.id,t.id,b)}},[u,a,r,n,x,b,C,v]);return(0,t.jsxs)(s.Modal.Modal,{active:l,onClickOutside:function(){f(void 0),k(void 0),y("Team"),d()},width:500,children:["Team"!==j&&x?null:(0,t.jsx)(D,{integrationId:a.integrationId,loading:i,onCancel:d,onContinue:function(){k(void 0),I?.required?y("Card"):y("Confirm")},setTargetTeam:f,targetTeam:x}),"Card"===j&&x?(0,t.jsx)(O,{onBack:function(){y("Team")},onContinue:function(e){k(e),y("Confirm")},targetTeam:x}):null,"Confirm"===j&&x?(0,t.jsx)(B,{integrationSlug:a.slug,loading:i,onBack:function(){y("Card")},onConfirm:(0,T.promiseToCallback)(S)}):null,"Provision"===j&&x?(0,t.jsx)(E.ProvisioningStep,{authorizationId:g,complete:o,error:c,header:(0,t.jsx)(P,{}),isTransitioning:!1,onBack:()=>y("Confirm"),onChangePaymentMethod:function(){y("Card")},onNext:h,successMessage:"Funds have been added",teamId:x.id}):null]})}function P(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Modal.Title,{children:"Transfer Integration"}),(0,t.jsx)(s.Modal.Subtitle,{children:"This integration will be transferred to the selected team."}),(0,t.jsx)(o.Note,{center:!0,fill:!0,label:"Warning",type:"error",variant:"contrast",children:"This action is only reversible from the selected team."})]})}function D(e){let{loading:i,integrationId:n,targetTeam:a,setTargetTeam:r,onCancel:l,onContinue:o}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.Modal.Body,{children:(0,t.jsxs)(c.Stack,{gap:6,children:[(0,t.jsx)(P,{}),(0,t.jsx)(s.Modal.Inset,{last:!0,children:(0,t.jsx)(c.Stack,{gap:6,children:(0,t.jsx)("label",{children:(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsx)(u.Text,{color:"gray-900",children:"Select a Vercel team to transfer the integration to:"}),(0,t.jsx)(N.TeamSelect,{account:a??void 0,integrationId:n,onChange:e=>{r(e)},type:"marketplace"})]})})})})]})}),(0,t.jsxs)(s.Modal.Actions,{children:[(0,t.jsx)(s.Modal.Action,{disabled:i,onClick:l,type:"secondary",children:"Cancel"}),(0,t.jsx)(s.Modal.Action,{disabled:i||!a,loading:i,onClick:o,type:"default",children:"Continue"})]})]})}function O(e){let{targetTeam:i,onBack:n,onContinue:a}=e;return(0,t.jsx)(A.SelectPaymentMethodActionForTeam,{cancelLabel:"Back",continueLabel:"Continue",onAbort:n,onContinue:a,team:i})}function B(e){let{active:i,integrationSlug:n,loading:a,onBack:r,onConfirm:o}=e,d=(0,m.useRef)(null),h="transfer my integration";(0,m.useEffect)(()=>{i&&requestAnimationFrame(()=>{let e=Array.from(d.current?.elements??[]);e.find(e=>"INPUT"===e.tagName)?.focus()})},[i]);let g=(0,m.useCallback)(e=>{e.preventDefault(),d.current?.checkValidity()&&o()},[o]);return(0,t.jsxs)("form",{onSubmit:g,ref:d,children:[(0,t.jsx)(s.Modal.Body,{children:(0,t.jsxs)(c.Stack,{gap:6,children:[(0,t.jsx)(P,{}),(0,t.jsx)(s.Modal.Inset,{last:!0,children:(0,t.jsxs)(c.Stack,{gap:6,children:[(0,t.jsx)("label",{children:(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsxs)(u.Text,{color:"gray-900",size:14,weight:400,children:["Enter the integration slug"," ",(0,t.jsx)("b",{style:{overflowWrap:"anywhere"},children:n})," ","to continue:"]}),(0,t.jsx)(l.Input,{"aria-label":"Integration Slug",name:"integrationSlug",pattern:`\\s*${n}\\s*`,required:!0})]})}),(0,t.jsx)("label",{children:(0,t.jsxs)(c.Stack,{gap:2,children:[(0,t.jsxs)(u.Text,{color:"gray-900",size:14,weight:400,children:["To verify, type ",(0,t.jsx)("b",{children:h})," below:"]}),(0,t.jsx)(l.Input,{"aria-label":"Verification Code",name:"verificationText",pattern:`\\s*${h}\\s*`,required:!0})]})})]})})]})}),(0,t.jsxs)(s.Modal.Actions,{children:[(0,t.jsx)(s.Modal.Action,{disabled:a,onClick:r,type:"secondary",children:"Back"}),(0,t.jsx)(s.Modal.Action,{buttonType:"submit",disabled:a,loading:a,children:"Continue"})]})]})}let F=(0,e.i(974550).withStripe)(function(e){let{integration:l,configuration:s,resources:o,team:c,canTransfer:u}=e,T="marketplace"===s.installationType,w=!u||!T,A=(0,p.useToasts)(),N=(0,x.useRouter)(),[_,E]=(0,m.useState)(!1),[R,P]=(0,m.useState)(!1),[D,O]=(0,m.useState)(!1),B=(0,m.useCallback)(()=>E(!0),[]),F=(0,m.useCallback)(()=>E(!1),[]),[U,q]=(0,m.useState)(void 0),{value:$,isReady:V}=(0,v.useMarketplaceIntegrationConfigurationTransferToTeam)(),z=(0,m.useCallback)(()=>{let e=(0,C.getMarketplaceInstallationsLink)({teamSlug:c.slug});N.push(e)},[N,c.slug]),W=(0,m.useCallback)(async(e,t,i)=>{P(!0);let n=(0,y.encode)({teamId:c.id});try{if("marketplace"!==s.installationType)throw Error("Integration is not from the marketplace");await (0,b.fetchAPI)(`${k.API_INTEGRATION_CONTROLLER_V2}/installations/${s.id}/transfer${n}`,{method:"POST",body:{toTeamId:e,authorizationId:t,newInstallationPaymentMethodId:i},throwOnHTTPError:!0}),f.analytics.track(j.AnalyticsEvent.INTEGRATION_CONFIGURATION_TEAM_TRANSFER_SUCCEEDED),f.analytics.track(j.AnalyticsEvent.INTEGRATION_UNINSTALLED,{integration_id:l.id,integration_slug:l.slug,source:"installation view",target:"team"}),O(!0),z()}catch(t){let e="Failed to transfer integration";(0,S.isAPIError)(t)&&(e=t.message),A.error(e),q(e),P(!1)}},[s,l.id,l.slug,c,A,z]);return((0,m.useEffect)(()=>{_&&f.analytics.track(j.AnalyticsEvent.INTEGRATION_CONFIGURATION_REMOVE_MODAL_OPENED)},[_]),(0,M.isMarketplaceInstallation)(s)&&V&&$)?(0,t.jsxs)(a.Fieldset,{type:"error",children:[(0,t.jsxs)(n.FieldsetContent,{children:[(0,t.jsx)(h.FieldsetTitle,{children:"Transfer Integration"}),(0,t.jsx)(d.FieldsetSubtitle,{color:"gray-900",children:"To transfer this integration please delete all the projects linked to this integration's resources."})]}),(0,t.jsx)(r.FieldsetFooter,{children:(0,t.jsx)(r.FieldsetFooter.Actions,{children:(0,t.jsxs)(g.Tooltip,{disableTriggers:!w,text:function(e){let{canTransferIntegration:t}=e;return t?"You need additional permissions to transfer integrations.":"Delete all the project connections before transferring the integration"}({canTransferIntegration:T}),children:[(0,t.jsx)(i.Button,{"data-testid":(0,I.tid)("integration","transfer"),disabled:w,onClick:B,type:"error",children:"Transfer Integration"}),(0,t.jsx)(L,{active:_,originatingTeam:c,configuration:s,resources:o,loading:R,onCancel:()=>{f.analytics.track(j.AnalyticsEvent.INTEGRATION_CONFIGURATION_REMOVE_CANCELED),F()},transferInstallation:W,onCompleted:z,complete:D,error:U})]})})})]}):null})}}]);

//# sourceMappingURL=0def3ef874deae81.js.map
//# debugId=407d601a-7eaa-5947-af51-025fb250826e
