
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="f80154f9-314a-51fe-973c-d0224dd72d48")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{3431702:[e=>{"use strict";e.s({default:()=>g,preloadProjectListInfinite:()=>m,useProjectListInfinite:()=>h},3431702);var t=e.i(6530772),s=e.i(3521787),i=e.i(7095283),l=e.i(7766186),n=e.i(6649026),a=e.i(1183506),r=e.i(9336536),o=e.i(4418725),c=e.i(5454140);function d(e){let{version:t,until:s,limit:i,latestDeployments:l,search:a,slug:o,excludeRepos:c,edgeConfigId:d,edgeConfigTokenId:u,connectConfigurationId:m}=e;return`${(0,r.API_PROJECTS_VERSION)(t)}${(0,n.encode)({until:s,limit:i,latestDeployments:l,search:a,slug:o,excludeRepos:c,edgeConfigId:d,edgeConfigTokenId:u,connectConfigurationId:m})}`}e.s({getProjectListInfiniteKey:()=>d},405917);let u=null;function m(e,t){let{limit:s=8,latestDeployments:i=3,excludeReposRef:l}=e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"v9",c=`${(0,r.API_PROJECTS_VERSION)(o)}${(0,n.encode)({limit:s,latestDeployments:i,slug:t,excludeRepos:l?.current[0]??null})}`;u=[c,(0,a.fetchAPI)(c)]}function h(){let{fetchEnabled:e=!0,limit:n=8,latestDeployments:r=3,search:c,excludeReposRef:m,revalidateFirstPage:h=!0,edgeConfigId:g,edgeConfigTokenId:p,connectConfigurationId:x,version:j="v9",slug:f}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=arguments.length>2&&void 0!==arguments[2]&&arguments[2],v=arguments.length>3&&void 0!==arguments[3]&&arguments[3],C=(0,l.useRouter)(),S=(0,o.useTeamSlug)(),A=f||S,w=(0,i.default)((t,s)=>{if(!e||C&&!C.isReady)return null;if(!t)return d({version:j,limit:n,latestDeployments:r,search:c,slug:A,excludeRepos:m?.current[0]??null,edgeConfigId:g,edgeConfigTokenId:p,connectConfigurationId:x});let i=s?.pagination.next?s.pagination.next:null;return i?d({version:j,until:i,limit:n,latestDeployments:r,search:c,slug:A,excludeRepos:m?.current[t]??null,edgeConfigId:g,edgeConfigTokenId:p,connectConfigurationId:x}):null},async e=>{if(u&&u[0]===e){let e=await u[1];return u=null,e}return(0,a.fetchAPI)(e,{throwOnHTTPError:!0})},{...b,keepPreviousData:v,revalidateFirstPage:h,persistSize:!0}),k=!!w.data,M=(w.data?.[w.data.length-1]?.projects.length??0)<n,T=(0,t.useMemo)(()=>w.data?w.data.flatMap(e=>e.projects):[],[w.data]),I=k&&0===T.length,_=!!(w.data&&w.size>w.data.length);return(0,s.default)(()=>{if(y||!w.data||M)return null;let e=w.data[w.data.length-1];return d({version:j,until:e?.pagination.next?e.pagination.next:null,limit:n,latestDeployments:r,search:c,slug:A,excludeRepos:m?.current[0]??null,edgeConfigId:g,edgeConfigTokenId:p,connectConfigurationId:x})},e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0})),[w,{projects:T,initialDataLoaded:k,isEmpty:I,loadMore:()=>w.setSize(e=>e+1),isLoadingMore:_,isReachingEnd:M,isValidating:w.isValidating}]}function g(){let{fetchEnabled:e=!0,limit:i,from:d,linked:u,search:m,hasProductionDomains:h,domain:g,latestDeployments:p=3,deploymentInfo:x,includePermissions:j=!1,edgeConfigId:f,edgeConfigTokenId:b,connectConfigurationId:y,excludeConnectConfigurationId:v,teamId:C}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},A=arguments.length>2?arguments[2]:void 0,w=arguments.length>3?arguments[3]:void 0,k=(0,o.useTeamSlug)(),M=(0,l.useRouter)(),{user:T,isNorthstar:I}=(0,c.useUser)(),[_,E]=(0,t.useState)(m);return(0,t.useEffect)(()=>{E(e=>e===m?e:m)},[m]),{...(0,s.default)(()=>e&&(!M||M.isReady)&&T&&(!I||T.defaultTeamId||C)?`${(0,r.API_PROJECTS_VERSION)("v8")}${(0,n.encode)({from:d||null,limit:i,linked:!!u||null,search:_,hasProductionDomains:h?"1":null,domain:g,latestDeployments:void 0===p?null:p,deploymentInfo:x||null,slug:A||k,includePermissions:j,edgeConfigId:f,edgeConfigTokenId:b,connectConfigurationId:y,excludeConnectConfigurationId:v,teamId:C||null})}`:null,e=>(0,a.fetchAPI)(e,{throwOnHTTPError:!0,throwOnScopeAuthError:w?.throwOnScopeAuthError}),S),updateSearch:E,search:_}}},[405917]],5602331:e=>{e.v({checked:"toggle-module__fUrgQa__checked",disabled:"toggle-module__fUrgQa__disabled",input:"toggle-module__fUrgQa__input "+e.i(7431715).visuallyHidden,large:"toggle-module__fUrgQa__large",medium:"toggle-module__fUrgQa__medium",noMargin:"toggle-module__fUrgQa__noMargin",switchFirst:"toggle-module__fUrgQa__switchFirst",thumb:"toggle-module__fUrgQa__thumb",thumbIcon:"toggle-module__fUrgQa__thumbIcon",titleCasing:"toggle-module__fUrgQa__titleCasing",toggle:"toggle-module__fUrgQa__toggle",wrapper:"toggle-module__fUrgQa__wrapper"})},9495609:e=>{"use strict";e.s({Toggle:()=>o});var t=e.i(6645307),s=e.i(6530772),i=e.i(5610210),l=e.i(1164214),n=e.i(9362924),a=e.i(5602331);let r={amber:{background:"--ds-amber-700",foreground:"--ds-amber-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-gray-100"},"amber-inverted":{background:"--ds-gray-100",foreground:"--ds-gray-100",lightModeForeground:"--ds-amber-1000",checkedBackground:"--ds-amber-700"},"amber-track-only":{background:"--ds-amber-700",foreground:"--ds-black",lightModeForeground:"--ds-black",checkedBackground:"--ds-gray-100"},red:{background:"--ds-red-600",foreground:"--ds-red-100",lightModeForeground:"--ds-red-1000",checkedBackground:"--ds-gray-100"}},o=e=>{let{className:o,children:c,size:d,disabled:u,name:m,checked:h,onChange:g,onClick:p,onBlur:x,onFocus:j,onKeyDown:f,noMargin:b,direction:y="label-first",labelCasing:v="title",stopPropagation:C=!1,icon:S,color:A,...w}=e,k=(0,n.useDisabled)()||u,M=(0,s.useCallback)(e=>{!k&&g&&(C&&e.stopPropagation(),g(!h))},[h,g,k,C]),T={...w.style};if(A){let e=r[A];T["--unchecked-bg-color-override"]=`var(${e.background})`,T["--checked-bg-color-override"]=`var(${e.checkedBackground})`,T["--thumb-fg-color-override"]=`var(${e.foreground})`,e.lightModeForeground&&(T["--thumb-light-fg-color-override"]=`var(${e.lightModeForeground})`)}return(0,t.jsxs)("label",{className:(0,i.clsx)(a.default.wrapper,o,{[String(a.default.large)]:"large"===d,[String(a.default.medium)]:"medium"===d,[String(a.default.switchFirst)]:"switch-first"===y,[String(a.default.titleCasing)]:"title"===v}),"data-version":"v1",...w,style:T,children:[c?(0,t.jsx)("span",{children:c}):null,(0,t.jsx)("input",{checked:h,className:(0,i.clsx)(a.default.input,"group"),"data-testid":(0,l.tid)(w["data-testid"]??"toggle","input"),disabled:k,name:m,onBlur:x,onChange:M,onClick:p,onFocus:j,onKeyDown:e=>{"Enter"===e.key&&M(e),f?.(e)},type:"checkbox"}),(0,t.jsx)("span",{className:(0,i.clsx)(a.default.toggle,{[String(a.default.checked)]:h,[String(a.default.disabled)]:k,[String(a.default.noMargin)]:b},""),children:(0,t.jsx)("div",{className:(0,i.clsx)(a.default.thumb,{[String(a.default.checked)]:h}),children:S?(0,t.jsxs)("div",{"aria-hidden":!0,className:(0,i.clsx)({[String(a.default.checked)]:h,[String(a.default.thumbIcon)]:!k},"flex justify-center items-center w-full h-full",k?"text-gray-700":"text-gray-900 dark:text-background-100"),children:[h?S.checked:null,h?null:S.unchecked]}):null})})]})}},6960707:e=>{"use strict";e.s({MinusCircle:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 8C14.5 11.5899 11.5899 14.5 8 14.5C4.41015 14.5 1.5 11.5899 1.5 8C1.5 4.41015 4.41015 1.5 8 1.5C11.5899 1.5 14.5 4.41015 14.5 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM5 7.25H4.25V8.75H5H11H11.75V7.25H11H5Z" fill="currentColor"/>')},5310053:e=>{e.v({noBorder:"tabs-module__Da1ZWG__noBorder",tab:"tabs-module__Da1ZWG__tab",tabIcon:"tabs-module__Da1ZWG__tabIcon",tabs:"tabs-module__Da1ZWG__tabs"})},1098821:e=>{"use strict";e.s({Tabs:()=>a});var t=e.i(6645307),s=e.i(5610210),i=e.i(6530772),l=e.i(555528),n=e.i(5310053);function a(e){let{tabs:l,selected:a,setSelected:c,variant:d,disabled:u,border:m=!0,style:h,tabClassName:g,className:p,...x}=e,[j,f]=(0,i.useState)(!0),b=(0,i.useRef)(null),[y,v]=(0,i.useState)(l[0]?.value),C=void 0!==a,S=C?a:y;function A(e){C||v(e.value),c?.(e.value)}function w(e){if(!u){if("ArrowLeft"===e.key){let e=l.findIndex(e=>e.value===S)-1,t=l[e];if(t?.disabled)return;e>=0&&t&&(o(b.current,e),A(t),f(!1))}else if("ArrowRight"===e.key){let e=l.findIndex(e=>e.value===S)+1,t=l[e];if(t?.disabled)return;e<l.length&&t&&(o(b.current,e),A(t),f(!1))}}}return(0,t.jsx)("div",{"aria-orientation":"horizontal",className:(0,s.clsx)("geist-no-scrollbar",n.default.tabs,p,{[n.default.noBorder]:!m}),"data-geist-tabs":"","data-variant":d,"data-version":"v1",ref:b,role:"tablist",style:h,...x,children:l.map((e,s)=>(0,t.jsx)(r,{...e,disabled:e.disabled||u,isActive:e.value===S,onKeyDown:w,onMouseDown:()=>A(e),setShowFocusRing:f,showFocusRing:j,tabClassName:g},s))})}function r(e){let{tooltip:a,icon:r,title:o,isActive:c,showFocusRing:d,setShowFocusRing:u,onKeyDown:m,onMouseDown:h,disabled:g,tabClassName:p,...x}=e,j=(0,i.useId)();return(0,t.jsx)(l.Tooltip,{disableTriggers:void 0===a,text:a,children:(0,t.jsxs)("button",{"aria-controls":j,"aria-selected":c,className:(0,s.clsx)(n.default.tab,p),"data-geist-tab":"","data-show-focus-ring":d,disabled:g,id:j,onBlur:()=>{u?.(!0)},onFocus:()=>{h?.()},onKeyDown:m,role:"tab",tabIndex:c?0:-1,type:"button",...x,children:[r?(0,t.jsx)("div",{className:n.default.tabIcon,children:r}):null,o]})})}function o(e,t){if(!e)return;let s=e.querySelector(`[data-index="${t}"]`);s?.focus({preventScroll:!0})}},2192580:e=>{"use strict";e.s({PencilEdit:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M11.75 0.189331L12.2803 0.719661L15.2803 3.71966L15.8107 4.24999L15.2803 4.78032L5.15901 14.9016C4.45575 15.6049 3.50192 16 2.50736 16H0.75H0V15.25V13.4926C0 12.4981 0.395088 11.5442 1.09835 10.841L11.2197 0.719661L11.75 0.189331ZM11.75 2.31065L9.81066 4.24999L11.75 6.18933L13.6893 4.24999L11.75 2.31065ZM2.15901 11.9016L8.75 5.31065L10.6893 7.24999L4.09835 13.841C3.67639 14.2629 3.1041 14.5 2.50736 14.5H1.5V13.4926C1.5 12.8959 1.73705 12.3236 2.15901 11.9016ZM9 16H16V14.5H9V16Z" fill="currentColor"/>')},743345:e=>{"use strict";e.s({LogoGithub:()=>t});let t=(0,e.i(6895406).withNewIcon)(`<g clip-path="url(#clip0_872_3147)">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8 0C3.58 0 0 3.57879 0 7.99729C0 11.5361 2.29 14.5251 5.47 15.5847C5.87 15.6547 6.02 15.4148 6.02 15.2049C6.02 15.0149 6.01 14.3851 6.01 13.7154C4 14.0852 3.48 13.2255 3.32 12.7757C3.23 12.5458 2.84 11.836 2.5 11.6461C2.22 11.4961 1.82 11.1262 2.49 11.1162C3.12 11.1062 3.57 11.696 3.72 11.936C4.44 13.1455 5.59 12.8057 6.05 12.5957C6.12 12.0759 6.33 11.726 6.56 11.5261C4.78 11.3262 2.92 10.6364 2.92 7.57743C2.92 6.70773 3.23 5.98797 3.74 5.42816C3.66 5.22823 3.38 4.40851 3.82 3.30888C3.82 3.30888 4.49 3.09895 6.02 4.1286C6.66 3.94866 7.34 3.85869 8.02 3.85869C8.7 3.85869 9.38 3.94866 10.02 4.1286C11.55 3.08895 12.22 3.30888 12.22 3.30888C12.66 4.40851 12.38 5.22823 12.3 5.42816C12.81 5.98797 13.12 6.69773 13.12 7.57743C13.12 10.6464 11.25 11.3262 9.47 11.5261C9.76 11.776 10.01 12.2558 10.01 13.0056C10.01 14.0752 10 14.9349 10 15.2049C10 15.4148 10.15 15.6647 10.55 15.5847C12.1381 15.0488 13.5182 14.0284 14.4958 12.6673C15.4735 11.3062 15.9996 9.67293 16 7.99729C16 3.57879 12.42 0 8 0Z" fill="currentColor"/>
  </g>
  <defs>
  <clipPath id="clip0_872_3147">
  <rect width="16" height="16" fill="white"/>
  </clipPath>
  </defs>`)},8010833:e=>{"use strict";e.s({GitHubAvatar:()=>a});var t=e.i(6645307),s=e.i(6530772),i=e.i(743345),l=e.i(6787183);let n=e=>{let{username:s,size:n=30,showIcon:a=!0,iconSize:r=14,iconBackground:o=!0,icon:c=(0,t.jsx)(i.LogoGithub,{className:"text-[#000000]",height:r,width:r}),lazy:d=!1,...u}=e;s||(s="404");let m=s&&`https://avatars.githubusercontent.com/${s.replace("[bot]","")}?s=${2*n}`;return(0,t.jsx)(l.AvatarWithIcon,{gitType:"github",icon:a?c:null,iconBackground:o,lazy:d,size:n,src:m,...u})};n.displayName="GitHubAvatar";let a=(0,s.memo)(n)},4612844:e=>{"use strict";e.s({GitLabAvatar:()=>n});var t=e.i(6645307),s=e.i(6530772),i=e.i(6787183);let l=e=>{let{url:s,size:l=30,showIcon:n=!0,iconSize:a=14,iconBackground:r=!0,lazy:o=!1,...c}=e;return s&&(c=Object.assign(c,{src:s})),(0,t.jsx)(i.AvatarWithIcon,{gitType:"gitlab",icon:n?(0,t.jsxs)("svg",{"aria-label":"gitlab",height:a,style:{color:"white"},viewBox:"0 0 24 22",width:a,children:[(0,t.jsx)("path",{d:"M1.279 8.29L.044 12.294c-.117.367 0 .78.325 1.014l11.323 8.23-.009-.012-.03-.039L1.279 8.29zM22.992 13.308a.905.905 0 00.325-1.014L22.085 8.29 11.693 21.52l11.299-8.212z",fill:"currentColor"}),(0,t.jsx)("path",{d:"M1.279 8.29l10.374 13.197.03.039.01-.006L22.085 8.29H1.28z",fill:"currentColor",opacity:"0.4"}),(0,t.jsx)("path",{d:"M15.982 8.29l-4.299 13.236-.004.011.014-.017L22.085 8.29h-6.103zM7.376 8.29H1.279l10.374 13.197L7.376 8.29z",fill:"currentColor",opacity:"0.6"}),(0,t.jsx)("path",{d:"M18.582.308l-2.6 7.982h6.103L19.48.308c-.133-.41-.764-.41-.897 0zM1.279 8.29L3.88.308c.133-.41.764-.41.897 0l2.6 7.982H1.279z",fill:"currentColor",opacity:"0.4"})]}):null,iconBackground:r,lazy:o,size:l,...c})};l.displayName="GitLabAvatar";let n=(0,s.memo)(l)},7374858:e=>{"use strict";e.s({BitbucketAvatar:()=>l});var t=e.i(6645307),s=e.i(6530772),i=e.i(6787183);let l=(0,s.memo)(e=>{let{size:s=30,showIcon:l=!0,iconSize:n=14,iconBackground:a=!0,lazy:r=!1,...o}=e;return(0,t.jsx)(i.AvatarWithIcon,{gitType:"bitbucket",icon:l?(0,t.jsxs)("svg",{height:n,viewBox:"-2 -2 65 59",width:n,children:[(0,t.jsx)("defs",{children:(0,t.jsxs)("linearGradient",{id:"bitbucket-:r3:",x1:"104.953%",x2:"46.569%",y1:"21.921%",y2:"75.234%",children:[(0,t.jsx)("stop",{offset:"7%","stop-color":"currentColor","stop-opacity":".4"}),(0,t.jsx)("stop",{offset:"100%","stop-color":"currentColor"})]})}),(0,t.jsx)("path",{d:"M59.696 18.86h-18.77l-3.15 18.39h-13L9.426 55.47a2.71 2.71 0 001.75.66h40.74a2 2 0 002-1.68l5.78-35.59z",fill:"url(#bitbucket-:r3:)",fillRule:"nonzero",transform:"translate(-.026 .82)"}),(0,t.jsx)("path",{d:"M2 .82a2 2 0 00-2 2.32l8.49 51.54a2.7 2.7 0 00.91 1.61 2.71 2.71 0 001.75.66l15.76-18.88H24.7l-3.47-18.39h38.44l2.7-16.53a2 2 0 00-2-2.32L2 .82z",fill:"currentColor",fillRule:"nonzero"})]}):null,iconBackground:a,lazy:r,size:s,...o})})},8418504:e=>{"use strict";e.s({Users:()=>t});let t=(0,e.i(6895406).withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.5 3.25C2.5 1.45507 3.95507 0 5.75 0H6.25C8.04493 0 9.5 1.45507 9.5 3.25V3.75C9.5 5.54493 8.04493 7 6.25 7H5.75C3.95507 7 2.5 5.54493 2.5 3.75V3.25ZM5.75 1.5C4.7835 1.5 4 2.2835 4 3.25V3.75C4 4.7165 4.7835 5.5 5.75 5.5H6.25C7.2165 5.5 8 4.7165 8 3.75V3.25C8 2.2835 7.2165 1.5 6.25 1.5H5.75ZM1.5 14.5V13.1709C2.31958 11.5377 3.99308 10.5 5.82945 10.5H6.17055C8.00692 10.5 9.68042 11.5377 10.5 13.1709V14.5H1.5ZM5.82945 9C3.35483 9 1.10604 10.4388 0.0690305 12.6857L0 12.8353V13V15.25V16H0.75H11.25H12V15.25V13V12.8353L11.931 12.6857C10.894 10.4388 8.64517 9 6.17055 9H5.82945ZM15.931 12.6857C15.3706 11.4715 14.4561 10.4931 13.3439 9.85058L12.5935 11.1494C13.399 11.6148 14.0681 12.3101 14.5 13.1709V14.5H13.5V16H15.25H16V15.25V13V12.8352L15.931 12.6857ZM11.25 0H10.5V1.5H11.25C12.2165 1.5 13 2.2835 13 3.25V3.75C13 4.7165 12.2165 5.5 11.25 5.5H10.5V7H11.25C13.0449 7 14.5 5.54493 14.5 3.75V3.25C14.5 1.45507 13.0449 0 11.25 0Z" fill="currentColor"/>')},5343945:e=>{"use strict";e.s({V0Mark:()=>s});var t=e.i(6645307);let s=e.i(6530772).forwardRef(function(e,s){let{size:i=80,color:l="var(--geist-foreground)",...n}=e;return(0,t.jsxs)("svg",{"aria-label":"v0 logomark",height:i,ref:s,role:"img",viewBox:"0 0 147 70",width:i,...n,children:[(0,t.jsx)("path",{d:"M56 50.2031V14H70V60.1562C70 65.5928 65.5928 70 60.1562 70C57.5605 70 54.9982 68.9992 53.1562 67.1573L0 14H19.7969L56 50.2031Z",fill:l}),(0,t.jsx)("path",{d:"M147 56H133V23.9531L100.953 56H133V70H96.6875C85.8144 70 77 61.1856 77 50.3125V14H91V46.1562L123.156 14H91V0H127.312C138.186 0 147 8.81439 147 19.6875V56Z",fill:l})]})})},502922:e=>{"use strict";e.s({default:()=>t});let t=e.i(6530772).useLayoutEffect},2286304:e=>{e.v({avatar:"group-module__Dj5yHG__avatar",group:"group-module__Dj5yHG__group",note:"group-module__Dj5yHG__note",noteText:"group-module__Dj5yHG__noteText"})},7230222:e=>{"use strict";e.s({AvatarGroup:()=>m});var t=e.i(6645307),s=e.i(5610210),i=e.i(6530772),l=e.i(8084653),n=e.i(5175803),a=e.i(2286304),r=e.i(8010833),o=e.i(4612844),c=e.i(7374858);let d=(0,i.memo)(e=>{let{member:s,size:i,showIcon:l,iconBackground:a,lazy:d=!1}=e;return"teamId"in s?(0,t.jsx)(n.Avatar,{lazy:d,size:i,teamId:s.teamId,title:s.teamName},s.teamId):s.githubUser?(0,t.jsx)("span",{title:s.name,children:(0,t.jsx)(r.GitHubAvatar,{iconBackground:a,lazy:d,showIcon:l,size:i,username:s.username})},s.username):s.gitlabUser?(0,t.jsx)("span",{title:s.name,children:(0,t.jsx)(o.GitLabAvatar,{iconBackground:a,lazy:d,showIcon:l,size:i,url:s.url})},s.username):s.bitbucketUser?(0,t.jsx)("span",{title:s.name,children:(0,t.jsx)(c.BitbucketAvatar,{iconBackground:a,lazy:d,showIcon:l,size:i,url:s.url})},s.username):s.username?(0,t.jsx)(n.Avatar,{size:i,username:s.username},s.username):s.url?(0,t.jsx)(n.Avatar,{size:i,url:s.url},s.url):(0,t.jsx)(n.Avatar,{size:i,uid:s.uid},s.uid)});d.displayName="GroupAvatar";let u=e=>{let{members:i,limit:n=3,extra:r=0,size:o=24,showIcon:c=!1,iconBackground:u=!0,ariaHidden:m,lazy:h=!1}=e;0===n&&(n=i.length),n-=1;let g=i.slice(0,n),p=i.slice(n),x=p.length+r,j=x>9?"9+":`+${x}`,f=`${x} more avatars in this group`;return(0,t.jsxs)("div",{"aria-hidden":m,className:a.default.group,children:[g.map(e=>(0,t.jsx)("span",{className:a.default.avatar,children:"component"in e?e.component:(0,t.jsx)(d,{member:e,size:o,showIcon:c,iconBackground:u,lazy:h})},"teamId"in e?e.teamId:e.uid||e.username||e.url)),p.length||r>0?(0,t.jsxs)("span",{"aria-label":f,className:(0,s.clsx)(a.default.note,{[a.default.avatar||""]:p.length}),title:f,children:[p.length?"component"in p[0]?p[0].component:(0,t.jsx)(d,{member:p[0],size:o,showIcon:c,iconBackground:u,lazy:h}):null,x>1?(0,t.jsx)(l.Text,{as:"span",className:(0,s.clsx)(a.default.noteText,"dark-theme"),color:"gray-1000",size:10,weight:600,children:j}):null]}):null]})};u.displayName="AvatarGroup";let m=(0,i.memo)(u)},2562593:e=>{e.v({removeShadow:"member-multiselect-module__BGbahq__removeShadow"})},8815544:e=>{"use strict";e.s({AccessGroupEdit:()=>W},8815544);var t=e.i(6645307),s=e.i(5610210),i=e.i(6530772),l=e.i(889716),n=e.i(1098821),a=e.i(2254575),r=e.i(9495609),o=e.i(8158100),c=e.i(555528),d=e.i(5165976),u=e.i(5343945),m=e.i(3326412),h=e.i(9959972),g=e.i(5617834),p=e.i(5175803),x=e.i(5674541),j=e.i(8247297),f=e.i(2631460),b=e.i(663357),y=e.i(4105925),v=e.i(6284911),C=e.i(1209519),S=e.i(6960707),A=e.i(8418504),w=e.i(3514588),k=e.i(2362802),M=e.i(2385909),T=e.i(8084653),I=e.i(8382218),_=e.i(1550899),E=e.i(3821772),G=e.i(2824080),L=e.i(604868),P=e.i(5599793);e.i(8893248);var R=e.i(7936324),N=e.i(628938),H=e.i(9766694),z=e.i(1763478);function V(e){let{alreadySelected:s=[],onSelect:l,children:n,isOpen:a,setIsOpen:r}=e,o=(0,L.useIsMobile)(),c=(0,N.useCommand)({selected:0}),[d,u]=(0,P.useMembersInfinite)({},{search:c.inputValue}),m=u.members.filter(e=>!(!e.confirmed||s.includes(e.uid)));return((0,i.useEffect)(()=>{!u.initialDataLoaded||u.isReachingEnd||u.isLoadingMore||u.loadMore(),a||c.setInputValue("")},[a]),o)?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_.Drawer,{onDismiss:()=>r(!1),show:a,children:(0,t.jsx)(O,{commandProps:c,isLoadingMore:u.isLoadingMore,isSwrLoading:d.isLoading,memberData:u,members:m,onSelect:l,setIsOpen:r})}),n]}):(0,t.jsxs)(M.Root,{onOpenChange:e=>{e||c.setInputValue(""),r(e)},open:a,children:[(0,t.jsx)(M.Trigger,{asChild:!0,children:n}),(0,t.jsx)(M.Portal,{children:(0,t.jsx)(M.Content,{align:"start",className:z.default.content,side:"bottom",children:(0,t.jsx)(O,{commandProps:c,isLoadingMore:u.isLoadingMore,isSwrLoading:d.isLoading,memberData:u,members:m,onSelect:l,setIsOpen:r})})})]})}function O(e){let{commandProps:i,isSwrLoading:n,isLoadingMore:a,onSelect:r,members:o,memberData:c,setIsOpen:d}=e,u=n||a;return(0,t.jsx)("div",{className:(0,s.clsx)(H.default.command,H.default.primary,z.default.command,"tailwind"),children:(0,t.jsxs)(R.Command,{...i,children:[(0,t.jsxs)(l.Stack,{align:"center",className:H.default.input,direction:"row",children:[(0,t.jsx)(l.Stack,{className:"w-6",children:u?(0,t.jsx)(E.Spinner,{color:"var(--accents-3)"}):(0,t.jsx)(G.MagnifyingGlass,{color:"gray-500",size:20})}),(0,t.jsx)(l.Stack,{className:"grow",children:(0,t.jsx)(R.Command.Input,{placeholder:"Find a team member"})}),(0,t.jsx)(I.Kbd,{children:"Esc"})]}),(0,t.jsxs)(R.Command.List,{className:z.default.list,children:[0===o.length&&i.inputValue.length&&!n?(0,t.jsx)(D,{onClear:()=>{i.setInputValue("")},prompt:i.inputValue}):null,u||0!==o.length||i.inputValue.length?null:(0,t.jsx)($,{}),o.map(e=>(0,t.jsx)(R.Command.Item,{callback:()=>{r&&r(e),d(!1),i.setInputValue("")},className:(0,s.clsx)(z.default.item),value:`${e.username} ${e.name} ${e.email}`,children:(0,t.jsxs)(l.Stack,{align:"center",className:"w-full max-w-full",direction:"row",flex:1,gap:2,title:`${e.username}, ${e.email}`,children:[(0,t.jsx)(p.Avatar,{hash:e.avatar,size:24}),(0,t.jsx)(T.Text,{className:"flex-1",truncate:!0,children:e.name||e.username})]})},e.uid)),c.isReachingEnd?null:(0,t.jsx)(R.Command.Item,{callback:()=>{c.loadMore()},className:(0,s.clsx)(z.default.item),children:(0,t.jsx)(l.Stack,{align:"center",className:"w-full",children:(0,t.jsx)(T.Text,{children:c.isLoadingMore?"Loading...":"Load more"})})})]})]})})}function $(){return(0,t.jsx)(l.Stack,{align:"center",direction:"column",gap:3,justify:"center",padding:4,children:(0,t.jsx)(T.Text,{className:"flex-1",children:"Every member that can be added has been added."})})}function D(e){let{onClear:s,prompt:i}=e;return(0,t.jsxs)(l.Stack,{align:"center",direction:"column",gap:3,justify:"center",padding:4,children:[(0,t.jsxs)(T.Text,{className:"flex-1",children:['No results for "',i,'"']}),(0,t.jsx)(x.Button,{onClick:s,size:"small",type:"secondary",children:"Clear search"})]})}var B=e.i(2562593);function U(e){let{members:n,onAddMember:r,onRemoveMember:d,disabled:u,isAccessGroupDsyncManaged:m,isOpen:h,setIsOpen:g}=e,{team:b}=(0,w.useTeam)(),[A,M]=(0,i.useState)(""),[T,I]=(0,i.useState)(),_=n.filter(e=>!A||`${e.username} ${e.name} ${e.email}`.toLowerCase().includes(A.toLowerCase())),E=_.every(e=>T?.has(e.uid));(0,i.useEffect)(()=>{I(new Set)},[A]);let G=!u&&!m;return(0,t.jsxs)(t.Fragment,{children:[m&&b?(0,t.jsxs)(o.Note,{fill:!0,type:"success",children:["Members of this Access Group are managed with"," ",(0,t.jsx)(k.Link,{href:`/${b.slug}/~/settings/security`,underline:!0,children:"Directory Sync"}),"."]}):null,(0,t.jsxs)(l.Stack,{className:"tailwind-preflight",direction:"row",gap:2,children:[(0,t.jsx)(v.SearchInput,{disabled:0===n.length,onChange:e=>M(e.target.value),placeholder:"Search...",value:A,width:"100%"}),(0,t.jsx)(c.Tooltip,{delayTime:300,disableTriggers:!m,text:"The Members of this Access Group are managed with Directory Sync.",children:(0,t.jsx)(V,{alreadySelected:n.map(e=>e.uid),isOpen:h,onSelect:e=>{r({uid:e.uid,username:e.username,email:e.email,avatar:e.avatar,name:e.name,joinedFrom:e.joinedFrom,role:e.role})},setIsOpen:g,children:(0,t.jsx)(x.Button,{"aria-label":"add row",disabled:m||u,onClick:()=>g(!0),type:"secondary",children:(0,t.jsxs)(l.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(C.PlusCircle,{size:16})," Add More"]})})})})]}),_.length?(0,t.jsxs)(a.Entity.List,{className:(0,s.clsx)("tailwind",B.default.removeShadow),children:[G?(0,t.jsx)(a.Entity,{className:"bg-background-200 py-1",left:(0,t.jsx)(j.Checkbox,{checked:E,disabled:m,onChange:()=>{E?I(new Set):I(new Set(_.map(e=>e.uid)))}}),right:(0,t.jsx)(f.DotsMenu,{disabled:m,children:(0,t.jsx)(y.MenuItem,{disabled:!T?.size,onClick:()=>{n.filter(e=>T?.has(e.uid)).forEach(e=>{d(e.uid)}),I(new Set)},type:"error",children:"Remove selected"})}),children:(0,t.jsx)(a.Entity.Content,{description:"Select All"})}):null,_.map(e=>{let s=T?.has(e.uid);return(0,t.jsx)(a.Entity,{left:(0,t.jsxs)(t.Fragment,{children:[G?(0,t.jsx)(j.Checkbox,{checked:s,disabled:m,onChange:()=>{if(T){let t=new Set(T);s?t.delete(e.uid):t.add(e.uid),I(t)}else I(new Set([e.uid]))}}):null,(0,t.jsx)(p.Avatar,{hash:e.avatar,size:32})]}),paddingY:3,right:m?null:(0,t.jsx)(c.Tooltip,{delayTime:300,disableTriggers:!u,text:u?"You need additional permissions to remove members.":"This Team Member is managed with Directory Sync.",children:(0,t.jsx)(x.Button,{"aria-label":"Remove Member",onClick:()=>{if(s){let t=new Set(T);t.delete(e.uid),I(t)}d(e.uid)},shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(S.MinusCircle,{size:16})})}),children:(0,t.jsx)(a.Entity.Content,{description:e.email,fill:!0,title:e.name||e.username})},e.uid)})]}):(0,t.jsx)(F,{disabled:u,isAccessGroupDsyncManaged:m,search:A,setIsOpen:g})]})}function F(e){let{disabled:s,search:i,setIsOpen:l,isAccessGroupDsyncManaged:n}=e;return i?(0,t.jsx)(b.EmptyState.Root,{description:`No members found for "${i}".`,gap:3,icon:(0,t.jsx)(b.EmptyState.Icon,{icon:(0,t.jsx)(A.Users,{size:32})}),paddingY:24,title:"No members found."}):(0,t.jsx)(b.EmptyState.Root,{description:n?"Members are managed with Directory Sync.":"Add users to this access group.",gap:3,icon:(0,t.jsx)(b.EmptyState.Icon,{icon:(0,t.jsx)(A.Users,{size:32})}),paddingY:24,title:"No members added yet",children:n?null:(0,t.jsx)(x.Button,{"aria-label":"Add Members",disabled:s,onClick:()=>l(!0),size:"small",type:"secondary",children:"Add Members"})})}var Z=e.i(8012856);let Q=["CONTRIBUTOR","OWNER","VIEWER"];function W(e){let{loadingSkeletonProjectsCount:s,disabled:c,projectRoles:p,setProjectRoles:x,members:j,setMemberIdsToAdd:f,setMemberIdsToRemove:b,teamRoles:y,setTeamRoles:v,teamPermissions:C,setTeamPermissions:S,entitlements:A,setEntitlements:w,isLoading:k,isAccessGroupDsyncManaged:M}=e,{value:T}=(0,m.useHasNewRBAC)(),[I,_]=(0,i.useState)("projects"),[E,G]=(0,i.useState)([]),[L,P]=(0,i.useState)([]),{value:R}=(0,h.useEntitlement)("v0-team-seats"),[N,H]=(0,i.useState)(!1),[z,V]=(0,i.useState)(!1);(0,i.useEffect)(()=>{f&&f(E.map(e=>e.uid))},[f,E]),(0,i.useEffect)(()=>{b&&b(L)},[b,L]);let O=[...E,...j].filter(e=>!L.includes(e.uid)).filter((e,t,s)=>t===s.findIndex(t=>t.uid===e.uid)),$=A.includes("v0"),D=[{title:(0,t.jsxs)("div",{className:"flex gap-1",children:["Members ",M?(0,t.jsx)(d.LockClosed,{}):null]}),value:"members"},{title:"Projects",value:"projects"}];T&&D.push({title:"Team Access",value:"teamRoles"}),R&&D.push({title:"Entitlements",value:"entitlements"});let{teamRoles:B,teamPermissions:F}=(0,g.useAvailableRolesInfo)();return(0,t.jsxs)(l.Stack,{gap:4,style:{minHeight:340},children:[(0,t.jsx)(n.Tabs,{selected:I,setSelected:e=>_(e),tabs:D}),(0,t.jsxs)("div",{className:"flex flex-col gap-4",children:["teamRoles"===I?(0,t.jsxs)(t.Fragment,{children:[M?null:(0,t.jsx)(o.Note,{fill:!0,type:"warning",children:"Team access will only apply when using Directory Sync."}),(0,t.jsx)(Y,{availableTeamRolesInfo:B,onChange:v,value:y}),(0,t.jsx)(K,{availableTeamPermissions:F,onChange:S,teamRoles:y,value:C})]}):null,"projects"===I?(0,t.jsx)(Z.ProjectMultiselect,{disabled:c,isLoading:k,isOpen:N,loadingSkeletonProjectsCount:s,onAddProject:(e,t)=>{x(s=>s.find(t=>t.project.id===e.id)?[...s.map(s=>s.project.id===e.id?{project:e,role:t}:s)]:[...s,{project:e,role:t}])},onRemoveProject:e=>{x(t=>t.filter(t=>t.project.id!==e))},projectRoles:p,setIsOpen:H,variant:"search"}):null,"members"===I?(0,t.jsx)(U,{disabled:c,isAccessGroupDsyncManaged:M,isOpen:z,members:O,onAddMember:e=>{E.find(t=>t.uid===e.uid)||j.find(t=>t.uid===e.uid)||G(t=>[...t,e]),L.includes(e.uid)&&P(t=>t.filter(t=>t!==e.uid))},onRemoveMember:e=>{L.includes(e)||P(t=>[...t,e]),E.find(t=>t.uid===e)&&G(t=>t.filter(t=>t.uid!==e))},setIsOpen:V}):null,"entitlements"===I?(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Entity.List,{className:"shadow-sm",children:(0,t.jsx)(a.Entity,{right:(0,t.jsx)(r.Toggle,{checked:$,disabled:c,onChange:()=>{w($?[]:["v0"])},size:"medium"}),children:(0,t.jsx)(a.Entity.Content,{description:"Users with v0 access can create projects from chats.",title:(0,t.jsxs)("div",{className:"flex items-center gap-1 font-medium",children:[(0,t.jsx)("span",{children:"Enable"}),(0,t.jsx)(u.V0Mark,{size:22}),(0,t.jsx)("span",{children:"Access"})]})})})})}):null]})]})}function Y(e){let{value:i,onChange:l,disableRoles:n,availableTeamRolesInfo:o}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Entity.List,{className:"shadow-sm",children:o.filter(e=>!Q.includes(e.role)).map(e=>{let d=e.role,u=n?.[d]?.disabled,m=n?.[d]?.message,h=i.find(e=>{let t=o.find(t=>t.role===e);return!!t&&t.includedTeamRoles.includes(d)});return(0,t.jsx)(a.Entity,{className:(0,s.clsx)("py-3",i.includes(d)&&!h&&"bg-gray-100/50"),right:(0,t.jsx)(c.Tooltip,{className:"w-full",delayTime:300,disableTriggers:!h&&!m,forceHide:!h&&!m,position:"left",text:m||`Already included in the ${h} role.`,children:(0,t.jsx)(r.Toggle,{checked:!!h||i.includes(d),disabled:!!h||u,onChange:()=>{i.includes(d)?l(i.filter(e=>e!==d)):l([...i,d])},size:"medium"})},d),children:(0,t.jsx)(a.Entity.Content,{description:e.description,title:e.label})},d)})})})}function K(e){let{value:i,onChange:l,teamRoles:n,availableTeamPermissions:o}=e;return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(a.Entity.List,{className:"shadow-sm",children:o.map(e=>{let o=e.includedIn.find(e=>n.includes(e));return(0,t.jsx)(a.Entity,{className:(0,s.clsx)("py-3"),right:(0,t.jsx)(c.Tooltip,{className:"w-full",delayTime:300,disableTriggers:!o,forceHide:!o,position:"left",text:`Already included in the ${o} role.`,children:(0,t.jsx)(r.Toggle,{checked:!!o||i.includes(e.role),disabled:!!o,onChange:()=>{i.includes(e.role)?l(i.filter(t=>t!==e.role)):l([...i,e.role])},size:"medium"})}),children:(0,t.jsx)(a.Entity.Content,{description:e.description,title:e.label})},e.role)})})})}},1537452:[e=>{"use strict";e.s({useAccessGroupProjects:()=>n},1537452);var t=e.i(7095283),s=e.i(1183506),i=e.i(9336536),l=e.i(3514588);function n(e,n){let{team:a}=(0,l.useTeam)(),r=(0,t.default)((t,s)=>{if(!e)return null;let l=new URLSearchParams;l.set("limit","100"),a&&l.set("teamId",a.id);let n=s?.pagination.next;return n&&l.set("next",n),`${i.API_ACCESS_GROUPS}/${e}/projects?${l.toString()}`},e=>(0,s.fetchAPI)(String(e),{throwOnHTTPError:!0}),n);return{...r,projects:r.data?.flatMap(e=>e.projects)}}function a(e,n){let{team:a}=(0,l.useTeam)(),r=(0,t.default)((t,s)=>{if(!e)return null;let l=new URLSearchParams;l.set("limit","100"),a&&l.set("teamId",a.id);let n=s?.pagination.next;return n&&l.set("next",n),`${i.API_ACCESS_GROUPS}/${e}/members?${l.toString()}`},e=>(0,s.fetchAPI)(String(e),{throwOnHTTPError:!0}),n);return{...r,members:r.data?.flatMap(e=>e.members).map(e=>({...e,role:e.teamRole}))}}e.s({useAccessGroupMembers:()=>a},637077)},[637077]],9215445:e=>{"use strict";e.s({EditAccessGroupModal:()=>v},9215445);var t=e.i(6645307),s=e.i(6530772),i=e.i(889716),l=e.i(8934201),n=e.i(584439),a=e.i(5674541),r=e.i(1917237),o=e.i(631755),c=e.i(4789498),d=e.i(2192580),u=e.i(3326412),m=e.i(1537452),h=e.i(637077),g=e.i(8815544),p=e.i(9336536),x=e.i(6649026),j=e.i(1183506);async function f(e,t){let s=e.accessGroupId,i=t.projects,l=!1;if(t.projects){let t=await b(s,e.teamId);for(let e of(l=i?.some(e=>{let s=t.find(t=>t.project.id===e.projectId);return!s||s.role!==e.role})||!1,t))i?.some(t=>t.projectId===e.project.id)||(l=!0,i?.push({projectId:e.project.id,role:null}))}let n=t.name!==e.name,a=t.entitlements&&t.entitlements.length!==e.entitlements?.length||t.entitlements?.some(t=>!e.entitlements?.includes(t)),r=!y(t.teamPermissions||[],e.teamPermissions||[]),o=!y(t.teamRoles||[],e.teamRoles||[]);if(!n&&!a&&!l&&!r&&!o&&!t.membersToAdd?.length&&!t.membersToRemove?.length)return;let c={name:t.name,projects:i?.length?i:void 0,membersToAdd:t.membersToAdd?.length?t.membersToAdd:void 0,membersToRemove:t.membersToRemove?t.membersToRemove:void 0,entitlements:t.entitlements?t.entitlements:void 0,teamRoles:t.teamRoles?t.teamRoles:void 0,teamPermissions:t.teamPermissions?t.teamPermissions:void 0};await (0,j.fetchAPI)(`${p.API_ACCESS_GROUPS}/${s}${(0,x.encode)({teamId:e.teamId})}`,{body:JSON.stringify(c),method:"POST",throwOnHTTPError:!0})}async function b(e,t){let s;if(!e)return[];let i=[];do{let l=new URLSearchParams;l.set("limit","100"),t&&l.set("teamId",t),s&&l.set("next",s);let n=`${p.API_ACCESS_GROUPS}/${e}/projects?${l.toString()}`,a=await (0,j.fetchAPI)(String(n),{throwOnHTTPError:!0});i=i.concat(a.projects),s=a.pagination.next||void 0}while(s)return i}function y(e,t){return e.length===t.length&&e.every((e,s)=>e===t[s])}function v(e){let{accessGroup:p,mutate:x,onClose:j,canUpdateAccessGroup:b}=e,y=(0,n.useToasts)(),[v,C]=(0,s.useState)(!1),[S,A]=(0,s.useState)(null),[w,k]=(0,s.useState)(!0),{value:M}=(0,u.useHasNewRBAC)(),[T,I]=(0,s.useState)(!1),{projects:_,mutate:E,isLoading:G}=(0,m.useAccessGroupProjects)(p.accessGroupId,{initialSize:Math.ceil(p.projectsCount/100)}),[L,P]=(0,s.useState)(!1),{members:R,mutate:N}=(0,h.useAccessGroupMembers)(p.accessGroupId,{initialSize:Math.ceil(p.membersCount/100)}),[H,z]=(0,s.useState)(p.name),[V,O]=(0,s.useState)([]),[$,D]=(0,s.useState)([]),[B,U]=(0,s.useState)([]),[F,Z]=(0,s.useState)(p.teamRoles||[]),[Q,W]=(0,s.useState)(p.teamPermissions||[]),[Y,K]=(0,s.useState)(p.entitlements);async function q(){A(null),C(!0);try{await f(p,{name:H,projects:V.map(e=>({projectId:e.project.id,role:e.role||null})),membersToAdd:$,membersToRemove:B,entitlements:Y,teamRoles:M?F:void 0,teamPermissions:M?Q:void 0}),await Promise.all([E(),N(),x()]),P(!1),C(!1),y.success({text:"Access Group edited successfully."}),k(!1)}catch(e){A(e),C(!1)}}return(0,s.useEffect)(()=>{if(G||L)return;let e=_?_.map(e=>({project:e.project,role:e.role})):[];P(!0),O(e)},[L,G,_]),(0,t.jsxs)(l.Modal.Modal,{active:w,disableFocusTrap:!0,onAnimationDone:()=>{C(!1),A(null),j()},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||k(!1)},children:[(0,t.jsxs)(l.Modal.Body,{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(l.Modal.Title,{children:b?`Manage "${H}"`:`"${H}" Access Group`}),T?null:(0,t.jsx)(a.Button,{"aria-label":"Edit access group name",onClick:()=>I(!T),size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(d.PencilEdit,{})})]}),(0,t.jsxs)(i.Stack,{gap:4,children:[T?(0,t.jsx)(c.Label,{className:"pt-2",value:"name",children:(0,t.jsx)(o.Input,{disabled:!b,id:"create-access-group-button",onChange:e=>z(e.target.value),placeholder:"Access Group Name",value:H,width:"100%"})}):null,S?(0,t.jsx)(i.Stack,{paddingTop:4,children:(0,t.jsx)(r.Error,{error:S})}):null,(0,t.jsx)(g.AccessGroupEdit,{disabled:!b,entitlements:Y||[],isAccessGroupDsyncManaged:p.isDsyncManaged,isLoading:!L,loadingSkeletonProjectsCount:p.projectsCount,members:R||[],projectRoles:V,setEntitlements:K,setMemberIdsToAdd:D,setMemberIdsToRemove:U,setProjectRoles:O,setTeamPermissions:W,setTeamRoles:Z,teamPermissions:Q,teamRoles:F})]})]}),(0,t.jsxs)(l.Modal.Actions,{children:[(0,t.jsx)(l.Modal.Action,{onClick:()=>k(!1),type:"secondary",children:"Cancel"}),b?(0,t.jsx)(l.Modal.Action,{disabled:!H,loading:v,onClick:q,children:"Save"}):(0,t.jsx)(l.Modal.Action,{onClick:j,children:"Close"})]})]})}},2693779:e=>{"use strict";e.s({AccessGroups:()=>F},2693779);var t=e.i(6645307),s=e.i(2198583),i=e.i(889716),l=e.i(5163670),n=e.i(8084653),a=e.i(7230222),r=e.i(5674541),o=e.i(653558),c=e.i(1190215),d=e.i(2733203),u=e.i(4105925),m=e.i(4646240),h=e.i(555528),g=e.i(6284911),p=e.i(663357),x=e.i(3821772),j=e.i(2254575),f=e.i(604868),b=e.i(5343945),y=e.i(6530772),v=e.i(8418504),C=e.i(5165976),S=e.i(5124754),A=e.i(9240532),w=e.i(2362802),k=e.i(3585235),M=e.i(5785123),T=e.i(9959972),I=e.i(7057043),_=e.i(6140702),E=e.i(8934201),G=e.i(631755),L=e.i(584439),P=e.i(4789498),R=e.i(1917237),N=e.i(6649026),H=e.i(1183506),z=e.i(9336536),V=e.i(3514588),O=e.i(3326412),$=e.i(8815544);function D(e){let{mutate:s,setActive:l}=e,{team:a}=(0,V.useTeam)(),{value:r}=(0,O.useHasNewRBAC)(),o=(0,L.useToasts)(),[c,d]=(0,y.useState)(!1),[u,m]=(0,y.useState)(null),[h,g]=(0,y.useState)(!0),[p,x]=(0,y.useState)([]),[j,f]=(0,y.useState)([]),[b,v]=(0,y.useState)([]),[C,S]=(0,y.useState)(),[A,w]=(0,y.useState)(""),[k,M]=(0,y.useState)([]);async function T(){m(null),d(!0);try{await I()}catch(e){m(e)}d(!1)}async function I(){let e=`${z.API_ACCESS_GROUPS}${(0,N.encode)({teamId:a?.id})}`;await (0,H.fetchAPI)(e,{body:JSON.stringify({name:A,projects:k.map(e=>({projectId:e.project.id,role:e.role})).filter(e=>e.projectId),membersToAdd:p,entitlements:C,teamRoles:r?j:void 0,teamPermissions:r?b:void 0}),method:"POST",throwOnHTTPError:!0}),await s(),o.success({text:"Access Group created successfully."}),g(!1)}return(0,t.jsxs)(E.Modal.Modal,{active:h,disableFocusTrap:!0,onAnimationDone:()=>{d(!1),m(null),l(!1)},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||g(!1)},children:[(0,t.jsxs)(E.Modal.Body,{children:[(0,t.jsxs)(i.Stack,{gap:2,paddingBottom:4,children:[(0,t.jsx)(E.Modal.Title,{children:"Create Access Group"}),(0,t.jsx)(E.Modal.Subtitle,{children:(0,t.jsx)(n.Text,{children:"Give groups of users roles on projects and optionally set up directory sync with your indentity provider."})})]}),(0,t.jsxs)(i.Stack,{gap:4,children:[(0,t.jsx)(i.Stack,{gap:1.5,children:(0,t.jsx)(P.Label,{value:"Name",children:(0,t.jsx)(G.Input,{id:"create-access-group-button",onChange:e=>w(e.target.value),placeholder:"Group 1",value:A,width:"100%"})})}),(0,t.jsx)($.AccessGroupEdit,{entitlements:C||[],isAccessGroupDsyncManaged:!1,isLoading:!1,loadingSkeletonProjectsCount:0,members:[],projectRoles:k,setEntitlements:S,setMemberIdsToAdd:x,setProjectRoles:M,setTeamPermissions:v,setTeamRoles:f,teamPermissions:b,teamRoles:j})]}),u?(0,t.jsx)(i.Stack,{paddingTop:4,children:(0,t.jsx)(R.Error,{error:u})}):null]}),(0,t.jsxs)(E.Modal.Actions,{children:[(0,t.jsx)(E.Modal.Action,{onClick:()=>g(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(E.Modal.Action,{disabled:!A,loading:c,onClick:T,children:"Create"})]})]})}function B(e){let{accessGroup:s,mutate:l,onClose:a}=e,{team:r}=(0,V.useTeam)(),o=(0,L.useToasts)(),[c,d]=(0,y.useState)(!1),[u,m]=(0,y.useState)(null),[h,g]=(0,y.useState)(!0);async function p(){m(null),d(!0);try{await x()}catch(e){m(e)}d(!1)}async function x(){let e=`${z.API_ACCESS_GROUPS}/${s.accessGroupId}${(0,N.encode)({teamId:r?.id})}`;await (0,H.fetchAPI)(e,{method:"DELETE",throwOnHTTPError:!0}),await l(),o.success({text:"Access Group deleted successfully."}),g(!1)}return(0,t.jsxs)(E.Modal.Modal,{active:h,onAnimationDone:()=>{d(!1),m(null),a()},onClickOutside:e=>{e?.target instanceof HTMLElement&&e.target.closest("[data-geist-menu-item]")||g(!1)},children:[(0,t.jsx)(E.Modal.Body,{children:(0,t.jsxs)(i.Stack,{gap:3,children:[(0,t.jsx)(E.Modal.Title,{children:"Delete Access Group"}),(0,t.jsx)(n.Text,{children:`You are about to delete the "${s.name}" access group.`}),(0,t.jsx)(n.Text,{children:"Are you sure?"}),u?(0,t.jsx)(i.Stack,{paddingTop:4,children:(0,t.jsx)(R.Error,{error:u})}):null]})}),(0,t.jsxs)(E.Modal.Actions,{children:[(0,t.jsx)(E.Modal.Action,{onClick:()=>g(!1),type:"secondary",children:"Cancel"}),(0,t.jsx)(E.Modal.Action,{loading:c,onClick:p,children:"Delete"})]})]})}var U=e.i(9215445);function F(){let[e,l]=(0,y.useState)(""),a=(0,s.useDebouncedValue)(e,300),{accessGroups:r,cursor:o,...c}=(0,I.useAccessGroups)({limit:10,search:a||void 0,membersLimit:3,projectsLimit:3}),[d,u]=(0,y.useState)(!1),[m,h]=(0,y.useState)(null),[p,f]=(0,y.useState)(null),b=(0,y.useRef)(null),[v,C]=(0,y.useState)();(0,y.useEffect)(()=>{if(!o||!b.current)return;let e=new IntersectionObserver(e=>{let[t]=e;return C(t)});return e.observe(b.current),()=>e.disconnect()},[b,o]),(0,y.useEffect)(()=>{v?.isIntersecting&&!c.isLoading&&!c.isValidating&&o&&c.setSize(e=>e+1)},[v,c,r,o]);let{can:S,isLoading:w}=(0,k.default)(),{value:_}=(0,T.useEntitlement)("project-rbac-access-groups"),E=S(M.Action.Update,M.Resource.AccessGroup),G=S(M.Action.Create,M.Resource.AccessGroup),L=S(M.Action.List,M.Resource.AccessGroup),P=S(M.Action.Delete,M.Resource.AccessGroup),R=!r?.length&&(c.isLoading||!!o),N=w||_&&R;return(0,t.jsxs)(i.Stack,{className:"tailwind-preflight",gap:6,children:[(0,t.jsxs)(i.Stack,{align:"stretch",direction:"row",gap:2,children:[(0,t.jsxs)(i.Stack,{direction:"column",flex:1,gap:2,children:[(0,t.jsx)(n.Text,{as:"h1",size:24,children:(0,t.jsx)(A.SearchContextHighlighter,{children:"Access Groups"})}),(0,t.jsx)(n.Text,{color:"gray-900",children:"Create and manage Access Groups."})]}),(0,t.jsx)(i.Stack,{className:"geist-hide-on-mobile",justify:"center",children:(0,t.jsx)(K,{canCreateAccessGroup:G,canHaveAccessGroups:_,onClick:()=>u(!0)})})]}),(0,t.jsx)(i.Stack,{className:"geist-show-on-mobile",justify:"center",children:(0,t.jsx)(K,{canCreateAccessGroup:G,canHaveAccessGroups:_,onClick:()=>u(!0)})}),(0,t.jsx)(i.Stack,{gap:4,children:(0,t.jsx)(g.SearchInput,{disabled:w||!_,onChange:e=>{c.setSize(1),l(e.target.value)},placeholder:"Filter..."})}),N?(0,t.jsxs)(j.Entity.List,{children:[(0,t.jsx)(Z,{}),(0,t.jsx)(Z,{}),(0,t.jsx)(Z,{})]}):(0,t.jsxs)(j.Entity.List,{children:[r?.length?(0,t.jsxs)(t.Fragment,{children:[r.map(e=>(0,t.jsx)(Q,{accessGroup:e,canDeleteAccessGroup:P,canUpdateAccessGroup:E,onPromptDelete:()=>h(e),onPromptEdit:()=>f(e)},e.accessGroupId)),o?(0,t.jsx)(i.Stack,{align:"center",as:"li",justify:"center",paddingX:2,paddingY:2.5,children:(0,t.jsx)(x.Spinner,{size:20})}):null]}):(0,t.jsx)(Y,{canHaveAccessGroups:_,canListAccessGroup:L}),o?(0,t.jsx)("div",{ref:b}):null]}),d?(0,t.jsx)(D,{mutate:c.mutate,setActive:u}):null,m?(0,t.jsx)(B,{accessGroup:m,mutate:c.mutate,onClose:()=>h(null)}):null,p?(0,t.jsx)(U.EditAccessGroupModal,{accessGroup:p,canUpdateAccessGroup:E,mutate:c.mutate,onClose:()=>f(null)}):null]})}function Z(){return(0,t.jsx)(j.Entity,{left:(0,t.jsx)("div",{className:"flex justify-end",style:{minWidth:76},children:(0,t.jsx)(l.Skeleton,{height:32,rounded:!0,width:32})}),right:(0,t.jsxs)(i.Stack,{className:"geist-hide-on-mobile",direction:"row",gap:4,children:[(0,t.jsx)(l.Skeleton,{children:(0,t.jsx)(r.Button,{size:"small",type:"secondary",children:"Edit Access Group"})}),(0,t.jsx)(l.Skeleton,{height:32,width:32})]}),children:(0,t.jsx)(j.Entity.Content,{description:(0,t.jsx)("div",{className:"flex h-5 items-center",children:(0,t.jsx)(l.Skeleton,{className:"max-w-72",height:12,width:256})}),title:(0,t.jsx)("div",{className:"flex h-5 items-center",children:(0,t.jsx)(l.Skeleton,{className:"max-w-72",height:12,width:256})})})})}function Q(e){let{accessGroup:s,onPromptDelete:l,onPromptEdit:n,canUpdateAccessGroup:g,canDeleteAccessGroup:p}=e,x=(0,f.useIsMobile)(),y=s.entitlements?.includes("v0");return(0,t.jsx)(j.Entity,{left:(0,t.jsx)("div",{className:"flex justify-end",style:{minWidth:76},children:s.members?(0,t.jsx)(a.AvatarGroup,{limit:3,members:s.members.map(e=>({uid:e})),size:32}):null}),right:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(i.Stack,{className:"geist-hide-on-mobile",direction:"row",gap:4,children:[y?(0,t.jsx)(h.Tooltip,{delayTime:300,text:"Everyone in this access group has access to v0.dev",children:(0,t.jsx)(b.V0Mark,{size:22})}):null,(0,t.jsx)(_.ProjectAvatarGroup,{projectIds:s.projects,totalProjectsCount:s.projectsCount}),x?null:(0,t.jsx)(r.Button,{onClick:()=>n(),size:"small",type:"secondary",children:g?"Edit Access Group":"View Access Group"})]}),(0,t.jsxs)(c.MenuContainer,{children:[(0,t.jsx)(d.MenuButton,{"aria-label":"Menu",shape:"square",size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(S.MoreHorizontal,{})}),(0,t.jsxs)(o.Menu,{width:200,children:[x?(0,t.jsx)(u.MenuItem,{onClick:()=>n(),children:g?"Edit Access Group":"View Access Group"}):null,!p||s.isDsyncManaged?(0,t.jsx)(h.Tooltip,{text:p?"This access groups is connected to a Directory Sync group":"Additional permissions required",children:(0,t.jsx)(m.MenuItemLocked,{onClick:()=>l(),type:"error",children:"Delete Access Group"})}):(0,t.jsx)(u.MenuItem,{onClick:()=>l(),type:"error",children:"Delete Access Group"})]})]})]}),children:(0,t.jsx)(j.Entity.Content,{description:[W(s.membersCount,"user","users"),W(s.projectsCount,"project","projects"),W(s.teamRoles?.length||0,"role","roles"),W(s.teamPermissions?.length||0,"permission","permissions")].filter(Boolean).join(" • "),title:(0,t.jsxs)("div",{className:"flex h-5 items-center gap-1 font-semibold",children:[s.name,s.isDsyncManaged?(0,t.jsx)(h.Tooltip,{text:"The Members of this Access Group are managed with Directory Sync.",children:(0,t.jsx)(C.LockClosed,{})}):null]})})})}function W(e,t,s){if(0!==e)return 1===e?`1 ${t}`:`${e} ${s}`}function Y(e){let{canHaveAccessGroups:s,canListAccessGroup:i}=e;return s?i?(0,t.jsx)(p.EmptyState.Root,{description:"Create access groups to more easily manage project roles.",icon:(0,t.jsx)(p.EmptyState.Icon,{icon:(0,t.jsx)(v.Users,{size:32})}),paddingX:48,paddingY:48,title:"No Access Groups yet"}):(0,t.jsx)(p.EmptyState.Root,{description:"You are not part of any Access Groups.",icon:(0,t.jsx)(p.EmptyState.Icon,{icon:(0,t.jsx)(v.Users,{size:32})}),paddingX:48,paddingY:48,title:"No Access Groups yet"}):(0,t.jsx)(p.EmptyState.Root,{description:"Create access groups to more easily manage project roles.",icon:(0,t.jsx)(p.EmptyState.Icon,{icon:(0,t.jsx)(v.Users,{size:32})}),paddingX:48,paddingY:48,title:"Upgrade to Enterprise",children:(0,t.jsx)(w.Link,{external:!0,href:"/contact/sales",type:"highlight",children:"Contact Sales"})})}function K(e){let{canHaveAccessGroups:s,canCreateAccessGroup:i,onClick:l}=e;return(0,t.jsx)(h.Tooltip,{disableTriggers:i,text:"Additional permissions are required to create access groups.",children:(0,t.jsx)(r.Button,{disabled:!s||!i,onClick:l,width:"100%",children:"Create Access Group"})})}}}]);

//# sourceMappingURL=7c5af9718e9e1c1a.js.map
//# debugId=f80154f9-314a-51fe-973c-d0224dd72d48
