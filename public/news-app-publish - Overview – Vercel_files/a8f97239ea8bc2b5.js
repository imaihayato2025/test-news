
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="a1f2774a-eced-5603-a3de-c0f8ba275d81")}catch(e){}}();
(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{3039074:e=>{e.v({fakeSideBorders:"group-log-filters-module__iUXrVG__fakeSideBorders",filterContent:"group-log-filters-module__iUXrVG__filterContent",first:"group-log-filters-module__iUXrVG__first",last:"group-log-filters-module__iUXrVG__last",modalActiveButtonContainer:"group-log-filters-module__iUXrVG__modalActiveButtonContainer",modalActiveButtonDot:"group-log-filters-module__iUXrVG__modalActiveButtonDot",modalBody:"group-log-filters-module__iUXrVG__modalBody",modalMain:"group-log-filters-module__iUXrVG__modalMain",title:"group-log-filters-module__iUXrVG__title",titleContainer:"group-log-filters-module__iUXrVG__titleContainer"})},7767556:e=>{e.v({buttonLink:"group-details-panel-module__u1jj4W__buttonLink",buttonRule:"group-details-panel-module__u1jj4W__buttonRule",codeBlock:"group-details-panel-module__u1jj4W__codeBlock",copy:"group-details-panel-module__u1jj4W__copy",cta:"group-details-panel-module__u1jj4W__cta",detailsContainer:"group-details-panel-module__u1jj4W__detailsContainer",detailsHeader:"group-details-panel-module__u1jj4W__detailsHeader",detailsMain:"group-details-panel-module__u1jj4W__detailsMain",divider:"group-details-panel-module__u1jj4W__divider",drawer:"group-details-panel-module__u1jj4W__drawer",error:"group-details-panel-module__u1jj4W__error",fetchMetricRowContainer:"group-details-panel-module__u1jj4W__fetchMetricRowContainer",fetchMetricsContainer:"group-details-panel-module__u1jj4W__fetchMetricsContainer",ghostButton:"group-details-panel-module__u1jj4W__ghostButton",groupMessage:"group-details-panel-module__u1jj4W__groupMessage",info:"group-details-panel-module__u1jj4W__info",learnMore:"group-details-panel-module__u1jj4W__learnMore",logDetailRowSkeleton:"group-details-panel-module__u1jj4W__logDetailRowSkeleton",message:"group-details-panel-module__u1jj4W__message",modalBody:"group-details-panel-module__u1jj4W__modalBody",noLogsSelected:"group-details-panel-module__u1jj4W__noLogsSelected",root:"group-details-panel-module__u1jj4W__root",rowContainer:"group-details-panel-module__u1jj4W__rowContainer",setupLogDrain:"group-details-panel-module__u1jj4W__setupLogDrain",title:"group-details-panel-module__u1jj4W__title",tooltip:"group-details-panel-module__u1jj4W__tooltip",truncate:"group-details-panel-module__u1jj4W__truncate",warning:"group-details-panel-module__u1jj4W__warning"})},6632657:e=>{e.v({breakSpaces:"group-log-rows-module__JxqD1W__breakSpaces",colspan:"group-log-rows-module__JxqD1W__colspan",darkTheme:"group-log-rows-module__JxqD1W__darkTheme",darktheme:"group-log-rows-module__JxqD1W__darktheme",error:"group-log-rows-module__JxqD1W__error",fadeIn:"group-log-rows-module__JxqD1W__fadeIn",faded:"group-log-rows-module__JxqD1W__faded",fatal:"group-log-rows-module__JxqD1W__fatal",flash:"group-log-rows-module__JxqD1W__flash",header:"group-log-rows-module__JxqD1W__header",headerContainer:"group-log-rows-module__JxqD1W__headerContainer",info:"group-log-rows-module__JxqD1W__info",isNew:"group-log-rows-module__JxqD1W__isNew",isSelected:"group-log-rows-module__JxqD1W__isSelected",liveModeRow:"group-log-rows-module__JxqD1W__liveModeRow",loadingError:"group-log-rows-module__JxqD1W__loadingError",loadingNew:"group-log-rows-module__JxqD1W__loadingNew","move-in-indicator":"group-log-rows-module__JxqD1W__move-in-indicator","move-logs-down":"group-log-rows-module__JxqD1W__move-logs-down","move-logs-down-with-opacity":"group-log-rows-module__JxqD1W__move-logs-down-with-opacity","move-logs-up":"group-log-rows-module__JxqD1W__move-logs-up",moveUp:"group-log-rows-module__JxqD1W__moveUp",paused:"group-log-rows-module__JxqD1W__paused",previouslyFaded:"group-log-rows-module__JxqD1W__previouslyFaded",reverseBackground:"group-log-rows-module__JxqD1W__reverseBackground",rowContainer:"group-log-rows-module__JxqD1W__rowContainer",rowItem:"group-log-rows-module__JxqD1W__rowItem",screenReaderSelect:"group-log-rows-module__JxqD1W__screenReaderSelect",separated:"group-log-rows-module__JxqD1W__separated",tooltip:"group-log-rows-module__JxqD1W__tooltip",tooltipContainer:"group-log-rows-module__JxqD1W__tooltipContainer",truncate:"group-log-rows-module__JxqD1W__truncate",uppercase:"group-log-rows-module__JxqD1W__uppercase",warning:"group-log-rows-module__JxqD1W__warning"})},6473835:e=>{var{m:t,e:s}=e;!function(e){"use strict";function t(e){var t={},s=e?e.split(/\.|-|_/):["0","0","0"];return t.info=s.join("."),t.major=s[0]||"0",t.minor=s[1]||"0",t.patch=s[2]||"0",t}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)});var s=["crios","fxios","daumapps"],r=e.userAgent=function(e,r){var a,l,o,n,i=e?e.toLowerCase():"undefined"!=typeof window&&window.navigator&&"string"==typeof window.navigator.userAgent?window.navigator.userAgent.toLowerCase():"";return{ua:i,browser:(a={},"webkit"===(l=/(dolfin)[ \/]([\w.]+)/.exec(i)||/(edge)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(tizen)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(webkit)(?:.*version)?[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||0>i.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+))?/.exec(i)||["","unknown"])[1]?l=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(i)||/(android)[ \/]([\w._\-]+);/.exec(i)||[l[0],"safari",l[2]]:"mozilla"===l[1]?/trident/.test(i)?l[1]="msie":l[1]="firefox":/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(i)&&(l[1]="polaris"),a[l[1]]=!0,a.name=l[1],a.version=t(l[2]),a),platform:function(e){var t,s;if(!(!(t=e).match(/linux|windows (nt|98)|macintosh|cros/)||t.match(/android|mobile|polaris|lgtelecom|uzard|natebrowser|ktf;|skt;/)))return"pc";if((s=e).match(/ipad/)||s.match(/android/)&&!s.match(/mobi|mini|fennec/))return"tablet";return e.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)?"mobile":""}(i),os:(o={},"iphone"===(n=/(iphone|ipad|ipod)[\S\s]*os ([\w._\-]+) like/.exec(i)||!!/polaris|natebrowser|([010|011|016|017|018|019]{3}\d{3,4}\d{4}$)/.test(i)&&["","polaris","0.0.0"]||/(windows)(?: nt | phone(?: os){0,1} | )([\w._\-]+)/.exec(i)||/(android)[ \/]([\w._\-]+);/.exec(i)||!!/android/.test(i)&&["","android","0.0.0"]||!!/(windows)/.test(i)&&["","windows","0.0.0"]||/(mac) os x ([\w._\-]+)/.exec(i)||/(tizen)[ \/]([\w._\-]+);/.exec(i)||!!/(linux)/.test(i)&&["","linux","0.0.0"]||!!/webos/.test(i)&&["","webos","0.0.0"]||/(cros)(?:\s[\w]+\s)([\d._\-]+)/.exec(i)||/(bada)[ \/]([\w._\-]+)/.exec(i)||!!/bada/.test(i)&&["","bada","0.0.0"]||!!/(rim|blackberry|bb10)/.test(i)&&["","blackberry","0.0.0"]||["","unknown","0.0.0"])[1]||"ipad"===n[1]||"ipod"===n[1]?n[1]="ios":"windows"===n[1]&&"98"===n[2]&&(n[2]="0.98.0"),"cros"===n[1]&&(n[1]="chrome"),o[n[1]]=!0,o.name=n[1],o.version=t(n[2]),o),app:function(e,r){var a={},l=null,o=s;Array.isArray(r)?o=s.concat(r):"string"==typeof r&&(o=s.concat([r]));for(var n=0,i=o.length;n<i&&!(l=RegExp("("+o[n]+")[ \\/]([\\w._\\-]+)").exec(e));n+=1);return l||(l=["",""]),l[1]?(a.isApp=!0,a.name=l[1],a.version=t(l[2])):a.isApp=!1,a}(i,r)}};"object"==typeof window&&window.navigator.userAgent&&(window.ua_result=r(window.navigator.userAgent)||null)}((s.daumtools=s,s.util=s,s))},3163983:e=>{e.v({combobox:"search-filter-module__SHqGLq__combobox",comboboxList:"search-filter-module__SHqGLq__comboboxList",comboboxWrapper:"search-filter-module__SHqGLq__comboboxWrapper",confirm:"search-filter-module__SHqGLq__confirm",empty:"search-filter-module__SHqGLq__empty",filter:"search-filter-module__SHqGLq__filter",firstOption:"search-filter-module__SHqGLq__firstOption",firstOptionInnerButton:"search-filter-module__SHqGLq__firstOptionInnerButton",hide:"search-filter-module__SHqGLq__hide",highlight:"search-filter-module__SHqGLq__highlight",input:"search-filter-module__SHqGLq__input",option:"search-filter-module__SHqGLq__option",suffix:"search-filter-module__SHqGLq__suffix",suggestions:"search-filter-module__SHqGLq__suggestions",textOverlay:"search-filter-module__SHqGLq__textOverlay"})},9291626:e=>{e.v({logRowsContainer:"logs-common-module__Gs96xq__logRowsContainer",logRowsWrapper:"logs-common-module__Gs96xq__logRowsWrapper"})},8271193:e=>{e.v({container:"paginated-group-logs-module__kgOb4G__container",hasLogs:"paginated-group-logs-module__kgOb4G__hasLogs"})},9779114:e=>{e.v({logGradient:"group-logs-module__OaUHyW__logGradient",logHeader:"group-logs-module__OaUHyW__logHeader",show:"group-logs-module__OaUHyW__show"})},1808192:e=>{"use strict";e.s({GroupLogs:()=>rQ},1808192);var t=e.i(6645307),s=e.i(6530772),r=e.i(889716),a=e.i(653558),l=e.i(2733203),o=e.i(1190215),n=e.i(4105925),i=e.i(5674541),d=e.i(5610210),c=e.i(1164214),u=e.i(476315),p=e.i(8890463),m=e.i(5535439),h=e.i(503726),x=e.i(604868),g=e.i(1782286),f=e.i(3585235),j=e.i(5785123),v=e.i(7573892),y=e.i(9802771),b=e.i(2345147),C=e.i(8084653),w=e.i(8934201),_=e.i(9251900),S=e.i(7831155),N=e.i(750479),k=e.i(3521787),L=e.i(6649026),T=e.i(9336536),E=e.i(1389821),I=e.i(2240289),D=e.i(8502629),F=e.i(5510483);let M={rows:[]};function q(e){let{attributeName:t,attributeNameSearchQuery:s,forceEmpty:r=!1,deploymentDomains:a,deploymentIds:l,domains:o,levels:n,sources:i,requestTags:d,routes:c,requestPaths:u,requestIds:p,requestMethods:m,statusCodes:x,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:b}=e,{data:C}=(0,I.useProject)((0,E.useProjectIdOrName)()),{user:w,team:_,isLoading:q}=(0,h.useAccount)(),{startDate:R,endDate:O,searchQuery:P,myLogs:B,hasTraces:$}=(0,D.useLogsApiParams)(),z=O??new Date,W=(0,N.sub)(z,{days:7}),H=W;+(0,S.toDate)(W)<+(0,S.toDate)(R)&&(H=R);let G=(0,k.default)(()=>{if(q||!t||r||p&&p.length>0||!C)return;let e=null!==_?_.id:null,h=null!==w?w?.uid:null,S=e||h;if(null===S)return;let N=(0,L.encode)({attributeName:t,attributeNameSearchQuery:s||void 0,startDate:H.getTime(),endDate:z.getTime(),searchQuery:(0,F.stringifyArrayContent)((0,F.tokenizeSearchQuery)(P)),projectId:C.id,deploymentDomain:(0,F.stringifyArrayContent)(a),deploymentId:(0,F.stringifyArrayContent)(l),domain:(0,F.stringifyArrayContent)(o),level:(0,F.stringifyArrayContent)(n),ownerId:S,source:(0,F.stringifyArrayContent)(i),requestTags:(0,F.stringifyArrayContent)(d),route:(0,F.stringifyArrayContent)(c),requestPath:(0,F.stringifyArrayContent)(u),requestMethod:(0,F.stringifyArrayContent)(m),statusCode:(0,F.stringifyArrayContent)(x),cache:(0,F.stringifyArrayContent)(g),environment:(0,F.stringifyArrayContent)(f),branch:(0,F.stringifyArrayContent)(j),myLogs:B?"true":void 0,sessionId:(0,F.stringifyArrayContent)(v),hasTraces:$?"true":void 0,traceId:(0,F.stringifyArrayContent)(y),invocationId:(0,F.stringifyArrayContent)(b)});return`${T.API_LOGS}/request-logs/filter-values${N}`},A,{keepPreviousData:!0,revalidateOnFocus:!1});return r?{...G,data:M}:G}async function A(e,t){let s=await fetch(e,t);if(!s.ok)throw Error((await s.json()).message);return s.json()}var R=e.i(3039074),O=e.i(6532952),P=e.i(4922888);let B=["responseStatusCodes","vercelCaches","requestMethods","timeline","levels","sources","environments"],$={hobby:"pastHour",pro:"pastDay",enterprise:"past3Days"},z=()=>{let{project:e}=(0,m.useParams)()??{},t=(0,I.useProject)(e),r=t.data?.id,{user:a,team:l}=(0,h.useAccount)(),o=l?.billing?.plan??"hobby",n=(0,s.useCallback)(()=>{r&&a?.uid&&(0,O.trackInSnowflake)(P.Topic.VercelAppV0LogPageVisited,{project_id:r,team_id:l?.id,user_id:a.uid},"vercel-app")},[r,a?.uid,l?.id]);return{trackLogPageVisit:n,trackFilterUse:(0,s.useCallback)(e=>{r&&a&&("timeline"===e.filter&&"maximum"===e.value[0]&&(e.value[0]=$[o]),(0,O.trackInSnowflake)(P.Topic.VercelAppV0LogFilterQuery,{project_id:r,team_id:l?.id,user_id:a.uid,event_trigger:e.eventTrigger,filter_terms:e.value.map(t=>({field:e.filter,operator:"=",value:t||void 0}))},"vercel-app"))},[r,a,l,o]),trackLogPresetRun:(0,s.useCallback)(e=>{let{presetId:t}=e;r&&a&&(0,O.trackInSnowflake)(P.Topic.VercelAppV0LogPresetRun,{project_id:r,team_id:l?.id,user_id:a.uid,preset_id:t,preset_type:t.endsWith("_t")?"team":"personal"},"vercel-app")},[r,a,l])}};var W=e.i(6948514),H=e.i(1039838),G=e.i(9632010),V=e.i(6895406);let U=(0,V.withNewIcon)(`<path fill-rule="evenodd" clip-rule="evenodd" d="M0.5 3.25C0.5 1.86929 1.61929 0.75 3 0.75H13C14.3807 0.75 15.5 1.86929 15.5 3.25V4.75C15.5 5.24434 15.3565 5.70517 15.1089 6.09311C14.6903 5.81311 14.2373 5.58044 13.7576 5.40277C13.9087 5.22759 14 4.99946 14 4.75V3.25C14 2.69772 13.5523 2.25 13 2.25H3C2.44772 2.25 2 2.69772 2 3.25V4.75C2 5.30229 2.44772 5.75 3 5.75H8.46611C7.74768 6.12985 7.10902 6.64041 6.58178 7.25H3C1.61929 7.25 0.5 6.13071 0.5 4.75V3.25ZM5.86958 8.25H3C1.61929 8.25 0.5 9.36929 0.5 10.75V12.25C0.5 13.6307 1.61929 14.75 3 14.75H5.86958C5.59976 14.2835 5.38623 13.7804 5.23829 13.25H3C2.44772 13.25 2 12.8023 2 12.25V10.75C2 10.1977 2.44772 9.75 3 9.75H5.23829C5.38623 9.21955 5.59975 8.71645 5.86958 8.25ZM4.25 4.75C4.66421 4.75 5 4.41421 5 4C5 3.58579 4.66421 3.25 4.25 3.25C3.83579 3.25 3.5 3.58579 3.5 4C3.5 4.41421 3.83579 4.75 4.25 4.75ZM7.5 4C7.5 4.41421 7.16421 4.75 6.75 4.75C6.33579 4.75 6 4.41421 6 4C6 3.58579 6.33579 3.25 6.75 3.25C7.16421 3.25 7.5 3.58579 7.5 4ZM13.2307 12C13.2 12.815 13.0938 13.6278 12.9124 14.4279C13.8564 13.9717 14.5462 13.0724 14.7118 12H13.2307ZM11.8047 14.7359C11.7044 14.7452 11.6028 14.75 11.5 14.75C11.3972 14.75 11.2956 14.7452 11.1953 14.7359C10.9494 13.839 10.8077 12.9211 10.77 12H12.23C12.1923 12.9211 12.0506 13.839 11.8047 14.7359ZM13.2307 11C13.2 10.185 13.0938 9.37224 12.9124 8.57213C13.8564 9.02834 14.5462 9.92764 14.7118 11H13.2307ZM12.23 11C12.1923 10.0789 12.0506 9.16097 11.8047 8.2641C11.7044 8.25477 11.6028 8.25 11.5 8.25C11.3972 8.25 11.2956 8.25477 11.1953 8.2641C10.9494 9.16097 10.8077 10.0789 10.77 11H12.23ZM9.76925 11C9.80005 10.185 9.90616 9.37224 10.0876 8.57213C9.1436 9.02834 8.45381 9.92764 8.28822 11H9.76925ZM10.0876 14.4279C9.90616 13.6278 9.80005 12.815 9.76925 12H8.28822C8.45381 13.0724 9.1436 13.9717 10.0876 14.4279ZM11.5 16C13.9853 16 16 13.9853 16 11.5C16 9.01472 13.9853 7 11.5 7C9.01472 7 7 9.01472 7 11.5C7 13.9853 9.01472 16 11.5 16Z" fill="currentColor"/>
  `),Q=[{label:"Vercel Function",value:"serverless",icon:(0,t.jsx)(G.FunctionSquare,{size:16})},{label:"Edge Middleware",value:"edge-middleware",icon:(0,t.jsx)(H.FunctionMiddleware,{size:16})},{label:"Edge Function",value:"edge-function",icon:(0,t.jsx)(W.FunctionEdge,{size:16})},{label:"Edge Cache",value:"edge-cache",icon:(0,t.jsx)(U,{size:16})}],X=[{label:"Warning",value:"warning"},{label:"Error",value:"error"},{label:"Fatal",value:"fatal"}],Z=[{label:"GET",value:"GET"},{label:"POST",value:"POST"},{label:"HEAD",value:"HEAD"},{label:"PUT",value:"PUT"},{label:"DELETE",value:"DELETE"},{label:"OPTIONS",value:"OPTIONS"},{label:"PATCH",value:"PATCH"}],J=[{label:"MISS",value:"MISS"},{label:"HIT",value:"HIT"},{label:"NONE",value:"NONE"},{label:"BYPASS",value:"BYPASS"},{label:"STALE",value:"STALE"},{label:"PRERENDER",value:"PRERENDER"},{label:"REVALIDATED",value:"REVALIDATED"}],K=[{label:"API Endpoint",value:"api"},{label:"Server-side Rendering",value:"ssr"},{label:"Incremental Static Regeneration",value:"isr"},{label:"Partial Prerendering",value:"ppr"},{label:"Server Components",value:"rsc"},{label:"Cron Job",value:"cron"}],Y=[{name:"level",attributeName:"level",suggestions:X.map(e=>e.value)},{name:"resource",attributeName:"source",suggestions:Q.map(e=>e.value)},{name:"requestType",attributeName:"requestTags",suggestions:K.map(e=>e.value)},{name:"function",attributeName:"route",suggestions:["function name"]},{name:"requestPath",attributeName:"requestPath",suggestions:["request path"]},{name:"host",attributeName:"domain",suggestions:["domain name"]},{name:"deployment",attributeName:"deploymentDomain",suggestions:["deployment name"]},{name:"method",attributeName:"requestMethod",suggestions:Z.map(e=>e.value)},{name:"status",attributeName:"statusCode",suggestions:["status code"]},{name:"cache",attributeName:"cache",suggestions:J.map(e=>e.value)},{name:"environment",attributeName:"environment",suggestions:[{label:"Production",value:"production"},{label:"Preview",value:"preview"}].map(e=>e.value)},{name:"branch",attributeName:"branch",suggestions:["branch name"]},{name:"requestId",attributeName:"requestId",suggestions:["Request ID - a partial of the requestId is required to search, ex:abcde-1678961364403-a1b2c3d4f5e6"]},{name:"sessionId",attributeName:"sessionId",suggestions:["id of your tracing session"]},{name:"traceId",attributeName:"traceId",suggestions:["id of the trace"]},{name:"deploymentId",attributeName:"deploymentId",suggestions:["id of the deployment"]},{name:"invocationId",attributeName:"invocationId",suggestions:["id of the invocation"]}],ee=Y.filter(e=>"deploymentId"!==e.name&&"deployment"!==e.name);var et=e.i(1160739);function es(){let{filters:{levels:e,routes:r,deploymentDomains:a,deploymentIds:l,domains:o,sources:n,requestTags:i,requestMethods:d,requestPaths:u,caches:p,statusCodes:m,environments:h,branches:x,sessionIds:g,traceIds:f,invocationIds:j},setFilters:v}=(0,D.useLogsQueryState)(),{data:y,isLoading:b}=q({attributeName:"level",domains:o,deploymentDomains:a,deploymentIds:l,sources:n,requestTags:i,routes:r,requestPaths:u,requestMethods:d,caches:p,statusCodes:m,environments:h,branches:x,sessionIds:g,traceIds:f,invocationIds:j}),C=(0,s.useMemo)(()=>{let e;return e=y?.rows,X.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return s||b||(s=0),{label:t.label,value:t.value,count:s}}).sort((e,t)=>Number(t.count)-Number(e.count))},[y,b]),w=C.length,{trackFilterUse:S}=z();return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:e.length,"data-testid":(0,c.tid)("group-logs","level-filter"),defaultExpanded:!0,onClearFilter:()=>v({levels:void 0,preset:null}),title:"Contains Console Level",children:(0,t.jsx)(et.LogFilter,{hideSearch:!0,isCountLoading:b,onChange:e=>{v({levels:e.sort(),preset:null}),S({eventTrigger:"filter click",filter:"levels",value:e.sort()})},options:C,selectedOptions:e,totalAvailableOptions:w})})}function er(){let{filters:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,sources:n,requestTags:i,requestMethods:u,requestPaths:p,caches:m,statusCodes:h,environments:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setFilters:y}=(0,D.useLogsQueryState)(),[b,C]=(0,s.useState)(!1),{data:w,isLoading:S}=q({attributeName:"source",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestMethods:u,requestPaths:p,caches:m,statusCodes:h,environments:x,branches:g,forceEmpty:!b,requestTags:i,sessionIds:f,traceIds:j,invocationIds:v}),{trackFilterUse:N}=z(),k=(0,s.useMemo)(()=>{let e;return e=w?.rows??[],Q.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:s??0}})},[w]),L=k.length;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,d.clsx)(R.default.filterContent),count:n.length,"data-testid":(0,c.tid)("logs","source-filter"),onClearFilter:()=>y({sources:void 0,preset:null}),onExpand:()=>C(!0),title:"Resource",children:(0,t.jsx)(et.LogFilter,{hideSearch:!0,isCountLoading:S,onChange:e=>{y({sources:e.sort(),preset:null}),N({eventTrigger:"filter click",filter:"sources",value:e.sort()})},options:k,selectedOptions:n,totalAvailableOptions:L})})}function ea(){let{filters:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,sources:n,requestTags:i,requestMethods:u,requestPaths:p,caches:m,statusCodes:h,environments:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setFilters:y}=(0,D.useLogsQueryState)(),[b,C]=(0,s.useState)(!1),{data:w,isLoading:S}=q({attributeName:"requestTags",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestMethods:u,requestPaths:p,caches:m,statusCodes:h,environments:x,branches:g,sources:n,sessionIds:f,traceIds:j,forceEmpty:!b,invocationIds:v}),{trackFilterUse:N}=z(),k=(0,s.useMemo)(()=>{let e;return e=w?.rows??[],K.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,icon:t.icon,count:s??0}})},[w]),L=k.length;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,d.clsx)(R.default.filterContent),count:i.length,"data-testid":(0,c.tid)("logs","request-tags-filter"),onClearFilter:()=>y({requestTags:void 0,preset:null}),onExpand:()=>C(!0),title:"Request Type",children:(0,t.jsx)(et.LogFilter,{hideSearch:!0,isCountLoading:S,onChange:e=>{y({requestTags:e.sort(),preset:null}),N({eventTrigger:"filter click",filter:"requestTags",value:e.sort()})},options:k,selectedOptions:i,totalAvailableOptions:L})})}function el(){let{filters:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,requestMethods:u,statusCodes:p,caches:m,environments:h,branches:x,sessionIds:g,traceIds:f,invocationIds:j},setFilters:v}=(0,D.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=z(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=q({attributeName:"domain",attributeNameSearchQuery:y,levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,routes:i,requestPaths:d,requestMethods:u,statusCodes:p,caches:m,environments:h,branches:x,sessionIds:g,traceIds:f,forceEmpty:!w,invocationIds:j}),L=!N,T=(0,s.useMemo)(()=>{let e=N?.rows??[];return n.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(et.generateFilterOption)},[N,n]),E=N?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:n.length,"data-testid":(0,c.tid)("group-logs","domain-filter"),onClearFilter:()=>v({domains:void 0,preset:null}),onExpand:()=>S(!0),title:"Host",children:(0,t.jsx)(et.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({domains:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"domains",value:Array(e.length).fill("")})},onSearch:b,options:T,searchId:"search-hosts",searchLabel:"Search hosts",searchPlaceholder:"Search hosts…",selectedOptions:n,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}var eo=e.i(3921802),en=e.i(7570424),ei=e.i(8328767);e.i(9389778);var ed=e.i(1310591),ec=e.i(3184563);function eu(){let{filters:{levels:e,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,statusCodes:u,requestMethods:p,caches:m,environments:h,branches:x,sessionIds:g,traceIds:f,invocationIds:j},setFilters:v}=(0,D.useLogsQueryState)(),{isDeploymentEditable:y}=(0,en.usePageConfig)(),{trackFilterUse:b}=z(),[C,w]=(0,s.useState)(""),[S,N]=(0,s.useState)(!1),{data:k,isLoading:L}=q({attributeName:"deploymentId",attributeNameSearchQuery:C,deploymentIds:a,levels:e,sources:l,requestTags:o,domains:n,routes:i,requestPaths:d,statusCodes:u,requestMethods:p,caches:m,environments:h,branches:x,sessionIds:g,traceIds:f,forceEmpty:!y||!S,invocationIds:j}),{teamSlug:T,projectSlug:E}=(0,ed.useProjectAndTeamSlug)(),{data:I}=(0,ei.useRollingRelease)({teamIdOrSlug:T,projectSlug:E}),{deployment:F}=(0,ec.useProjectProductionDeployment)(E??void 0),M=I?.rollingRelease,A=M?.currentDeployment?.id,O=M?.canaryDeployment?.id,P=!a,B=(0,s.useMemo)(()=>{if(!A||!O)return[];let e=[];return k?.rows?.forEach(s=>{let a=s.attributeValue,l=F?.id===a,o=a===O;l?e.push({label:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(eo.Badge,{size:"sm",variant:"green-subtle",children:"Current"}),(0,t.jsx)("span",{children:a})]}),value:`${a}`,count:s.total}):o?e.push({label:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(eo.Badge,{size:"sm",variant:"blue-subtle",children:"Canary"}),(0,t.jsx)("span",{children:a})]}),value:`${a}`,count:s.total}):e.push({label:a,value:`${a}`,count:s.total})}),e.sort((e,t)=>{let s=F?.id===e.value,r=O&&e.value===O,a=F?.id===t.value,l=O&&t.value===O;return s&&!a?-1:!s&&a?1:r&&!l?-1:!r&&l?1:0})},[A,O,k?.rows,F?.id]),$=k?.availableOptions??0;return y?(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:a.length,"data-testid":(0,c.tid)("logs","deployment-filter"),onClearFilter:()=>v({deploymentIds:void 0,preset:null}),onExpand:()=>N(!0),title:"Deployment ID",children:(0,t.jsx)(et.LogFilter,{isFirstLoading:P,isLoading:L,onChange:e=>{v({deploymentIds:e.sort(),preset:null}),b({eventTrigger:"filter click",filter:"deploymentIds",value:Array(e.length).fill("")})},onSearch:w,options:B,searchId:"search-deployment-ids",searchLabel:"Search deployment IDs",searchPlaceholder:"Search deployment IDs…",selectedOptions:a,showSelectedOptionsAtTop:!0,totalAvailableOptions:$})}):null}function ep(){let{filters:{routes:e,levels:r,deploymentDomains:a,deploymentIds:l,domains:o,requestPaths:n,sources:i,requestTags:d,environments:u,branches:p,requestMethods:m,caches:h,statusCodes:x,sessionIds:g,traceIds:f,invocationIds:j},setFilters:v}=(0,D.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=z(),{functionFilterDefaultExpanded:w}=(0,en.usePageConfig)(),[S,N]=(0,s.useState)(w),{data:k,isLoading:L}=q({attributeName:"route",attributeNameSearchQuery:y,domains:o,forceEmpty:!S,levels:r,requestPaths:n,environments:u,branches:p,deploymentDomains:a,deploymentIds:l,statusCodes:x,requestMethods:m,caches:h,sources:i,requestTags:d,sessionIds:g,traceIds:f,invocationIds:j}),T=!k,E=(0,s.useMemo)(()=>{let t=k?.rows??[];return e.filter(e=>!t.find(t=>t.attributeValue===e)).forEach(e=>{t.push({attributeValue:e,total:0})}),t.map(et.generateFilterOption)},[k,e]),I=k?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:e.length,"data-testid":(0,c.tid)("logs","route-filter"),defaultExpanded:w,onClearFilter:()=>v({routes:void 0,preset:null}),onExpand:()=>N(!0),title:"Route",children:(0,t.jsx)(et.LogFilter,{isFirstLoading:T,isLoading:L,onChange:e=>{v({routes:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"routes",value:Array(e.length).fill("")})},onSearch:b,options:E,searchId:"search-routes",searchLabel:"Search Routes",searchPlaceholder:"Search Routes…",selectedOptions:e,showSelectedOptionsAtTop:!0,totalAvailableOptions:I})})}var em=e.i(1265902),eh=e.i(5163670),ex=e.i(3326412),eg=e.i(3120835),ef=e.i(540570);function ej(){let e=(0,ef.useOpenUpgradeModal)(),{maxDuration:s,maxDurationFormatted:r,billingPlan:a,isLoading:l,teamId:o}=(0,eg.useUserRetention)(),{state:{startDate:n,endDate:i},setState:d,setFilters:u}=(0,D.useLogsQueryState)(),{startDate:p,endDate:m,timeline:h}=(0,D.useLogsApiParams)(),{isReady:x,value:g}=(0,ex.useRuntimeLogsExtendedTimelineFlag)(),f=!!(x&&g),{trackFilterUse:j}=z(),v=Date.now(),y=(0,N.sub)(v,s).getTime(),b=n&&i?void 0:h,{presets:C,presetValue:w}=(()=>{let t=[{key:"past30Minutes",text:"Last 30 minutes",start:(0,N.sub)(new Date,{minutes:30}),end:new Date},{key:"pastHour",text:"Last hour",start:(0,N.sub)(new Date,{hours:1}),end:new Date},{key:"past12Hours",text:"Last 12 hours",start:(0,N.sub)(new Date,{hours:12}),end:new Date},{key:"pastDay",text:"Last 24 hours",start:(0,N.sub)(new Date,{days:1}),end:new Date},...s.days&&s.days>1&&f?[{key:"pastWeek",text:"Last 7 days",start:(0,N.sub)(new Date,{weeks:1}),end:new Date},{key:"past2Weeks",text:"Last 14 days",start:(0,N.sub)(new Date,{weeks:2}),end:new Date},{key:"pastMonth",text:"Last 30 days",start:(0,N.sub)(new Date,{days:30}),end:new Date}]:[]].map(e=>({...e,key:e.start.getTime()===y?"maximum":e.key,needsUpgrade:e.start.getTime()<y}));t.some(e=>e.start.getTime()===y)||t.push({key:"maximum",text:`Last ${r}`,start:new Date(y),end:new Date,needsUpgrade:!1});let l=b?t.find(e=>e.key===b):void 0;return"hobby"===a?{presets:[{presets:t.filter(e=>!e.needsUpgrade)},{title:"Upgrade to Pro",divider:!0,presets:t.filter(e=>e.needsUpgrade).map(t=>({...t,onClick:()=>{e({teamHint:o,source:"logs-timeline-filter",onConversionSuccess:()=>{u({preset:null}),d({timeline:t.key})}})}}))}],presetValue:l}:{presets:[{presets:t}],presetValue:l}})();return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,"data-testid":(0,c.tid)("logs","timeline-filter"),defaultExpanded:!0,title:"Timeline",children:"maximum"===h&&(l||!x)?(0,t.jsx)(eh.Skeleton,{height:40,width:"100%"}):(0,t.jsx)(em.Calendar,{allowClear:!1,compact:!0,maxValue:v,minValue:y,value:w||{start:n??p,end:i??m},width:"100%",dataTestId:(0,c.tid)("group-logs","calendar"),onChange:(e,t)=>{j({eventTrigger:"filter click",filter:"timeline",value:[t||"custom"]}),u({preset:null}),t?d({timeline:t}):d({startDate:new Date(e.start),endDate:new Date(e.end)})},presets:C,presetKey:b})})}var ev=e.i(9773896),ey=e.i(3686451);function eb(){let{filters:{levels:e,deploymentDomains:r,deploymentIds:a,domains:l,routes:o,requestPaths:n,statusCodes:i,requestMethods:d,caches:u,environments:p,branches:m,sources:h,requestTags:x,sessionIds:g,traceIds:f,invocationIds:j},setFilters:v}=(0,D.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=z(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=q({attributeName:"statusCode",levels:e,domains:l,deploymentDomains:r,deploymentIds:a,routes:o,requestPaths:n,requestMethods:d,caches:u,environments:p,branches:m,forceEmpty:!w,sources:h,requestTags:x,sessionIds:g,traceIds:f,invocationIds:j}),L=!N,T=(0,s.useMemo)(()=>(N?.rows??[]).reduce((e,t)=>{if("-1"!==t.attributeValue){let s=(e=>{let{attributeValue:t,total:s}=e,r="None"!==t?ey.statusCodes[t]:void 0,a=r?.message??"";return{label:`${t} ${a}`,value:`${t}`,count:s}})(t);e.push(s)}return e},[]),[N?.rows]),E=T.length;i.filter(e=>!T.find(t=>String(t.value)===e)).forEach(e=>{T.push({label:e,value:e,count:0})});let I=(0,s.useMemo)(()=>y?(0,ev.matchSorter)(T,y,{keys:["label"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):T,[T,y]);return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:i.length,"data-testid":(0,c.tid)("logs","status-filter"),onClearFilter:()=>v({statusCodes:void 0,preset:null}),onExpand:()=>S(!0),title:"Status Code",children:(0,t.jsx)(et.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({statusCodes:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"responseStatusCodes",value:e.sort()})},onSearch:b,options:I,searchId:"search-status",searchLabel:"Search status",searchPlaceholder:"Search status…",selectedOptions:i,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}function eC(){let{filters:{routes:e,levels:r,deploymentDomains:a,deploymentIds:l,environments:o,branches:n,domains:i,sources:d,requestTags:u,requestMethods:p,caches:m,statusCodes:h,requestPaths:x,sessionIds:g,traceIds:f,invocationIds:j},setFilters:v}=(0,D.useLogsQueryState)(),[y,b]=(0,s.useState)(""),{trackFilterUse:C}=z(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=q({attributeName:"requestPath",attributeNameSearchQuery:y,domains:i,levels:r,deploymentDomains:a,deploymentIds:l,environments:o,branches:n,statusCodes:h,sources:d,requestTags:u,requestMethods:p,caches:m,routes:e,sessionIds:g,traceIds:f,forceEmpty:!w,invocationIds:j}),L=!N,T=(0,s.useMemo)(()=>{let e=N?.rows??[];return x.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(et.generateFilterOption)},[N,x]),E=N?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:x.length,"data-testid":(0,c.tid)("logs","request-path-filter"),onClearFilter:()=>v({requestPaths:void 0,preset:null}),onExpand:()=>S(!0),title:"Request Path",children:(0,t.jsx)(et.LogFilter,{isFirstLoading:L,isLoading:k,onChange:e=>{v({requestPaths:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"requestPaths",value:Array(e.length).fill("")})},onSearch:b,options:T,searchId:"search-request-paths",searchLabel:"Search request paths",searchPlaceholder:"Search request paths…",selectedOptions:x,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}function ew(e){let{isLoadingEnvs:r,allEnvironments:a}=e,{filters:{routes:l,deploymentDomains:o,deploymentIds:n,domains:i,sources:d,requestTags:c,requestPaths:u,levels:p,requestMethods:m,statusCodes:h,caches:x,environments:g,branches:f,sessionIds:j,traceIds:v,invocationIds:y},setFilters:b}=(0,D.useLogsQueryState)();a=a.filter(e=>"production"===e.id||"preview"===e.id);let{trackFilterUse:C}=z(),[w,S]=(0,s.useState)(!1),{data:N,isLoading:k}=q({attributeName:"environment",domains:i,deploymentDomains:o,deploymentIds:n,sources:d,requestTags:c,routes:l,requestMethods:m,levels:p,statusCodes:h,requestPaths:u,caches:x,branches:f,sessionIds:j,traceIds:v,forceEmpty:!w,invocationIds:y}),L=(0,s.useMemo)(()=>{let e;return e=N?.rows,a.map(t=>{let s=t.name??t.slug,r=e?.find(e=>e.attributeValue===t.id)?.total??0;return{label:s,value:t.id,count:r}}).sort((e,t)=>t.count-e.count)},[N,a]),T=(0,s.useMemo)(()=>k&&!!r,[k,r]),E=L.length;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:g.length,onClearFilter:()=>b({environments:void 0}),onExpand:()=>S(!0),title:"Environment",children:(0,t.jsx)(et.LogFilter,{hideSearch:!0,isCountLoading:T,onChange:e=>{b({environments:e.sort(),preset:null}),C({eventTrigger:"filter click",filter:"environments",value:e.sort()})},options:L,searchId:"search-environment",searchLabel:"Search environment",searchPlaceholder:"Search environment…",selectedOptions:g,totalAvailableOptions:E})})}function e_(){let{filters:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,statusCodes:d,requestMethods:c,requestPaths:u,caches:p,environments:m,branches:h,sessionIds:x,traceIds:g,invocationIds:f},setFilters:j}=(0,D.useLogsQueryState)(),{trackFilterUse:v}=z(),[y,b]=(0,s.useState)(!1),[C,w]=(0,s.useState)(""),{data:S,isLoading:N}=q({attributeName:"branch",attributeNameSearchQuery:C,deploymentIds:a,deploymentDomains:r,levels:e,sources:l,requestTags:o,domains:n,routes:i,statusCodes:d,requestMethods:c,caches:p,environments:m,requestPaths:u,sessionIds:x,traceIds:g,forceEmpty:!y,invocationIds:f}),k=!S,L=(0,s.useMemo)(()=>{let e=S?.rows??[];return h.filter(t=>!e.find(e=>e.attributeValue===t)).forEach(t=>{e.push({attributeValue:t,total:0})}),e.map(et.generateFilterOption)},[S,h]),T=S?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:h.length,onClearFilter:()=>j({branches:void 0}),onExpand:()=>b(!0),title:"Branch",children:(0,t.jsx)(et.LogFilter,{isFirstLoading:k,isLoading:N,onChange:e=>{j({branches:e.sort(),preset:null}),v({eventTrigger:"filter click",filter:"branches",value:Array(e.length).fill("")})},onSearch:w,options:L,searchId:"search-branches",searchLabel:"Search branches",searchPlaceholder:"Search branches…",selectedOptions:h,showSelectedOptionsAtTop:!0,totalAvailableOptions:T})})}function eS(){let{filters:{routes:e,deploymentDomains:r,deploymentIds:a,domains:l,sources:o,requestTags:n,levels:i,requestMethods:d,requestPaths:c,statusCodes:u,environments:p,branches:m,caches:h,sessionIds:x,traceIds:g,invocationIds:f},setFilters:j}=(0,D.useLogsQueryState)(),[v,y]=(0,s.useState)(!1),{data:b,isLoading:C}=q({attributeName:"cache",domains:l,deploymentDomains:r,deploymentIds:a,sources:o,requestTags:n,routes:e,requestMethods:d,requestPaths:c,levels:i,environments:p,branches:m,statusCodes:u,sessionIds:x,traceIds:g,forceEmpty:!v,invocationIds:f}),w=(0,s.useMemo)(()=>{let e;return e=b?.rows,J.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:s??0}}).sort((e,t)=>t.count-e.count)},[b]),S=w.length,{trackFilterUse:N}=z();return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:R.default.filterContent,count:h.length,onClearFilter:()=>j({caches:void 0,preset:null}),onExpand:()=>y(!0),title:"Cache",children:(0,t.jsx)(et.LogFilter,{hideSearch:!0,isCountLoading:C,onChange:e=>{j({preset:null,caches:e.sort()}),N({eventTrigger:"filter click",filter:"vercelCaches",value:e.sort()})},options:w,searchId:"search-cache",searchLabel:"Search cache",searchPlaceholder:"Search cache…",selectedOptions:h,showSelectedOptionsAtTop:!0,totalAvailableOptions:S})})}function eN(){let{filters:{levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,domains:n,routes:i,requestMethods:u,requestPaths:p,statusCodes:m,caches:h,environments:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},setFilters:y}=(0,D.useLogsQueryState)(),[b,C]=(0,s.useState)(""),{trackFilterUse:w}=z(),[S,N]=(0,s.useState)(!1),{data:k,isLoading:L}=q({attributeName:"requestMethod",levels:e,deploymentDomains:r,deploymentIds:a,sources:l,requestTags:o,routes:i,requestPaths:p,statusCodes:m,caches:h,domains:n,environments:x,branches:g,sessionIds:f,traceIds:j,forceEmpty:!S,invocationIds:v}),T=(0,s.useMemo)(()=>{let e,t=(e=k?.rows,Z.map(t=>{let s=e?.find(e=>e.attributeValue===t.value)?.total;return{label:t.label,value:t.value,count:s??0}}).sort((e,t)=>t.count-e.count));return b?(0,ev.matchSorter)(t,b,{keys:["value"],sorter:e=>e.sort((e,t)=>t.item.count-e.item.count)}):t},[b,k]),E=k?.availableOptions??0;return(0,t.jsx)(_.Disclosure,{buttonClassName:R.default.fakeSideBorders,contentClassName:(0,d.clsx)(R.default.filterContent),count:u.length,"data-testid":(0,c.tid)("logs","request-method-filter"),onClearFilter:()=>y({requestMethods:void 0,preset:null}),onExpand:()=>N(!0),title:"Request Method",children:(0,t.jsx)(et.LogFilter,{isCountLoading:L,onChange:e=>{w({eventTrigger:"filter click",filter:"requestMethods",value:e.sort()}),y({requestMethods:e.sort(),preset:null})},onSearch:C,options:T,searchId:"search-request-method",searchLabel:"Search request methods",searchPlaceholder:"Search request methods…",selectedOptions:u,showSelectedOptionsAtTop:!0,totalAvailableOptions:E})})}function ek(e){let{isLoadingEnvs:s,allEnvironments:a}=e,{hasActiveFilters:l}=(0,D.useLogsQueryState)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(r.Stack,{align:"center",className:R.default.titleContainer,direction:"row",justify:"space-between",children:[(0,t.jsx)(r.Stack,{children:(0,t.jsx)(eI,{})}),(0,t.jsx)(r.Stack,{direction:"row",gap:2,children:l()&&(0,t.jsx)(eF,{size:"small"})})]}),(0,t.jsx)(eD,{allEnvironments:a,isLoadingEnvs:s})]})}function eL(e){let{isLoadingEnvs:r,allEnvironments:a,active:l,...o}=e,n=(0,x.useIsMobile)(),[i,d]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(!l){let e=setTimeout(()=>{d(!0)},500);return()=>clearTimeout(e)}d(!1)},[l]),(l||!i)&&n)?(0,t.jsx)(eT,{active:l,allEnvironments:a,isLoadingEnvs:r,...o}):null}function eT(e){let{isLoadingEnvs:s,allEnvironments:a,active:l,onDismiss:o}=e,{hasActiveFilters:n}=(0,D.useLogsQueryState)();return(0,t.jsxs)(w.Modal.Modal,{active:l,"data-testid":(0,c.tid)("group-logs","filters-modal"),drawerHeight:"max",drawerVerticalScroll:!0,onClickOutside:o,children:[(0,t.jsx)(w.Modal.Body,{className:R.default.modalBody,children:(0,t.jsxs)(r.Stack,{className:R.default.modalMain,children:[n()?(0,t.jsx)(r.Stack,{className:(0,d.clsx)("geist-show-on-mobile",R.default.filterContent,R.default.first),gap:2,children:(0,t.jsx)(eF,{})}):null,(0,t.jsx)(eD,{allEnvironments:a,isLoadingEnvs:s})]})}),(0,t.jsx)(w.Modal.Actions,{children:(0,t.jsx)(w.Modal.Action,{"data-testid":(0,c.tid)("group-logs","filters-modal-apply"),fullWidth:!0,onClick:o,children:"Apply"})})]})}function eE(e){let{onClick:s}=e,{hasActiveFilters:r}=(0,D.useLogsQueryState)();return(0,t.jsxs)("div",{className:(0,d.clsx)("lg:hidden","relative"),children:[(0,t.jsx)(i.Button,{"aria-label":"Log Filters",className:R.default.modalActiveButton,"data-testid":(0,c.tid)("group-logs","filters-modal-button"),passthroughOnClick:s,shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(b.SettingsSliders,{})}),r()&&(0,t.jsx)("div",{className:R.default.modalActiveButtonDot})]})}function eI(){return(0,t.jsx)(C.Text,{className:R.default.title,size:14,weight:600,children:"Filters"})}function eD(e){let{isLoadingEnvs:s,allEnvironments:r}=e;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ej,{}),(0,t.jsx)(es,{}),(0,t.jsx)(ew,{allEnvironments:r,isLoadingEnvs:s}),(0,t.jsx)(ep,{}),(0,t.jsx)(eC,{}),(0,t.jsx)(eb,{}),(0,t.jsx)(er,{}),(0,t.jsx)(ea,{}),(0,t.jsx)(el,{}),(0,t.jsx)(eN,{}),(0,t.jsx)(eS,{}),(0,t.jsx)(e_,{}),(0,t.jsx)(eu,{})]})}function eF(e){let{onClick:s,...r}=e,{setFilters:a,setState:l}=(0,D.useLogsQueryState)(),o=(0,x.useIsMobile)(),{isDeploymentEditable:n}=(0,en.usePageConfig)();return(0,t.jsx)(i.Button,{onClick:e=>{let t={preset:null,levels:void 0,sources:void 0,domains:void 0,routes:void 0,requestPaths:void 0,requestIds:void 0,searchQuery:o?void 0:"",requestMethods:void 0,statusCodes:void 0,caches:void 0,branches:void 0,environments:void 0,myLogs:void 0,hasTraces:void 0,traceIds:void 0,sessionIds:void 0,invocationIds:void 0};n&&(t.deploymentDomains=void 0,t.deploymentIds=void 0),a(t),l({startDate:void 0,endDate:void 0,page:1,timeline:void 0}),s?.(e)},touchEventWorkaround:!0,type:"secondary",...r,children:"Reset"})}var eM=e.i(6436416),eq=e.i(4203388),eA=e.i(1635782),eR=e.i(8488604),eO=e.i(9981955),eP=e.i(1331642),eB=e.i(1318155),e$=e.i(5495572),ez=e.i(1803487),eW=e.i(8290327),eH=e.i(4237550),eG=e.i(3979315),eV=e.i(6041174),eU=e.i(4946541),eQ=e.i(584439),eX=e.i(8069802),eZ=e.i(2362802),eJ=e.i(104622),eK=e.i(4583851),eY=e.i(5530481),e0=e.i(9536255),e1=e.i(3514588),e2=e.i(2714359),e5=e.i(8188445),e3=e.i(5938635),e4=e.i(6726897),e6=e.i(7489541),e9=e.i(587741),e8=e.i(6413586);function e7(){return(0,t.jsxs)("svg",{fill:"none",height:"48",viewBox:"0 0 48 48",width:"48",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("rect",{fill:"#FAFAFA",height:"48",rx:"24",width:"48"}),(0,t.jsx)("path",{d:"M29 30.6667V22.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M24 30.6667V17.3333",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),(0,t.jsx)("path",{d:"M19 30.6667V25.6667",stroke:"black",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})}var te=e.i(7767556),tt=e.i(2332196);function ts(){let e=(0,m.useSearchParams)();return(0,F.tokenizeSearchQuery)(e?.get("searchQuery")??"")}var tr=e.i(5677047),ta=e.i(3821772),tl=e.i(6606445),to=e.i(1296535);function tn(e){return+(0,S.toDate)(e)>Date.now()}var ti=e.i(1183506),td=e.i(986386);e.i(9576255);var tc=e.i(329718),tu=e.i(555528),tp=e.i(6465700),tm=e.i(1573239),th=e.i(5773051),tx=e.i(3297728),tg=e.i(8743152);function tf(e){let{type:s,className:r}=e,a={className:r};return"blob"===s?(0,t.jsx)(tx.Blob,{...a}):"edge-config"===s?(0,t.jsx)(tg.EdgeConfig,{...a}):null}function tj(e){let{requestMethod:s,icon:r}=e;return(0,t.jsxs)("span",{className:"inline-flex flex-row items-center gap-1 rounded-sm border border-gray-300 px-1 font-mono text-xs font-medium uppercase text-gray-800",children:[r,s]})}function tv(e){let{statusCode:s,reason:r}=e,a=(0,th.getStatusCodeType)(s),l=null,o=null,n={fill:"none",height:"6",viewBox:"0 0 6 6",width:"6",xmlns:"http://www.w3.org/2000/svg"};return a===th.StatusType["2XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("circle",{cx:"3",cy:"3",fill:"#46A758",r:"2"})}):a===th.StatusType["3XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("circle",{cx:"3",cy:"3",fill:"#0070F3",r:"2"})}):a===th.StatusType["4XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("path",{d:"M3 0.5L5.59808 5H0.401924L3 0.5Z",fill:"#FF990A"})}):a===th.StatusType["5XX"]?l=(0,t.jsx)("svg",{...n,children:(0,t.jsx)("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"#CA2A30"})}):-1===s&&(r?(l=(0,t.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-red-900)"}),(0,t.jsx)("line",{stroke:"var(--ds-red-900)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),o=`Fetch failed with reason: ${r}`):(l=(0,t.jsxs)("svg",{fill:"none",height:"8",viewBox:"0 0 8 8",width:"8",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"4",cy:"4",r:"2.5",stroke:"var(--ds-gray-800)"}),(0,t.jsx)("line",{stroke:"var(--ds-gray-800)",x1:"0.896447",x2:"7.26041",y1:"7.14645",y2:"0.782486"})]}),o="Timed out while waiting for a response")),(0,t.jsx)(tu.Tooltip,{delay:!1,text:o??(0,t.jsx)(tr.StatusCodeBadge,{full:!0,monochrome:!0,statusCode:s}),children:l})}var ty=e.i(1235226);function tb(e){let{className:s}=e;return(0,t.jsxs)("div",{className:(0,ty.twMerge)("flex items-center text-gray-300",s),children:[(0,t.jsx)("div",{className:"absolute h-[7px] w-full border-x border-current"}),(0,t.jsx)("div",{className:"absolute h-px w-full bg-current"})]})}function tC(e){let{startTime:s,endTime:r,className:a,traces:l}=e;return(0,t.jsx)("div",{className:(0,ty.twMerge)("relative flex items-center text-gray-600",a),children:(0,t.jsxs)("div",{className:"relative mx-0.5 flex size-full items-center",children:[(0,t.jsx)(tb,{}),l.map((e,a)=>{let{traceStart:l,traceEnd:o,className:n}=e,i=(l-s)/(r-s)*100,c=(o-l)/(r-s)*100,u=`${i.toString()+c.toString()+a.toString()}`;return(0,t.jsxs)("div",{className:"relative ml-px mr-[2px] flex w-full",children:[(0,t.jsx)("div",{style:{width:`${i}%`}}),(0,t.jsx)(tu.Tooltip,{delay:!1,position:"top",text:`Started after ${l-s}ms`,children:(0,t.jsx)("div",{className:(0,d.clsx)("absolute my-6 mr-1 h-[5px] min-w-[2px] rounded-[1px] bg-current",n),style:{width:`${c}%`}})})]},u)})]})})}var tw=e.i(254629),t_=e.i(2567082);let tS=["cache-get","cache-set","fetch-set","fetch-get"],tN={"cache-get":"GET","cache-set":"SET","fetch-get":"GET","fetch-set":"SET"};function tk(e){let{fetchType:s}=e;return tS.includes(s)?(0,t.jsxs)("span",{className:"relative inline-flex items-center gap-1 rounded-sm bg-gray-100 px-1 py-px font-mono text-xs uppercase text-gray-800",children:[(0,t.jsx)("svg",{fill:"none",height:"13",viewBox:"0 0 12 13",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{clipRule:"evenodd",d:"M2.47653 1.08941C3.40636 0.717474 4.65234 0.5 6 0.5C7.34766 0.5 8.59364 0.717474 9.52347 1.08941C9.98683 1.27475 10.3995 1.50951 10.7056 1.79898C11.0129 2.08957 11.25 2.47411 11.25 2.9375V6.5V10.0625C11.25 10.5259 11.0129 10.9104 10.7056 11.201C10.3995 11.4905 9.98683 11.7253 9.52347 11.9106C8.59364 12.2825 7.34766 12.5 6 12.5C4.65234 12.5 3.40636 12.2825 2.47653 11.9106C2.01317 11.7253 1.60045 11.4905 1.29437 11.201C0.987098 10.9104 0.75 10.5259 0.75 10.0625V6.5V2.9375C0.75 2.47411 0.987098 2.08957 1.29437 1.79898C1.60045 1.50951 2.01317 1.27475 2.47653 1.08941ZM1.875 4.49811V6.5C1.875 6.55438 1.90024 6.66309 2.06737 6.82115C2.23568 6.98033 2.50943 7.14959 2.89434 7.30356C3.66105 7.61024 4.75882 7.8125 6 7.8125C7.24118 7.8125 8.33895 7.61024 9.10566 7.30356C9.49057 7.14959 9.76432 6.98033 9.93263 6.82115C10.0998 6.66309 10.125 6.55438 10.125 6.5V4.49811C9.93882 4.60473 9.7365 4.70038 9.52347 4.78559C8.59364 5.15753 7.34766 5.375 6 5.375C4.65234 5.375 3.40636 5.15753 2.47653 4.78559C2.2635 4.70038 2.06118 4.60473 1.875 4.49811ZM10.125 2.9375C10.125 2.99188 10.0998 3.10059 9.93263 3.25865C9.76432 3.41783 9.49057 3.58709 9.10566 3.74106C8.33895 4.04774 7.24118 4.25 6 4.25C4.75882 4.25 3.66105 4.04774 2.89434 3.74106C2.50943 3.58709 2.23568 3.41783 2.06737 3.25865C1.90024 3.10059 1.875 2.99188 1.875 2.9375C1.875 2.88312 1.90024 2.77441 2.06737 2.61635C2.23568 2.45717 2.50943 2.28791 2.89434 2.13394C3.66105 1.82726 4.75882 1.625 6 1.625C7.24118 1.625 8.33895 1.82726 9.10566 2.13394C9.49057 2.28791 9.76432 2.45717 9.93263 2.61635C10.0998 2.77441 10.125 2.88312 10.125 2.9375ZM10.125 8.06061C9.93882 8.16723 9.7365 8.26288 9.52347 8.34809C8.59364 8.72003 7.34766 8.9375 6 8.9375C4.65234 8.9375 3.40636 8.72003 2.47653 8.34809C2.2635 8.26288 2.06118 8.16723 1.875 8.06061V10.0625C1.875 10.1169 1.90024 10.2256 2.06737 10.3836C2.23568 10.5428 2.50943 10.7121 2.89434 10.8661C3.66105 11.1727 4.75882 11.375 6 11.375C7.24118 11.375 8.33895 11.1727 9.10566 10.8661C9.49057 10.7121 9.76432 10.5428 9.93263 10.3836C10.0998 10.2256 10.125 10.1169 10.125 10.0625V8.06061Z",fill:"#8F8F8F",fillRule:"evenodd"})}),tN[s]]}):null}function tL(e){let{title:s,children:r}=e;return(0,t.jsxs)("div",{className:"flex flex-1 flex-col items-start gap-1",children:[(0,t.jsx)("div",{className:"text-gray-700",children:s}),(0,t.jsx)("div",{children:r})]})}function tT(e){let{cache:s}=e,r=s.hit?"HIT":"MISS";return(0,t.jsxs)("div",{className:"flex flex-col gap-1 gap-y-2 overflow-hidden",children:["VSC_GET"===s.type?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tL,{title:"Cache Status",children:s.stale>0?"Stale":r}),s.revalidated>0?(0,t.jsx)(tL,{title:"Revalidated",children:"YES"}):null,0!==s.age?(0,t.jsx)(tL,{title:"Age",children:(0,t_.default)(1e3*s.age)}):null]}):null,s.revalidate_after>0?(0,t.jsxs)(tL,{title:"Revalidate After",children:[(0,tw.formatDistanceStrict)(0,1e3*s.revalidate_after)," ",s.revalidate_after>1e3&&s.revalidate_after<1e5?(0,t.jsxs)("span",{className:"text-gray-700",children:["(",s.revalidate_after,"s)"]}):null]}):null,s.tags.length>0?(0,t.jsx)(tL,{title:"Tags",children:(0,t.jsx)("div",{className:"flex flex-wrap gap-1 overflow-y-scroll",children:s.tags.map(e=>(0,t.jsx)(eo.Badge,{className:"normal-case",size:"sm",variant:"blue",children:e},e))})}):null]})}let tE="inline-block flex-1 cursor-pointer truncate bg-transparent p-0 text-left text-[12px] font-mono";function tI(e){let s,{request:r,additionalMetrics:a,startTime:l,endTime:o,createCopyHandler:n,longestMethodLength:i,shouldConnectToNext:c,lite:u,onUpgradePressed:p}=e,h=(0,m.useParams)(),x=(0,th.getStatusCodeType)(r.http_status),g=`${r.request_hostname}${r.request_path}`,{isRuntimeCache:f,requestType:j,isRevalidate:v}=(0,th.resolveRuntimeCacheProps)(g,r),{store:y,isStore:b,isLoading:C}=(0,th.useGetStoreFromHostname)(r.request_hostname,r.request_path),w=g;g.endsWith("_vercel/insights/event")&&(w="Web Analytics Event"),th.SUSPENSE_CACHE_HOSTNAME_REGEX.test(g)&&(w=v?"Revalidate Cache":f?r.cache_item_id||"Runtime Cache":"Data Cache"),(th.readFromCache.includes(r.fetch_type)||f&&"cache-get"===j)&&c&&(w=`Reading Cache${404===r.http_status?" (Miss)":""}`),(th.writeToCache.includes(r.fetch_type)||f&&"cache-set"===j)&&(w="Updating Cache"),!C&&b&&y&&h&&(w=`${y.name}`,s=`/${h.teamSlug}/~/stores/${y.type}/${y.id}`);let _=n(g),S=tS.includes(r.fetch_type)||f&&!v&&!!j,N=!c&&(th.readFromCache.includes(r.fetch_type)||f&&"cache-get"===j),k=(0,t.jsxs)(t.Fragment,{children:[N?(0,t.jsx)("span",{className:"border-indigo-500 mr-1 border-r pr-1 text-gray-900",children:"Using cache"}):null,(0,t.jsx)("span",{className:(0,d.clsx)("truncate",s&&"hover:underline",N?"text-gray-700":"text-gray-900"),children:C?(0,t.jsx)(eh.Skeleton,{as:"span",height:15,width:36}):w})]});return(0,t.jsxs)("div",{className:(0,d.clsx)("grid-cols-[8fr,1fr]","group relative grid h-[24px] w-full  items-center gap-2 border-none bg-transparent transition-opacity duration-200 ease-in-out"),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-1 truncate",children:[(0,t.jsxs)("div",{className:"flex items-center",style:{...i&&{minWidth:`calc(${i}ch + 1px)`}},children:[c?(0,t.jsx)("div",{className:"absolute bottom-1 left-[9.5px] h-2 w-[1.5px] translate-y-full bg-gray-300"}):null,S?(0,t.jsx)(tk,{fetchType:f?j||"":r.fetch_type}):(0,t.jsx)(tj,{icon:y?(0,t.jsx)(tf,{className:"size-3",type:y.type}):void 0,requestMethod:r.request_method})]}),s?(0,t.jsx)(eZ.Link,{className:(0,d.clsx)(tE,"no-underline"),href:s,children:k}):(0,t.jsxs)("button",{className:(0,d.clsx)(tE,"flex"),onClick:_,onKeyPress:_,type:"button",children:[k,S&&r.cache?(0,t.jsx)(tu.Tooltip,{text:(0,t.jsx)(tT,{cache:r.cache}),tooltipClassName:"tailwind-preflight",children:(0,t.jsx)(tp.InformationFillSmall,{className:"ml-2"})}):null]}),(0,t.jsx)("div",{className:"flex gap-1",children:u?(0,t.jsx)(t.Fragment,{children:-1===r.http_status?(0,t.jsx)(tu.Tooltip,{text:(0,t.jsx)("span",{children:"Timed out while waiting for a response"}),wrap:!0,children:(0,t.jsx)("span",{className:"relative text-xs tabular-nums text-red-900",children:"Timeout"})}):(0,t.jsx)(tr.StatusCodeBadge,{statusCode:r.http_status,variant:"small"})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(tv,{reason:r.reason,statusCode:r.http_status}),(0,t.jsx)("span",{className:"relative text-xs tabular-nums text-gray-1000",children:(0,th.formatMilliseconds)(r.duration)})]})})]}),u?(0,t.jsx)(tu.Tooltip,{text:(0,t.jsx)("span",{children:"Unlock latency insights with Observability Plus"}),wrap:!0,children:(0,t.jsxs)("button",{"aria-label":"Upgrade to Observability Plus to unlock latency insights",className:"group/lock relative flex h-4 w-full cursor-pointer appearance-none items-center border-none bg-transparent p-0 text-gray-500 focus:outline-none",onClick:()=>{p&&p()},type:"button",children:[(0,t.jsx)("div",{className:"absolute left-1/2 z-10 mx-auto mb-0.5 flex size-4 -translate-x-1/2 justify-center rounded-sm px-1 transition-colors duration-100 ease-in-out group-hover/lock:bg-gray-300 group-hover/lock:text-gray-800",children:(0,t.jsx)(tm.LockClosedSmall,{})}),(0,t.jsx)(tb,{className:"transition-colors duration-100 ease-in-out group-hover/lock:text-gray-500"})]})}):(0,t.jsx)(tC,{className:(0,d.clsx)("min-w-[20px] flex-1",x===th.StatusType["2XX"]&&"text-green-800",x===th.StatusType["3XX"]&&"text-blue-700",x===th.StatusType["4XX"]&&"text-amber-800",x===th.StatusType["5XX"]&&"text-red-800",-1===r.http_status&&(r.reason?"text-red-900":"text-gray-800")),endTime:o,startTime:l,traces:a?a.map(e=>{let t=(0,th.getStatusCodeType)(e.http_status);return{className:(0,d.clsx)(t===th.StatusType["2XX"]&&"!bg-green-800",t===th.StatusType["3XX"]&&"!bg-blue-700",t===th.StatusType["4XX"]&&"!bg-amber-800",t===th.StatusType["5XX"]&&"!bg-red-800"),traceStart:e.timestamp,traceEnd:e.timestamp+e.duration}}):[{traceStart:r.timestamp,traceEnd:r.timestamp+r.duration}]})]})}function tD(e){let{requests:r,startTime:a,endTime:l,createCopyHandler:o,longestMethodLength:n}=e,[i,d]=(0,s.useState)(!1),c={startTime:a,endTime:l,createCopyHandler:o,longestMethodLength:n};return 1===r.length?(0,t.jsx)(tI,{...c,request:r[0]}):(0,t.jsx)(t.Fragment,{children:r.map((e,t)=>(0,s.createElement)(tI,{...c,key:t,request:e,shouldConnectToNext:(0,th.checkIfShouldConnectToNext)(r,t)}))})}function tF(e){let{requests:r,startTime:a,endTime:l,className:o}=e,n=(0,eQ.useToasts)(),i=(0,x.useIsMobile)(),c=(0,s.useCallback)(e=>t=>{!i&&("key"in t&&"Enter"!==t.key||((0,e5.copyToClipboard)(e),n.success("Request path copied to clipboard")))},[n,i]),{startTime:u,endTime:p}=(0,s.useMemo)(()=>({startTime:Math.min(...r.map(e=>e.timestamp),a),endTime:Math.max(...r.map(e=>e.timestamp+e.duration),l),totalTime:l-a}),[l,r,a]),m=(0,s.useMemo)(()=>{let e=!1,t=!1,s=r.reduce((s,r)=>(tS.includes(r.fetch_type)&&(e=!0),r.request_hostname.includes(".vercel-storage.com")&&(t=!0),r.request_method.length>s)?r.request_method.length:s,0);return t?s+2:e?s+1:s},[r]),h=(0,s.useMemo)(()=>{let e={};return r.forEach((t,s)=>{let r=-1===t.fetch_idx?`${t.request_hostname}${t.request_path}-${t.fetch_idx}-${s}`:`${t.fetch_idx}`;e[r]||(e[r]=[]),e[r].push(t)}),Object.values(e).sort((e,t)=>e[0].timestamp-t[0].timestamp)},[r]);return(0,t.jsx)("div",{className:(0,d.clsx)("relative",o),children:h.map(e=>(0,t.jsx)(tD,{createCopyHandler:c,endTime:p,longestMethodLength:Math.max(m,3),requests:e,startTime:u},`${e[0].timestamp}${e[0].fetch_idx}${e[0].request_path}${e[0].request_hostname}`))})}function tM(e){let{requests:r,className:a,onUpgradePressed:l}=e,o=(0,eQ.useToasts)(),n=(0,x.useIsMobile)(),i=(0,s.useCallback)(e=>t=>{!n&&("key"in t&&"Enter"!==t.key||((0,e5.copyToClipboard)(e),o.success("Request path copied to clipboard")))},[o,n]);return(0,t.jsx)("div",{className:(0,d.clsx)("relative mx-2",a),children:r.map(e=>(0,t.jsx)(tI,{createCopyHandler:i,endTime:0,lite:!0,longestMethodLength:4,onUpgradePressed:l,request:e,startTime:0},`${e.fetch_idx}${e.request_path}${e.request_hostname}`))})}function tq(e){let{projectId:a,requestId:l,source:o,startTime:n,endTime:i,enableDataCacheMetrics:d,disableHeader:c,pathType:u}=e,{hasObservabilityPlusAccessOnCurrentProject:p}=(0,td.useHasObservabilityPlus)(),m=(0,tc.useOpenEnableModal)(),{loading:x,data:g,isAwaitingData:f}=function(e){let{requestId:t,projectId:s,source:r,timestamp:a,pathType:l}=e,{team:o}=(0,h.useAccount)(),n=o?.billing?.plan,i=(0,to.addSeconds)(new Date(a),20),d=(0,k.default)(()=>o&&s&&t&&n&&"hobby"!==n?`${T.API_LOGS_FETCH_METRICS}${(0,L.encode)({ownerId:o.id,requestId:t,projectId:s,source:r,pathType:l})}`:null,e=>(0,ti.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tn(i)});return{data:d.data?.data,loading:d.isValidating,error:d.error,isAwaitingData:tn(i)}}({projectId:a,requestId:l,source:"request"!==o?o:void 0,timestamp:n.getTime(),pathType:u}),j=g?.some(e=>e.fetch_type.startsWith("cache-")),{data:v}=function(e){let{requestId:t,projectId:s,timestamp:r,shouldLoad:a}=e,{team:l}=(0,h.useAccount)(),o=l?.billing?.plan,n=(0,to.addSeconds)(new Date(r),15),i=(0,k.default)(()=>l&&s&&t&&o&&"hobby"!==o&&a?`${T.API_LOGS_CACHE_METRICS}${(0,L.encode)({ownerId:l.id,requestId:t,projectId:s})}`:null,e=>(0,ti.fetchAPI)(e,{throwOnHTTPError:!0}),{revalidateOnFocus:!1,refreshInterval:()=>1e3*!!tn(n)});return{data:i.data?.data,loading:i.isValidating,error:i.error,isAwaitingData:tn(n)}}({projectId:a,requestId:l,timestamp:n.getTime(),shouldLoad:d&&j}),y=(0,s.useMemo)(()=>{let e=[...v??[]];return v?g?.map(t=>{let s=e.find(e=>{if(t.cache_item_id===e.item_id&&t.fetch_type.startsWith("cache-")){let s=t.fetch_type.split("-")[1];return e.type.includes(s.toUpperCase())}return!1});return s?(e.splice(e.findIndex(e=>e.item_id===s.item_id),1),{...t,cache:s}):t}):g},[g,v]),b=g&&g.length>0,w=(0,s.useCallback)(()=>{m({from:"observability",via:"request-metrics"}),(0,tl.track)("Observability Upsell Clicked",{region:"logs-request-metrics"})},[m]),_=(0,s.useMemo)(()=>f&&!b?(0,t.jsxs)(r.Stack,{align:"center",className:"mr-0.5",direction:"row",gap:2,children:[(0,t.jsx)(ta.Spinner,{size:16}),(0,t.jsx)(C.Text,{className:"text-gray-800",children:"Awaiting data"})]}):x&&!b?(0,t.jsx)(eh.Skeleton,{as:"dd",className:"ml-2",height:20,width:30}):b?p?(0,t.jsx)(tF,{className:"min-w-[50px] flex-1 rounded",endTime:i.getTime(),requests:y??[],startTime:n.getTime()}):(0,t.jsx)(tM,{className:"min-w-[50px] flex-1 rounded",endTime:i.getTime(),onUpgradePressed:w,requests:y??[],startTime:n.getTime()}):(0,t.jsx)(C.Text,{className:"mr-0.5 text-right text-gray-800",children:"No outgoing requests"}),[f,x,b,p,i,y,n,w]);return(0,t.jsx)("div",{className:"tailwind-preflight",children:c?_:(0,t.jsxs)(r.Stack,{className:"w-full justify-between",direction:b?"column":"row",gap:2,style:{position:"relative"},children:[(0,t.jsx)(r.Stack,{align:"center",direction:"row",gap:1,children:(0,t.jsx)(C.Text,{as:"span",color:"gray-900",size:14,children:"External APIs"})}),_]})})}var tA=e.i(1639923),tR=e.i(5172876);function tO(e){let{requestSearchParams:a,inRequestLogs:l}=e,o=(0,eQ.useToasts)(),n=`?${Object.keys(a).reduce((e,t)=>`${e}${t}=${a[t]}&`,"").slice(0,-1)}
    `,i=(0,s.useCallback)((e,t)=>{"key"in e&&"Enter"!==e.key||((0,e5.copyToClipboard)(t),o.success(`Copied '${t.split("=")[0]}' param and value to clipboard`))},[o]);return(0,t.jsx)("div",{className:"tailwind-preflight",children:(0,t.jsxs)(r.Stack,{className:(0,d.clsx)("pb-4 pt-2",!l&&"ml-3 border-t"),direction:"column",gap:2,style:{position:"relative"},children:[(0,t.jsxs)(r.Stack,{align:"center",className:(0,d.clsx)("mx-2"),direction:"row",justify:"space-between",children:[(0,t.jsx)(C.Text,{as:"dt",color:"gray-900",style:{flexShrink:0},children:"Search Params"}),(0,t.jsx)(tR.default,{label:"Copy",shape:"square",style:{width:"28px",height:"28px"},textToCopy:n,title:"Copy full search params to the clipboard",type:"tertiary"})]}),(0,t.jsx)("ul",{className:"mx-2 flex flex-wrap gap-2",children:Object.keys(a).map(e=>{let s=a[e];try{s=decodeURIComponent(a[e])}catch(e){}return(0,t.jsxs)("li",{className:"inline-flex max-w-full cursor-pointer overflow-hidden rounded-sm border border-gray-300 text-xs",onClick:t=>i(t,`${e}=${s}`),onKeyDown:t=>i(t,`${e}=${s}`),children:[(0,t.jsx)("span",{className:"inline-block whitespace-nowrap bg-transparent px-1.5 py-1 text-left font-mono text-[12px]",title:e,children:e}),(0,t.jsx)("span",{className:"inline-flex items-center overflow-hidden border-l bg-background-200 px-1.5 py-0.5 font-mono text-xs font-medium text-gray-900",children:(0,t.jsx)("span",{className:"truncate",title:s,children:s})})]},e)})})]})})}var tP=e.i(4005541),tB=e.i(6700141),t$=e.i(3277953),tz=e.i(3920197),tW=e.i(4968913),tH=e.i(1843097),tG=e.i(6168969),tV=e.i(345358),tU=e.i(7179748);let tQ=(0,V.withNewIcon)('<path fill-rule="evenodd" clip-rule="evenodd" d="M2.72876 6.42462C3.40596 4.15488 5.51032 2.5 8.00002 2.5C10.0902 2.5 11.9092 3.66566 12.8405 5.38592L13.1975 6.04548L14.5166 5.33138L14.1596 4.67183C12.9767 2.48677 10.6625 1 8.00002 1C5.05453 1 2.53485 2.81872 1.50122 5.39447V3.75V3H0.0012207V3.75V7.17462C0.0012207 7.58883 0.337007 7.92462 0.751221 7.92462H4.17584H4.92584V6.42462H4.17584H2.72876ZM13.2713 9.57538H11.8243H11.0743V8.07538H11.8243H15.2489C15.6631 8.07538 15.9989 8.41117 15.9989 8.82538V12.25V13H14.4989V12.25V10.6053C13.4653 13.1812 10.9456 15 8.00002 15C5.35065 15 3.04619 13.5279 1.85809 11.3605L1.49757 10.7029L2.8129 9.98181L3.17342 10.6395C4.10882 12.3458 5.92017 13.5 8.00002 13.5C10.4897 13.5 12.5941 11.8451 13.2713 9.57538Z" fill="currentColor"/>');var tX=e.i(663357),tZ=e.i(5847686),tJ=e.i(1202246),tK=e.i(8472248),tY=e.i(707929),t0=e.i(6632657);let t1=(0,s.forwardRef)(function(e,s){return(0,t.jsx)("div",{className:t0.default.headerContainer,ref:s,children:(0,t.jsxs)(r.Stack,{align:"center",className:(0,d.clsx)(t0.default.rowContainer,t0.default.header),direction:"row",children:[(0,t.jsx)("div",{className:t0.default.rowItem,style:{flexShrink:0,paddingLeft:16,width:166},children:"Time"}),(0,t.jsx)("div",{className:t0.default.rowItem,style:{flexShrink:0,width:"72px"},children:"Status"}),(0,t.jsx)("div",{className:(0,d.clsx)(t0.default.rowItem,t0.default.truncate),style:{minWidth:"12%",maxWidth:"12%"},children:"Host"}),(0,t.jsx)("div",{className:(0,d.clsx)(t0.default.rowItem,t0.default.truncate),style:{paddingLeft:"35px",minWidth:"calc(max(12%,180px) + 50px)",maxWidth:"calc(400px + 50px)"},children:"Request"}),(0,t.jsx)("div",{className:(0,d.clsx)(t0.default.rowItem,t0.default.truncate),children:"Messages"})]})})});function t2(e){let{logRows:a=[],selectedLogId:l,onRowSelect:o}=e,{state:{live:n,paused:i}}=(0,D.useLogsQueryState)(),u=(0,s.useRef)(!1),p=ts(),m=(0,s.useRef)(void 0);(0,s.useEffect)(()=>{a.length>0&&(m.current=new Date(a[0].timestamp).getTime()+1)},[a]);let[h,x]=(0,s.useState)({state:"disabled"});(0,s.useEffect)(()=>n?void x(e=>"enabled"!==e.state?{state:"enabled",ts:m.current||Date.now()}:e):i?void x(e=>({state:"paused",ts:e.ts||Date.now()})):void x(e=>({state:"disabled",ts:e.ts})),[n,i]);let g="disabled"!==h.state&&h.ts?a.findIndex(e=>new Date(e.timestamp).getTime()<h.ts):a.length;"paused"===h.state&&0===g&&(g=a.length);let f=a.slice(0,g),j=a.slice(g);(0,s.useEffect)(()=>{function e(e){"Tab"===e.key&&(u.current=!0)}function t(e){"Tab"===e.key&&(u.current=!1)}return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]);let{teamSlug:v,projectSlug:y}=(0,ed.useProjectAndTeamSlug)(),{data:b}=(0,ei.useRollingRelease)({teamIdOrSlug:v,projectSlug:y}),C=b?.rollingRelease?.state==="ACTIVE"?b.rollingRelease.canaryDeployment:null;return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(r.Stack,{className:"tailwind-preflight","data-testid":(0,c.tid)("group-logs","log-rows"),direction:"column",flex:"auto",onFocus:e=>{u.current&&e.target.scrollIntoView({block:"center"})},children:[f.map(e=>{let t=e.requestId===l;return(0,s.createElement)(t3,{...e,highlightedWords:p,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,moveUp:!!(h.ts&&new Date(e.timestamp).getTime()<h.ts),onSelect:o})}),j.length>0?(0,t.jsx)("div",{className:(0,d.clsx)(t0.default.liveModeRow,{[t0.default.paused]:"paused"===h.state}),children:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(tK.PlayFill,{size:10})," Live Mode"]})},h.ts):null,j.map(e=>{let t=e.requestId===l;return(0,s.createElement)(t3,{...e,faded:"enabled"===h.state,highlightedWords:p,isCanary:e.deploymentId===C?.id,isSelected:t,key:e.requestId,onSelect:o,previouslyFaded:!!(h.ts&&new Date(e.timestamp).getTime()<h.ts),reverseBackground:!0})})]})})}function t5(e){let{level:s}=e;switch(s){case"fatal":return(0,t.jsx)(tW.Stop,{"aria-hidden":"true"});case"warning":return(0,t.jsx)(t$.Warning,{"aria-hidden":"true"});case"error":return(0,t.jsx)(tz.CrossCircle,{"aria-hidden":"true"});default:return(0,t.jsx)("div",{style:{width:"16px",height:"16px"}})}}let t3=(0,s.memo)(function(e){let{onSelect:r,isCanary:a,isSelected:l,highlightedWords:o,isNew:n,faded:i,previouslyFaded:c,moveUp:u,reverseBackground:p,...m}=e,h=(0,s.useRef)(null),{value:x}=(0,tB.useEnableAnsiLogs)();(0,s.useEffect)(()=>{h.current&&h.current.scrollIntoView({block:"center"})},[h]);let{resolvedTheme:g}=(0,tU.useTheme)(),f=new Date(m.timestamp),j=new Set([...m.events].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()).map(e=>{let t=e.source;return"static"===t&&m.events.some(e=>"PRERENDER"===e.cache)&&(t="data-cache"),"serverless"===t&&"middleware"===e.pathType&&(t="serverless-middleware"),t})),v=()=>void(0,eJ.awaitPaint)().then(()=>r(m)),y=(0,s.useMemo)(()=>m.hasFunctionCrashed?"fatal":m.statusCode>=500?"error":m.statusCode>=400?"warning":"info",[m.statusCode,m.hasFunctionCrashed]),b=(0,s.useMemo)(()=>{let e=m.logs.toSorted((e,t)=>{let{timestamp:s}=e,{timestamp:r}=t;return new Date(s).getTime()-new Date(r).getTime()}).reverse(),t=e.find(e=>{let{level:t}=e;return"error"===t});if(t)return{style:"text-red-900",text:t.message};let s=e.find(e=>{let{level:t}=e;return"warning"===t});return s?{style:"text-amber-900",text:s.message}:{style:"text-gray-1000",text:e[0]?.message??""}},[m.logs]);return(0,t.jsxs)("div",{className:(0,d.clsx)("flex items-center py-[3px]",t0.default.rowContainer,t0.default[y],{[t0.default.faded]:i,[t0.default.previouslyFaded]:c,[t0.default.moveUp]:u,[t0.default.reverseBackground]:p,[t0.default.isSelected]:l,[t0.default.isNew]:n,[t0.default.darkTheme]:"dark"===g},m.className),"data-log-row-id":m.requestId,onClick:()=>v(),onKeyDown:e=>{"Enter"===e.key&&v()},ref:l?h:void 0,tabIndex:0,children:[(0,t.jsx)("div",{className:"relative flex items-center justify-center pl-2",children:(0,t.jsx)(t5,{level:y})}),(0,t.jsx)("div",{className:(0,d.clsx)(t0.default.rowItem,t0.default.uppercase,t0.default.truncate),style:{flexShrink:0},children:(0,t.jsxs)(tY.EllapsedTimeTooltip,{content:{timestamp:f.getTime()},children:[(0,t.jsx)("span",{className:"opacity-60",children:(0,eV.format)(f,"MMM dd ")}),(0,t.jsx)("span",{className:"opacity-100",children:(0,eV.format)(f,"HH:mm:ss")}),(0,t.jsx)("span",{className:"opacity-60",children:(0,eV.format)(f,".SS")})]})}),(0,t.jsxs)("div",{className:t0.default.rowItem,style:{flexShrink:0,width:"72px",justifyContent:"space-between"},children:[(0,t.jsx)(tr.RequestMethodBadge,{method:m.requestMethod,variant:"small"}),(0,t.jsx)(tr.StatusCodeBadge,{statusCode:m.statusCode,variant:"small"})]}),(0,t.jsxs)("div",{className:(0,d.clsx)(t0.default.rowItem),style:{minWidth:"12%",maxWidth:"12%"},children:[a?(0,t.jsx)("div",{style:{opacity:.6,paddingRight:"3px"},children:(0,t.jsx)(eo.Badge,{size:"sm",variant:"green-subtle",children:"Canary"})}):null,(0,t.jsx)(st,{text:m.domain})]}),(0,t.jsx)("div",{className:"ml-4 px-2",children:(0,t.jsx)("div",{className:"-space-x-px flex justify-end",style:{width:"25px",height:"16px",opacity:.6},children:Array.from(j).map((e,s,r)=>(0,t.jsx)("div",{style:s!==r.length-1?{clipPath:"path('M13.7639 0H0V16.7324C0.294173 16.9026 0.635713 17 1 17H15C15.1543 17 15.3045 16.9825 15.4487 16.9495C14.0552 16.6906 13 15.4685 13 14V2C13 1.23165 13.2889 0.530757 13.7639 0Z')"}:{},children:(0,t.jsx)(tu.Tooltip,{text:Q.find(t=>t.value===e)?.label,children:(0,t.jsx)(ss,{type:e})})},e))})}),(0,t.jsx)("div",{className:"flex min-w-[max(12%,180px)]  max-w-[400px] items-center justify-start truncate pr-2",children:(0,t.jsx)(e0.HighlightText,{className:"truncate",search:o,text:m.requestPath})}),m.logs.length>0&&(0,t.jsxs)("div",{className:(0,d.clsx)(t0.default.rowItem,t0.default.separated,t0.default.truncate,"shrink",b.style),children:[m.logs.length>1&&(0,t.jsx)("div",{className:"mr-2 rounded-full bg-gray-300 px-1 text-[11px] text-gray-800",children:m.logs.length}),x?(0,t.jsx)(tH.Ansi,{newLines:!0,renderNewLine:()=>(0,t.jsx)("span",{className:t0.default.breakSpaces,children:" "}),renderText:e=>(0,t.jsx)(e0.HighlightText,{as:"span",className:t0.default.breakSpaces,search:o,text:e}),children:b.text}):(0,t.jsx)(e0.HighlightText,{search:o,text:b.text})]})]})},(e,t)=>e.requestId===t.requestId&&e.isSelected===t.isSelected&&e.isNew===t.isNew&&e.isCanary===t.isCanary);function t4(){let e=tt.LOGS_PAGE_SIZE;return(0,t.jsx)("div",{className:"py-1",children:[...Array(e)].map((e,s)=>(0,t.jsx)(t6,{},`${Date.now()}-${s}`))})}function t6(){return(0,t.jsx)("div",{className:(0,d.clsx)("px-2 py-0.5"),children:(0,t.jsx)(r.Stack,{className:(0,d.clsx)(t0.default.rowContainer,"border-b-transparent!"),direction:"row",children:(0,t.jsx)(eh.Skeleton,{className:t0.default.rowItem,height:24,width:"100%"})})})}function t9(){let{team:e}=(0,e1.useTeam)(),{maxDurationFormatted:s,billingPlan:a}=(0,eg.useUserRetention)(),{setState:l}=(0,D.useLogsQueryState)(),o=`You have reached your ${s} of maximum retention limit.`;return(0,t.jsxs)(r.Stack,{align:"center",className:t0.default.loadingError,direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sr,{}),(0,t.jsxs)(C.Text,{color:"gray-900",size:14,style:{maxWidth:"380px"},children:[o," ",(0,t.jsx)(eZ.Link,{external:!0,href:"/docs/runtime-logs",type:"highlight",children:"Learn more"})]}),(0,t.jsx)(r.Stack,{children:"pro"===a&&e?(0,t.jsx)(eZ.ButtonLink,{href:`/${e.slug}/~/settings/billing`,size:"small",touchEventWorkaround:!0,children:"Upgrade to Enterprise"}):(0,t.jsx)(i.Button,{onClick:()=>l({timeline:"past30Minutes"}),prefix:(0,t.jsx)(tQ,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset timeline to past 30 mins"})})]})}function t8(e){let s,{errorName:r}=e;return s="WrongRequestIdFormat"===r?(0,t.jsxs)(t.Fragment,{children:["You may have input the wrong format for request id. At least a partial string is required, example:"," ",(0,t.jsx)("code",{className:"text-[10px] before:text-gray-500 before:content-['ID='] ",children:"abcde-1678961364403-a1b2c3d4f5e6"})]}):`We could not find logs for the selected filters, we've been notified
    of the issue, try to clear your filters. If the issue persists,
    contact our support.`,(0,t.jsx)(C.Text,{className:t0.default.screenReaderSelect,color:"gray-900",size:14,style:{maxWidth:"380px"},tabIndex:0,children:s})}function t7(e){let{error:s}=e,{setFilters:a}=(0,D.useLogsQueryState)(),l=(0,x.useIsMobile)(),{isDeploymentEditable:o}=(0,en.usePageConfig)();return"ExceedsBillingLimitError"===s.name?(0,t.jsx)(t9,{}):(0,t.jsxs)(r.Stack,{align:"center",className:t0.default.loadingError,direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sr,{}),(0,t.jsx)(t8,{errorName:s.name}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(i.Button,{onClick:()=>{let e={levels:void 0,sources:void 0,caches:void 0,domains:void 0,routes:void 0,requestMethods:void 0,requestPaths:void 0,statusCodes:void 0,environments:void 0,branches:void 0,requestIds:void 0,deploymentDomains:void 0,timeline:"past30Minutes"};o&&(e.deploymentDomains=void 0,e.deploymentIds=void 0),l||(e.searchQuery=""),a(e)},prefix:(0,t.jsx)(tQ,{color:"currentColor"}),size:"small",type:"secondary",children:"Reset filters"})})]})}function se(){let{filters:{hasTraces:e},hasActiveFilters:s,setFilters:a}=(0,D.useLogsQueryState)(),{mutate:l}=(0,tt.useGroupLogs)(),o=s();return(0,t.jsxs)(r.Stack,{align:"center",className:t0.default.loadingError,"data-testid":(0,c.tid)("group-logs","no-logs"),direction:"column",gap:6,justify:"center",children:[(0,t.jsx)(sr,{icon:o?"logs":"function"}),(0,t.jsx)(C.Text,{className:t0.default.screenReaderSelect,color:"gray-900",size:14,style:{maxWidth:"380px"},tabIndex:0,children:o?`No ${e?"traces":"logs"} found for the selected filters`:"There are no runtime logs in this time range"}),(0,t.jsx)(r.Stack,{direction:{sm:"column",md:"row"},gap:4,children:o?(0,t.jsxs)(t.Fragment,{children:[e?(0,t.jsx)(eZ.ButtonLink,{href:"/docs/session-tracing",size:"small",children:"Get Started"}):(0,t.jsx)(i.Button,{onClick:()=>a({},!0,!0),size:"small",children:"Reset Filters"}),(0,t.jsx)(i.Button,{onClick:()=>void l(),size:"small",type:"secondary",children:"Refresh"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Button,{onClick:()=>void l(),size:"small",children:"Refresh Query"}),(0,t.jsx)(eZ.ButtonLink,{href:"/docs/runtime-logs",size:"small",tab:!0,type:"secondary",children:"Learn More"})]})})]})}function st(e){let{text:r}=e,[a,l]=(0,s.useState)(!1),o=(0,s.useRef)(null),n=(0,x.useIsMobile)();return(0,s.useLayoutEffect)(()=>{if(!o.current||n)return;let e=new ResizeObserver(e=>{for(let t of e){let e=t.target;l(e.offsetWidth<e.scrollWidth)}});return e.observe(o.current),()=>{e.disconnect()}},[o,n]),(0,t.jsx)(tu.Tooltip,{className:t0.default.tooltipContainer,delayTime:100,desktopOnly:!0,forceHide:!a,lowerDelay:!0,maxWidth:"100%",style:{display:"flex",alignItems:"center",minWidth:0},tabIndex:null,text:r,tooltipClassName:t0.default.tooltip,children:(0,t.jsx)("div",{className:t0.default.truncate,ref:o,children:r})})}function ss(e){let{type:s}=e;switch(s){case"request":return(0,t.jsx)(tJ.File,{size:16});case"serverless":return(0,t.jsx)(G.FunctionSquare,{size:16});case"serverless-middleware":case"edge-middleware":return(0,t.jsx)(H.FunctionMiddleware,{size:16});case"edge-function":return(0,t.jsx)(W.FunctionEdge,{size:16});case"data-cache":return(0,t.jsx)(eP.DataCache,{size:16});case"external":return(0,t.jsx)(eO.ArrowGlobe,{size:16});default:return(0,t.jsx)(U,{size:16})}}function sr(e){let{icon:s="logs"}=e;return(0,t.jsx)(tX.EmptyState.Icon,{icon:"function"===s?(0,t.jsx)(G.FunctionSquare,{}):(0,t.jsx)(tZ.Logs,{}),size:40})}var sa=e.i(226017),sl=e.i(967652);let so=()=>{let{selectedTrace:e}=(0,sl.useLogs)();return e};var sn=e.i(1095718),si=e.i(2921318);function sd(e){let{level:s}=e;switch(s){case"fatal":return(0,t.jsx)(tW.Stop,{"aria-hidden":"true",className:"-ml-1"});case"warning":return(0,t.jsx)(t$.Warning,{"aria-hidden":"true"});case"error":return(0,t.jsx)(tz.CrossCircle,{"aria-hidden":"true"});default:return(0,t.jsx)("div",{style:{width:"16px",height:"16px"}})}}function sc(e){let{text:s}=e,r=(0,eQ.useToasts)();return(0,t.jsx)(i.Button,{"aria-label":"Copy Log",className:"!size-[30px] !text-current opacity-65 hover:opacity-100",onClick:()=>{(0,e5.copyToClipboard)(s),r.message({text:"Log message copied to clipboard",preserve:!1})},size:"small",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(eq.Copy,{})})}function su(e){let{timestamp:s,message:r,level:a,error:l,onShowError:o}=e,n=ts(),i=`${r.replaceAll("\r","\n")}`,{value:u}=(0,tB.useEnableAnsiLogs)(),p=(0,sa.useServerFlag)("enable-observability-error-dashboard",!1);return(0,t.jsxs)("div",{className:(0,d.clsx)("log-message","group -mt-px flex flex-col border-y py-1.5 pl-4 pr-2 font-mono text-[13px] @[480px]:flex-row @[480px]:gap-3",{info:"text-gray-1000 bg-background-200",error:"-my-px border-y border-red-300 bg-red-100 text-red-900",warning:"-my-px border-y border-amber-300 bg-amber-100 text-amber-900",fatal:"border-l-4 border-l-red-900 -my-px border-y border-red-300 text-red-900 bg-gradient-to-r from-red-400 to-red-100 to-5%"}[a]),children:[(0,t.jsxs)("div",{className:"flex items-center @[480px]:items-start",children:[(0,t.jsx)("div",{className:(0,d.clsx)("mr-2  mt-[2px] flex @[480px]:mt-[5px] @[480px]:size-4","info"===a&&"hidden @[480px]:block"),children:(0,t.jsx)(sd,{level:a})}),(0,t.jsxs)("span",{className:"select-none whitespace-nowrap pt-px font-mono",children:[(0,tP.isToday)(new Date(s))?null:(0,t.jsxs)("span",{className:"uppercase opacity-65",children:[(0,eV.format)(new Date(s),"MMM dd")," "]}),(0,t.jsx)("span",{className:"opacity-75",children:(0,eV.format)(new Date(s),"HH:mm:ss")}),(0,t.jsx)("span",{className:"opacity-50",children:(0,eV.format)(new Date(s),".SSS")})]}),(0,t.jsx)("div",{className:"flex flex-1 justify-end @[480px]:hidden",children:(0,t.jsx)(sc,{text:i})})]}),(0,t.jsx)("span",{className:"flex-1 whitespace-pre-wrap break-all pt-px","data-testid":(0,c.tid)("group-logs","detail-message"),children:u?(0,t.jsx)(tH.Ansi,{newLines:!0,renderText:e=>(0,t.jsx)(e0.HighlightText,{as:"span",search:n,text:e}),children:i}):(0,t.jsx)(e0.HighlightText,{search:n,text:i})}),p&&"error"===a&&l?(0,t.jsxs)("button",{className:"sticky top-11 -mx-1 -mr-2 flex h-[30px] cursor-pointer flex-row items-center gap-1 whitespace-nowrap rounded-md border border-[hsla(var(--ds-red-700-value),0.2)] bg-[hsla(var(--ds-red-800-value),0.1)] px-2 py-1 font-sans text-red-900 transition-colors duration-100 ease-in-out hover:bg-[hsla(var(--ds-red-800-value),0.3)]",onClick:()=>o?.(l),type:"button",children:[(0,t.jsx)(eA.Eye,{size:16}),(0,t.jsxs)("span",{children:["Seen ",new Intl.NumberFormat().format(l.countErrors)," times"]})]}):null,"fatal"===a?(0,t.jsx)("div",{className:"flex items-center",children:(0,t.jsx)(eo.Badge,{variant:"red",size:"sm",children:"Fatal"})}):null,(0,t.jsx)("div",{className:(0,d.clsx)("-my-0.5 hidden opacity-0 group-hover:opacity-100 @[480px]:block focus-within:focus-visible:opacity-100"),children:(0,t.jsx)(sc,{text:i})})]})}function sp(e){let{logs:s,source:r,onShowError:a}=e;return(0,t.jsxs)("div",{className:"relative flex flex-col",children:[(0,t.jsxs)("div",{className:"sticky -top-px z-10 -mt-px flex select-none flex-row gap-2 border-y bg-background-100 px-4 py-2",children:[(0,t.jsx)(ss,{type:r}),(0,t.jsx)(C.Text,{color:"gray-1000",size:13,weight:500,children:Q.find(e=>e.value===r)?.label??r})]}),(0,t.jsx)("div",{className:"flex flex-col @container",children:s.map((e,s)=>(0,t.jsx)(su,{error:e.error,level:e.level,message:e.message,onShowError:a,timestamp:e.timestamp},`${e.timestamp}-${s}`))})]})}function sm(e){let{onToggleCollapse:r,collapsed:a}=e,l=(0,eQ.useToasts)(),[o,n]=(0,s.useState)(!1),{data:c}=(0,e8.useSelectedLog)(),u=so(),p=(0,m.useParams)(),h=(0,s.useMemo)(()=>{let e=u?.spans.find(e=>e.spanId===u.rootSpanId);if(!e)return"";let[t,s]=e.duration,r=1e3*t+s/1e6;return r>1e3?`${new Intl.NumberFormat(void 0,{maximumFractionDigits:2}).format(.001*r)}s`:`${Math.round(r)}ms`},[u]),x=o&&c?.traceId?"trace":"logs",[g,f]=(0,s.useState)(null),[j,v]=(0,s.useState)(null),{data:y}=(0,tG.useErrors)(),b=(0,s.useCallback)(()=>{let e=!a;r?.(e)},[a,r]);if((0,si.useHotkey)(b,"l"),(0,s.useEffect)(()=>{if(!c)return;let e=c.logs.some(e=>null===g||e.level===g);g&&!e&&f(null)},[c,g]),(0,s.useEffect)(()=>{let e=e=>{if(a)return;let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());if((e.metaKey||e.ctrlKey)&&"a"===e.key&&!s){e.preventDefault();let t=document.querySelectorAll(".log-message"),s=document.createRange();if(t.length>0){s.setStartBefore(t[0]),s.setEndAfter(t[t.length-1]);let e=window.getSelection();e?.removeAllRanges(),e?.addRange(s)}}};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a]),!c)return null;let w=c.logs.reduce((e,t)=>{e[t.source]||(e[t.source]=[]);let s=y?.rows.find(e=>sh(t.message)===sh(e.errorName)),r={...t,error:s};return e[t.source].push(r),e},{}),_=c.logs.reduce((e,t)=>(e[t.level]=(e[t.level]||0)+1,e),{info:0,warning:0,error:0,fatal:0}),S=Object.values(_).filter(e=>e>0).length,N=S>1||1===S&&_.info>0,k=Object.entries(Object.entries(w).reduce((e,t)=>{let[s,r]=t,a=g?r.filter(e=>e.level===g):r;return a.length>0&&(e[s]=a),e},{})).sort((e,t)=>{let[,s]=e,[,r]=t,a=s[0]?.timestamp??"",l=r[0]?.timestamp??"";return new Date(a).getTime()-new Date(l).getTime()}),L=!!r;return(0,t.jsx)("div",{className:(0,d.clsx)("flex h-full flex-1 flex-col transition-all duration-200 ease-in-out sm:flex-initial"),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:(0,d.clsx)("flex items-center justify-between border-b bg-background-100 py-2 pr-2",j?"pl-4":"pl-1"),onClick:e=>{e.target!==e.currentTarget||j||b()},children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:L?j?(0,t.jsxs)("header",{className:"text-heading-14",children:["Error Details",(0,t.jsx)(eo.Badge,{className:"ml-2",children:"Internal"})]}):(0,t.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[(0,t.jsx)("div",{className:"flex flex-row items-center gap-1",children:(0,t.jsx)("button",{className:(0,d.clsx)("text-button-14 rounded px-3 py-1.5 transition-colors",c.traceId&&"cursor-pointer hover:bg-gray-200",c.traceId&&"logs"===x?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),n(!1),a&&b()},type:"button",children:"Logs"})}),c.traceId?(0,t.jsx)("button",{className:(0,d.clsx)("text-button-14 cursor-pointer rounded px-3 py-1.5 transition-colors hover:bg-gray-200","trace"===x?"bg-gray-100":"bg-transparent"),onClick:e=>{e.stopPropagation(),n(!0),a&&b()},type:"button",children:"Trace"}):null]}):null}),L?(0,t.jsx)("div",{className:"flex items-center gap-1",children:j?(0,t.jsx)(i.Button,{"aria-label":"Close Error Details",onClick:()=>v(null),svgOnly:!0,size:"small",type:"tertiary",shape:"square",children:(0,t.jsx)(eG.Cross,{size:16})}):(0,t.jsxs)("div",{className:"flex flex-row items-center gap-2",children:["logs"===x?(0,t.jsxs)(t.Fragment,{children:[N?(0,t.jsxs)(eo.Badge,{className:"cursor-pointer",onClick:()=>f(null),size:"sm",variant:"gray-subtle",children:[c.logs.length," Total"]}):null,_.warning>0&&(0,t.jsxs)(eo.Badge,{className:"cursor-pointer",onClick:()=>f("warning"===g?null:"warning"),size:"sm",variant:"warning"===g?"amber":"amber-subtle",children:[_.warning," Warning"]}),_.error>0&&(0,t.jsxs)(eo.Badge,{className:"cursor-pointer",onClick:()=>f("error"===g?null:"error"),size:"sm",variant:"error"===g?"red":"red-subtle",children:[_.error," Error"]}),_.fatal>0&&(0,t.jsxs)(eo.Badge,{className:`cursor-pointer border ${"fatal"===g?"border-red-900":"border-red-700"}`,onClick:()=>f("fatal"===g?null:"fatal"),size:"sm",variant:"red",children:[_.fatal," Fatal"]}),c.logs.length>0?(0,t.jsx)(i.Button,{"aria-label":"Copy Logs",onClick:()=>{(0,e5.copyToClipboard)(c.logs.map(e=>`${e.timestamp} [${e.level}] ${e.message}`).join("\n")),l.message({text:`Copied ${c.logs.length} log message${1===c.logs.length?"":"s"} to clipboard`,preserve:!1})},size:"small",shape:"square",svgOnly:!0,type:"tertiary",children:(0,t.jsx)(eq.Copy,{size:16})}):null]}):(0,t.jsxs)(t.Fragment,{children:[u?(0,t.jsx)(eo.Badge,{size:"sm",variant:"gray-subtle",children:h}):null,p&&c.traceId?(0,t.jsx)(eZ.ButtonLink,{"aria-label":"Open Trace in New tab",className:"-mr-2",href:`/${p.teamSlug}/${p.project}/logs/traces/${c.traceId}`,svgOnly:!0,target:"_blank",type:"tertiary",width:42,children:(0,t.jsx)(eB.External,{})}):null]}),(0,t.jsx)(i.Button,{"aria-label":a?"Expand Logs Panel":"Collapse Logs Panel",onClick:b,svgOnly:!0,type:"tertiary",size:"small",shape:"square",children:a?(0,t.jsx)(eW.ChevronUp,{size:16}):(0,t.jsx)(eH.ChevronDown,{size:16})})]})}):null]}),j?(0,t.jsx)(tV.ErrorCard,{row:j,showGoToErrors:!0,styles:"sticky z-50 w-4/5 inset-0 rounded-none font-sans h-full text-gray-1000 shadow-none border-none"}):null,"trace"===x?(0,t.jsx)(sn.TraceViewerTimeline,{trace:u,height:"100%"}):c.logs.length>0&&!a?(0,t.jsx)("div",{className:(0,d.clsx)("relative flex flex-1 flex-col overflow-y-auto"),children:k.map(e=>{let[s,r]=e;return(0,t.jsx)(sp,{logs:r.sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),onShowError:e=>v(e),source:s},s)})}):!a&&(0,t.jsx)("div",{className:"flex h-full items-center justify-center bg-background-200 p-8",children:(0,t.jsx)(C.Text,{color:"gray-900",size:14,children:"No logs found for this request"})})]})})}function sh(e){let t="";for(let s of[/^\s*⨯ \[(.{3,}?)\] {/,/^\s*⨯ (.{3,}?)(\r\n|\r|\n|$)/,/^\s*(.{3,}?)(\r\n|\r|\n|$)/]){let r=e.match(s);if(r?.[1]){t=r[1];break}}if(!t)return e;let s=t.replace(/\s+/g," ").trim();return(s=(s=s.replace(/(http|ftp|https):\/\/([\w_-]+(?:(?:\.[\w_-]+)+))([\w.,@?^=%&:\/~+#-]*[\w@?^=%&\/~+#-])?/g,"<url>")).replace(/-?\d+\s*(milliseconds?|seconds?|minutes?|mins?|hours?|days?|ms|s|m|h|d)/gi,"<duration>")).replace(/-?\d+/g,"<number>")}function sx(){let e=so();return(0,t.jsx)(sn.TraceViewer,{height:"100%",trace:e})}function sg(e){return!!e&&("string"==typeof e&&"-"!==e&&""!==e||"number"==typeof e&&-1!==e)}let sf=e=>"STALE"===e.cache||"PRERENDER"===e.cache;function sj(e){let{className:s}=e;return(0,t.jsx)("div",{className:(0,d.default)("absolute left-6 h-16 w-3.5 border-[1.5px] border-r-0 border-gray-400 ",s)})}function sv(e){let{direction:s,through:r,lineClassName:a,className:l,children:o}=e;return(0,t.jsxs)("div",{className:(0,d.default)("relative flex items-center overflow-hidden",o?"h-10 pl-9":"h-2",l),children:["straight"===s?(0,t.jsx)(sj,{className:(0,d.default)(a)}):(0,t.jsxs)(t.Fragment,{children:[r?(0,t.jsx)(sj,{className:(0,d.default)("h-40 rounded-none border-y-0","up"===s?"top-0":"bottom-[47.5%]","dashed"===r&&"top-[55%] border-dashed")}):null,"up"===s&&(0,t.jsx)(sj,{className:(0,d.default)(a,"bottom-1/2 translate-y-px rounded-l")}),"down"===s&&(0,t.jsx)(sj,{className:(0,d.default)(a,"top-1/2 -translate-y-px rounded-l-md")})]}),(0,t.jsx)("div",{className:"relative flex items-center",children:o})]})}function sy(e){let{hasFunctionCrashed:s}=e;return(0,t.jsx)(sv,{className:"mb-2",direction:"up",children:(0,t.jsx)(tr.RequestFinishedBadge,{hasFunctionCrashed:s})})}let sb=new Map([["nodejs",{name:"Node.js",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=`${r}_mask0`,l=`${r}_mask1`,o=`${r}_mask2`,n=`${r}_paint0_linear`,i=`${r}_paint1_linear`,d=`${r}_paint2_linear`;return(0,t.jsxs)("svg",{fill:"none",height:"18",viewBox:"0 0 14 16",width:"16",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsx)("path",{clipRule:"evenodd",d:"M6.91226 6.4202C6.95713 6.39383 7.01268 6.39383 7.05755 6.4202L8.26282 7.11829C8.30789 7.14449 8.33546 7.19271 8.33546 7.24481V8.64248C8.33546 8.69458 8.30789 8.7428 8.26282 8.769L7.05755 9.46709C7.01268 9.49346 6.95713 9.49346 6.91226 9.46709L5.70773 8.769C5.66213 8.74331 5.63381 8.69498 5.63361 8.64248V7.24481C5.63361 7.19271 5.66029 7.14449 5.70625 7.11829L6.91226 6.4202Z",fill:"#689F63",fillRule:"evenodd"}),(0,t.jsx)("mask",{height:"16",id:a,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M6.62322 0.101176L0.377445 3.72068C0.143899 3.85581 -1.28246e-05 4.10586 8.5718e-10 4.3765V11.6206C8.5718e-10 11.891 0.143506 12.1409 0.377445 12.2764L6.62367 15.8987C6.85722 16.0338 7.14471 16.0338 7.37826 15.8987L13.6234 12.2764C13.8564 12.1408 13.9999 11.8909 14 11.6206V4.3765C14 4.10619 13.8562 3.85613 13.622 3.72068L7.37767 0.101176C7.14355 -0.0337253 6.85571 -0.0337253 6.62159 0.101176",fill:"white"})}),(0,t.jsxs)("g",{mask:`url(#${a})`,children:[(0,t.jsx)("path",{d:"M20.2158 3.09495L2.61633 -5.56644L-6.40765 12.9165L11.1914 21.5783L20.2158 3.09495Z",fill:`url(#${n})`}),(0,t.jsx)("mask",{height:"16",id:l,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M0.148193 12.0591C0.207938 12.137 0.282656 12.2044 0.370569 12.255L5.72833 15.3622L6.62079 15.8772C6.75422 15.9546 6.90632 15.9873 7.05576 15.9762C7.10557 15.9721 7.15538 15.9628 7.20401 15.9489L13.7914 3.83876C13.741 3.78368 13.6819 3.73754 13.6158 3.69884L9.5262 1.32771L7.36442 0.0788888C7.303 0.0439129 7.23718 0.0173793 7.16873 0L0.148193 12.0591Z",fill:"white"})}),(0,t.jsx)("g",{mask:`url(#${l})`,children:(0,t.jsx)("path",{d:"M-7.45789 5.63936L4.96918 22.5265L21.4042 10.335L8.97638 -6.55164L-7.45789 5.63936Z",fill:`url(#${i})`})}),(0,t.jsx)("mask",{height:"16",id:o,"mask-type":"alpha",maskUnits:"userSpaceOnUse",width:"14",x:"0",y:"0",children:(0,t.jsx)("path",{d:"M6.82612 0.00282809C6.7199 0.0136004 6.61712 0.0466642 6.52444 0.0998762L0.296448 3.70896L7.01218 15.9903C7.10558 15.9769 7.19749 15.9457 7.28051 15.8974L13.5263 12.2751C13.7171 12.1642 13.8503 11.9753 13.891 11.7577L7.04479 0.0151824C6.99451 0.00512223 6.94337 3.71091e-05 6.8921 0C6.87134 0 6.85058 0.00104193 6.82983 0.00297693",fill:"white"})}),(0,t.jsx)("g",{mask:`url(#${o})`,children:(0,t.jsx)("path",{d:"M-0.0454712 -0.00238037V16.0731H14.0383V-0.00238037H-0.0454712Z",fill:`url(#${d})`})})]}),(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:n,x1:"11.2743",x2:"2.24575",y1:"-1.24934",y2:"17.0954",children:[(0,t.jsx)("stop",{offset:"0.3",stopColor:"#3E863D"}),(0,t.jsx)("stop",{offset:"0.5",stopColor:"#55934F"}),(0,t.jsx)("stop",{offset:"0.8",stopColor:"#5AAD45"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:i,x1:"-1.114",x2:"15.2951",y1:"14.1796",y2:"2.10394",children:[(0,t.jsx)("stop",{offset:"0.57",stopColor:"#3E863D"}),(0,t.jsx)("stop",{offset:"0.72",stopColor:"#619857"}),(0,t.jsx)("stop",{offset:"1",stopColor:"#76AC64"})]}),(0,t.jsxs)("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"-0.0406827",x2:"14.041",y1:"8.03582",y2:"8.03582",children:[(0,t.jsx)("stop",{offset:"0.16",stopColor:"#6BBF47"}),(0,t.jsx)("stop",{offset:"0.38",stopColor:"#79B461"}),(0,t.jsx)("stop",{offset:"0.47",stopColor:"#75AC64"}),(0,t.jsx)("stop",{offset:"0.7",stopColor:"#659E5A"}),(0,t.jsx)("stop",{offset:"0.9",stopColor:"#3E863D"})]})]})]})},{"aria-hidden":"true"})}],["go",{name:"Go",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,t.jsx)("svg",{height:"10px",version:"1.1",viewBox:"0 0 261 99",width:"29px",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fill:"#2DBCAF",fillRule:"nonzero",id:"Go-Logo_Aqua",children:[(0,t.jsx)("path",{d:"M19.5076142,29.4191457 C19,29.4191457 18.8730964,29.1559878 19.1269036,28.761251 L21.7918782,25.2086194 C22.0456853,24.8138825 22.680203,24.5507246 23.1878173,24.5507246 L68.4923858,24.5507246 C69,24.5507246 69.1269036,24.9454615 68.8730964,25.3401983 L66.715736,28.761251 C66.4619289,29.1559878 65.8274112,29.5507246 65.4467005,29.5507246 L19.5076142,29.4191457 Z",id:"Path"}),(0,t.jsx)("path",{d:"M0.509858443,41.5507246 C0,41.5507246 -0.127464611,41.2804544 0.127464611,40.875049 L2.80422144,37.2264003 C3.05915066,36.8209949 3.69647371,36.5507246 4.20633215,36.5507246 L62.3301946,36.5507246 C62.8400531,36.5507246 63.0949823,36.95613 62.9675177,37.3615354 L61.9478008,40.6047787 C61.8203362,41.1453192 61.3104777,41.4155895 60.8006193,41.4155895 L0.509858443,41.5507246 Z",id:"Path"}),(0,t.jsx)("path",{d:"M31.5021645,53.4191457 C31,53.4191457 30.8744589,53.0244088 31.1255411,52.629672 L32.8831169,49.3401983 C33.1341991,48.9454615 33.6363636,48.5507246 34.1385281,48.5507246 L59.2467532,48.5507246 C59.7489177,48.5507246 60,48.9454615 60,49.4717773 L59.7489177,52.629672 C59.7489177,53.1559878 59.2467532,53.5507246 58.8701299,53.5507246 L31.5021645,53.4191457 Z",id:"Path"}),(0,t.jsx)("g",{id:"CXHf1q_1_",transform:"translate(69.000000, 0.550725)",children:(0,t.jsxs)("g",{id:"Group",children:[(0,t.jsx)("path",{d:"M94.0875,27.3038462 C86.0881579,29.3346154 80.6282895,30.8576923 72.7559211,32.8884615 C70.8513158,33.3961538 70.7243421,33.5230769 69.0736842,31.6192308 C67.1690789,29.4615385 65.7723684,28.0653846 63.1059211,26.7961538 C55.1065789,22.8615385 47.3611842,24.0038462 40.1236842,28.7 C31.4894737,34.2846154 27.0453947,42.5346154 27.1723684,52.8153846 C27.2993421,62.9692308 34.2828947,71.3461538 44.3138158,72.7423077 C52.9480263,73.8846154 60.1855263,70.8384615 65.8993421,64.3653846 C67.0421053,62.9692308 68.0578947,61.4461538 69.3276316,59.6692308 C64.7565789,59.6692308 59.0427632,59.6692308 44.8217105,59.6692308 C42.1552632,59.6692308 41.5203947,58.0192308 42.4092105,55.8615385 C44.0598684,51.9269231 47.1072368,45.3269231 48.8848684,42.0269231 C49.2657895,41.2653846 50.1546053,39.9961538 52.0592105,39.9961538 C58.5348684,39.9961538 82.4059211,39.9961538 98.2776316,39.9961538 C98.0236842,43.4230769 98.0236842,46.85 97.5157895,50.2769231 C96.1190789,59.4153846 92.6907895,67.7923077 87.1039474,75.1538462 C77.9618421,87.2115385 66.0263158,94.7 50.9164474,96.7307692 C38.4730263,98.3807692 26.9184211,95.9692308 16.7605263,88.3538462 C7.36447368,81.2461538 2.03157895,71.8538462 0.634868421,60.1769231 C-1.01578947,46.3423077 3.04736842,33.9038462 11.4276316,22.9884615 C20.4427632,11.1846154 32.3782895,3.69615385 46.9802632,1.03076923 C58.9157895,-1.12692308 70.3434211,0.269230769 80.6282895,7.25 C87.3578947,11.6923077 92.1828947,17.7846154 95.3572368,25.1461538 C96.1190789,26.2884615 95.6111842,26.9230769 94.0875,27.3038462 Z",id:"Path"}),(0,t.jsx)("path",{d:"M136.115789,97.4923077 C124.561184,97.2384615 114.022368,93.9384615 105.134211,86.3230769 C97.6427632,79.85 92.9447368,71.6 91.4210526,61.8269231 C89.1355263,47.4846154 93.0717105,34.7923077 101.705921,23.4961538 C110.975,11.3115385 122.148684,4.96538462 137.258553,2.3 C150.209868,0.0153846154 162.399342,1.28461538 173.446053,8.77307692 C183.476974,15.6269231 189.698684,24.8923077 191.349342,37.0769231 C193.507895,54.2115385 188.555921,68.1730769 176.747368,80.1038462 C168.367105,88.6076923 158.082237,93.9384615 146.273684,96.35 C142.845395,96.9846154 139.417105,97.1115385 136.115789,97.4923077 Z M166.335526,46.2153846 C166.208553,44.5653846 166.208553,43.2961538 165.954605,42.0269231 C163.669079,29.4615385 152.114474,22.3538462 140.051974,25.1461538 C128.243421,27.8115385 120.625,35.3 117.831579,47.2307692 C115.546053,57.1307692 120.371053,67.1576923 129.513158,71.2192308 C136.496711,74.2653846 143.480263,73.8846154 150.209868,70.4576923 C160.240789,65.2538462 165.700658,57.1307692 166.335526,46.2153846 Z",id:"Shape"})]})})]})})})},{"aria-hidden":"true"})}],["python",{name:"Python",logo:(0,t.jsx)(eY.default,{"aria-hidden":"true"})}],["ruby",{name:"Ruby",logo:(0,t.jsx)(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(0,s.useId)(),a=Array(15).fill().map((e,t)=>`${r}_linearGradient-${t}`);return(0,t.jsxs)("svg",{height:"15px",version:"1.1",viewBox:"0 0 100 100",width:"15px",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,t.jsxs)("defs",{children:[(0,t.jsxs)("linearGradient",{id:a[0],x1:"84.7503645%",x2:"58.2543962%",y1:"111.399353%",y2:"64.5837087%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FB7655"}),(0,t.jsx)("stop",{offset:"41%",stopColor:"#E42B1E"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#990000"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#990000"})]}),(0,t.jsxs)("linearGradient",{id:a[1],x1:"116.651024%",x2:"1.74616041%",y1:"60.8903211%",y2:"19.2879503%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,t.jsxs)("linearGradient",{id:a[2],x1:"75.7744024%",x2:"38.9781357%",y1:"219.327131%",y2:"7.82868176%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#871101"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#911209"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#911209"})]}),(0,t.jsxs)("linearGradient",{id:a[3],x1:"50.012428%",x2:"66.4830414%",y1:"7.23449921%",y2:"79.1354134%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"23%",stopColor:"#E57252"}),(0,t.jsx)("stop",{offset:"46%",stopColor:"#DE3B20"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A60003"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A60003"})]}),(0,t.jsxs)("linearGradient",{id:a[4],x1:"46.1741749%",x2:"49.9323342%",y1:"16.347907%",y2:"83.0468449%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"23%",stopColor:"#E4714E"}),(0,t.jsx)("stop",{offset:"56%",stopColor:"#BE1A0D"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,t.jsxs)("linearGradient",{id:a[5],x1:"36.9653573%",x2:"49.5282324%",y1:"15.5936471%",y2:"92.4776332%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"18%",stopColor:"#E46342"}),(0,t.jsx)("stop",{offset:"40%",stopColor:"#C82410"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D00"})]}),(0,t.jsxs)("linearGradient",{id:a[6],x1:"13.6086166%",x2:"85.7636612%",y1:"58.3456855%",y2:"-46.7167814%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"54%",stopColor:"#C81F11"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#BF0905"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#BF0905"})]}),(0,t.jsxs)("linearGradient",{id:a[7],x1:"27.6242038%",x2:"50.7445145%",y1:"21.1345847%",y2:"79.0557818%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"31%",stopColor:"#DE4024"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#BF190B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#BF190B"})]}),(0,t.jsxs)("linearGradient",{id:a[8],x1:"-20.6671297%",x2:"104.241521%",y1:"122.281897%",y2:"-6.34211007%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#BD0012"}),(0,t.jsx)("stop",{offset:"7%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"17%",stopColor:"#FFFFFF"}),(0,t.jsx)("stop",{offset:"27%",stopColor:"#C82F1C"}),(0,t.jsx)("stop",{offset:"33%",stopColor:"#820C01"}),(0,t.jsx)("stop",{offset:"46%",stopColor:"#A31601"}),(0,t.jsx)("stop",{offset:"72%",stopColor:"#B31301"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#E82609"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#E82609"})]}),(0,t.jsxs)("linearGradient",{id:a[9],x1:"58.7919609%",x2:"11.9636556%",y1:"65.2049657%",y2:"50.1275621%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#8C0C01"}),(0,t.jsx)("stop",{offset:"54%",stopColor:"#990C00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#A80D0E"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#A80D0E"})]}),(0,t.jsxs)("linearGradient",{id:a[10],x1:"79.3194899%",x2:"23.088288%",y1:"62.7538068%",y2:"17.8876818%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#7E110B"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#9E0C00"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#9E0C00"})]}),(0,t.jsxs)("linearGradient",{id:a[11],x1:"92.8800277%",x2:"59.8414537%",y1:"74.1223655%",y2:"39.7039965%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#79130D"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#9E120B"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#9E120B"})]}),(0,t.jsxs)("radialGradient",{cx:"32.0008013%",cy:"40.2100469%",fx:"32.0008013%",fy:"40.2100469%",gradientTransform:"translate(0.320008,0.402100),scale(0.522539,1.000000),translate(-0.320008,-0.402100)",id:a[12],r:"133.14407%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#A80D00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#7E0E08"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#7E0E08"})]}),(0,t.jsxs)("radialGradient",{cx:"13.5493795%",cy:"40.859922%",fx:"13.5493795%",fy:"40.859922%",gradientTransform:"translate(0.135494,0.408599),scale(0.778453,1.000000),translate(-0.135494,-0.408599)",id:a[13],r:"113.540881%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#A30C00"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#800E08"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#800E08"})]}),(0,t.jsxs)("linearGradient",{id:a[14],x1:"56.5701955%",x2:"3.10480737%",y1:"101.716594%",y2:"11.9932603%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#8B2114"}),(0,t.jsx)("stop",{offset:"43%",stopColor:"#9E100A"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#B3100C"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#B3100C"})]}),(0,t.jsxs)("linearGradient",{id:a[15],x1:"30.8698732%",x2:"92.4707626%",y1:"35.5989756%",y2:"100.693616%",children:[(0,t.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,t.jsx)("stop",{offset:"0%",stopColor:"#B31000"}),(0,t.jsx)("stop",{offset:"44%",stopColor:"#910F08"}),(0,t.jsx)("stop",{offset:"99%",stopColor:"#791C12"}),(0,t.jsx)("stop",{offset:"100%",stopColor:"#791C12"})]})]}),(0,t.jsx)("g",{fill:"none",fillRule:"evenodd",id:"Page-1",stroke:"none",strokeWidth:"1",children:(0,t.jsxs)("g",{fillRule:"nonzero",id:"ruby",children:[(0,t.jsx)("polygon",{fill:`url(#${a[0]})`,id:"Path",points:"77.0122645 65.4278136 20.2589918 99.1275777 93.7437433 94.1410964 99.4035175 20.0432571"}),(0,t.jsx)("polygon",{fill:`url(#${a[1]})`,id:"Path",points:"93.8641535 94.0904237 87.5481442 50.4969668 70.3440559 73.2143305"}),(0,t.jsx)("polygon",{fill:`url(#${a[2]})`,id:"Path",points:"93.9494437 94.0904237 47.6773646 90.458054 20.504829 99.032755"}),(0,t.jsx)("polygon",{fill:`url(#${a[3]})`,id:"Path",points:"20.5700511 99.0422874 32.1294164 61.1733249 6.69279222 66.6123474"}),(0,t.jsx)("polygon",{fill:`url(#${a[4]})`,id:"Path",points:"70.3395405 73.3397576 59.7033189 31.6778786 29.2646604 60.2100448"}),(0,t.jsx)("polygon",{fill:`url(#${a[5]})`,id:"Path",points:"96.9902992 32.2648777 68.2173133 8.76484857 60.2050274 34.6680617"}),(0,t.jsx)("polygon",{fill:`url(#${a[6]})`,id:"Path",points:"83.5344758 0.386315593 66.6118459 9.73816318 55.9354878 0.260888453"}),(0,t.jsx)("polygon",{fill:`url(#${a[7]})`,id:"Path",points:"0 79.3151066 7.08914198 66.3860772 1.35461312 50.9836241"}),(0,t.jsx)("path",{d:"M0.973314611,50.4969668 L6.74296307,66.8627001 L31.81334,61.2380454 L60.4358134,34.6374574 L68.5133214,8.98058328 L55.7945075,0 L34.1708685,8.09255913 C27.3581679,14.4291382 14.1381473,26.9668352 13.6615241,27.2026383 C13.1899181,27.4434584 4.93179515,43.0516119 0.973314611,50.4969668 L0.973314611,50.4969668 Z",fill:"#FFFFFF",id:"Path"}),(0,t.jsx)("path",{d:"M21.2323064,21.0968451 C35.9975894,6.4569892 55.0324123,-2.19246642 62.3372889,5.17763237 C69.6376501,12.5477311 61.8957855,30.4587268 47.1305023,45.0935658 C32.3652194,59.7284045 13.5661995,68.8544832 6.26633995,61.4843842 C-1.03853672,54.1193026 6.46702339,35.7316838 21.2323064,21.0968451 L21.2323064,21.0968451 Z",fill:`url(#${a[8]})`,id:"Path"}),(0,t.jsx)("path",{d:"M20.5700511,99.0272361 L32.0391088,61.0378639 L70.1288227,73.2745355 C56.356923,86.188514 41.0397605,97.1056924 20.5700511,99.0272361 L20.5700511,99.0272361 Z",fill:`url(#${a[9]})`,id:"Path"}),(0,t.jsx)("path",{d:"M60.4859842,34.5627029 L70.2642842,73.2946038 C81.7684617,61.1984105 92.0936236,48.1941244 97.1503443,32.109348 L60.4859842,34.5627029 L60.4859842,34.5627029 Z",fill:`url(#${a[10]})`,id:"Path"}),(0,t.jsx)("path",{d:"M97.0505043,32.3050143 C100.963831,20.4947948 101.866907,3.55209662 83.4135641,0.406383936 L68.2719995,8.76986569 L97.0505043,32.3050143 L97.0505043,32.3050143 Z",fill:`url(#${a[11]})`,id:"Path"}),(0,t.jsx)("path",{d:"M0,79.1445256 C0.541845246,98.636405 14.6047363,98.9268942 20.5951365,99.0979771 L6.75801434,66.7824268 L0,79.1445256 L0,79.1445256 Z",fill:"#9E1209",id:"Path"}),(0,t.jsx)("path",{d:"M60.5406704,34.6229079 C69.3807754,40.0564118 87.1969484,50.9685728 87.5581785,51.1692563 C88.1195901,51.4853326 95.2393364,39.1633702 96.8548382,32.1996556 L60.5406704,34.6229079 L60.5406704,34.6229079 Z",fill:`url(#${a[12]})`,id:"Path"}),(0,t.jsx)("path",{d:"M32.0240575,61.0378639 L47.3562714,90.6186006 C56.422145,85.7018568 63.5213212,79.7114565 70.0234642,73.2946038 L32.0240575,61.0378639 L32.0240575,61.0378639 Z",fill:`url(#${a[13]})`,id:"Path"}),(0,t.jsx)("path",{d:"M6.69780929,66.8225633 L4.52541124,92.6906571 C8.62437017,98.2897247 14.2635744,98.7763819 20.1787184,98.3398954 C15.8991444,87.6886226 7.35003046,66.3910942 6.69780929,66.8225633 L6.69780929,66.8225633 Z",fill:`url(#${a[14]})`,id:"Path"}),(0,t.jsx)("path",{d:"M68.1821938,8.83508781 L98.6409204,13.1096448 C97.0153848,6.22118618 92.0233846,1.77604831 83.5144071,0.386315593 L68.1821938,8.83508781 L68.1821938,8.83508781 Z",fill:`url(#${a[15]})`,id:"Path"})]})})]})},{"aria-hidden":"true"})}],["v8",{name:"Edge"}]]);function sC(e){let{requestMethod:s,requestPath:a,responseStatusCode:l,onUp:o,onDown:n,onClose:d}=e;return(0,t.jsxs)(r.Stack,{align:"center",className:"ml-px p-4",direction:"row",gap:1,justify:"space-between",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:[(0,t.jsx)(C.Text,{className:te.default.title,lineHeight:16,size:13,children:(0,t.jsx)(tr.RequestMethodBadge,{method:s})}),(0,t.jsx)(C.Text,{className:te.default.title,lineHeight:16,size:13,truncate:!0,children:a})]}),(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsxs)("div",{className:"flex flex-row gap-1",style:{display:o||n?void 0:"none"},children:[(0,t.jsx)(tr.StatusCodeBadge,{statusCode:l}),(0,t.jsx)(i.Button,{"aria-label":"Up",className:te.default.ghostButton,disabled:!o,onClick:o,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eW.ChevronUp,{color:"gray-700",size:16})}),(0,t.jsx)(i.Button,{"aria-label":"Down",className:te.default.ghostButton,disabled:!n,onClick:n,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eH.ChevronDown,{color:"gray-700",size:16})})]}),(0,t.jsx)(r.Stack,{className:"geist-hide-on-mobile",direction:"row",children:(0,t.jsx)("div",{className:te.default.buttonRule})}),(0,t.jsx)(r.Stack,{children:(0,t.jsx)(i.Button,{"aria-label":"Close",onClick:d,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eG.Cross,{color:"gray-700",size:16})})})]})]})}function sw(e){let{selectedLogId:r,onClose:a}=e,l=(0,x.useIsMobile)(),[o,n]=(0,s.useState)(!1),[i,d]=(0,s.useState)(!1),{logRows:u}=(0,tt.useGroupLogs)(),{onUp:p,onDown:m,selectedLog:h}=sN({logRows:u,selectedLogId:r,onClose:a}),g=(0,s.useMemo)(()=>(0,eJ.withAwaitPaint)(a),[a]);if(!l)return null;let f=!!h?.traceId,j=h?(0,t.jsx)(sD,{logGroup:h}):null;return(0,t.jsxs)(w.Modal.Modal,{active:!!r,"data-testid":(0,c.tid)("group-logs","details-panel"),drawerClassname:"h-full [&>div]:flex [&>div]:flex-col  [&>div]:flex-1",drawerHeight:"max",onClickOutside:g,children:[h&&(0,t.jsx)(sC,{onClose:a,onDown:m,onUp:p,requestMethod:h.requestMethod,requestPath:h.requestPath,responseStatusCode:h.statusCode}),(0,t.jsx)(w.Modal.Header,{children:(0,t.jsx)(eU.Switch,{className:"mx-4 -mb-2",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eU.Switch.Control,{checked:!o&&(!f||!i),label:f?"Request":"Request Details",onClick:()=>{n(!1),d(!1)},size:"large",value:"details"}),(0,t.jsx)(eU.Switch.Control,{checked:o,label:"Logs",onClick:()=>{n(!0),d(!1)},size:"large",value:"logs"}),f&&(0,t.jsx)(eU.Switch.Control,{checked:i,label:"Trace",onClick:()=>{n(!1),d(!0)},size:"large",value:"trace"})]})})}),(0,t.jsx)(w.Modal.Body,{className:"flex flex-1 flex-col !p-0 [&>div:first-child]:flex-1",children:f&&i?(0,t.jsx)(sx,{}):o?(0,t.jsx)(sm,{collapsed:!1}):j})]})}let s_=(0,s.memo)(function(e){let{onClose:s,selectedLogId:r}=e,{logRows:a}=(0,tt.useGroupLogs)(),{onUp:l,onDown:o,selectedLog:n}=sN({logRows:a,selectedLogId:r,onClose:s});return n?(0,t.jsx)(sF,{...n,onClose:s,onDown:o,onUp:l}):(0,t.jsx)(sS,{onClose:s})},(e,t)=>e.selectedLogId===t.selectedLogId);function sS(e){let{onClose:s}=e,{data:r,error:a}=(0,e8.useSelectedLog)();return a?(0,t.jsx)(sA,{error:a}):r?(0,t.jsx)(sF,{...r,onClose:s}):(0,t.jsx)(sR,{onClose:s})}function sN(e){let{logRows:t,selectedLogId:r,onClose:a}=e,{setState:l}=(0,D.useLogsQueryState)(),o=(0,s.useRef)(null),n=r?t.findIndex(e=>e.requestId===r):-1;n>-1&&(o.current=t[n]);let i=(0,s.useMemo)(()=>n>0?()=>l({selectedLogId:t[n-1].requestId}):void 0,[l,t,n]),d=(0,s.useMemo)(()=>n<t.length-1&&-1!==n?()=>l({selectedLogId:t[n+1].requestId}):void 0,[l,t,n]);return(0,s.useEffect)(()=>{function e(e){let s=e.target&&e.target.tagName.toLowerCase();if(r&&"input"!==s&&"textarea"!==s)switch(e.key){case"ArrowUp":if(i){e.preventDefault(),i();let s=document.querySelector(`[data-log-row-id="${t[n-1].requestId}"]`);s&&(s.focus(),s.scrollIntoView({block:"center"}))}break;case"ArrowDown":if(d){e.preventDefault(),d();let s=document.querySelector(`[data-log-row-id="${t[n+1].requestId}"]`);s&&(s.focus(),s.scrollIntoView({block:"center"}))}break;case"Escape":e.preventDefault(),a()}}return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,i,d,r,t,a]),{onUp:i,onDown:d,selectedLog:o.current}}function sk(e){let{requestPath:s}=e,r=ts();return(0,t.jsx)(C.Text,{className:"truncate","data-testid":(0,c.tid)("logs","detail-requestPath"),monospace:!0,size:13,children:(0,t.jsx)(e0.HighlightText,{as:"span",search:r,text:s})})}function sL(e){let{used:s,max:r,format:a,className:l}=e;return(0,t.jsxs)(C.Text,{className:(0,ty.twMerge)("font-mono text-[13px]",l),monospace:!0,size:13,children:[(0,t.jsx)("span",{className:(0,ty.twMerge)(!!r&&s>=.8*r&&"text-amber-900",!!r&&s>=r&&"text-red-900"),children:a(s)}),(0,t.jsxs)("span",{className:"text-gray-700",children:["/",r?a(r):(0,t.jsx)(eh.Skeleton,{className:"inline-block translate-y-0.5",height:14,width:22})]})]})}function sT(e){let{icon:s,title:r,description:n,subtitle:i,additionalInfo:c,children:u,contextActions:p}=e,m=(0,t.jsxs)("div",{className:(0,d.clsx)("flex w-full items-center gap-2 overflow-hidden px-2 pt-2",u?"pb-0.5":"pb-2"),children:[(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-2 overflow-hidden",children:[s&&(0,t.jsx)("div",{className:"text-gray-800",children:s}),(0,t.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,t.jsx)(C.Text,{className:"truncate",size:14,weight:500,children:r}),i&&(0,t.jsx)(C.Text,{className:"leading-tighter -mt-0.5",color:"gray-800",size:14,children:i})]})]}),(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(C.Text,{className:"inline-flex items-center gap-2 truncate",color:"gray-900",size:13,children:n}),c&&(0,t.jsx)(C.Text,{color:"gray-700",size:12,children:c})]})]});return(0,t.jsxs)("div",{className:(0,d.clsx)("flex flex-col rounded-md border border-gray-300 bg-background-100 px-2",i?"py-px":"py-1"),children:[r&&(p?.length?(0,t.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,t.jsx)(l.MenuButton,{className:"-mx-1 rounded-sm !px-1 hover:bg-gray-100 [&>span]:px-0",variant:"unstyled",children:m}),(0,t.jsx)(a.Menu,{width:180,children:p.map(e=>(0,t.jsx)(sM,{...e},e.label))})]}):m),(0,t.jsx)("div",{className:"flex flex-col",children:u})]})}function sE(e){let{event:a,onClick:l,groupLog:o,getFunctionMetadata:n,projectId:d,handleFilter:c,children:u,additionalInfo:p,hasExternalApiAccess:m}=e,h=(0,e6.useO11yNavigation)(),{getProjectUrl:x}=(0,e2.useDashboardNavigation)(),g=(0,I.useProject)(d),f=g.data?.resourceConfig?.fluid===!0,{pathType:j,source:v,httpStatus:y,durationMs:b,region:w,cache:_,invocationId:S}=a,N=null,k=v,L="",T="";"serverless"===v?(k="Function Invocation","background_func"===j?(N=(0,t.jsx)(G.FunctionSquare,{color:"gray-900",size:16}),k=p?.isServingRevalidation?"Revalidation":"Background Revalidation",L="Function Invocation"):"middleware"===j?(N=(0,t.jsx)(H.FunctionMiddleware,{color:"gray-900",size:16}),k="Middleware"):N=(0,t.jsx)(G.FunctionSquare,{color:"gray-900",size:16})):"middleware"===j?(N=(0,t.jsx)(H.FunctionMiddleware,{color:"gray-900",size:16}),k="Middleware"):"edge-function"===v?(N=(0,t.jsx)(W.FunctionEdge,{color:"gray-900",size:16}),k="Edge Function Invocation"):"static"===v?(N=(0,t.jsx)(U,{color:"gray-900",size:16}),k="Edge Cache","PRERENDER"===_?(k="ISR Cache",N=(0,t.jsx)(eP.DataCache,{color:"gray-900",size:16})):"HIT"===_&&(T=""),"partial_prerender"===j&&(k="Edge Cache",L="Partial Prerender")):"external"===v?(N=(0,t.jsx)(eO.ArrowGlobe,{color:"gray-800",size:16}),k="Rewrite"):N=(0,t.jsx)(eA.Eye,{color:"gray-900",size:16});let E=(0,t.jsx)(tr.StatusCodeBadge,{className:"shrink !flex-row-reverse",full:200!==y,statusCode:y}),D=n(a.route),F=null;D?.type==="lambda"&&(F=function(e){let[s,a,l]=e?.match(/(v8|[^0-9]*)([0-9].*)?/)||[],o=sb.get(a),n=e;return s&&o&&(n=o.name,l&&(n+=` ${l}`)),{text:n,reactNode:(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[o?.logo,(0,t.jsx)(C.Text,{monospace:!0,size:13,children:n})]})}}(D.lambda.runtime));let M=D?.type==="lambda"&&D.lambda.timeout&&1e3*D.lambda.timeout||-1,q=!D&&"serverless"===v,A=-1!==M,R=-1!==b&&"serverless"===v,O="serverless"===v||"edge-function"===v,P=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eA.Eye,{className:"mr-2 shrink-0 text-gray-800"}),label:"Open in Observability",href:h(`/route/${encodeURIComponent(a.route)}`,{removeExistingParams:!0,additionalParams:"edge-function"===a.source?{type:"edge"}:void 0})}],[h,a.route,a.source]);return(0,t.jsxs)(sT,{description:(0,t.jsxs)(t.Fragment,{children:[T,E]}),icon:N,onClick:l,subtitle:L,title:k,children:[u,sg(a.route)&&O&&"middleware"!==j&&(0,t.jsx)(sq,{contextActions:P,label:"Route",onFilter:()=>c("routes",a.route),value:a.route,children:(0,t.jsx)(e4.RouteHighlighter,{route:a.route})}),sg(_)&&"MISS"!==_&&(0,t.jsx)(sq,{label:"Cache",onFilter:()=>c("caches",_),value:_}),sg(w)&&""!==w&&w in eK.regions&&(0,t.jsx)(sq,{contextActions:"serverless"===v?[{icon:(0,t.jsx)(e$.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function Region",href:x("/settings/functions#function-region")}]:void 0,label:"Location",value:`${eK.regions[w].name} (${w})`}),F&&R||q?(0,t.jsx)(sq,{contextActions:F?.text.includes("Node.js")?[{icon:(0,t.jsx)(e$.SettingsGear,{color:"gray-900",size:16}),label:"Configure Node.js Version",href:x("/settings#node.js-version")}]:void 0,isLoading:q,label:"Runtime",value:F?.text,children:F?.reactNode}):null,"serverless"===v&&b&&-1!==b&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sq,{contextActions:[{icon:(0,t.jsx)(e$.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function Max Duration",href:x("/settings/functions#function-max-duration")}],label:`Execution Duration${A?" / Maximum":""}`,value:`${(0,eM.default)(b,{secondsDecimalDigits:2})}${A?" ":""}`,valueLabel:"Execution Duration",children:(0,t.jsx)(sL,{format:e=>(0,eM.default)(e,{secondsDecimalDigits:2}),max:A?M:void 0,used:b})}),sg(a.functionMaxMemoryUsed)&&(0,t.jsx)(sq,{contextActions:[{icon:(0,t.jsx)(e$.SettingsGear,{color:"gray-900",size:16}),label:"Configure Function CPU & Memory",href:x("/settings/functions#function-cpu")}],label:"Memory Used / Maximum",value:`${a.functionMaxMemoryUsed} MB`,valueLabel:"Memory Used",children:(0,t.jsx)(sL,{format:e=>`${e} MB`,max:a.functionMemorySize,used:a.functionMaxMemoryUsed})})]}),f&&S&&(0,t.jsx)(i.Button,{onClick:()=>c("invocationIds",S),className:"flex min-h-[32px] w-full cursor-pointer overflow-visible rounded-sm border-none bg-transparent py-1 pl-0.5 pr-1 text-gray-900 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none [&>span]:flex [&>span]:items-center [&>span]:justify-between [&>span]:gap-4 [&>span]:pl-[6px]",variant:"unstyled",children:"View concurrent requests on this Fluid instance"}),"static"!==v&&"HIT"!==_&&"STALE"!==_&&m&&(0,t.jsx)("div",{className:"p-2",children:(0,t.jsx)(tq,{enableDataCacheMetrics:!0,endTime:new Date(new Date(a.timestamp).getTime()+(a.durationMs??5e3)),projectId:d??"",requestId:o.requestId,source:v,startTime:new Date(a.timestamp),pathType:j})})]})}function sI(e){let{events:a,groupLog:l,getFunctionMetadata:o,projectId:n,handleFilter:i,hasExternalApiAccess:d}=e,c=(0,s.useMemo)(()=>{let e=[...a].sort((e,t)=>{let s=new Date(e.timestamp).getTime(),r=new Date(t.timestamp).getTime();return s===r?"background_func"===e.pathType?1:"background_func"===t.pathType?-1:0:s-r}),t=Math.max(...e.map(e=>"background_func"===e.pathType?e.httpStatus:-1));return e.filter(e=>"background_func"!==e.pathType||"static"!==e.source).map(e=>"background_func"===e.pathType?{...e,httpStatus:t}:e)},[a]);return 0===a.length?(0,t.jsx)(sv,{direction:"up",children:(0,t.jsx)(tr.RequestInProgressBadge,{})}):(0,t.jsx)(r.Stack,{direction:"column",gap:0,children:c.map((e,r)=>{let u=r===c.length-1,p=null,m=!1,h=a[r-1];if("partial_prerender"===e.pathType)p="STALE"===e.cache||"PRERENDER"===e.cache||"HIT"===e.cache?(0,t.jsx)(sv,{direction:"up",through:!0,children:(0,t.jsx)(tr.ResponseStreamingStartedBadge,{})}):u?(0,t.jsx)(sy,{hasFunctionCrashed:l.hasFunctionCrashed}):(0,t.jsx)(sv,{direction:"up",through:"dashed",children:(0,t.jsx)(tr.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed})});else if(sf(e))p=u?(0,t.jsx)(sy,{hasFunctionCrashed:l.hasFunctionCrashed}):(0,t.jsx)(sv,{direction:"up",through:"dashed",children:(0,t.jsx)(tr.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed})});else if(u){var x;let s=h&&sf(h)&&"background_func"===e.pathType,r=h&&"MISS"===h.cache&&"serverless"===h.source&&"middleware"!==h.pathType&&"background_func"===e.pathType;m=(!h||"MISS"===h.cache&&"serverless"!==h.source&&"edge-function"!==h.source)&&"MISS"===e.cache&&"serverless"===e.source&&"background_func"===e.pathType;let a=200===(x=e.httpStatus)||404===x||301===x||308===x||307===x||302===x;p=s||r?a?(0,t.jsx)(sv,{className:"mb-2",direction:"up",children:(0,t.jsx)(tr.DataCacheUpdatedBadge,{})}):null:m?(0,t.jsxs)("div",{className:"",children:[(0,t.jsx)(sv,{direction:"up",through:a,children:(0,t.jsx)(tr.RequestFinishedBadge,{hasFunctionCrashed:l.hasFunctionCrashed})}),a?(0,t.jsx)(sv,{className:"h-5",direction:"up",children:(0,t.jsx)(tr.DataCacheUpdatedBadge,{})}):null]}):(0,t.jsx)(sy,{hasFunctionCrashed:l.hasFunctionCrashed})}else p=(0,t.jsx)(sv,{direction:"straight"});return(0,t.jsxs)(s.default.Fragment,{children:[(0,t.jsx)(sE,{additionalInfo:{isServingRevalidation:m},event:e,getFunctionMetadata:o,groupLog:l,handleFilter:i,hasExternalApiAccess:d,projectId:n}),p]},`${e.timestamp}-${e.source}-${r}`)})})}function sD(e){let a,{logGroup:l}=e,{timestamp:o,clientUserAgent:n,events:i,domain:c,requestPath:u,deploymentId:p,requestId:h,requestSearchParams:x,environment:g,branch:f,traceId:j,sessionId:v}=l,y=(0,m.useParams)(),{data:b}=(0,I.useProject)(y?.project),{team:w}=(0,e1.useTeam)(),_=w?.billing?.plan??"hobby",S=b?.id,N=(0,e6.useO11yNavigation)(),{getProjectUrl:k}=(0,e2.useDashboardNavigation)(),L=!!i.find(e=>"serverless"===e.source),{getFunctionMetadata:T}=(0,tA.useFunctionMetadata)(L?p:void 0),E=h.split("::").at(-1)??h,{setFilters:F}=(0,D.useLogsQueryState)(),{data:M}=(0,e3.default)(p),q=(0,e9.useDeploymentLink)(M),{isDeploymentEditable:A}=(0,en.usePageConfig)(),R=(0,s.useCallback)(function(e,t){let{replace:s=!1,override:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return F({[e]:[t]},s,r)},[F]),O=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(eB.External,{size:16}),label:"Visit Path",onClick:()=>window.open(`https://${c}${u}`,"_blank","noopener")},{icon:(0,t.jsx)(eA.Eye,{}),label:"Open in Observability",href:N(`/requestPath/${encodeURIComponent(u)}`,{removeExistingParams:!0})}],[N,u,c]),P=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(e$.SettingsGear,{size:16}),label:"Configure Rules",href:k("/firewall/configure")}],[k]),B=(0,s.useMemo)(()=>[{icon:(0,t.jsx)(ez.Linked,{size:16}),label:"Open Deployment",href:q}],[q]),{data:$}=(0,ei.useRollingRelease)({teamIdOrSlug:w?.id,projectSlug:S}),z=$?.rollingRelease!==null,W=!1;return z&&"production"===g&&($?.rollingRelease?.state==="ACTIVE"&&p===$.rollingRelease.canaryDeployment?.id?(a="Current Canary",W=!0):$?.rollingRelease?.state==="ACTIVE"&&p===$.rollingRelease.currentDeployment?.id?(a="Current Base",W=!0):($?.rollingRelease?.state,a="Unspecified")),(0,t.jsxs)(r.Stack,{className:(0,d.clsx)("flex-1 pb-4"),tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 px-3",children:[(0,t.jsxs)("div",{className:"ml-1 flex items-center justify-between gap-2 p-1",children:[(0,t.jsx)(tr.RequestStartedBadge,{}),(0,t.jsx)("span",{className:"text-right font-mono text-[13px] leading-tight",children:(0,t.jsxs)("span",{children:[(0,t.jsxs)("span",{className:"uppercase text-gray-900",children:[(0,eV.format)(new Date(o).getTime(),"MMM dd")," ",(0,eV.format)(new Date(o).getTime(),"HH:mm:ss"),(0,t.jsxs)("span",{className:"text-gray-900",children:[".",(0,eV.format)(new Date(o).getTime(),"SS")]})]}),(0,t.jsx)("span",{className:"inline-bock ml-1.5 rounded-sm px-1 py-px font-mono text-gray-900",children:(0,eV.format)(new Date(o).getTime(),"OO")})]})})]}),(0,t.jsxs)(sT,{children:[(0,t.jsx)(sq,{label:"Request ID",onFilter:()=>R("requestIds",E,{override:!0}),value:E||"No request ID"}),(0,t.jsx)(sq,{contextActions:O,label:"Path",onFilter:()=>R("requestPaths",u),value:u,children:(0,t.jsx)(sk,{requestPath:u})}),(0,t.jsx)(sq,{label:"Host",onFilter:()=>R("domains",c),value:c}),sg(n)&&(0,t.jsx)(sq,{label:"User Agent",value:n}),Object.keys(x).length>0&&(0,t.jsx)(tO,{inRequestLogs:!0,requestSearchParams:x}),sg(j)&&(0,t.jsx)(sq,{label:"Trace ID",onFilter:()=>R("traceIds",j),value:j}),sg(v)&&(0,t.jsx)(sq,{label:"Session ID",onFilter:()=>R("sessionIds",v),value:v})]}),(0,t.jsx)(sv,{direction:"straight"}),(0,t.jsx)(sT,{contextActions:P,description:(0,t.jsx)("span",{className:"px-1",children:"Allowed"}),icon:(0,t.jsx)(eR.FirewallFlame,{color:"gray-900",size:16}),title:"Firewall"}),(0,t.jsx)(sv,{direction:"straight"}),(0,t.jsx)(sI,{events:i,getFunctionMetadata:T,groupLog:l,handleFilter:R,hasExternalApiAccess:"hobby"!==_,projectId:S})]}),(0,t.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,t.jsx)(C.Text,{className:"mb-2 pl-2",weight:500,children:"Deployment Information"}),(0,t.jsx)(sq,{contextActions:B,isLoading:!M,label:"Deployment ID",onFilter:A?()=>R("deploymentIds",p):void 0,value:p}),sg(g)&&(0,t.jsx)(sq,{label:"Environment",onFilter:()=>R("environments",g),value:g}),a&&(0,t.jsx)(sq,{label:"Rolling Release",onFilter:W?()=>R("deploymentIds",p):void 0,value:a}),sg(f)&&(0,t.jsx)(sq,{label:"Branch",onFilter:()=>R("branches",f),value:f})]})]})}function sF(e){let{onClose:s,onDown:a,onUp:l,...o}=e,{requestMethod:n,requestPath:i,statusCode:u}=o;return(0,t.jsxs)(r.Stack,{className:(0,d.clsx)(te.default.root,"dark:bg-background-200"),"data-testid":(0,c.tid)("group-logs","details-panel"),direction:"column",gap:0,children:[(0,t.jsx)(sC,{onClose:s,onDown:a,onUp:l,requestMethod:n,requestPath:i,responseStatusCode:u}),(0,t.jsx)(sD,{logGroup:o})]})}function sM(e){let{icon:s,label:r,onClick:a,href:l}=e,o=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"mr-2 flex size-4 shrink-0 items-center text-gray-900",children:s}),r]});return l?(0,t.jsx)(eX.MenuLink,{className:"flex items-center",href:l,onMouseUp:()=>a?.(),children:o}):(0,t.jsx)(n.MenuItem,{className:"flex items-center",icon:!0,onClick:a,children:o})}function sq(e){let{label:r,value:n,valueLabel:i,isLoading:c=!1,children:u,onFilter:m,contextActions:h=[],styleProps:x={}}=e,g=(0,eQ.useToasts)(),f=i??r,j=(0,s.useCallback)(()=>{n&&!c&&"string"==typeof f&&((0,e5.copyToClipboard)(n),g.success(`${f} copied to clipboard`))},[f,n,g,c]),b=(0,s.useCallback)(e=>{"string"==typeof f&&v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:f,action:e})},[f]);return(0,t.jsx)("div",{className:"border-b py-1 last:border-none",children:(0,t.jsxs)(o.MenuContainer,{position:"bottom-start",children:[(0,t.jsxs)(l.MenuButton,{className:"flex min-h-[32px] w-full cursor-pointer overflow-visible rounded-sm border-none bg-transparent py-1 pl-0.5 pr-1 hover:bg-gray-100 focus:bg-gray-100 focus:outline-none [&>span]:flex [&>span]:w-full [&>span]:items-center [&>span]:justify-between [&>span]:gap-4",disabled:c,style:x,variant:"unstyled",children:[(0,t.jsx)(C.Text,{as:"dt",color:"gray-900",style:{flexShrink:0},children:r}),(0,t.jsx)(eh.Skeleton,{as:"dd",className:(0,d.clsx)(te.default.logDetailRowSkeleton,"!flex"),show:c,children:(0,t.jsx)("span",{className:"truncate font-mono !text-[13px] text-gray-1000",title:n,children:u||n})})]}),(0,t.jsxs)(a.Menu,{width:Math.max(200,70+7*Math.max(...h.map(e=>e.label.length))),children:[m&&(0,t.jsx)(sM,{icon:(0,t.jsx)(p.Filter,{}),label:"Add Filter",onClick:()=>{m(),b("Add Filter")}}),h.map(e=>(0,t.jsx)(sM,{...e,onClick:()=>{e.onClick?.(),b(e.label)}},e.label)),"string"==typeof f&&(0,t.jsx)(sM,{icon:(0,t.jsx)(eq.Copy,{}),label:`Copy ${f}`,onClick:()=>{j(),b("Copy")}})]})]})})}function sA(e){let{error:s}=e,{maxDurationFormatted:a}=(0,eg.useUserRetention)();return(0,t.jsxs)(r.Stack,{align:"center",className:te.default.noLogsSelected,direction:"column",gap:5,children:[(0,t.jsx)(r.Stack,{flex:"1 0 auto",justify:"center",children:(0,t.jsxs)(r.Stack,{align:"center",gap:3,justify:"center",children:[(0,t.jsx)(e7,{}),(0,t.jsx)(C.Text,{align:"center",color:"inherit",children:s?.name==="ExceedsBillingLimitError"?s.message:"Error loading selected log or the selected log does not exist, please try again"})]})}),(0,t.jsx)(r.Stack,{className:te.default.setupLogDrain,children:(0,t.jsxs)(C.Text,{color:"inherit",size:12,children:["To store logs for longer than ",a,", set up a Log Drain.",(0,t.jsxs)(eZ.Link,{className:te.default.learnMore,href:"/docs/deployments/logs",tab:!0,children:["Learn more ",(0,t.jsx)(eB.External,{align:"top",size:16})]})]})})]})}function sR(e){let{onClose:s}=e;return(0,t.jsxs)(r.Stack,{className:te.default.root,"data-testid":(0,c.tid)("group-logs","details-panel"),direction:"column",gap:0,children:[(0,t.jsxs)(r.Stack,{align:"center",className:"ml-px p-4",direction:"row",gap:1,justify:"space-between",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-1 overflow-hidden p-1",children:(0,t.jsx)(eh.Skeleton,{className:"w-16",show:!0,children:(0,t.jsx)(C.Text,{className:te.default.title,lineHeight:16,size:13,children:"GET"})})}),(0,t.jsxs)(r.Stack,{align:"center",direction:"row",gap:2,children:[(0,t.jsx)(r.Stack,{direction:"row",children:(0,t.jsx)("div",{className:te.default.buttonRule})}),(0,t.jsx)(i.Button,{"aria-label":"Close",onClick:s,shape:"square",size:"small",svgOnly:!0,touchEventWorkaround:!0,type:"tertiary",children:(0,t.jsx)(eG.Cross,{color:"gray-700",size:20})})]})]}),(0,t.jsxs)(r.Stack,{className:"flex-1 pb-4",tabIndex:-1,children:[(0,t.jsxs)("div",{className:"flex-1 px-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 px-1 py-2",children:[(0,t.jsx)(tr.RequestStartedBadge,{}),(0,t.jsx)(eh.Skeleton,{className:"w-48",show:!0,children:(0,t.jsx)("span",{className:"text-right text-[13px] tabular-nums leading-tight",children:"Loading timestamp..."})})]}),(0,t.jsxs)(sT,{children:[(0,t.jsx)(sq,{isLoading:!0,label:"Request ID",value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:"Path",value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:"Host",value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:"User Agent",value:"Loading"})]}),(0,t.jsx)(sv,{direction:"straight"}),(0,t.jsx)(sT,{description:(0,t.jsx)(eh.Skeleton,{className:"w-16",show:!0,children:(0,t.jsx)("span",{children:"Allowed"})}),icon:(0,t.jsx)(eR.FirewallFlame,{color:"gray-800",size:16}),title:"Firewall"}),(0,t.jsx)(sv,{direction:"straight"}),(0,t.jsxs)(sT,{description:(0,t.jsx)(eh.Skeleton,{className:"w-24",show:!0,children:(0,t.jsx)("span",{children:"Description"})}),icon:(0,t.jsx)(eh.Skeleton,{height:16,width:16}),title:(0,t.jsx)(eh.Skeleton,{show:!0,children:"Function Invocation"}),children:[(0,t.jsx)(sq,{isLoading:!0,label:(0,t.jsx)(eh.Skeleton,{show:!0,children:"Route"}),value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:(0,t.jsx)(eh.Skeleton,{show:!0,children:"Runtime"}),value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:(0,t.jsx)(eh.Skeleton,{show:!0,children:"Execution Duration"}),value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:(0,t.jsx)(eh.Skeleton,{show:!0,children:"Memory Used / Maximum"}),value:"Loading"})]})]}),(0,t.jsxs)("div",{className:"mt-4 border-t px-4 pt-4",children:[(0,t.jsx)(C.Text,{className:"mb-2 pl-2",weight:500,children:"Deployment Information"}),(0,t.jsx)(sq,{isLoading:!0,label:"Deployment ID",value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:"Environment",value:"Loading"}),(0,t.jsx)(sq,{isLoading:!0,label:"Branch",value:"Loading"})]})]})]})}var sO=e.i(6473835),sP=e.i(674684),sB=e.i(9633112),s$=e.i(2198583),sz=e.i(2605482),sW=e.i(3621043),sH=e.i(5054575),sG=e.i(3163983);function sV(e,t){let[s,r]=function(e,t){let s=e=>/\s/.exec(e),r=t-1,a=t;for(;r>=0&&!s(e[r]);)r-=1;for(r=Math.max(0,r+1);a<e.length&&!s(e[a]);)a+=1;return a=Math.max(r,a),[r,a]}(e,t),a=e.substr(s,r);return a+e.substr(r)}function sU(e,t,s,r){return void 0!==r&&r!==t?e.substr(0,t)+s+e.substr(r):e.substr(0,t)+s+e.substr(t)}let sQ=["requestId","sessionId","traceId","deploymentId","invocationId"];function sX(){let e=(0,sP.useRouter)(),{filters:{levels:r,domains:a,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,routes:d,requestPaths:u,statusCodes:p,searchQuery:m,requestIds:h,requestMethods:x,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:b},state:{live:C},setFilters:w}=(0,D.useLogsQueryState)(),{trackFilterUse:_}=z(),{isDeploymentEditable:S}=(0,en.usePageConfig)(),N=ee;S&&(N=Y);let{isLoading:k}=(0,tt.useGroupLogs)(),[L,T]=(0,s.useState)(null),[E,I]=(0,s.useState)(""),[F,M]=(0,s.useState)(!0),[A,R]=(0,s.useState)(""),[O,P]=(0,s.useState)(0),$=(0,s.useRef)(null),W=(0,s.useRef)({}),H=(0,s.useRef)(null),G=(0,s.useRef)(null),V=(0,s.useRef)({query:{levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionId:[],traceIds:[]},searchQuery:""}),U=(0,s$.useDebouncedCallback)(e=>I(e),300),[Q,X]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=sO.daumtools.userAgent();X("safari"===e?.browser?.name)},[]);let Z=(0,s.useCallback)(e=>{R(e),$.current?.setValue(e)},[]),J=(0,s.useMemo)(()=>L?.attributeName==="source"||L?.attributeName==="requestTags"||L?.attributeName==="level"||L?.attributeName==="statusCode"||L?.attributeName==="cache"||L?.attributeName==="requestMethod"||L?.attributeName==="environment",[L]),K=(0,s.useMemo)(()=>!!L?.attributeName&&sQ.includes(L.attributeName),[L]),{data:et,isLoading:es}=q({attributeName:!L||K?null:L.attributeName,attributeNameSearchQuery:E,levels:L?.attributeName==="level"?void 0:r,caches:L?.attributeName==="cache"?void 0:g,requestMethods:L?.attributeName==="requestMethod"?void 0:x,domains:L?.attributeName==="domain"?void 0:a,deploymentDomains:L?.attributeName==="deploymentDomain"?void 0:l,sources:L?.attributeName==="source"?void 0:n,requestTags:L?.attributeName==="requestTags"?void 0:i,routes:L?.attributeName==="route"?void 0:d,requestPaths:L?.attributeName==="requestPath"?void 0:u,statusCodes:L?.attributeName==="statusCode"?void 0:p,environments:L?.attributeName==="environment"?void 0:f,branches:L?.attributeName==="branch"?void 0:j,sessionIds:L?.attributeName==="sessionId"?void 0:v,traceIds:L?.attributeName==="traceId"?void 0:y,invocationIds:L?.attributeName==="invocationId"?void 0:b}),{data:er,isLoading:ea}=q({attributeName:"environment",domains:a,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,routes:d,requestMethods:x,levels:r,statusCodes:p,requestPaths:u,caches:g,branches:j,sessionIds:v,traceIds:y,invocationIds:b}),el=(er?.rows??[]).reduce((e,t)=>e+t.total,0),eo=(0,s.useMemo)(()=>{if(L?.attributeName!=="requestId")return et?.rows?.map(e=>({label:String(e.attributeValue),value:String(e.attributeValue)}))},[L,et]),ei=(0,s.useCallback)(()=>{R(""),w({levels:void 0,sources:void 0,requestTags:void 0,deploymentDomains:void 0,deploymentIds:void 0,domains:void 0,routes:void 0,requestPaths:void 0,searchQuery:"",requestIds:void 0,requestMethods:void 0,statusCodes:void 0,caches:void 0,preset:null,environments:void 0,branches:void 0,sessionIds:void 0,traceIds:void 0,invocationIds:void 0})},[w]),ed=(0,s.useCallback)(()=>{let e={levels:[],sources:[],requestTags:[],deploymentDomains:[],deploymentIds:[],domains:[],routes:[],requestPaths:[],requestIds:[],requestMethods:[],statusCodes:[],caches:[],environments:[],branches:[],sessionIds:[],traceIds:[],invocationIds:[]},t=(H.current?.value||"").split(" "),s=t.filter(e=>!N.find(t=>e.includes(`${t.name}:`))&&!/^\s*$/.test(e)).join(" ");return t.map(e=>{if(e.includes(":")){let t=e.indexOf(":"),s=e.slice(0,t),r=e.slice(t+1),a=N.find(e=>e.name===s);if(""!==r&&a)return{name:sJ(a.attributeName),filterValue:r.split(",")}}return null}).filter(e=>null!==e).forEach(t=>{let{name:s,filterValue:r}=t;s in e?e[s]=[...e[s],...r]:e[s]=r}),{query:e,searchQuery:s}},[N]);(0,s.useEffect)(()=>{ea&&$.current?.close()},[ea]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!H.current||t&&s||(e.preventDefault(),H.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,s.useEffect)(()=>{let e=H.current;if(e&&!Q){let t=()=>{P(e.scrollLeft)};return e.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e.removeEventListener("scroll",t),window.removeEventListener("resize",t)}}},[Q]),(0,s.useEffect)(()=>{let t={levels:r,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,domains:a,routes:d,requestPaths:u,requestIds:h,requestMethods:x,statusCodes:p,caches:g,environments:f,branches:j,sessionIds:v,traceIds:y,invocationIds:b},s="";(0,sB.default)(W.current,e.query)||setTimeout(()=>{let r=Object.keys({...e.query,searchQuery:m}).filter(e=>e in t||"searchQuery"===e&&m);if(0===r.length)return void Z("");r.forEach(e=>{if("searchQuery"===e&&m){s+=`${m.replaceAll("+"," ")} `;return}let r=function(e){if("requestTags"===e)return e;let t=0;return"branches"===e?t=-2:e.endsWith("s")&&(t=-1),e.slice(0,t)}(e),a=N.find(e=>e.attributeName===r);a&&t[e].length>0&&(s+=`${a.name}:${t[e].join(",")} `)}),Z(s)}),W.current=e.query},[e.query,r,Z,l,o,m,n,i,a,d,u,h,N,x,p,g,f,j,v,y,b]);let ec=(0,s.useCallback)(()=>{let{query:e,searchQuery:t}=ed();w({...e,searchQuery:t,preset:null}),t&&t!==V.current.searchQuery?_({eventTrigger:"search bar",filter:"searchQuery",value:[""]}):Object.keys(e).forEach(t=>{e[t].length>V.current.query[t].length&&_({eventTrigger:"search bar",filter:t,value:B.includes(t)?e[t]:Array(e[t].length).fill("")})}),V.current={query:e,searchQuery:t}},[w,ed,_]),eu=(0,s.useCallback)(()=>{let e=H.current?.selectionStart||0,t=sV(H.current?.value||"",e);if(t.includes(":")){let[e]=t.split(":"),s=N.find(t=>t.name===e);s&&T(s)}else T(null);I("")},[N]),ep=(0,s.useCallback)((e,t)=>{let s=H.current?.selectionStart||0;if(L&&!J)return e;let r=t=>{let s=(0,ev.matchSorter)(e,t,{keys:["value","label"]}),r=e.find(e=>"confirm search"===e.label);return r&&s.unshift(r),s};if(L){let e=sV(t,s).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$");return r(e[e.length-1].split(" ")[0])}if(t.includes(" ")){let e=sV(t,s),a=sV(t,s-e.length-1),l=!a.includes(":")&&!m.includes(a.split(" ")[0]);return(N.find(e=>a.includes(e.name)),l)?[]:r(e.split(" ")[0])}return r(t)},[L,m,J,N]),em=(0,s.useMemo)(()=>{if(!eo||!L||0===eo.length||"requestId"===L.attributeName)return null;M(!0);let{query:e}=ed(),t=e[sJ(L.attributeName)];return eo.filter(e=>!t.includes(e.value))},[L,ed,eo]),eh=em&&L&&!es||E&&F&&L,ex=A.includes(":");return(0,t.jsxs)("div",{className:sG.default.comboboxWrapper,style:{"--word-gap":ex?"10px":"0px"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsxs)(sW.Combobox,{className:sG.default.combobox,filter:ep,noNegativeIndex:!0,noTextSelection:!0,onChange:e=>{let t=H.current?.selectionStart||0,s=H.current?.value||"";if($.current?.setSelectedIndex(0),!e)return;let r=N.find(t=>t.name===e.split(":")[0]);if(""===s){Z(e),r&&T(r);return}if(r){let a=sV(s,t);if(s.includes(`${r.name}:`)){let e=s.split(" ").find(e=>e.includes(r.name))||"",{query:t}=ed(),l=t[sJ(r.attributeName)].length>0;Z(s.replace(e,`${e}${l?",":""}`).split(" ").filter(e=>e!==a).join(" ")),T(r);return}if(a){let r=s.slice(0,t-a.length),l=s.slice(t-a.length,s.length+a.length);Z(r+(l=l.replace(a,e)))}else{let r=0===t;Z(sU(s,t,e)),r&&setTimeout(()=>{H.current?.setSelectionRange(e.length,e.length)})}T(r);return}if(L){let r=sV(s,t).split(" ")[0].replaceAll(":","$").replaceAll(",","$").split("$"),a=r[r.length-1];if(a){let r=a.split(" ")[0],l=/^\s*$/.test(r),o=sV(s,t),n=o.split(":")[0];if(s.split(":").filter(e=>e.includes(n)).length>1){let t=s.split(" ").find(e=>e.includes(L.name))||"";Z(s.replace(t,`${t},${e}`).split(" ").filter(e=>e!==o).join(" "))}else Z(s.replace(l?" ":a,`${e} `))}else Z(sU(s,t,`${e} `));$.current?.setSelectedIndex(-1),T(null),setTimeout(()=>{ec()})}},onChangeOpen:e=>{$.current?.setSelectedValue(null),!e&&(I(""),G.current||$.current?.close())},onClear:ei,placeholder:ea||0===el||C?"Search logs...":`${(0,sH.abbreviateNumber)(el).toUpperCase()} total ${1===el?"log":"logs"} found...`,ref:$,shouldContinue:!0,children:[(0,t.jsx)(sW.Combobox.Input,{className:sG.default.input,"data-testid":(0,c.tid)("group-logs","search-input"),id:"search-logs",loading:!!(es&&L||k),onBlur:()=>{T(null)},onPaste:e=>{try{let t=e.clipboardData.getData("text/plain"),s=/[a-z0-9]{5}-\d{13}-[a-z0-9]{12}/i.exec(t),r=e.currentTarget,a=r.selectionStart||0,l=r.selectionEnd||a,o=r.value.substring(a,l);if(s&&!t.includes("requestId")&&(!r.value.includes("requestId:")||o.includes("requestId"))){e.preventDefault();let s=sU(r.value,a,`requestId:${t}`,l);Z(s)}}catch(e){}},onChange:t=>{if(R(t.target.value),""===t.target.value){T(null);let t={levels:r,deploymentDomains:l,deploymentIds:o,sources:n,requestTags:i,domains:a,routes:d,requestPaths:u,requestIds:h,requestMethods:x,statusCodes:p,caches:g,environments:f,branches:j};Object.keys({...e.query,searchQuery:m}).filter(e=>e in t||"searchQuery"===e&&m).length>0&&(ei(),Z(""));return}Z(t.target.value);let s=t.target.selectionStart||0;eu();let c=sV(t.target.value,s);if(c.includes(":")){let e=N.find(e=>e.name===c.split(":")[0]);if(e){let t=c.split(":")[1].split(",");U((t=t[t.length-1]).split(" ")[0]),T(e)}else T(null)}},onClick:eu,onKeyDown:e=>{let t=H.current?.value||"",s=G.current;if("Enter"===e.key&&s&&ec(),"ArrowLeft"===e.key||"ArrowRight"===e.key){let s=e.target.selectionStart||0;/^\s*$/.test(t.split("")[s-1])&&T(null)}},ref:H}),(0,t.jsx)(sW.Combobox.List,{className:sG.default.comboboxList,emptyMessage:(0,t.jsxs)("button",{className:sG.default.confirm,onClick:()=>{$.current?.close(),ec()},ref:G,type:"button",children:["Confirm search"," ",(0,t.jsx)("kbd",{className:sG.default.suffix,children:(0,t.jsx)(sz.CornerDownRight,{})})]}),hideOptions:!0,children:eh?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sK,{onSelect:()=>{$.current?.close(),ec()}}),em?em.map(e=>(0,t.jsx)(sW.Combobox.Option,{className:sG.default.option,value:e.value,children:`${e.value}`},e.value)):[]]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(sK,{onSelect:()=>{$.current?.close(),ec()}},"first-option"),N.map(e=>(0,t.jsxs)(sW.Combobox.Option,{className:sG.default.option,value:`${e.name}:`,children:[(0,t.jsx)("span",{className:sG.default.filter,children:`${e.name}:`}),(0,t.jsx)("div",{className:sG.default.suggestions,children:e.suggestions.map(e=>(0,t.jsxs)("span",{children:["[",e,"]"]},e))})]},e.name))]})})]}),!Q&&(0,t.jsx)("div",{"aria-hidden":!0,className:sG.default.textOverlay,style:{transform:`translateX(-${O}px)`},children:A.split(/\s/).map((e,s)=>e.includes(":")?(0,t.jsxs)("span",{className:sG.default.highlight,children:[e," "]},e):(0,t.jsx)("span",{style:""===e&&0===s?{marginLeft:-4,marginRight:0}:{},children:e},`${e}${s}`))})]})}function sZ(){return(0,t.jsxs)(sW.Combobox,{className:(0,d.clsx)(sG.default.combobox,"geist-show-on-desktop"),placeholder:"Search logs...",children:[(0,t.jsx)(sW.Combobox.Input,{className:sG.default.input,id:"search-logs"}),(0,t.jsx)(sW.Combobox.List,{className:sG.default.comboboxList})]})}function sJ(e){return"requestTags"===e?e:"branch"===e?`${e}es`:`${e}s`}function sK(e){let{onSelect:s}=e;return(0,t.jsx)(sW.Combobox.Option,{label:"confirm search",onCustomSelect:s,value:"",children:(0,t.jsxs)(r.Stack,{className:"flex w-full flex-row justify-between",children:[(0,t.jsx)(C.Text,{weight:500,children:"Confirm search"})," ",(0,t.jsx)(sz.CornerDownRight,{})]})})}var sY=e.i(619432),s0=e.i(9185154),s1=e.i(8880357);function s2(){let{state:{page:e},setState:a}=(0,D.useLogsQueryState)(),{data:l,isLoading:o,isValidating:n,size:i,setSize:d}=(0,tt.useGroupLogs)(),u=(0,s.useRef)(null),p=(0,s.useRef)(void 0),m=(0,s1.useIntersectionObserver)(u,{rootMargin:"200px"}),x=l&&l.length>0,g=l?.[l.length-1].hasMoreRows,f=o||i>0&&l&&void 0===l[i-1],{team:j}=(0,h.useAccount)(),v=j?.billing?.plan??"hobby",{maxDuration:y}=(0,eg.useUserRetention)(),b=function(e,t){let s=(0,N.sub)(Date.now(),e).getTime(),r=t?.[t.length-1].rows;if(!r||0===r.length)return!0;let a=new Date(r[r.length-1].timestamp).getTime(),l=new Date(r[0].timestamp).getTime();return!!(a&&a>=s&&l&&l>=s)}(y,l),w=(0,s.useCallback)(()=>{!o&&!n&&x&&g&&b&&a({page:e+1},!0)},[x,g,o,n,e,a,b]);return(0,s.useEffect)(()=>{d(e)},[e]),(0,s.useEffect)(()=>{m?.isIntersecting&&!p.current&&w(),p.current=m?.isIntersecting},[m?.isIntersecting,w]),(0,t.jsx)(r.Stack,{align:"center",children:(0,t.jsx)("div",{"data-testid":(0,c.tid)("group-logs","load-more-logs"),ref:u,style:{padding:"var(--geist-gap) 0",visibility:void 0===l?"hidden":"visible",minWidth:"12rem"},children:(g||o||n||void 0===l)&&b?(0,t.jsx)(s0.LoadMoreButton,{disabled:!1===g,loading:f,noGap:!0,onClick:w}):(0,t.jsx)("div",{style:{padding:"var(--geist-gap)"},children:(0,t.jsx)(C.Text,{className:t0.default.screenReaderSelect,style:{color:"var(--accents-5)"},tabIndex:0,children:b||"enterprise"===v?"No more logs to show within selected timeline":"The older logs have expired. You can upgrade your plan to store more logs"})})})})}var s5=e.i(9291626),s3=e.i(8271193);let s4=(0,s.forwardRef)(function(e,s){let{showSkeleton:r=!1,onScroll:a}=e;return r?(0,t.jsx)(s8,{}):(0,t.jsx)(s6,{onScroll:a,ref:s})}),s6=(0,s.forwardRef)(function(e,r){let{onScroll:a}=e,{setState:l,state:{selectedLogId:o}}=(0,D.useLogsQueryState)(),{data:n,error:i}=(0,tt.useGroupLogs)(),d=!n,[c,u]=(0,s.useState)({rows:[],rowsIdSet:new Set});if((0,s.useEffect)(()=>{let e=function e(t){if(0===t.length)return[];if(1===t.length)return t[0];if(t.length>2){let s=Math.floor(t.length/2);return e([e(t.slice(0,s)),e(t.slice(s))])}let[s,r]=t,a=[],l=0,o=0;for(;l<s.length&&o<r.length;){let e=s[l],t=r[o],n=new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime();n<0?(a.push(e),l++):(n>0?a.push(t):(a.push(e),l++),o++)}return a.concat(s.slice(l)).concat(r.slice(o))}((n||[]).map(e=>e.rows??[]));u(t=>{let{rowsIdSet:s}=t;return{rows:e.map(e=>({...e,isNew:!s.has(e.requestId)})),rowsIdSet:new Set(e.map(e=>e.requestId))}})},[n]),i)return(0,t.jsx)(s9,{children:(0,t.jsx)(t7,{error:i})});if(d)return(0,t.jsx)(s8,{});let p=c.rows.length>0;return(0,t.jsx)(s9,{hasLogs:p,children:p?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:s5.default.logRowsContainer,onScroll:a,ref:r,children:(0,t.jsx)("div",{className:s5.default.logRowsWrapper,style:{paddingTop:"var(--geist-space)"},children:(0,t.jsx)(t2,{logRows:c.rows,onRowSelect:e=>{l({selectedLogId:e.requestId})},selectedLogId:o})})}),(0,t.jsx)(s2,{})]}):(0,t.jsx)(se,{})})});function s9(e){let{children:s,hasLogs:r=!1}=e;return(0,t.jsx)("div",{className:(0,d.clsx)(s3.default.container,{[s3.default.hasLogs]:r}),style:{position:"relative",zIndex:2,flex:1},children:s})}function s8(){return(0,t.jsx)("div",{style:{padding:"var(--geist-space) 0"},children:(0,t.jsx)(t4,{})})}var s7=e.i(4848562);let re=(0,V.withNewIcon)('<path fill="currentColor" fill-rule="evenodd" d="M14.5 8a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0ZM16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0Zm-5.5-2.5h-5v5h5v-5Z" clip-rule="evenodd"/>');var rt=e.i(5090795);function rs(){let{skip:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{data:t}=(0,I.useProject)((0,E.useProjectIdOrName)()),{team:s,isLoading:r}=(0,h.useAccount)(),{deploymentDomains:a,deploymentIds:l,domains:o,levels:n,routes:i,sources:d,requestTags:c,startDate:u,endDate:p,searchQuery:m,requestIds:x,requestMethods:g,requestPaths:f,statusCodes:j,caches:v,environments:y,branches:b,live:C,myLogs:w,sessionIds:_,hasTraces:S,traceIds:N,invocationIds:M}=(0,D.useLogsApiParams)(),q=p??new Date,A=function(e,t){let s=t.getTime()-e.getTime();return s<=(0,t_.default)("2m")?1:s<=(0,t_.default)("5m")?2:s<=(0,t_.default)("10m")?5:s<=(0,t_.default)("30m")?10:s<=(0,t_.default)("50m")?20:s<=(0,t_.default)("75m")?30:s<=(0,t_.default)("2.5h")?60:s<=(0,t_.default)("5h")?120:s<=(0,t_.default)("7.5h")?300:s<=(0,t_.default)("24h")?600:s<=(0,t_.default)("48h")?1200:s<=(0,t_.default)("75h")?1800:s<=(0,t_.default)("150h")?3600:s<=(0,t_.default)("300h")?7200:s<=(0,t_.default)("600h")?14400:s<=(0,t_.default)("1200h")?28800:s<=(0,t_.default)("1800h")?43200:86400}(u,q);return{...(0,k.default)(()=>{if(e||r||!t)return;let p=null!==s?s.id:null;if(null===p)return;let h=(0,L.encode)({interval:A,startDate:u.getTime(),endDate:C?void 0:q.getTime(),searchQuery:(0,F.stringifyArrayContent)((0,F.tokenizeSearchQuery)(m)),projectId:t.id,deploymentDomain:rr(a),deploymentId:rr(l),domain:rr(o),level:rr(n),ownerId:p,source:rr(d),requestTags:rr(c),route:rr(i),requestPath:rr(f),requestMethod:rr(g),requestId:x.map(e=>e.split("::").pop()),statusCode:rr(j),cache:rr(v),environment:rr(y),branch:rr(b),myLogs:!!w||void 0,sessionId:rr(_),hasTraces:!!S||void 0,traceId:rr(N),invocationId:rr(M)});return`${T.API_LOGS}/request-logs/timeseries${h}`},e=>(0,ti.fetchAPI)(e,{throwOnHTTPError:!0}),{refreshInterval:5e3*!!C,keepPreviousData:!0,revalidateOnFocus:C,revalidateOnReconnect:C}),interval:A}}function rr(e){if(0!==e.length)return e.join(",")}function ra(e){let{showSkeleton:a}=e,{setState:l}=(0,D.useLogsQueryState)(),{live:o,startDate:n,endDate:d}=(0,D.useLogsApiParams)(),c=(0,s.useRef)(null),{isLoading:u,mutate:p,isValidating:m}=(0,tt.useGroupLogs)(),{mutate:h}=rs(),x=(0,s.useCallback)(()=>{u||c.current&&Date.now()-c.current<1e3||(c.current=Date.now(),l({refreshedAt:Date.now()}),p(),h())},[u,p,h,l]);return(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(i.Button,{className:o?"!ring-1 ring-blue-700":"",disabled:a,onClick:()=>{!o&&window.scrollY>=80&&window.scrollTo(0,0),o&&l({startDate:n,endDate:d}),o||l({live:!0})},prefix:o?(0,t.jsx)(re,{className:"!text-blue-900"}):(0,t.jsx)(s7.PlayCircle,{}),type:"secondary",children:(0,t.jsx)("span",{className:o?"!text-blue-900":"",children:"Live"})}),(0,t.jsx)(i.Button,{"aria-label":"Refresh Logs",disabled:a||u,onClick:x,shape:"square",svgOnly:!0,type:"secondary",children:m?(0,t.jsx)(ta.Spinner,{color:"var(--accents-5)",size:16}):(0,t.jsx)(rt.RefreshClockwise,{})})]})}var rl=e.i(8781774),ro=e.i(3156464),rn=e.i(399439),ri=e.i(2075095);function rd(){let e=null!==(0,m.useSearchParams)(),{filters:{searchQuery:r,levels:a,domains:l,deploymentDomains:o,sources:n,requestTags:i,routes:d,requestPaths:u,statusCodes:p,requestMethods:h,caches:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v},state:{live:y},setFilters:b}=(0,D.useLogsQueryState)(),[C,w]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),N=(0,s.useRef)(null),k=(0,s$.useDebouncedCallback)(e=>{b({searchQuery:e,preset:null})},300),{data:L,isLoading:T}=q({attributeName:"environment",domains:l,deploymentDomains:o,sources:n,requestTags:i,routes:d,requestMethods:h,levels:a,statusCodes:p,requestPaths:u,caches:x,branches:g,sessionIds:f,traceIds:j,invocationIds:v}),E=(L?.rows??[]).reduce((e,t)=>e+t.total,0);return(0,s.useEffect)(()=>{e&&!_&&w(r||"")},[e,r,_]),(0,s.useEffect)(()=>{let e=e=>{let t=document.activeElement,s=t&&["input","select","textarea"].includes(t.tagName.toLowerCase());"/"!==e.key||!N.current||t&&s||(e.preventDefault(),N.current.focus({preventScroll:!0}))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,t.jsxs)("div",{style:{width:"100%"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsx)(ri.default,{"data-testid":(0,c.tid)("group-logs","search-input"),id:"search-logs",onBlur:()=>S(!1),onChange:e=>{k(e.target.value),w(e.target.value)},onFocus:()=>S(!0),placeholder:T||0===E||y?"Search logs...":`${(0,sH.abbreviateNumber)(E)} total ${1===E?"log":"logs"} found...`,ref:N,scrollOnClear:!1,value:_?C:r,width:"100%"})]})}function rc(){return(0,t.jsxs)("div",{className:"geist-show-on-mobile",style:{width:"100%"},children:[(0,t.jsx)("label",{className:"geist-sr-only",htmlFor:"search-logs",children:"Search Logs"}),(0,t.jsx)(ri.default,{"data-testid":(0,c.tid)("group-logs","search-input"),id:"search-logs",placeholder:"Search logs...",scrollOnClear:!1,width:"100%"})]})}var ru=e.i(57154),rp=e.i(9779114),rm=e.i(6611132);let rh="logsSidebarWidth";function rx(e){let{left:t,right:s,bottom:r}=e,a=rm.default.get(rh);if(a){let{left:e,right:l,bottom:o}=JSON.parse(a);rm.default.set(rh,JSON.stringify({left:t??e,right:s??l,bottom:r??o}))}else rm.default.set(rh,JSON.stringify({left:t??270,right:s??400,bottom:r??400}))}var rg=e.i(1863039),rf=e.i(4553274),rj=e.i(285905),rv=e.i(2201214),ry=e.i(6186894),rb=e.i(8063970),rC=e.i(4496808),rw=(0,rv.generateCategoricalChart)({chartName:"BarChart",GraphicalChild:ry.Bar,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:rg.XAxis},{axisType:"yAxis",AxisComp:rb.YAxis}],formatAxisMap:rC.formatAxisMap}),r_=e.i(9170863),rS=e.i(2605724);let rN={error:"var(--ds-red-700)",success:"hsla(var(--ds-gray-500-value), 0.8)"},rk={error:"Error",success:"Success"};function rL(e){let{value:s,color:r,label:a}=e;return(0,t.jsxs)("div",{className:"flex flex-1 items-center gap-x-2",children:[(0,t.jsx)("div",{className:"size-1.5 rounded-full",style:{backgroundColor:r}}),(0,t.jsxs)("div",{className:"flex flex-1 justify-between gap-x-2",children:[(0,t.jsx)("span",{children:a})," ",(0,t.jsx)("span",{className:"font-medium tabular-nums",children:(0,sH.formatNumberCompact)(s)})]})]})}function rT(e){let{interval:s}=rs({skip:!0});return e.payload&&0!==e.payload.length&&e.active?(0,t.jsxs)("div",{className:"items-center rounded bg-background-100 px-0.5 py-1 text-xs shadow-tooltip",children:[(0,t.jsx)("div",{className:"flex flex-col gap-1 px-2 py-0.5",children:e.payload.map(e=>(0,t.jsx)(rL,{color:rN[e.dataKey],label:rk[e.dataKey],value:Number(e.value)},e.dataKey))}),(0,t.jsx)("div",{className:"px-1 pt-0.5 text-center text-gray-900",children:(0,eV.format)(new Date(e.payload[0].payload.name),`HH:mm${s%60==0?"":":ss"} ${s>300?"iii MMM dd":""}`)})]},`ts-${e.label}`):null}function rE(){let[e,r]=(0,s.useState)(""),[a,l]=(0,s.useState)(""),[o,n]=(0,s.useState)("dataMin"),[i,c]=(0,s.useState)("dataMax"),{onSelectionChange:u}=(()=>{let{interval:e}=rs({skip:!0}),{setState:t}=(0,D.useLogsQueryState)();return{onSelectionChange:(0,s.useCallback)(s=>{if(1===s.length){let[r]=s;t({startDate:new Date(r.name),endDate:(0,to.addSeconds)(new Date(r.name),e)});return}let r=s[0],a=s[s.length-1];"name"in r&&"name"in a&&t({startDate:new Date(r.name),endDate:new Date(a.name)})},[t,e])}})(),{startDate:p,endDate:m}=(0,D.useLogsApiParams)(),{data:h,interval:x,isLoading:g}=rs(),f=(0,s.useMemo)(()=>h&&h.data?h.data:(0,rS.default)(p.getTime(),m?.getTime(),1e3*x).map(e=>({name:new Date(e).toISOString(),error:0,success:0})),[h,x,p,m]),j=(0,s.useCallback)(e=>{r(e.activeLabel||"")},[]),v=(0,s.useCallback)(t=>{e&&l(t.activeLabel||"")},[e]),y=(0,s.useCallback)(t=>{let s=a||t.activeLabel||"";if(!e||!s){r(""),l("");return}let[o,i]=[new Date(e).getTime(),new Date(s).getTime()];o>i&&([o,i]=[i,o]),n(o),c(i),r(""),l("")},[e,a]);return(0,s.useEffect)(()=>{"number"==typeof o&&"number"==typeof i&&(u(f.slice(o,i+1)),n("dataMin"),c("dataMax"))},[o,i,f,u]),(0,t.jsx)(rj.ResponsiveContainer,{height:54,width:"100%",children:(0,t.jsxs)(rw,{className:(0,d.clsx)({"!cursor-crosshair":!g,"pointer-events-none":g,"opacity-50 transition-opacity duration-500":h&&g}),data:f,margin:{top:15,right:4,bottom:-10},onMouseDown:j,onMouseMove:v,onMouseUp:y,children:[!g&&(0,t.jsx)(rf.Tooltip,{allowEscapeViewBox:{y:!0},animationDuration:0,content:rT,cursor:{fill:"var(--ds-gray-300)"},position:{y:5}}),(0,t.jsx)(ry.Bar,{animationDuration:0,dataKey:"error",fill:rN.error,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),(0,t.jsx)(ry.Bar,{animationDuration:0,dataKey:"success",fill:rN.success,fillOpacity:1,isAnimationActive:!1,stackId:"grouped",width:2}),e&&a?(0,t.jsx)(r_.ReferenceArea,{strokeOpacity:.3,x1:e,x2:a}):null,(0,t.jsx)(rg.XAxis,{axisLine:{stroke:"var(--ds-gray-300)"},interval:"preserveStartEnd",minTickGap:300,style:{fontSize:"0.6rem"},tickFormatter:e=>{let t=f[e].name;return x<60?(0,eV.format)(new Date(t),"HH:mm:ss"):x<=600?(0,eV.format)(new Date(t),"HH:mm"):(0,eV.format)(new Date(t),"MMM dd")},tickLine:{stroke:"var(--ds-gray-300)"}})]})})}var rI=e.i(9435431);function rD(e){let{filters:s,setFilters:r,className:a,tooltipClassName:l}=e;return(0,t.jsx)(tu.Tooltip,{className:l,desktopOnly:!0,text:"Only show requests from this browser",children:(0,t.jsxs)(i.Button,{"aria-label":"Enable My Logs",className:(0,d.clsx)("*:overflow-visible",s.myLogs&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",a),"data-active":s.myLogs,onClick:()=>{let e=!s.myLogs;r({...s,myLogs:e,preset:null}),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"my-logs-toggle",action:e?"Enable My Logs":"Disable My Logs"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,t.jsx)(rI.User,{className:(0,d.clsx)(s.myLogs&&"translate-y-[-3px]","transition-transform duration-100")}),(0,t.jsx)("div",{className:(0,d.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",s.myLogs?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var rF=e.i(4418725),rM=e.i(2893464),rq=e.i(4652282),rA=e.i(5175803),rR=e.i(7207682);e.i(6591346);var rO=e.i(5037292),rP=e.i(3941020),rB=e.i(5006659),r$=e.i(9367986),rz=e.i(2955320);function rW(){let e=(0,rF.useTeamSlug)(),{projectSlug:s}=(0,ed.useProjectSlug)(),{logDrainsGroups:i}=(0,rB.useLogDrains)({teamSlug:e??null,projectSlug:s}),d=(0,rz.useLogDrainsResources)(),c=(0,m.useSearchParams)();if(!i.active.length||!e)return null;let u=new URLSearchParams(c?Array.from(c.entries()):[]);s&&u.set("project",s);let p=`/logs?${u.toString()}`;return(0,t.jsxs)(o.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(tu.Tooltip,{desktopOnly:!0,text:"View connected log-drains",children:(0,t.jsx)(l.MenuButton,{"aria-label":"LogDrains",shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(rM.Connection,{})})}),(0,t.jsxs)(a.Menu,{width:"250px",children:[i.active.map(a=>{var l,o;let i=(l=d,o=a.id,l?.find(e=>e.projectsMetadata.some(e=>(0,rP.getLogDrainProtocolSettings)(e)?.logDrainId===o))),c=(0,rO.getIntegrationDeepLink)({integrationConfigurationId:a.configurationId,teamIdOrSlug:e,productId:i?.product.id,externalResourceId:i?.externalResourceId});return i?(0,t.jsx)(n.MenuItem,{href:c,isLink:!0,prefetch:!1,suffix:(0,t.jsx)(eB.External,{color:"gray-900"}),target:"_blank",children:(0,t.jsxs)(r.Stack,{align:"center",className:"truncate",direction:"row",gap:2,justify:"space-between",children:[(0,t.jsx)(rA.Avatar,{hash:a.integrationIcon,size:24}),(0,t.jsx)("span",{className:"truncate",children:i.product.integration.name})]})},a.id):"integration"===a.createdFrom?(0,t.jsx)(n.MenuItem,{href:(0,rR.getConfigureUrl)({website:a.integrationWebsite??"",configurationUri:a.integrationConfigurationUri},a.configurationId,p),isLink:!0,prefetch:!1,rel:"noopener noreferrer",suffix:(0,t.jsx)(e$.SettingsGear,{color:"gray-900"}),target:"_blank",children:(0,t.jsxs)(r.Stack,{align:"center",className:"truncate",direction:"row",gap:2,children:[(0,t.jsx)(rA.Avatar,{hash:a.integrationIcon,mask:!0,size:24}),(0,t.jsx)("span",{className:"truncate",children:a.name})]})},a.id):(0,t.jsx)(n.MenuItem,{href:`/${e}/${s}/settings/log-drains`,isLink:!0,suffix:(0,t.jsx)(e$.SettingsGear,{color:"gray-900"}),children:(0,t.jsxs)(r.Stack,{align:"center",className:"truncate pl-1",direction:"row",gap:3,children:[(0,t.jsx)(tZ.Logs,{color:"gray-900",size:16}),(0,t.jsx)("span",{className:"truncate",children:a.name})]})},a.id)}),(0,t.jsx)(n.MenuItem,{className:"flex flex-row gap-1",children:(0,t.jsxs)(r.Stack,{align:"center",className:"pl-1",direction:"row",gap:1.5,children:[(0,t.jsx)(rq.Plus,{color:"gray-900",size:16}),(0,t.jsx)(r$.AddLogDrainButton,{className:"flex items-center",onClick:()=>{v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Configure Log Drain"})},projectSlug:s,teamSlug:e,variant:"unstyled"})]})})]})]})}var rH=e.i(9027033),rG=e.i(4382180);function rV(e){let{filters:s,setFilters:r,className:a,tooltipClassName:l}=e;return(0,t.jsx)(tu.Tooltip,{className:l,desktopOnly:!0,text:"Only show requests that have traces",children:(0,t.jsxs)(i.Button,{"aria-label":"Enable Has Traces",className:(0,d.clsx)("*:overflow-visible",s.hasTraces&&"geist-active !bg-gray-100 !ring-1 !ring-gray-1000",a),"data-active":s.hasTraces,onClick:()=>{let e=!s.hasTraces;r({...s,hasTraces:e,preset:null}),v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"has-traces-toggle",action:e?"Enable Has Traces":"Disable Has Traces"})},shape:"square",svgOnly:!0,type:"secondary",children:[(0,t.jsx)(rG.Lightning,{className:(0,d.clsx)(s.hasTraces&&"translate-y-[-3px]","transition-transform duration-100")}),(0,t.jsx)("div",{className:(0,d.clsx)("absolute bottom-1.5 left-1/2 size-[3px] -translate-x-1/2 rounded-full bg-gray-1000","transition-all duration-100",s.hasTraces?"translate-y-0 opacity-100":"translate-y-0.5 opacity-0")})]})})}var rU=e.i(8345260);function rQ(e){let{sidebarWidth:r,...a}=e,{project:l}=(0,m.useParams)()??{},o=(0,I.useProject)(l),{trackLogPageVisit:n}=z(),{team:i}=(0,h.useAccount)(),{data:{environments:d},isLoading:c}=(0,ro.useAllEnvironments)(o.data?.id??"");return(0,s.useEffect)(()=>{n(),v.analytics.track(y.AnalyticsEvent.LOGS_GROUPING_VIEW,{projectId:o.data?.id??"",action:"visit",teamId:i?.id??""})},[n,o.data?.id,i?.id]),(0,s.useEffect)(()=>{let e=document.documentElement.style.overscrollBehaviorY,t=document.body.style.overscrollBehaviorY;return document.documentElement.style.overscrollBehaviorY="none",document.body.style.overscrollBehaviorY="none",()=>{document.documentElement.style.overscrollBehaviorY=e,document.body.style.overscrollBehaviorY=t}},[]),(0,rn.default)(o.error),(0,t.jsx)(en.PageConfigProvider,{...a,children:(0,t.jsx)(sl.GroupLogsProvider,{children:(0,t.jsx)(rX,{allEnvironments:d,isLoadingEnvs:c,sidebarWidth:r})})})}function rX(e){let{isLoadingEnvs:m,allEnvironments:b,sidebarWidth:C}=e,{state:{selectedLogId:w},filters:_,setFilters:S,setState:N}=(0,D.useLogsQueryState)(),{team:k,isLoading:L}=(0,h.useAccount)(),T=(0,x.useIsMobile)(),{topOffset:E}=(0,en.usePageConfig)(),[I,F]=(0,s.useState)(!1),{getExport:M}=(0,rH.useGroupLogsExport)(),{data:q}=(0,e8.useSelectedLog)(),{can:A,isLoading:R}=(0,f.default)(),O=!k||A(j.Action.Read,j.Resource.Logs),P=R||L,[B,$]=(0,s.useState)("auto"),z="auto"===B?(q?.logs.length||0)>0:"opened"===B;(0,s.useEffect)(()=>{w||$("auto")},[w]),(0,s.useEffect)(()=>{z&&$(e=>"auto"===e?"opened":e)},[z]);let W=()=>{N({selectedLogId:void 0})},H=(0,s.useRef)(null),G=(0,s.useRef)(null),V=(0,s.useRef)(null),U=(0,s.useRef)(null),Q=(0,s.useRef)(null),X=(0,s.useRef)(null),Z=(0,s.useRef)(null),J=(0,s.useRef)(null),[K,Y]=(0,s.useState)(C.left),[ee,et]=(0,s.useState)(C.right),[es,er]=(0,s.useState)(C.bottom),[ea,el]=(0,s.useState)(!1),eo=e=>{Y(e),rx({left:e})},ei=e=>{et(e),rx({right:e})},ed=`${K}px calc(100% - ${K}px)`,ec=function(e){let t=(0,s.useRef)(0);return s=>{let r=s.currentTarget.scrollLeft;r!==t.current&&(t.current=r,e(s))}}(e=>{let t=null!==Z.current;Z.current=e.currentTarget.scrollLeft,t||requestAnimationFrame(()=>{Q.current&&null!==Z.current&&(Q.current.scrollLeft=Z.current),Z.current=null})});(0,s.useEffect)(()=>{function e(){if(null===U.current)return;let e=Math.max(E,U.current.getBoundingClientRect().top),t=e+147;U.current.style.height=`calc(100vh - ${e}px)`,G.current&&(G.current.style.top=`${t}px`),V.current&&(V.current.style.height=`calc(100vh - ${t}px)`)}return e(),window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[E,w]);let eu=function(e,t){let[r,a]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let s=(0,g.default)(()=>{if(!t.current||!e.current)return;let{top:s}=t.current.getBoundingClientRect(),{bottom:r}=e.current.getBoundingClientRect();s<=r?a(!0):a(!1)},200);return window.addEventListener("scroll",s),()=>{window.removeEventListener("scroll",s)}},[e,t]),r}(Q,X),[ep,em]=(0,s.useState)(null),eh=`max(min(${ee}px, 50vw), 350px)`;return(0,t.jsxs)(rU.ProjectLogsCriticalContentConditionalMarker,{enabled:!m,children:[(0,t.jsxs)("div",{className:"tailwind-preflight",style:{display:"flex",flexFlow:"column"},children:[O||P||!k?null:(0,t.jsx)(rl.default,{action:"view Runtime Logs",actionButton:{text:"Go to Dashboard",link:`/${k.slug}`},dataTestId:(0,c.tid)("group-logs","no-permissions-card"),role:k.membership?.role||"",teamName:k.name}),O||R?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{style:{flexGrow:1},children:(0,t.jsxs)("div",{className:"block h-full md:grid",style:{gridTemplateColumns:ed},children:[(0,t.jsxs)("div",{className:"geist-hide-on-mobile",ref:H,style:{borderRight:"1px solid var(--accents-2)",position:"relative",zIndex:1},children:[(0,t.jsx)(sY.DraggableBorder,{element:H,onReset:()=>{eo(270)},onWidthChange:e=>{let t=Math.min(e,window.innerWidth/3);eo(t=t<230?0:t)},position:"right"}),(0,t.jsx)("div",{ref:U,style:{position:"sticky",top:E,height:"100%",background:"var(--geist-background)",contain:"layout"},children:(0,t.jsx)("div",{style:{overflowY:"auto",height:"100%",padding:"var(--geist-gap-half)"},tabIndex:-1,children:(0,t.jsx)(ek,{allEnvironments:b,isLoadingEnvs:m})})})]}),(0,t.jsxs)("div",{style:{display:"flex",flexFlow:"column",position:"relative",height:"100%",zIndex:2},children:[(0,t.jsxs)(r.Stack,{className:rp.default.logHeader,style:{background:"var(--geist-background)",position:"sticky",top:E,zIndex:3},children:[(0,t.jsxs)("div",{style:{padding:"var(--geist-gap-half) var(--geist-gap-half) 0 var(--geist-gap-half)"},children:[(0,t.jsxs)(r.Stack,{direction:{sm:"column",md:"column",lg:"row"},gap:2,children:[(0,t.jsxs)(r.Stack,{className:"grow",direction:"row",gap:2,children:[(0,t.jsx)(i.Button,{"aria-label":"filter sidebar",className:"hidden shrink-0 lg:block",onClick:()=>0===K?eo(270):eo(0),shape:"square",svgOnly:!0,type:"secondary",children:(0,t.jsx)(p.Filter,{})}),(0,t.jsx)(rD,{filters:_,setFilters:S,tooltipClassName:"hidden lg:block shrink-0"}),(0,t.jsx)(rV,{filters:_,setFilters:S,tooltipClassName:"hidden lg:block shrink-0"}),(0,t.jsx)(s.Suspense,{fallback:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(rc,{}),(0,t.jsx)(sZ,{})]}),children:T?(0,t.jsx)(rd,{}):(0,t.jsx)(sX,{})})]}),(0,t.jsxs)(r.Stack,{direction:"row",gap:2,children:[(0,t.jsx)(eE,{onClick:()=>F(!0)}),(0,t.jsx)(rD,{className:"shrink-0",filters:_,setFilters:S,tooltipClassName:"lg:hidden"}),(0,t.jsx)(rV,{className:"shrink-0",filters:_,setFilters:S,tooltipClassName:"lg:hidden"}),(0,t.jsx)("div",{className:"flex-1 lg:hidden"}),(0,t.jsx)(ra,{showSkeleton:R}),(0,t.jsx)(rW,{}),(0,t.jsxs)(o.MenuContainer,{position:"bottom-end",children:[(0,t.jsx)(l.MenuButton,{"aria-label":"Query Actions",shape:"square",size:"small",style:{height:"40px",width:"40px"},svgOnly:!0,type:"secondary",children:(0,t.jsx)(u.MoreVertical,{})}),(0,t.jsxs)(a.Menu,{width:"160px",children:[(0,t.jsx)(n.MenuItem,{onClick:()=>{v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as CSV"}),em("csv")},children:"Export to CSV"}),(0,t.jsx)(n.MenuItem,{onClick:()=>{v.analytics.track(y.AnalyticsEvent.LOGS_CONTEXT_ACTION_CLICKED,{field:"global-dropdown",action:"Export Logs as JSON"}),em("json")},children:"Export to JSON"})]})]})]})]}),(0,t.jsx)(rE,{}),(0,t.jsx)(t1,{ref:Q})]}),(0,t.jsx)("div",{className:(0,d.clsx)(rp.default.logGradient,{[rp.default.show]:eu})})]}),(0,t.jsx)(s4,{onScroll:ec,ref:X,showSkeleton:R}),(0,t.jsxs)("div",{className:"fixed bottom-0 hidden transform-gpu border-t border-gray-300 bg-background-100 md:block",ref:J,style:{left:K,right:eh,height:z?400===es?"min(400px, 35vh)":`max(min(70vh, ${es}px), 240px)`:49,boxShadow:"var(--ds-shadow-large)",transition:ea?"none":"height 0.2s",display:w?"block":"none",zIndex:3},children:[z?(0,t.jsx)(sY.DraggableBorder,{element:J,onStartDrag:()=>{el(!0)},onStopDrag:()=>{el(!1)},onWidthChange:e=>{er(e),rx({bottom:e})},position:"top"}):null,(0,t.jsx)(sm,{collapsed:!z,onToggleCollapse:()=>{$(z?"closed":"opened")}})]})]}),(0,t.jsxs)("div",{className:(0,d.clsx)("fixed bottom-0 right-0 hidden h-full translate-x-0 translate-y-0 transform-gpu overflow-y-auto border-t border-t-gray-400 bg-background-100 md:block",{"z-[2]":!!w,visible:!!w,invisible:!w}),ref:G,style:{width:eh,boxShadow:"var(--ds-shadow-large)",top:247},children:[(0,t.jsx)(sY.DraggableBorder,{element:G,onReset:()=>{ei(400)},onWidthChange:e=>{ei(Math.min(Math.max(e,400),window.innerWidth/2))},position:"left"}),(0,t.jsx)("div",{className:"hidden overflow-y-auto md:flex",ref:V,children:(0,t.jsx)(sn.TraceViewerPanel,{className:"z-0 border-none",children:(0,t.jsx)(s_,{onClose:W,selectedLogId:w})})})]})]})}),(0,t.jsx)(eL,{active:I,allEnvironments:b,isLoadingEnvs:m,onDismiss:()=>F(!1)}),(0,t.jsx)(sw,{onClose:W,selectedLogId:w})]}):null]}),ep?(0,t.jsx)(ru.GroupExportModal,{format:ep,getExport:M,onClose:()=>{em(null)}}):null]})}}}]);

//# sourceMappingURL=186b3b6661d6af5b.js.map
//# debugId=a1f2774a-eced-5603-a3de-c0f8ba275d81
